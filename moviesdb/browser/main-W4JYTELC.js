import{A as Ie,B as Dn,C as Xt,D as Lm,E as _x,F as ec,G as qe,H as jn,I as Ud,J as Vm,K as li,L as Or,M as Vs,N as $d,O as vx,P as Ti,Q as nn,a as ie,b as ea,c as Nd,d as lx,e as cx,f as tn,g as Od,h as Jl,i as Nm,j as ux,k as Ui,l as Om,m as Fd,n as dx,o as hx,p as Ld,q as zt,r as px,s as fx,t as ai,u as Nr,v as Vd,w as Zl,x as Fm,y as mx,z as gx}from"./chunk-Y6TMCVK2.js";import{a as ix,b as kn,c as rx,d as sx,e as ox,f as ax,g as te,h as Mn,i as _t,j as fn,k as zd,l as wx,m as jd,n as ci,o as Bd,p as qd,q as Gd,r as Hd,s as Wd,t as Kd,u as Qd,v as Nn,w as ta}from"./chunk-4N7KZWB5.js";import{f as yx,g as tc,h as Yd,m as bx,n as Xd,p as xx,u as Sx}from"./chunk-M4EQAIRH.js";import{$ as tt,$a as Qo,$b as Rd,A as jo,Aa as S1,Ab as Ue,Ac as Zo,B as jl,Ba as Cm,Bb as re,Bc as Ls,C as wm,Ca as E1,Cb as L,Cc as tx,D as Bo,Da as Nt,Db as zn,Dc as nx,E as d1,Ea as Wl,Eb as Pd,F as gd,Fa as Im,Fb as Ql,G as _d,Ga as T1,Gb as Yl,H as Li,Hb as Yo,I as ym,Ia as Ho,Ib as P,J as h1,Ja as Wo,Jb as ee,K as vd,Ka as C1,Kb as we,L as lr,La as I1,Lb as Xl,M as p1,Ma as A1,Mb as j1,N as bm,Na as P1,Nb as ri,O as f1,Oa as R1,Ob as si,P as qo,Pa as k1,Pb as oi,Q as Yt,Qa as D1,R as xm,Ra as Fs,Rb as fe,S as m1,Sa as ge,Sb as Ei,T as Mt,Ta as xd,Tb as $t,U as g1,Ua as M1,Ub as Ve,V as _1,Va as Ko,Vb as B1,W as Et,Wa as Kl,Wb as _e,Xa as w,Xb as Ae,Y as Ee,Ya as Si,Yb as lt,Z as bi,Za as Sd,Zb as q1,_ as v1,_a as Ed,_b as Xo,a as r1,aa as Sm,ab as N1,ac as G1,b as s1,ba as ae,bb as Td,bc as kd,c as kr,ca as B,cb as ht,cc as H1,d as mm,da as wd,db as O1,dc as W1,e as gm,ea as Bl,eb as Cd,ec as Am,f as Fi,fa as yd,fb as F1,g as Zn,ga as pe,gb as ti,gc as Pm,h as $o,ha as xi,hc as Rm,i as o1,ia as ql,ib as L1,ic as km,j as Dr,ja as en,jb as V1,jc as K1,k as Ns,ka as Go,kb as U1,kc as Q1,l as zo,la as w1,lb as $1,lc as Dd,m as Qt,ma as y1,mb as j,mc as Dm,n as Te,na as Gl,nb as Id,nc as Y1,o as $l,oa as Os,ob as Ad,oc as X1,p as a1,pa as Hl,pb as z1,pc as bn,q as l1,qa as ke,qb as I,qc as Mm,r as Ce,ra as De,rc as Md,s as _m,sa as ei,sb as je,sc as J1,t as Rn,ta as cr,tb as ln,tc as Mr,u as c1,ua as Em,ub as cn,uc as wt,v as vm,va as b1,vb as g,vc as Re,wa as x1,wb as _,wc as Jo,x as u1,xa as Tm,xb as U,xc as At,y as zl,ya as bd,yb as ni,yc as Z1,z as $n,za as Vi,zb as ii,zc as ex}from"./chunk-6AOZM4GF.js";import"./chunk-XK3LJZ6K.js";import{a as he,b as et,e as fm,f as q}from"./chunk-FO65GQC2.js";var zm=class extends X1{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jm=class n extends zm{static makeCurrent(){Y1(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=lD();return t==null?null:cD(t)}resetBaseElement(){nc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return J1(document.cookie,e)}},nc=null;function lD(){return nc=nc||document.querySelector("base"),nc?nc.getAttribute("href"):null}function cD(n){return new URL(n,document.baseURI).pathname}var uD=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),Bm=new tt(""),Cx=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Et(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(ae(Bm),ae(ht))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),Jd=class{constructor(e){this._doc=e}},Um="ng-app-id",Ix=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ls(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Um}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Um),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Um,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(ae(bn),ae(Cm),ae(Im,8),ae(Nt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),$m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hm=/%COMP%/g,Ax="%COMP%",dD=`_nghost-${Ax}`,hD=`_ngcontent-${Ax}`,pD=!0,fD=new tt("",{providedIn:"root",factory:()=>pD});function mD(n){return hD.replace(Hm,n)}function gD(n){return dD.replace(Hm,n)}function Px(n,e){return e.map(t=>t.replace(Hm,n))}var na=(()=>{let e=class e{constructor(i,r,s,o,a,l,c,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Ls(l),this.defaultRenderer=new ic(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Bl.ShadowDom&&(r=et(he({},r),{encapsulation:Bl.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Zd?s.applyToHost(i):s instanceof rc&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Bl.Emulated:o=new Zd(c,d,r,this.appId,h,a,l,p);break;case Bl.ShadowDom:return new qm(c,d,i,r,a,l,this.nonce,p);default:o=new rc(c,d,r,h,a,l,p);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(ae(Cx),ae(Ix),ae(Cm),ae(fD),ae(bn),ae(Nt),ae(ht),ae(Im))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),ic=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($m[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ex(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Ex(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Et(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=$m[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=$m[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Kl.DashCase|Kl.Important)?e.style.setProperty(t,i,r&Kl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Kl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Dm().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Ex(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qm=class extends ic{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Px(r.id,r.styles);for(let d of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rc=class extends ic{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?Px(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Zd=class extends rc{constructor(e,t,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=mD(c),this.hostAttr=gD(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},_D=(()=>{let e=class e extends Jd{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(ae(bn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),Tx=["alt","control","meta","shift"],vD={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wD={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},yD=(()=>{let e=class e extends Jd{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dm().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),Tx.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let s=vD[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Tx.forEach(a=>{if(a!==s){let l=wD[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(ae(bn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})();function Rx(n,e){return K1(he({rootComponent:n},bD(e)))}function bD(n){return{appProviders:[...CD,...n?.providers??[]],platformProviders:TD}}function xD(){jm.makeCurrent()}function SD(){return new Tm}function ED(){return S1(document),document}var TD=[{provide:Nt,useValue:ex},{provide:E1,useValue:xD,multi:!0},{provide:bn,useFactory:ED,deps:[]}];var CD=[{provide:y1,useValue:"root"},{provide:Tm,useFactory:SD,deps:[]},{provide:Bm,useClass:_D,multi:!0,deps:[bn,ht,Nt]},{provide:Bm,useClass:yD,multi:!0,deps:[bn]},na,Ix,Cx,{provide:Qo,useExisting:na},{provide:nx,useClass:uD,deps:[]},[]];var mn=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(ae(bn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Wm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=ae(ID),s},providedIn:"root"});let n=e;return n})(),ID=(()=>{let e=class e extends Wm{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case Fs.NONE:return r;case Fs.HTML:return Wo(r,"HTML")?Ho(r):D1(this._doc,String(r)).toString();case Fs.STYLE:return Wo(r,"Style")?Ho(r):r;case Fs.SCRIPT:if(Wo(r,"Script"))return Ho(r);throw new Et(5200,!1);case Fs.URL:return Wo(r,"URL")?Ho(r):k1(String(r));case Fs.RESOURCE_URL:if(Wo(r,"ResourceURL"))return Ho(r);throw new Et(5201,!1);default:throw new Et(5202,!1)}}bypassSecurityTrustHtml(i){return C1(i)}bypassSecurityTrustStyle(i){return I1(i)}bypassSecurityTrustScript(i){return A1(i)}bypassSecurityTrustUrl(i){return P1(i)}bypassSecurityTrustResourceUrl(i){return R1(i)}};e.\u0275fac=function(r){return new(r||e)(ae(bn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Gm=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n}(Gm||{});function kx(...n){let e=[],t=new Set,i=t.has(Gm.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of n)t.add(s),r.length&&e.push(r);return Go([[],Q1(),t.has(Gm.NoHttpTransferCache)||i?[]:ax({}),e])}var Fe="primary",vc=Symbol("RouteTitle"),Jm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function aa(n){return new Jm(n)}function AD(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function PD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$i(n[t],e[t]))return!1;return!0}function $i(n,e){let t=n?Zm(n):void 0,i=e?Zm(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Vx(n[r],e[r]))return!1;return!0}function Zm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Vx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Ux(n){return n.length>0?n[n.length-1]:null}function Ur(n){return a1(n)?n:H1(n)?Qt(Promise.resolve(n)):Te(n)}var RD={exact:zx,subset:jx},$x={exact:kD,subset:DD,ignored:()=>!0};function Mx(n,e,t){return RD[t.paths](n.root,e.root,t.matrixParams)&&$x[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function kD(n,e){return $i(n,e)}function zx(n,e,t){if(!$s(n.segments,e.segments)||!nh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!zx(n.children[i],e.children[i],t))return!1;return!0}function DD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Vx(n[t],e[t]))}function jx(n,e,t){return Bx(n,e,e.segments,t)}function Bx(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!$s(r,t)||e.hasChildren()||!nh(r,t,i))}else if(n.segments.length===t.length){if(!$s(n.segments,t)||!nh(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!jx(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!$s(n.segments,r)||!nh(n.segments,r,i)||!n.children[Fe]?!1:Bx(n.children[Fe],e,s,i)}}function nh(n,e,t){return e.every((i,r)=>$x[t](n[r].parameters,i.parameters))}var Fr=class{constructor(e=new nt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=aa(this.queryParams),this._queryParamMap}toString(){return OD.serialize(this)}},nt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ih(this)}},Us=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=aa(this.parameters),this._parameterMap}toString(){return Gx(this)}};function MD(n,e){return $s(n,e)&&n.every((t,i)=>$i(t.parameters,e[i].parameters))}function $s(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function ND(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Fe&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Fe&&(t=t.concat(e(r,i)))}),t}var gh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:()=>new sh,providedIn:"root"});let n=e;return n})(),sh=class{parse(e){let t=new tg(e);return new Fr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${sc(e.root,!0)}`,i=VD(e.queryParams),r=typeof e.fragment=="string"?`#${FD(e.fragment)}`:"";return`${t}${i}${r}`}},OD=new sh;function ih(n){return n.segments.map(e=>Gx(e)).join("/")}function sc(n,e){if(!n.hasChildren())return ih(n);if(e){let t=n.children[Fe]?sc(n.children[Fe],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Fe&&i.push(`${r}:${sc(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=ND(n,(i,r)=>r===Fe?[sc(n.children[Fe],!1)]:[`${r}:${sc(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Fe]!=null?`${ih(n)}/${t[0]}`:`${ih(n)}/(${t.join("//")})`}}function qx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eh(n){return qx(n).replace(/%3B/gi,";")}function FD(n){return encodeURI(n)}function eg(n){return qx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rh(n){return decodeURIComponent(n)}function Nx(n){return rh(n.replace(/\+/g,"%20"))}function Gx(n){return`${eg(n.path)}${LD(n.parameters)}`}function LD(n){return Object.entries(n).map(([e,t])=>`;${eg(e)}=${eg(t)}`).join("")}function VD(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${eh(t)}=${eh(r)}`).join("&"):`${eh(t)}=${eh(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var UD=/^[^\/()?;#]+/;function Km(n){let e=n.match(UD);return e?e[0]:""}var $D=/^[^\/()?;=#]+/;function zD(n){let e=n.match($D);return e?e[0]:""}var jD=/^[^=?&#]+/;function BD(n){let e=n.match(jD);return e?e[0]:""}var qD=/^[^&#]+/;function GD(n){let e=n.match(qD);return e?e[0]:""}var tg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Fe]=new nt(e,t)),i}parseSegment(){let e=Km(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Et(4009,!1);return this.capture(e),new Us(rh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=zD(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Km(this.remaining);r&&(i=r,this.capture(i))}e[rh(t)]=rh(i)}parseQueryParam(e){let t=BD(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=GD(this.remaining);o&&(i=o,this.capture(i))}let r=Nx(t),s=Nx(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Km(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Et(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Fe]:new nt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Et(4011,!1)}};function Hx(n){return n.segments.length>0?new nt([],{[Fe]:n}):n}function Wx(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=Wx(r);if(i===Fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new nt(n.segments,e);return HD(t)}function HD(n){if(n.numberOfChildren===1&&n.children[Fe]){let e=n.children[Fe];return new nt(n.segments.concat(e.segments),e.children)}return n}function la(n){return n instanceof Fr}function WD(n,e,t=null,i=null){let r=Kx(n);return Qx(r,e,t,i)}function Kx(n){let e;function t(s){let o={};for(let l of s.children){let c=t(l);o[l.outlet]=c}let a=new nt(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=Hx(i);return e??r}function Qx(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Qm(r,r,r,t,i);let s=KD(e);if(s.toRoot())return Qm(r,r,new nt([],{}),t,i);let o=QD(s,r,n),a=o.processChildren?lc(o.segmentGroup,o.index,s.commands):Xx(o.segmentGroup,o.index,s.commands);return Qm(r,o.segmentGroup,a,t,i)}function oh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function dc(n){return typeof n=="object"&&n!=null&&n.outlets}function Qm(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let o;n===e?o=t:o=Yx(n,e,t);let a=Hx(Wx(o));return new Fr(a,s,r)}function Yx(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=Yx(s,e,t)}),new nt(n.segments,i)}var ah=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&oh(i[0]))throw new Et(4003,!1);let r=i.find(dc);if(r&&r!==Ux(i))throw new Et(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function KD(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ah(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new ah(t,e,i)}var sa=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function QD(n,e,t){if(n.isAbsolute)return new sa(e,!0,0);if(!t)return new sa(e,!1,NaN);if(t.parent===null)return new sa(t,!0,0);let i=oh(n.commands[0])?0:1,r=t.segments.length-1+i;return YD(t,r,n.numberOfDoubleDots)}function YD(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Et(4005,!1);r=i.segments.length}return new sa(i,!1,r-s)}function XD(n){return dc(n[0])?n[0].outlets:{[Fe]:n}}function Xx(n,e,t){if(n??=new nt([],{}),n.segments.length===0&&n.hasChildren())return lc(n,e,t);let i=JD(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new nt(n.segments.slice(0,i.pathIndex),{});return s.children[Fe]=new nt(n.segments.slice(i.pathIndex),n.children),lc(s,0,r)}else return i.match&&r.length===0?new nt(n.segments,{}):i.match&&!n.hasChildren()?ng(n,e,t):i.match?lc(n,0,r):ng(n,e,t)}function lc(n,e,t){if(t.length===0)return new nt(n.segments,{});{let i=XD(t),r={};if(Object.keys(i).some(s=>s!==Fe)&&n.children[Fe]&&n.numberOfChildren===1&&n.children[Fe].segments.length===0){let s=lc(n.children[Fe],e,t);return new nt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Xx(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new nt(n.segments,r)}}function JD(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(dc(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Fx(l,c,o))return s;i+=2}else{if(!Fx(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function ng(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(dc(s)){let l=ZD(s.outlets);return new nt(i,l)}if(r===0&&oh(t[0])){let l=n.segments[e];i.push(new Us(l.path,Ox(t[0]))),r++;continue}let o=dc(s)?s.outlets[Fe]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&oh(a)?(i.push(new Us(o,Ox(a))),r+=2):(i.push(new Us(o,{})),r++)}return new nt(i,{})}function ZD(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=ng(new nt([],{}),0,i))}),e}function Ox(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Fx(n,e,t){return n==t.path&&$i(e,t.parameters)}var cc="imperative",rn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(rn||{}),ui=class{constructor(e,t){this.id=e,this.url=t}},ca=class extends ui{constructor(e,t,i="imperative",r=null){super(e,t),this.type=rn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ur=class extends ui{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=rn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qn||{}),lh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(lh||{}),Lr=class extends ui{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=rn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vr=class extends ui{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=rn.NavigationSkipped}},hc=class extends ui{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=rn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ch=class extends ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=rn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ig=class extends ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=rn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rg=class extends ui{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=rn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sg=class extends ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=rn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},og=class extends ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=rn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ag=class{constructor(e){this.route=e,this.type=rn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lg=class{constructor(e){this.route=e,this.type=rn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cg=class{constructor(e){this.snapshot=e,this.type=rn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ug=class{constructor(e){this.snapshot=e,this.type=rn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dg=class{constructor(e){this.snapshot=e,this.type=rn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hg=class{constructor(e){this.snapshot=e,this.type=rn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uh=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=rn.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},pc=class{},fc=class{constructor(e){this.url=e}};var pg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new _h,this.attachRef=null}},_h=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new pg,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),dh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=fg(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=fg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return mg(e,this._root).map(t=>t.value)}};function fg(n,e){if(n===e.value)return e;for(let t of e.children){let i=fg(n,t);if(i)return i}return null}function mg(n,e){if(n===e.value)return[e];for(let t of e.children){let i=mg(n,t);if(i.length)return i.unshift(e),i}return[]}var Bn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ra(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var hh=class extends dh{constructor(e,t){super(e),this.snapshot=t,Tg(this,e)}toString(){return this.snapshot.toString()}};function Jx(n){let e=e2(n),t=new Zn([new Us("",{})]),i=new Zn({}),r=new Zn({}),s=new Zn({}),o=new Zn(""),a=new it(t,i,s,o,r,Fe,n,e.root);return a.snapshot=e.root,new hh(new Bn(a,[]),e)}function e2(n){let e={},t={},i={},r="",s=new mc([],e,i,r,t,Fe,n,null,{});return new ph("",new Bn(s,[]))}var it=class{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ce(c=>c[vc]))??Te(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>aa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>aa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Eg(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:he(he({},e.params),n.params),data:he(he({},e.data),n.data),resolve:he(he(he(he({},n.data),e.data),r?.data),n._resolvedData)}:i={params:he({},n.params),data:he({},n.data),resolve:he(he({},n.data),n._resolvedData??{})},r&&eS(r)&&(i.resolve[vc]=r.title),i}var mc=class{get title(){return this.data?.[vc]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=aa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=aa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ph=class extends dh{constructor(e,t){super(t),this.url=e,Tg(this,t)}toString(){return Zx(this._root)}};function Tg(n,e){e.value._routerState=n,e.children.forEach(t=>Tg(n,t))}function Zx(n){let e=n.children.length>0?` { ${n.children.map(Zx).join(", ")} } `:"";return`${n.value}${e}`}function Ym(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$i(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$i(e.params,t.params)||n.paramsSubject.next(t.params),PD(e.url,t.url)||n.urlSubject.next(t.url),$i(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function gg(n,e){let t=$i(n.params,e.params)&&MD(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||gg(n.parent,e.parent))}function eS(n){return typeof n.title=="string"||n.title===null}var Ci=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Fe,this.activateEvents=new Vi,this.deactivateEvents=new Vi,this.attachEvents=new Vi,this.detachEvents=new Vi,this.parentContexts=B(_h),this.location=B(F1),this.changeDetector=B(km),this.environmentInjector=B(Gl),this.inputBinder=B(Cg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Et(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Et(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Et(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Et(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new _g(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ql({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hl]});let n=e;return n})(),_g=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===it?this.route:e===_h?this.childContexts:this.parent.get(e,t)}},Cg=new tt("");function t2(n,e,t){let i=gc(n,e._root,t?t._root:void 0);return new hh(i,e)}function gc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=n2(n,e,t);return new Bn(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gc(n,a)),o}}let i=i2(e.value),r=e.children.map(s=>gc(n,s));return new Bn(i,r)}}function n2(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return gc(n,i,r);return gc(n,i)})}function i2(n){return new it(new Zn(n.url),new Zn(n.params),new Zn(n.queryParams),new Zn(n.fragment),new Zn(n.data),n.outlet,n.component,n)}var tS="ngNavigationCancelingError";function nS(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=la(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=iS(!1,qn.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function iS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[tS]=!0,t.cancellationCode=e,t}function r2(n){return rS(n)&&la(n.url)}function rS(n){return!!n&&n[tS]}var s2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["ng-component"]],standalone:!0,features:[fe],decls:1,vars:0,template:function(r,s){r&1&&U(0,"router-outlet")},dependencies:[Ci],encapsulation:2});let n=e;return n})();function o2(n,e){return n.providers&&!n._injector&&(n._injector=U1(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ig(n){let e=n.children&&n.children.map(Ig),t=e?et(he({},n),{children:e}):he({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Fe&&(t.component=s2),t}function zi(n){return n.outlet||Fe}function a2(n,e){let t=n.filter(i=>zi(i)===e);return t.push(...n.filter(i=>zi(i)!==e)),t}function wc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var l2=(n,e,t,i)=>Ce(r=>(new vg(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),vg=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Ym(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ra(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ra(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ra(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ra(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new hg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ug(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Ym(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ym(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=wc(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},fh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oa=class{constructor(e,t){this.component=e,this.route=t}};function c2(n,e,t){let i=n._root,r=e?e._root:null;return oc(i,r,t,[i.value])}function u2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function da(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!v1(n)?n:e.get(n):i}function oc(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ra(e);return n.children.forEach(o=>{d2(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>uc(a,t.getContext(o),r)),r}function d2(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=h2(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new fh(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?oc(n,e,a?a.children:null,i,r):oc(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new oa(a.outlet.component,o))}else o&&uc(e,a,r),r.canActivateChecks.push(new fh(i)),s.component?oc(n,null,a?a.children:null,i,r):oc(n,null,t,i,r);return r}function h2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$s(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$s(n.url,e.url)||!$i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gg(n,e)||!$i(n.queryParams,e.queryParams);case"paramsChange":default:return!gg(n,e)}}function uc(n,e,t){let i=ra(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?uc(o,e.children.getContext(s),t):uc(o,null,t):uc(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new oa(e.outlet.component,r)):t.canDeactivateChecks.push(new oa(null,r)):t.canDeactivateChecks.push(new oa(null,r))}function yc(n){return typeof n=="function"}function p2(n){return typeof n=="boolean"}function f2(n){return n&&yc(n.canLoad)}function m2(n){return n&&yc(n.canActivate)}function g2(n){return n&&yc(n.canActivateChild)}function _2(n){return n&&yc(n.canDeactivate)}function v2(n){return n&&yc(n.canMatch)}function sS(n){return n instanceof l1||n?.name==="EmptyError"}var th=Symbol("INITIAL_VALUE");function ua(){return Yt(n=>_m(n.map(e=>e.pipe(Bo(1),qo(th)))).pipe(Ce(e=>{for(let t of e)if(t!==!0){if(t===th)return th;if(t===!1||t instanceof Fr)return t}return!0}),$n(e=>e!==th),Bo(1)))}function w2(n,e){return Rn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Te(et(he({},t),{guardsResult:!0})):y2(o,i,r,n).pipe(Rn(a=>a&&p2(a)?b2(i,s,n,e):Te(a)),Ce(a=>et(he({},t),{guardsResult:a})))})}function y2(n,e,t,i){return Qt(n).pipe(Rn(r=>C2(r.component,r.route,t,e,i)),Li(r=>r!==!0,!0))}function b2(n,e,t,i){return Qt(e).pipe(jl(r=>c1(S2(r.route.parent,i),x2(r.route,i),T2(n,r.path,t),E2(n,r.route,t))),Li(r=>r!==!0,!0))}function x2(n,e){return n!==null&&e&&e(new dg(n)),Te(!0)}function S2(n,e){return n!==null&&e&&e(new cg(n)),Te(!0)}function E2(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Te(!0);let r=i.map(s=>vm(()=>{let o=wc(e)??t,a=da(s,o),l=m2(a)?a.canActivate(e,n):Os(o,()=>a(e,n));return Ur(l).pipe(Li())}));return Te(r).pipe(ua())}function T2(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>u2(o)).filter(o=>o!==null).map(o=>vm(()=>{let a=o.guards.map(l=>{let c=wc(o.node)??t,d=da(l,c),h=g2(d)?d.canActivateChild(i,n):Os(c,()=>d(i,n));return Ur(h).pipe(Li())});return Te(a).pipe(ua())}));return Te(s).pipe(ua())}function C2(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Te(!0);let o=s.map(a=>{let l=wc(e)??r,c=da(a,l),d=_2(c)?c.canDeactivate(n,e,t,i):Os(l,()=>c(n,e,t,i));return Ur(d).pipe(Li())});return Te(o).pipe(ua())}function I2(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Te(!0);let s=r.map(o=>{let a=da(o,n),l=f2(a)?a.canLoad(e,t):Os(n,()=>a(e,t));return Ur(l)});return Te(s).pipe(ua(),oS(i))}function oS(n){return s1(Mt(e=>{if(la(e))throw nS(n,e)}),Ce(e=>e===!0))}function A2(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Te(!0);let s=r.map(o=>{let a=da(o,n),l=v2(a)?a.canMatch(e,t):Os(n,()=>a(e,t));return Ur(l)});return Te(s).pipe(ua(),oS(i))}var _c=class{constructor(e){this.segmentGroup=e||null}},mh=class extends Error{constructor(e){super(),this.urlTree=e}};function ia(n){return $l(new _c(n))}function P2(n){return $l(new Et(4e3,!1))}function R2(n){return $l(iS(!1,qn.GuardRejected))}var wg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Te(i);if(r.numberOfChildren>1||!r.children[Fe])return P2(e.redirectTo);r=r.children[Fe]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new mh(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Fr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new nt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Et(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},yg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function k2(n,e,t,i,r){let s=Ag(n,e,t);return s.matched?(i=o2(e,i),A2(i,e,t,r).pipe(Ce(o=>o===!0?s:he({},yg)))):Te(s)}function Ag(n,e,t){if(e.path==="**")return D2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?he({},yg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||AD)(t,n,e);if(!r)return he({},yg);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?he(he({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function D2(n){return{matched:!0,parameters:n.length>0?Ux(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Lx(n,e,t,i){return t.length>0&&O2(n,t,i)?{segmentGroup:new nt(e,N2(i,new nt(t,n.children))),slicedSegments:[]}:t.length===0&&F2(n,t,i)?{segmentGroup:new nt(n.segments,M2(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new nt(n.segments,n.children),slicedSegments:t}}function M2(n,e,t,i){let r={};for(let s of t)if(vh(n,e,s)&&!i[zi(s)]){let o=new nt([],{});r[zi(s)]=o}return he(he({},i),r)}function N2(n,e){let t={};t[Fe]=e;for(let i of n)if(i.path===""&&zi(i)!==Fe){let r=new nt([],{});t[zi(i)]=r}return t}function O2(n,e,t){return t.some(i=>vh(n,e,i)&&zi(i)!==Fe)}function F2(n,e,t){return t.some(i=>vh(n,e,i))}function vh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function L2(n,e,t,i){return zi(n)!==i&&(i===Fe||!vh(e,t,n))?!1:Ag(e,n,t).matched}function V2(n,e,t){return e.length===0&&!n.children[t]}var bg=class{};function U2(n,e,t,i,r,s,o="emptyOnly"){return new xg(n,e,t,i,r,o,s).recognize()}var $2=31,xg=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new wg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Et(4002,`'${e.segmentGroup}'`)}recognize(){let e=Lx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(t=>{let i=new mc([],Object.freeze({}),Object.freeze(he({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fe,this.rootComponentType,null,{}),r=new Bn(i,t),s=new ph("",r),o=WD(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Fe).pipe(jo(i=>{if(i instanceof mh)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof _c?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=Eg(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(Ce(s=>s instanceof Bn?[s]:[]))}processChildren(e,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Qt(r).pipe(jl(s=>{let o=i.children[s],a=a2(t,s);return this.processSegmentGroup(e,a,o,s)}),lr((s,o)=>(s.push(...o),s)),wm(null),h1(),Rn(s=>{if(s===null)return ia(i);let o=aS(s);return z2(o),Te(o)}))}processSegment(e,t,i,r,s,o){return Qt(t).pipe(jl(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(jo(l=>{if(l instanceof _c)return Te(null);throw l}))),Li(a=>!!a),jo(a=>{if(sS(a))return V2(i,r,s)?Te(new bg):ia(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return L2(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):ia(r):ia(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:d}=Ag(t,r,s);if(!a)return ia(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$2&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,h).pipe(Rn(p=>this.processSegment(e,i,t,p.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let o=k2(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),o.pipe(Yt(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Yt(({routes:l})=>{let c=i._loadedInjector??e,{consumedSegments:d,remainingSegments:h,parameters:p}=a,m=new mc(d,p,Object.freeze(he({},this.urlTree.queryParams)),this.urlTree.fragment,B2(i),zi(i),i.component??i._loadedComponent??null,i,q2(i)),{segmentGroup:y,slicedSegments:b}=Lx(t,d,h,l);if(b.length===0&&y.hasChildren())return this.processChildren(c,l,y).pipe(Ce(k=>k===null?null:new Bn(m,k)));if(l.length===0&&b.length===0)return Te(new Bn(m,[]));let S=zi(i)===s;return this.processSegment(c,l,y,b,S?Fe:s,!0).pipe(Ce(k=>new Bn(m,k instanceof Bn?[k]:[])))}))):ia(t)))}getChildConfig(e,t,i){return t.children?Te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Te({routes:t._loadedRoutes,injector:t._loadedInjector}):I2(e,t,i,this.urlSerializer).pipe(Rn(r=>r?this.configLoader.loadChildren(e,t).pipe(Mt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):R2(t))):Te({routes:[],injector:e})}};function z2(n){n.sort((e,t)=>e.value.outlet===Fe?-1:t.value.outlet===Fe?1:e.value.outlet.localeCompare(t.value.outlet))}function j2(n){let e=n.value.routeConfig;return e&&e.path===""}function aS(n){let e=[],t=new Set;for(let i of n){if(!j2(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=aS(i.children);e.push(new Bn(i.value,r))}return e.filter(i=>!t.has(i))}function B2(n){return n.data||{}}function q2(n){return n.resolve||{}}function G2(n,e,t,i,r,s){return Rn(o=>U2(n,e,t,i,o.extractedUrl,r,s).pipe(Ce(({state:a,tree:l})=>et(he({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function H2(n,e){return Rn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Te(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of lS(l))o.add(c);let a=0;return Qt(o).pipe(jl(l=>s.has(l)?W2(l,i,n,e):(l.data=Eg(l,l.parent,n).resolve,Te(void 0))),Mt(()=>a++),ym(1),Rn(l=>a===o.size?Te(t):Dr))})}function lS(n){let e=n.children.map(t=>lS(t)).flat();return[n,...e]}function W2(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!eS(r)&&(s[vc]=r.title),K2(s,n,e,i).pipe(Ce(o=>(n._resolvedData=o,n.data=Eg(n,n.parent,t).resolve,null)))}function K2(n,e,t,i){let r=Zm(n);if(r.length===0)return Te({});let s={};return Qt(r).pipe(Rn(o=>Q2(n[o],e,t,i).pipe(Li(),Mt(a=>{s[o]=a}))),ym(1),d1(s),jo(o=>sS(o)?Dr:$l(o)))}function Q2(n,e,t,i){let r=wc(e)??i,s=da(n,r),o=s.resolve?s.resolve(e,t):Os(r,()=>s(e,t));return Ur(o)}function Xm(n){return Yt(e=>{let t=n(e);return t?Qt(t).pipe(Ce(()=>e)):Te(e)})}var cS=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===Fe);return r}getResolvedTitleForRoute(i){return i.data[vc]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:()=>B(Y2),providedIn:"root"});let n=e;return n})(),Y2=(()=>{let e=class e extends cS{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(ae(mn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Pg=new tt("",{providedIn:"root",factory:()=>({})}),Rg=new tt(""),X2=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Pm)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Te(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ur(i.loadComponent()).pipe(Ce(uS),Mt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),_d(()=>{this.componentLoaders.delete(i)})),s=new gm(r,()=>new Fi).pipe(mm());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=J2(r,this.compiler,i,this.onLoadEndListener).pipe(_d(()=>{this.childrenLoaders.delete(r)})),a=new gm(o,()=>new Fi).pipe(mm());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function J2(n,e,t,i){return Ur(n.loadChildren()).pipe(Ce(uS),Rn(r=>r instanceof V1||Array.isArray(r)?Te(r):Qt(e.compileModuleAsync(r))),Ce(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(Rg,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ig),injector:s}}))}function Z2(n){return n&&typeof n=="object"&&"default"in n}function uS(n){return Z2(n)?n.default:n}var kg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:()=>B(eM),providedIn:"root"});let n=e;return n})(),eM=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),tM=new tt("");var dS=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Fi,this.transitionAbortSubject=new Fi,this.configLoader=B(X2),this.environmentInjector=B(Gl),this.urlSerializer=B(gh),this.rootContexts=B(_h),this.location=B(Md),this.inputBindingEnabled=B(Cg,{optional:!0})!==null,this.titleStrategy=B(cS),this.options=B(Pg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(kg),this.createViewTransition=B(tM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Te(void 0),this.rootComponentType=null;let i=s=>this.events.next(new ag(s)),r=s=>this.events.next(new lg(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(et(he(he({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Zn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($n(o=>o.id!==0),Ce(o=>et(he({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Yt(o=>{let a=!1,l=!1;return Te(o).pipe(Yt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qn.SupersededByNewNavigation),Dr;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?et(he({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&h!=="reload"){let p="";return this.events.next(new Vr(c.id,this.urlSerializer.serialize(c.rawUrl),p,lh.IgnoredSameUrlNavigation)),c.resolve(null),Dr}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Te(c).pipe(Yt(p=>{let m=this.transitions?.getValue();return this.events.next(new ca(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Dr:Promise.resolve(p)}),G2(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=et(he({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new ch(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:S}=c,k=new ca(p,this.urlSerializer.serialize(m),y,b);this.events.next(k);let A=Jx(this.rootComponentType).snapshot;return this.currentTransition=o=et(he({},c),{targetSnapshot:A,urlAfterRedirects:m,extras:et(he({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Te(o)}else{let p="";return this.events.next(new Vr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,lh.IgnoredByUrlHandlingStrategy)),c.resolve(null),Dr}}),Mt(c=>{let d=new ig(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Ce(c=>(this.currentTransition=o=et(he({},c),{guards:c2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),w2(this.environmentInjector,c=>this.events.next(c)),Mt(c=>{if(o.guardsResult=c.guardsResult,la(c.guardsResult))throw nS(this.urlSerializer,c.guardsResult);let d=new rg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),$n(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",qn.GuardRejected),!1)),Xm(c=>{if(c.guards.canActivateChecks.length)return Te(c).pipe(Mt(d=>{let h=new sg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Yt(d=>{let h=!1;return Te(d).pipe(H2(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",qn.NoDataFromResolver)}}))}),Mt(d=>{let h=new og(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),Xm(c=>{let d=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Mt(m=>{h.component=m}),Ce(()=>{})));for(let m of h.children)p.push(...d(m));return p};return _m(d(c.targetSnapshot.root)).pipe(wm(null),Bo(1))}),Xm(()=>this.afterPreactivation()),Yt(()=>{let{currentSnapshot:c,targetSnapshot:d}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return h?Qt(h).pipe(Ce(()=>o)):Te(o)}),Ce(c=>{let d=t2(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=et(he({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Mt(()=>{this.events.next(new pc)}),l2(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Bo(1),Mt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ur(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),m1(this.transitionAbortSubject.pipe(Mt(c=>{throw c}))),_d(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",qn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),jo(c=>{if(l=!0,rS(c))this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),r2(c)?this.events.next(new fc(c.url)):o.resolve(!1);else{this.events.next(new hc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(c))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Dr}))}))}cancelNavigationTransition(i,r,s){let o=new Lr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function nM(n){return n!==cc}var iM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:()=>B(rM),providedIn:"root"});let n=e;return n})(),Sg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rM=(()=>{let e=class e extends Sg{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Em(e)))(s||e)}})(),e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),hS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:()=>B(sM),providedIn:"root"});let n=e;return n})(),sM=(()=>{let e=class e extends hS{constructor(){super(...arguments),this.location=B(Md),this.urlSerializer=B(gh),this.options=B(Pg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(kg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Fr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof ca)this.stateMemento=this.createStateMemento();else if(i instanceof Vr)this.rawUrlTree=r.initialUrl;else if(i instanceof ch){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof pc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Lr&&(i.code===qn.GuardRejected||i.code===qn.NoDataFromResolver)?this.restoreHistory(r):i instanceof hc?this.restoreHistory(r,!0):i instanceof ur&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=he(he({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=he(he({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Em(e)))(s||e)}})(),e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ac=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ac||{});function oM(n,e){n.events.pipe($n(t=>t instanceof ur||t instanceof Lr||t instanceof hc||t instanceof Vr),Ce(t=>t instanceof ur||t instanceof Vr?ac.COMPLETE:(t instanceof Lr?t.code===qn.Redirect||t.code===qn.SupersededByNewNavigation:!1)?ac.REDIRECTING:ac.FAILED),$n(t=>t!==ac.REDIRECTING),Bo(1)).subscribe(()=>{e()})}function aM(n){throw n}var lM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ct=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=B(kd),this.stateManager=B(hS),this.options=B(Pg,{optional:!0})||{},this.pendingTasks=B($1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(dS),this.urlSerializer=B(gh),this.location=B(Md),this.urlHandlingStrategy=B(kg),this._events=new Fi,this.errorHandler=this.options.errorHandler||aM,this.navigated=!1,this.routeReuseStrategy=B(iM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(Rg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Cg,{optional:!0}),this.eventsSubscription=new r1,this.isNgZoneEnabled=B(ht)instanceof ht&&ht.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Lr&&r.code!==qn.Redirect&&r.code!==qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ur)this.navigated=!0;else if(r instanceof fc){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||nM(s.source)};this.scheduleNavigation(a,cc,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}dM(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=he({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Ig),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:a,h=null;switch(l){case"merge":h=he(he({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=s?s.snapshot:this.routerState.snapshot.root;p=Kx(m)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),p=this.currentUrlTree.root}return Qx(p,i,h,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=la(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,cc,null,r)}navigate(i,r={skipLocationChange:!1}){return uM(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=he({},lM):r===!1?s=he({},cM):s=r,la(i))return Mx(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Mx(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,d;a?(l=a.resolve,c=a.reject,d=a.promise):d=new Promise((p,m)=>{l=p,c=m});let h=this.pendingTasks.add();return oM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function uM(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Et(4008,!1)}function dM(n){return!(n instanceof pc)&&!(n instanceof fc)}var He=(()=>{let e=class e{constructor(i,r,s,o,a,l){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new Fi,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=i.events.subscribe(d=>{d instanceof ur&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:M1(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(Si(ct),Si(it),b1("tabindex"),Si(N1),Si(bd),Si(Mm))},e.\u0275dir=ql({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&re("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&z1("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[yd.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Dd],skipLocationChange:[yd.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Dd],replaceUrl:[yd.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Dd],routerLink:"routerLink"},standalone:!0,features:[L1,Hl]});let n=e;return n})();var pS=new tt(""),hM=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=B(Gl),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ca?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof ur?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Vr&&i.code===lh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof uh&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>q(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Cd(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new uh(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Sd()},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})();function fS(n,...e){return Go([{provide:Rg,multi:!0,useValue:n},[],{provide:it,useFactory:pM,deps:[ct]},{provide:W1,multi:!0,useFactory:mM},e.map(t=>t.\u0275providers)])}function pM(n){return n.routerState.root}function fM(n,e){return{\u0275kind:n,\u0275providers:e}}function mS(n={}){return fM(4,[{provide:pS,useFactory:()=>{let t=B(tx),i=B(ht),r=B(dS),s=B(gh);return new hM(s,r,t,i,n)}}])}function mM(){let n=B(x1);return e=>{let t=n.get(Am);if(e!==t.components[0])return;let i=n.get(ct),r=n.get(gM);n.get(_M)===1&&i.initialNavigation(),n.get(vM,null,Sm.Optional)?.setUpPreloading(),n.get(pS,null,Sm.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var gM=new tt("",{factory:()=>new Fi}),_M=new tt("",{providedIn:"root",factory:()=>1});var vM=new tt("");var wM="firebase",yM="10.13.2";Ti(wM,yM,"app");var $r=new Rd("ANGULARFIRE2_VERSION");var bM=(n,e)=>{let t=e?[e]:vx(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},dr=class{constructor(){return bM(xM)}},xM="app-check";function Dg(){}var wh=class{zone;delegate;constructor(e,t=o1){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},Mg=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dg,{},Dg,Dg)),t.pipe(Mt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ha=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new wh(Zone.current)),this.insideAngular=t.run(()=>new wh(Zone.current,$o)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(ae(ht))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SM(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ot(n){return EM(SM())(n)}function EM(n){return function(t){return t=t.lift(new Mg(n.ngZone)),t.pipe(zo(n.outsideAngular),Ns(n.insideAngular))}}var TM="firebase",CM="10.13.2";nn.registerVersion(TM,CM,"app-compat");var IM=["ngOnDestroy"],_S=(n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(IM.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(d=>{let h=d?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,h),h})})})});var yh=class{constructor(e){return e}},zr=new tt("angularfire2.app.options"),jr=new tt("angularfire2.app.name");function zs(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let o=nn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>nn.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;AM("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new yh(o)}var AM=(n,...e)=>{Rm()&&typeof console<"u"&&console[n](...e)},PM={provide:yh,useFactory:zs,deps:[zr,ht,[new wd,jr]]},vS=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:zr,useValue:t},{provide:jr,useValue:i}]}}constructor(t){nn.registerVersion("angularfire",$r.full,"core"),nn.registerVersion("angularfire",$r.full,"app-compat"),nn.registerVersion("angular",G1.full,t.toString())}static \u0275fac=function(i){return new(i||n)(ae(Nt))};static \u0275mod=xi({type:n});static \u0275inj=bi({providers:[PM]})}return n})();function pa(n,e,t,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return RM(r,o)||(gS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${kM?" You may need to reload as Firebase is not HMR aware.":""}`),gS("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function RM(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var kM=typeof module<"u"&&!!module.hot,gS=(n,...e)=>{Rm()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var DM=new Map,MM={activated:!1,tokenObservers:[]},NM={initialized:!1,enabled:!1};function Ii(n){return DM.get(n)||Object.assign({},MM)}function TS(){return NM}var OM="https://content-firebaseappcheck.googleapis.com/v1";var FM="exchangeDebugToken",wS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},N6=24*60*60*1e3;var Fg=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return q(this,null,function*(){this.stop();try{this.pending=new tn,this.pending.promise.catch(t=>{}),yield LM(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new tn,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function LM(n){return new Promise(e=>{setTimeout(e,n)})}var VM={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Br=new hx("appCheck","AppCheck",VM);function CS(n){if(!Ii(n).activated)throw Br.create("use-before-activation",{appName:n.name})}function IS(i,r){return q(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,a)}catch(m){throw Br.create("fetch-network-error",{originalErrorMessage:m?.message})}if(l.status!==200)throw Br.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(m){throw Br.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:c.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function AS(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${OM}/projects/${t}/apps/${i}:${FM}?key=${r}`,body:{debug_token:e}}}var UM="firebase-app-check-database",$M=1,Lg="firebase-app-check-store";var bh=null;function zM(){return bh||(bh=new Promise((n,e)=>{try{let t=indexedDB.open(UM,$M);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Br.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Lg,{keyPath:"compositeKey"})}}}catch(t){e(Br.create("storage-open",{originalErrorMessage:t?.message}))}}),bh)}function jM(n,e){return BM(qM(n),e)}function BM(n,e){return q(this,null,function*(){let i=(yield zM()).transaction(Lg,"readwrite"),s=i.objectStore(Lg).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Br.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function qM(n){return`${n.options.appId}-${n.name}`}var Vg=new Or("@firebase/app-check");function Og(n,e){return Fd()?jM(n,e).catch(t=>{Vg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PS(){return TS().enabled}function RS(){return q(this,null,function*(){let n=TS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var GM={error:"UNKNOWN_ERROR"};function HM(n){return Nd.encodeString(JSON.stringify(n),!1)}function Ug(n,e=!1){return q(this,null,function*(){let t=n.app;CS(t);let i=Ii(t),r=i.token,s;if(r&&!bc(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(bc(l)?r=l:yield Og(t,void 0))}if(!e&&r&&bc(r))return{token:r.token};let o=!1;if(PS()){i.exchangeTokenPromise||(i.exchangeTokenPromise=IS(AS(t,yield RS()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield Og(t,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield Ii(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Vg.warn(l.message):Vg.error(l),s=l}let a;return r?s?bc(r)?a={token:r.token,internalError:s}:a=bS(s):(a={token:r.token},i.token=r,yield Og(t,r)):a=bS(s),o&&YM(t,a),a})}function WM(n){return q(this,null,function*(){let e=n.app;CS(e);let{provider:t}=Ii(e);if(PS()){let i=yield RS(),{token:r}=yield IS(AS(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function KM(n,e,t,i){let{app:r}=n,s=Ii(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&bc(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),yS(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>yS(n))}function kS(n,e){let t=Ii(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function yS(n){let{app:e}=n,t=Ii(e),i=t.tokenRefresher;i||(i=QM(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function QM(n){let{app:e}=n;return new Fg(()=>q(this,null,function*(){let t=Ii(e),i;if(t.token?i=yield Ug(n,!0):i=yield Ug(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=Ii(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},wS.RETRIAL_MIN_WAIT,wS.RETRIAL_MAX_WAIT)}function YM(n,e){let t=Ii(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function bc(n){return n.expireTimeMillis-Date.now()>0}function bS(n){return{token:HM(GM),error:n}}var $g=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ii(this.app);for(let t of e)kS(this.app,t.next);return Promise.resolve()}};function XM(n,e){return new $g(n,e)}function JM(n){return{getToken:e=>Ug(n,e),getLimitedUseToken:()=>WM(n),addTokenListener:e=>KM(n,"INTERNAL",e),removeTokenListener:e=>kS(n.app,e)}}var ZM="@firebase/app-check",eN="0.8.8";var tN="app-check",xS="app-check-internal";function nN(){Vs(new jn(tN,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return XM(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xS).initialize()})),Vs(new jn(xS,n=>{let e=n.getProvider("app-check").getImmediate();return JM(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ti(ZM,eN)}nN();var iN=["localhost","0.0.0.0","127.0.0.1"],H6=typeof window<"u"&&iN.includes(window.location.hostname);var xc=new tt("angularfire2.auth.use-emulator"),Sc=new tt("angularfire2.auth.settings"),Ec=new tt("angularfire2.auth.tenant-id"),Tc=new tt("angularfire2.auth.langugage-code"),Cc=new tt("angularfire2.auth.use-device-language"),Ic=new tt("angularfire.auth.persistence"),Ac=(n,e,t,i,r,s,o,a)=>pa(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(let[c,d]of Object.entries(o))l.settings[c]=d;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]),xh=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,c,d,h,p,m){let y=new Fi,b=Te(void 0).pipe(Ns(o.outsideAngular),Yt(()=>s.runOutsideAngular(()=>import("./chunk-YF6IJ3JL.js"))),Ce(()=>zs(t,s,i)),Ce(S=>Ac(S,s,a,c,d,h,l,p)),bm({bufferSize:1,refCount:!1}));if(Ls(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Te(null);else{b.pipe(Li()).subscribe();let S=b.pipe(Yt(x=>x.getRedirectResult().then(F=>F,()=>null)),Ot,bm({bufferSize:1,refCount:!1})),k=b.pipe(Yt(x=>new kr(F=>({unsubscribe:s.runOutsideAngular(()=>x.onAuthStateChanged(V=>F.next(V),V=>F.error(V),()=>F.complete()))})))),A=b.pipe(Yt(x=>new kr(F=>({unsubscribe:s.runOutsideAngular(()=>x.onIdTokenChanged(V=>F.next(V),V=>F.error(V),()=>F.complete()))}))));this.authState=S.pipe(xm(k),zo(o.outsideAngular),Ns(o.insideAngular)),this.user=S.pipe(xm(A),zo(o.outsideAngular),Ns(o.insideAngular)),this.idToken=this.user.pipe(Yt(x=>x?Qt(x.getIdToken()):Te(null))),this.idTokenResult=this.user.pipe(Yt(x=>x?Qt(x.getIdTokenResult()):Te(null))),this.credential=zl(S,y,this.authState.pipe($n(x=>!x))).pipe(Ce(x=>x?.user?x:null),zo(o.outsideAngular),Ns(o.insideAngular))}return _S(this,b,s,{spy:{apply:(S,k,A)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&A.then(x=>y.next(x))}}})}static \u0275fac=function(i){return new(i||n)(ae(zr),ae(jr,8),ae(Nt),ae(ht),ae(ha),ae(xc,8),ae(Sc,8),ae(Ec,8),ae(Tc,8),ae(Cc,8),ae(Ic,8),ae(dr,8))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var MS="@firebase/database",NS="1.0.8";var Z0="";function e_(n){Z0=n}var Qg=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ld(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Yg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ai(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var dE=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qg(e)}}catch{}return new Yg},Bs=dE("localStorage"),Xg=dE("sessionStorage");var _a=new Or("@firebase/database"),hE=function(){let n=1;return function(){return n++}}(),pE=function(n){let e=_x(n),t=new gx;t.update(e);let i=t.digest();return Nd.encodeByteArray(i)},Jc=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Jc.apply(null,i):typeof i=="object"?e+=zt(i):e+=i,e+=" "}return e},qs=null,OS=!0,fE=function(n,e){ie(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(_a.logLevel=li.VERBOSE,qs=_a.log.bind(_a),e&&Xg.set("logging_enabled",!0)):typeof n=="function"?qs=n:(qs=null,Xg.remove("logging_enabled"))},sn=function(...n){if(OS===!0&&(OS=!1,qs===null&&Xg.get("logging_enabled")===!0&&fE(!0)),qs){let e=Jc.apply(null,n);qs(e)}},Zc=function(n){return function(...e){sn(n,...e)}},Jg=function(...n){let e="FIREBASE INTERNAL ERROR: "+Jc(...n);_a.error(e)},qi=function(...n){let e=`FIREBASE FATAL ERROR: ${Jc(...n)}`;throw _a.error(e),new Error(e)},gn=function(...n){let e="FIREBASE WARNING: "+Jc(...n);_a.warn(e)},sN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Yh=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},oN=function(n){if(Ui()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Wr="[MIN_NAME]",hr="[MAX_NAME]",Hs=function(n,e){if(n===e)return 0;if(n===Wr||e===hr)return-1;if(e===Wr||n===hr)return 1;{let t=FS(n),i=FS(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},aN=function(n,e){return n===e?0:n<e?-1:1},Pc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+zt(e))},t_=function(n){if(typeof n!="object"||n===null)return zt(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=zt(e[i]),t+=":",t+=t_(n[e[i]]);return t+="}",t},mE=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function on(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var gE=function(n){ie(!Yh(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,s,o,a,l;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));let c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();let d=c.join(""),h="";for(l=0;l<64;l+=8){let p=parseInt(d.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},lN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},cN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function uN(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}var dN=new RegExp("^-?(0*)\\d{1,10}$"),hN=-2147483648,pN=2147483647,FS=function(n){if(dN.test(n)){let e=Number(n);if(e>=hN&&e<=pN)return e}return null},Ca=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw gn("Exception was thrown by user callback.",t),e},Math.floor(0))}},fN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Mc=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Zg=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var e0=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gn(e)}},Nc=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Eh="5",_E="v",vE="s",wE="r",yE="f",bE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xE="ls",SE="p",t0="ac",EE="websocket",TE="long_polling";var Th=class{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function mN(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function CE(n,e,t){ie(typeof e=="string","typeof type must == string"),ie(typeof t=="object","typeof params must == object");let i;if(e===EE)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===TE)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);mN(n)&&(t.ns=n.namespace);let r=[];return on(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var n0=class{constructor(){this.counters_={}}incrementCounter(e,t=1){ai(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return cx(this.counters_)}};var jg={},Bg={};function n_(n){let e=n.toString();return jg[e]||(jg[e]=new n0),jg[e]}function gN(n,e){let t=n.toString();return Bg[t]||(Bg[t]=e()),Bg[t]}var i0=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ca(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var LS="start",_N="close",vN="pLPCommand",wN="pRTLPCB",IE="id",AE="pw",PE="ser",yN="cb",bN="seg",xN="ts",SN="d",EN="dframe",RE=1870,kE=30,TN=RE-kE,CN=25e3,IN=3e4,Vc=class n{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zc(e),this.stats_=n_(t),this.urlFn=l=>(this.appCheckToken&&(l[t0]=this.appCheckToken),CE(t,TE,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new i0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IN)),oN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new r0((...s)=>{let[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===LS)this.id=a,this.password=l;else if(o===_N)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[LS]="t",i[PE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[yN]=this.scriptTagHolder.uniqueCallbackIdentifier),i[_E]=Eh,this.transportSessionId&&(i[vE]=this.transportSessionId),this.lastSessionId&&(i[xE]=this.lastSessionId),this.applicationId&&(i[SE]=this.applicationId),this.appCheckToken&&(i[t0]=this.appCheckToken),typeof location<"u"&&location.hostname&&bE.test(location.hostname)&&(i[wE]=yE);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Ui()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!lN()&&!cN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=lx(t),r=mE(i,TN);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ui())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[EN]="t",i[IE]=e,i[AE]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},r0=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ui())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=hE(),window[vN+this.uniqueCallbackIdentifier]=e,window[wN+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){sn("frame writing exception"),a.stack&&sn(a.stack),sn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||sn("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[IE]=this.myID,e[AE]=this.myPW,e[PE]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kE+i.length<=RE;){let o=this.pendingSegs.shift();i=i+"&"+bN+r+"="+o.seg+"&"+xN+r+"="+o.ts+"&"+SN+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(CN)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){Ui()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var AN=16384,PN=45e3,Ch=null;typeof MozWebSocket<"u"?Ch=MozWebSocket:typeof WebSocket<"u"&&(Ch=WebSocket);var ma=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zc(this.connId),this.stats_=n_(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){let a={};return a[_E]=Eh,!Ui()&&typeof location<"u"&&location.hostname&&bE.test(location.hostname)&&(a[wE]=yE),i&&(a[vE]=i),r&&(a[xE]=r),s&&(a[t0]=s),o&&(a[SE]=o),CE(t,EE,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bs.set("previous_websocket_failure",!0);try{let r;if(Ui()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Eh}/${Z0}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Ch(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Ch!==null&&!n.forceDisallow_}static previouslyFailed(){return Bs.isInMemoryStorage||Bs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Bs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Ld(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ie(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=zt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=mE(i,AN);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(PN))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),DE=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Vc,ma]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let i=ma&&ma.isAvailable(),r=i&&!ma.previouslyFailed();if(t.webSocketOnly&&(i||gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ma];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),RN=6e4,kN=5e3,DN=10*1024,MN=100*1024,qg="t",VS="d",NN="s",US="r",ON="e",$S="o",zS="a",jS="n",BS="p",FN="h",s0=class{constructor(e,t,i,r,s,o,a,l,c,d){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zc("c:"+this.id+":"),this.transportManager_=new DE(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Mc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>MN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(qg in e){let t=e[qg];t===zS?this.upgradeIfSecondaryHealthy_():t===US?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===$S&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Pc("t",e),i=Pc("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:BS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Pc("t",e),i=Pc("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Pc(qg,e);if(VS in e){let i=e[VS];if(t===FN){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===jS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===NN?this.onConnectionShutdown_(i):t===US?this.onReset_(i):t===ON?Jg("Server Error: "+i):t===$S?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jg("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Eh!==i&&gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Mc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(RN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(kN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:BS,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ih=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Ah=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){ie(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Ph=class n extends Ah{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Nm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var qS=32,GS=768,Ze=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Je(){return new Ze("")}function $e(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Kr(n){return n.pieces_.length-n.pieceNum_}function ut(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ze(n.pieces_,e)}function i_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function LN(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Uc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ME(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ze(e,0)}function yt(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Ze)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Ze(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function xn(n,e){let t=$e(n),i=$e(e);if(t===null)return e;if(t===i)return xn(ut(n),ut(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function VN(n,e){let t=Uc(n,0),i=Uc(e,0);for(let r=0;r<t.length&&r<i.length;r++){let s=Hs(t[r],i[r]);if(s!==0)return s}return t.length===i.length?0:t.length<i.length?-1:1}function r_(n,e){if(Kr(n)!==Kr(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function di(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Kr(n)>Kr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var o0=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Uc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ec(this.parts_[i]);NE(this)}};function UN(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=ec(e),NE(n)}function $N(n){let e=n.parts_.pop();n.byteLength_-=ec(e),n.parts_.length>0&&(n.byteLength_-=1)}function NE(n){if(n.byteLength_>GS)throw new Error(n.errorPrefix_+"has a key path longer than "+GS+" bytes ("+n.byteLength_+").");if(n.parts_.length>qS)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qS+") or object contains a cycle "+js(n))}function js(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var a0=class n extends Ah{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(e){return ie(e==="visible","Unknown event type: "+e),[this.visible_]}};var Rc=1e3,zN=60*5*1e3,HS=30*1e3,jN=1.3,BN=3e4,qN="server_kill",WS=3,s_=(()=>{class n extends Ih{constructor(t,i,r,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Zc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rc,this.maxReconnectDelay_=zN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ui())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");a0.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ph.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(zt(o)),ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let i=new tn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ie(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ie(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,d=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(d,c))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&ai(t,"w")){let r=Nr(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||fx(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=HS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=px(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ie(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);let o={p:t},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+zt(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Jg("Unrecognized action received from server: "+zt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BN&&(this.reconnectDelay_=Rc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jN)}this.onConnectStatus_(!1)}establishConnection_(){return q(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},d=function(p){ie(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(p)};this.realtime_={close:c,sendRequest:d};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[p,m]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?sn("getToken() completed but was canceled"):(sn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,l=new s0(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,y=>{gn(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(qN)},o))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&gn(p),c())}}})}interrupt(t){sn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){sn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Vd(this.interruptReasons_)&&(this.reconnectDelay_=Rc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>t_(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){let r=new Ze(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){sn("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WS&&(this.reconnectDelay_=HS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){sn("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";Ui()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+Z0.replace(/\./g,"-")]=1,Nm()?t["framework.cordova"]=1:ux()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Ph.getInstance().currentlyOnline();return Vd(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Be=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var va=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new Be(Wr,e),r=new Be(Wr,t);return this.compare(i,r)!==0}minPost(){return Be.MIN}};var Sh,Rh=class extends va{static get __EMPTY_NODE(){return Sh}static set __EMPTY_NODE(e){Sh=e}compare(e,t){return Hs(e.name,t.name)}isDefinedOn(e){throw ea("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Be.MIN}maxPost(){return new Be(hr,Sh)}makePost(e,t){return ie(typeof e=="string","KeyIndex indexValue must always be a string."),new Be(e,Sh)}toString(){return".key"}},Bi=new Rh;var ga=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ai=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??hi.EMPTY_NODE,this.right=o??hi.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return hi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return hi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),l0=class{copy(e,t,i,r,s){return this}insert(e,t,i){return new Ai(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},hi=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ai.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ai.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ga(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ga(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ga(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ga(this.root_,null,this.comparator_,!0,e)}};hi.EMPTY_NODE=new l0;function GN(n,e){return Hs(n.name,e.name)}function o_(n,e){return Hs(n,e)}var c0;function HN(n){c0=n}var OE=function(n){return typeof n=="number"?"number:"+gE(n):"string:"+n},FE=function(n){if(n.isLeafNode()){let e=n.val();ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ai(e,".sv"),"Priority must be a string or number.")}else ie(n===c0||n.isEmpty(),"priority of unexpected type.");ie(n===c0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var KS,wa=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),FE(this.priorityNode_)}static set __childrenNodeConstructor(t){KS=t}static get __childrenNodeConstructor(){return KS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ze(t)?this:$e(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=$e(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(ie(r!==".priority"||Kr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ut(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+OE(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=gE(this.value_):t+=this.value_,this.lazyHash_=pE(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(ie(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return ie(s>=0,"Unknown leaf type: "+i),ie(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),LE,VE;function WN(n){LE=n}function KN(n){VE=n}var u0=class extends va{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?Hs(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(hr,new wa("[PRIORITY-POST]",VE))}makePost(e,t){let i=LE(e);return new Be(t,new wa("[PRIORITY-POST]",i))}toString(){return".priority"}},pt=new u0;var QN=Math.log(2),d0=class{constructor(e){let t=s=>parseInt(Math.log(s)/QN,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},kh=function(n,e,t,i){n.sort(e);let r=function(l,c){let d=c-l,h,p;if(d===0)return null;if(d===1)return h=n[l],p=t?t(h):h,new Ai(p,h.node,Ai.BLACK,null,null);{let m=parseInt(d/2,10)+l,y=r(l,m),b=r(m+1,c);return h=n[m],p=t?t(h):h,new Ai(p,h.node,Ai.BLACK,y,b)}},s=function(l){let c=null,d=null,h=n.length,p=function(y,b){let S=h-y,k=h;h-=y;let A=r(S+1,k),x=n[S],F=t?t(x):x;m(new Ai(F,x.node,b,null,A))},m=function(y){c?(c.left=y,c=y):(d=y,c=y)};for(let y=0;y<l.count;++y){let b=l.nextBitIsOne(),S=Math.pow(2,l.count-(y+1));b?p(S,Ai.BLACK):(p(S,Ai.BLACK),p(S,Ai.RED))}return d},o=new d0(n.length),a=s(o);return new hi(i||e,a)};var Gg,fa={},ya=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return ie(fa&&pt,"ChildrenNode.ts has not been loaded"),Gg=Gg||new n({".priority":fa},{".priority":pt}),Gg}get(e){let t=Nr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hi?t:null}hasIndex(e){return ai(this.indexSet_,e.toString())}addIndex(e,t){ie(e!==Bi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(Be.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=kh(i,e.getCompare()):a=fa;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let d=Object.assign({},this.indexes_);return d[l]=a,new n(d,c)}addToIndexes(e,t){let i=Zl(this.indexes_,(r,s)=>{let o=Nr(this.indexSet_,s);if(ie(o,"Missing index implementation for "+s),r===fa)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(Be.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),kh(a,o.getCompare())}else return fa;else{let a=t.get(e.name),l=r;return a&&(l=l.remove(new Be(e.name,a))),l.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=Zl(this.indexes_,r=>{if(r===fa)return r;{let s=t.get(e.name);return s?r.remove(new Be(e.name,s)):r}});return new n(i,this.indexSet_)}};var kc,Ne=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&FE(this.priorityNode_),this.children_.isEmpty()&&ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kc||(kc=new n(new hi(o_),null,ya.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kc}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?kc:i}}getChild(t){let i=$e(t);return i===null?this:this.getImmediateChild(i).getChild(ut(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(ie(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new Be(t,i),s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?kc:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){let r=$e(t);if(r===null)return i;{ie($e(t)!==".priority"||Kr(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(ut(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(pt,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+OE(this.getPriority().val())+":"),this.forEachChild(pt,(i,r)=>{let s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":pE(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new Be(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new Be(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new Be(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Be.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Be.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===eu?-1:0}withIndex(t){if(t===Bi||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Bi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(pt),s=i.getIterator(pt),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Bi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),h0=class extends Ne{constructor(){super(new hi(o_),Ne.EMPTY_NODE,ya.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ne.EMPTY_NODE}isEmpty(){return!1}},eu=new h0;Object.defineProperties(Be,{MIN:{value:new Be(Wr,Ne.EMPTY_NODE)},MAX:{value:new Be(hr,eu)}});Rh.__EMPTY_NODE=Ne.EMPTY_NODE;wa.__childrenNodeConstructor=Ne;HN(eu);KN(eu);var YN=!0;function Tt(n,e=null){if(n===null)return Ne.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new wa(t,Tt(e))}if(!(n instanceof Array)&&YN){let t=[],i=!1;if(on(n,(o,a)=>{if(o.substring(0,1)!=="."){let l=Tt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Be(o,l)))}}),t.length===0)return Ne.EMPTY_NODE;let s=kh(t,GN,o=>o.name,o_);if(i){let o=kh(t,pt.getCompare());return new Ne(s,Tt(e),new ya({".priority":o},{".priority":pt}))}else return new Ne(s,Tt(e),ya.Default)}else{let t=Ne.EMPTY_NODE;return on(n,(i,r)=>{if(ai(n,i)&&i.substring(0,1)!=="."){let s=Tt(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Tt(e))}}WN(Tt);var $c=class extends va{constructor(e){super(),this.indexPath_=e,ie(!ze(e)&&$e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?Hs(e.name,t.name):s}makePost(e,t){let i=Tt(e),r=Ne.EMPTY_NODE.updateChild(this.indexPath_,i);return new Be(t,r)}maxPost(){let e=Ne.EMPTY_NODE.updateChild(this.indexPath_,eu);return new Be(hr,e)}toString(){return Uc(this.indexPath_,0).join("/")}};var p0=class extends va{compare(e,t){let i=e.node.compareTo(t.node);return i===0?Hs(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(e,t){let i=Tt(e);return new Be(t,i)}toString(){return".value"}},a_=new p0;function UE(n){return{type:"value",snapshotNode:n}}function ba(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function zc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function jc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function XN(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Bc=class{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){ie(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(zc(t,a)):ie(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ba(t,i)):o.trackChildChange(jc(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(pt,(r,s)=>{t.hasChild(r)||i.trackChildChange(zc(r,s))}),t.isLeafNode()||t.forEachChild(pt,(r,s)=>{if(e.hasChild(r)){let o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(jc(r,s,o))}else i.trackChildChange(ba(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ne.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Dh=class n{constructor(e){this.indexedFilter_=new Bc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new Be(t,i))||(i=Ne.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Ne.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Ne.EMPTY_NODE);let s=this;return t.forEachChild(pt,(o,a)=>{s.matches(new Be(o,a))||(r=r.updateImmediateChild(o,Ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var f0=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{let i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Dh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new Be(t,i))||(i=Ne.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=Ne.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(Ne.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,Ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){let h=this.index_.getCompare();o=(p,m)=>h(m,p)}else o=this.index_.getCompare();let a=e;ie(a.numChildren()===this.limit_,"");let l=new Be(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(t)){let h=a.getImmediateChild(t),p=r.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===t||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);let m=p==null?1:o(p,l);if(d&&!i.isEmpty()&&m>=0)return s?.trackChildChange(jc(t,i,h)),a.updateImmediateChild(t,i);{s?.trackChildChange(zc(t,h));let b=a.updateImmediateChild(t,Ne.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s?.trackChildChange(ba(p.name,p.node)),b.updateImmediateChild(p.name,p.node)):b}}else return i.isEmpty()?e:d&&o(c,l)>=0?(s!=null&&(s.trackChildChange(zc(c.name,c.node)),s.trackChildChange(ba(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,Ne.EMPTY_NODE)):e}};var qc=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wr}hasEnd(){return this.endSet_}getIndexEndValue(){return ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pt}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function JN(n){return n.loadsAllData()?new Bc(n.getIndex()):n.hasLimit()?new f0(n):new Dh(n)}function ZN(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function eO(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function m0(n,e,t){let i=n.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,t!=null?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function tO(n,e,t){let i;return n.index_===Bi||t?i=m0(n,e,t):i=m0(n,e,hr),i.startAfterSet_=!0,i}function g0(n,e,t){let i=n.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,t!==void 0?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function nO(n,e,t){let i;return n.index_===Bi||t?i=g0(n,e,t):i=g0(n,e,Wr),i.endBeforeSet_=!0,i}function Xh(n,e){let t=n.copy();return t.index_=e,t}function QS(n){let e={};if(n.isDefault())return e;let t;if(n.index_===pt?t="$priority":n.index_===a_?t="$value":n.index_===Bi?t="$key":(ie(n.index_ instanceof $c,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=zt(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=zt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+zt(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=zt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function YS(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==pt&&(e.i=n.index_.toString()),e}var _0=class n extends Ih{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Zc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,i),a={};this.listens_[o]=a;let l=QS(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,i),Nr(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",r(p,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=QS(e._queryParams),i=e._path.toString(),r=new tn;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+mx(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ld(a.responseText)}catch{gn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&gn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var v0=class{constructor(){this.rootNode_=Ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Mh(){return{value:null,children:new Map}}function Ia(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=$e(e);n.children.has(i)||n.children.set(i,Mh());let r=n.children.get(i);e=ut(e),Ia(r,e,t)}}function w0(n,e){if(ze(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(pt,(i,r)=>{Ia(n,new Ze(i),r)}),w0(n,e)}}else if(n.children.size>0){let t=$e(e);return e=ut(e),n.children.has(t)&&w0(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function y0(n,e,t){n.value!==null?t(e,n.value):iO(n,(i,r)=>{let s=new Ze(e.toString()+"/"+i);y0(r,s,t)})}function iO(n,e){n.children.forEach((t,i)=>{e(i,t)})}var b0=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&on(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var XS=10*1e3,rO=30*1e3,sO=5*60*1e3,x0=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new b0(e);let i=XS+(rO-XS)*Math.random();Mc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;on(e,(r,s)=>{s>0&&ai(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Mc(this.reportStats_.bind(this),Math.floor(Math.random()*2*sO))}};var ji=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(ji||{});function l_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function c_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function u_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var S0=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ji.ACK_USER_WRITE,this.source=l_()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ze(e));return new n(Je(),t,this.revert)}}else return ie($e(this.path)===e,"operationForChild called for unrelated child."),new n(ut(this.path),this.affectedTree,this.revert)}};var Nh=class n{constructor(e,t){this.source=e,this.path=t,this.type=ji.LISTEN_COMPLETE}operationForChild(e){return ze(this.path)?new n(this.source,Je()):new n(this.source,ut(this.path))}};var xa=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ji.OVERWRITE}operationForChild(e){return ze(this.path)?new n(this.source,Je(),this.snap.getImmediateChild(e)):new n(this.source,ut(this.path),this.snap)}};var Gc=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ji.MERGE}operationForChild(e){if(ze(this.path)){let t=this.children.subtree(new Ze(e));return t.isEmpty()?null:t.value?new xa(this.source,Je(),t.value):new n(this.source,Je(),t)}else return ie($e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ut(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Gi=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;let t=$e(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var E0=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function oO(n,e,t,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(XN(o.childName,o.snapshotNode))}),Dc(n,r,"child_removed",e,i,t),Dc(n,r,"child_added",e,i,t),Dc(n,r,"child_moved",s,i,t),Dc(n,r,"child_changed",e,i,t),Dc(n,r,"value",e,i,t),r}function Dc(n,e,t,i,r,s){let o=i.filter(a=>a.type===t);o.sort((a,l)=>lO(n,a,l)),o.forEach(a=>{let l=aO(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function aO(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function lO(n,e,t){if(e.childName==null||t.childName==null)throw ea("Should only compare child_ events.");let i=new Be(e.childName,e.snapshotNode),r=new Be(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function Jh(n,e){return{eventCache:n,serverCache:e}}function Oc(n,e,t,i){return Jh(new Gi(e,t,i),n.serverCache)}function $E(n,e,t,i){return Jh(n.eventCache,new Gi(e,t,i))}function Oh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Gs(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Hg,cO=()=>(Hg||(Hg=new hi(aN)),Hg),Sn=class n{constructor(e,t=cO()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return on(e,(i,r)=>{t=t.set(new Ze(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Je(),value:this.value};if(ze(e))return null;{let i=$e(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(ut(e),t);return s!=null?{path:yt(new Ze(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{let t=$e(e),i=this.children.get(t);return i!==null?i.subtree(ut(e)):new n(null)}}set(e,t){if(ze(e))return new n(t,this.children);{let i=$e(e),s=(this.children.get(i)||new n(null)).set(ut(e),t),o=this.children.insert(i,s);return new n(this.value,o)}}remove(e){if(ze(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=$e(e),i=this.children.get(t);if(i){let r=i.remove(ut(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(ze(e))return this.value;{let t=$e(e),i=this.children.get(t);return i?i.get(ut(e)):null}}setTree(e,t){if(ze(e))return t;{let i=$e(e),s=(this.children.get(i)||new n(null)).setTree(ut(e),t),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(e){return this.fold_(Je(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(yt(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Je(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(ze(e))return null;{let s=$e(e),o=this.children.get(s);return o?o.findOnPath_(ut(e),yt(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Je(),t)}foreachOnPath_(e,t,i){if(ze(e))return this;{this.value&&i(t,this.value);let r=$e(e),s=this.children.get(r);return s?s.foreachOnPath_(ut(e),yt(t,r),i):new n(null)}}foreach(e){this.foreach_(Je(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(yt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var Pi=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Sn(null))}};function Fc(n,e,t){if(ze(e))return new Pi(new Sn(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=xn(r,e);return s=s.updateChild(o,t),new Pi(n.writeTree_.set(r,s))}else{let r=new Sn(t),s=n.writeTree_.setTree(e,r);return new Pi(s)}}}function T0(n,e,t){let i=n;return on(t,(r,s)=>{i=Fc(i,yt(e,r),s)}),i}function JS(n,e){if(ze(e))return Pi.empty();{let t=n.writeTree_.setTree(e,new Sn(null));return new Pi(t)}}function C0(n,e){return Ws(n,e)!=null}function Ws(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(xn(t.path,e)):null}function ZS(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(pt,(i,r)=>{e.push(new Be(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Be(i,r.value))}),e}function Gr(n,e){if(ze(e))return n;{let t=Ws(n,e);return t!=null?new Pi(new Sn(t)):new Pi(n.writeTree_.subtree(e))}}function I0(n){return n.writeTree_.isEmpty()}function Sa(n,e){return zE(Je(),n.writeTree_,e)}function zE(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(ie(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=zE(yt(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(yt(n,".priority"),i)),t}}function Zh(n,e){return GE(e,n)}function uO(n,e,t,i,r){ie(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Fc(n.visibleWrites,e,t)),n.lastWriteId=i}function dO(n,e,t,i){ie(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=T0(n.visibleWrites,e,t),n.lastWriteId=i}function hO(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function pO(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);ie(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&fO(a,i.path)?r=!1:di(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return mO(n),!0;if(i.snap)n.visibleWrites=JS(n.visibleWrites,i.path);else{let a=i.children;on(a,l=>{n.visibleWrites=JS(n.visibleWrites,yt(i.path,l))})}return!0}else return!1}function fO(n,e){if(n.snap)return di(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&di(yt(n.path,t),e))return!0;return!1}function mO(n){n.visibleWrites=jE(n.allWrites,gO,Je()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function gO(n){return n.visible}function jE(n,e,t){let i=Pi.empty();for(let r=0;r<n.length;++r){let s=n[r];if(e(s)){let o=s.path,a;if(s.snap)di(t,o)?(a=xn(t,o),i=Fc(i,a,s.snap)):di(o,t)&&(a=xn(o,t),i=Fc(i,Je(),s.snap.getChild(a)));else if(s.children){if(di(t,o))a=xn(t,o),i=T0(i,a,s.children);else if(di(o,t))if(a=xn(o,t),ze(a))i=T0(i,Je(),s.children);else{let l=Nr(s.children,$e(a));if(l){let c=l.getChild(ut(a));i=Fc(i,Je(),c)}}}else throw ea("WriteRecord should have .snap or .children")}}return i}function BE(n,e,t,i,r){if(!i&&!r){let s=Ws(n.visibleWrites,e);if(s!=null)return s;{let o=Gr(n.visibleWrites,e);if(I0(o))return t;if(t==null&&!C0(o,Je()))return null;{let a=t||Ne.EMPTY_NODE;return Sa(o,a)}}}else{let s=Gr(n.visibleWrites,e);if(!r&&I0(s))return t;if(!r&&t==null&&!C0(s,Je()))return null;{let o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(di(c.path,e)||di(e,c.path))},a=jE(n.allWrites,o,e),l=t||Ne.EMPTY_NODE;return Sa(a,l)}}}function _O(n,e,t){let i=Ne.EMPTY_NODE,r=Ws(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(pt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){let s=Gr(n.visibleWrites,e);return t.forEachChild(pt,(o,a)=>{let l=Sa(Gr(s,new Ze(o)),a);i=i.updateImmediateChild(o,l)}),ZS(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Gr(n.visibleWrites,e);return ZS(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function vO(n,e,t,i,r){ie(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=yt(e,t);if(C0(n.visibleWrites,s))return null;{let o=Gr(n.visibleWrites,s);return I0(o)?r.getChild(t):Sa(o,r.getChild(t))}}function wO(n,e,t,i){let r=yt(e,t),s=Ws(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){let o=Gr(n.visibleWrites,r);return Sa(o,i.getNode().getImmediateChild(t))}else return null}function yO(n,e){return Ws(n.visibleWrites,e)}function bO(n,e,t,i,r,s,o){let a,l=Gr(n.visibleWrites,e),c=Ws(l,Je());if(c!=null)a=c;else if(t!=null)a=Sa(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],h=o.getCompare(),p=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),m=p.getNext();for(;m&&d.length<r;)h(m,i)!==0&&d.push(m),m=p.getNext();return d}else return[]}function xO(){return{visibleWrites:Pi.empty(),allWrites:[],lastWriteId:-1}}function Fh(n,e,t,i){return BE(n.writeTree,n.treePath,e,t,i)}function d_(n,e){return _O(n.writeTree,n.treePath,e)}function eE(n,e,t,i){return vO(n.writeTree,n.treePath,e,t,i)}function Lh(n,e){return yO(n.writeTree,yt(n.treePath,e))}function SO(n,e,t,i,r,s){return bO(n.writeTree,n.treePath,e,t,i,r,s)}function h_(n,e,t){return wO(n.writeTree,n.treePath,e,t)}function qE(n,e){return GE(yt(n.treePath,e),n.writeTree)}function GE(n,e){return{treePath:n,writeTree:e}}var A0=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;ie(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ie(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,jc(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,zc(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,ba(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,jc(i,e.snapshotNode,r.oldSnap));else throw ea("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var P0=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},HE=new P0,Hc=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new Gi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return h_(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Gs(this.viewCache_),s=SO(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}};function EO(n){return{filter:n}}function TO(n,e){ie(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ie(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function CO(n,e,t,i,r){let s=new A0,o,a;if(t.type===ji.OVERWRITE){let c=t;c.source.fromUser?o=R0(n,e,c.path,c.snap,i,r,s):(ie(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ze(c.path),o=Vh(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===ji.MERGE){let c=t;c.source.fromUser?o=AO(n,e,c.path,c.children,i,r,s):(ie(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=k0(n,e,c.path,c.children,i,r,a,s))}else if(t.type===ji.ACK_USER_WRITE){let c=t;c.revert?o=kO(n,e,c.path,i,r,s):o=PO(n,e,c.path,c.affectedTree,i,r,s)}else if(t.type===ji.LISTEN_COMPLETE)o=RO(n,e,t.path,i,s);else throw ea("Unknown operation type: "+t.type);let l=s.getChanges();return IO(e,o,l),{viewCache:o,changes:l}}function IO(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Oh(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(UE(Oh(e)))}}function WE(n,e,t,i,r,s){let o=e.eventCache;if(Lh(i,t)!=null)return e;{let a,l;if(ze(t))if(ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=Gs(e),d=c instanceof Ne?c:Ne.EMPTY_NODE,h=d_(i,d);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{let c=Fh(i,Gs(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=$e(t);if(c===".priority"){ie(Kr(t)===1,"Can't have a priority with additional path components");let d=o.getNode();l=e.serverCache.getNode();let h=eE(i,t,d,l);h!=null?a=n.filter.updatePriority(d,h):a=o.getNode()}else{let d=ut(t),h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let p=eE(i,t,o.getNode(),l);p!=null?h=o.getNode().getImmediateChild(c).updateChild(d,p):h=o.getNode().getImmediateChild(c)}else h=h_(i,c,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),c,h,d,r,s):a=o.getNode()}}return Oc(e,a,o.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function Vh(n,e,t,i,r,s,o,a){let l=e.serverCache,c,d=o?n.filter:n.filter.getIndexedFilter();if(ze(t))c=d.updateFullNode(l.getNode(),i,null);else if(d.filtersNodes()&&!l.isFiltered()){let m=l.getNode().updateChild(t,i);c=d.updateFullNode(l.getNode(),m,null)}else{let m=$e(t);if(!l.isCompleteForPath(t)&&Kr(t)>1)return e;let y=ut(t),S=l.getNode().getImmediateChild(m).updateChild(y,i);m===".priority"?c=d.updatePriority(l.getNode(),S):c=d.updateChild(l.getNode(),m,S,y,HE,null)}let h=$E(e,c,l.isFullyInitialized()||ze(t),d.filtersNodes()),p=new Hc(r,h,s);return WE(n,h,t,r,p,a)}function R0(n,e,t,i,r,s,o){let a=e.eventCache,l,c,d=new Hc(r,e,s);if(ze(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Oc(e,c,!0,n.filter.filtersNodes());else{let h=$e(t);if(h===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),i),l=Oc(e,c,a.isFullyInitialized(),a.isFiltered());else{let p=ut(t),m=a.getNode().getImmediateChild(h),y;if(ze(p))y=i;else{let b=d.getCompleteChild(h);b!=null?i_(p)===".priority"&&b.getChild(ME(p)).isEmpty()?y=b:y=b.updateChild(p,i):y=Ne.EMPTY_NODE}if(m.equals(y))l=e;else{let b=n.filter.updateChild(a.getNode(),h,y,p,d,o);l=Oc(e,b,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function tE(n,e){return n.eventCache.isCompleteForChild(e)}function AO(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{let d=yt(t,l);tE(e,$e(d))&&(a=R0(n,a,d,c,r,s,o))}),i.foreach((l,c)=>{let d=yt(t,l);tE(e,$e(d))||(a=R0(n,a,d,c,r,s,o))}),a}function nE(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function k0(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ze(t)?c=i:c=new Sn(null).setTree(t,i);let d=e.serverCache.getNode();return c.children.inorderTraversal((h,p)=>{if(d.hasChild(h)){let m=e.serverCache.getNode().getImmediateChild(h),y=nE(n,m,p);l=Vh(n,l,new Ze(h),y,r,s,o,a)}}),c.children.inorderTraversal((h,p)=>{let m=!e.serverCache.isCompleteForChild(h)&&p.value===null;if(!d.hasChild(h)&&!m){let y=e.serverCache.getNode().getImmediateChild(h),b=nE(n,y,p);l=Vh(n,l,new Ze(h),b,r,s,o,a)}}),l}function PO(n,e,t,i,r,s,o){if(Lh(r,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(ze(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Vh(n,e,t,l.getNode().getChild(t),r,s,a,o);if(ze(t)){let c=new Sn(null);return l.getNode().forEachChild(Bi,(d,h)=>{c=c.set(new Ze(d),h)}),k0(n,e,t,c,r,s,a,o)}else return e}else{let c=new Sn(null);return i.foreach((d,h)=>{let p=yt(t,d);l.isCompleteForPath(p)&&(c=c.set(d,l.getNode().getChild(p)))}),k0(n,e,t,c,r,s,a,o)}}function RO(n,e,t,i,r){let s=e.serverCache,o=$E(e,s.getNode(),s.isFullyInitialized()||ze(t),s.isFiltered());return WE(n,o,t,i,HE,r)}function kO(n,e,t,i,r,s){let o;if(Lh(i,t)!=null)return e;{let a=new Hc(i,e,r),l=e.eventCache.getNode(),c;if(ze(t)||$e(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Fh(i,Gs(e));else{let h=e.serverCache.getNode();ie(h instanceof Ne,"serverChildren would be complete if leaf node"),d=d_(i,h)}d=d,c=n.filter.updateFullNode(l,d,s)}else{let d=$e(t),h=h_(i,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=n.filter.updateChild(l,d,h,ut(t),a,s):e.eventCache.getNode().hasChild(d)?c=n.filter.updateChild(l,d,Ne.EMPTY_NODE,ut(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Fh(i,Gs(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Lh(i,Je())!=null,Oc(e,c,o,n.filter.filtersNodes())}}var D0=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new Bc(i.getIndex()),s=JN(i);this.processor_=EO(s);let o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Ne.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Ne.EMPTY_NODE,a.getNode(),null),d=new Gi(l,o.isFullyInitialized(),r.filtersNodes()),h=new Gi(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Jh(h,d),this.eventGenerator_=new E0(this.query_)}get query(){return this.query_}};function DO(n){return n.viewCache_.serverCache.getNode()}function MO(n){return Oh(n.viewCache_)}function NO(n,e){let t=Gs(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild($e(e)).isEmpty())?t.getChild(e):null}function iE(n){return n.eventRegistrations_.length===0}function OO(n,e){n.eventRegistrations_.push(e)}function rE(n,e,t){let i=[];if(t){ie(e==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function sE(n,e,t,i){e.type===ji.MERGE&&e.source.queryId!==null&&(ie(Gs(n.viewCache_),"We should always have a full cache before handling merges"),ie(Oh(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=CO(n.processor_,r,e,t,i);return TO(n.processor_,s.viewCache),ie(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,KE(n,s.changes,s.viewCache.eventCache.getNode(),null)}function FO(n,e){let t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(pt,(s,o)=>{i.push(ba(s,o))}),t.isFullyInitialized()&&i.push(UE(t.getNode())),KE(n,i,t.getNode(),e)}function KE(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return oO(n.eventGenerator_,e,t,r)}var Uh,$h=class{constructor(){this.views=new Map}};function LO(n){ie(!Uh,"__referenceConstructor has already been defined"),Uh=n}function VO(){return ie(Uh,"Reference.ts has not been loaded"),Uh}function UO(n){return n.views.size===0}function p_(n,e,t,i){let r=e.source.queryId;if(r!==null){let s=n.views.get(r);return ie(s!=null,"SyncTree gave us an op for an invalid query."),sE(s,e,t,i)}else{let s=[];for(let o of n.views.values())s=s.concat(sE(o,e,t,i));return s}}function QE(n,e,t,i,r){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Fh(t,r?i:null),l=!1;a?l=!0:i instanceof Ne?(a=d_(t,i),l=!1):(a=Ne.EMPTY_NODE,l=!1);let c=Jh(new Gi(a,l,!1),new Gi(i,r,!1));return new D0(e,c)}return o}function $O(n,e,t,i,r,s){let o=QE(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),OO(o,t),FO(o,t)}function zO(n,e,t,i){let r=e._queryIdentifier,s=[],o=[],a=Qr(n);if(r==="default")for(let[l,c]of n.views.entries())o=o.concat(rE(c,t,i)),iE(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{let l=n.views.get(r);l&&(o=o.concat(rE(l,t,i)),iE(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Qr(n)&&s.push(new(VO())(e._repo,e._path)),{removed:s,events:o}}function YE(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Hr(n,e){let t=null;for(let i of n.views.values())t=t||NO(i,e);return t}function XE(n,e){if(e._queryParams.loadsAllData())return ep(n);{let i=e._queryIdentifier;return n.views.get(i)}}function JE(n,e){return XE(n,e)!=null}function Qr(n){return ep(n)!=null}function ep(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var zh;function jO(n){ie(!zh,"__referenceConstructor has already been defined"),zh=n}function BO(){return ie(zh,"Reference.ts has not been loaded"),zh}var qO=1,jh=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Sn(null),this.pendingWriteTree_=xO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function f_(n,e,t,i,r){return uO(n.pendingWriteTree_,e,t,i,r),r?Aa(n,new xa(l_(),e,t)):[]}function GO(n,e,t,i){dO(n.pendingWriteTree_,e,t,i);let r=Sn.fromObject(t);return Aa(n,new Gc(l_(),e,r))}function qr(n,e,t=!1){let i=hO(n.pendingWriteTree_,e);if(pO(n.pendingWriteTree_,e)){let s=new Sn(null);return i.snap!=null?s=s.set(Je(),!0):on(i.children,o=>{s=s.set(new Ze(o),!0)}),Aa(n,new S0(i.path,s,t))}else return[]}function tu(n,e,t){return Aa(n,new xa(c_(),e,t))}function HO(n,e,t){let i=Sn.fromObject(t);return Aa(n,new Gc(c_(),e,i))}function WO(n,e){return Aa(n,new Nh(c_(),e))}function KO(n,e,t){let i=m_(n,t);if(i){let r=g_(i),s=r.path,o=r.queryId,a=xn(s,e),l=new Nh(u_(o),a);return __(n,s,l)}else return[]}function Bh(n,e,t,i,r=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||JE(o,e))){let l=zO(o,e,t,i);UO(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!r){let d=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(s,(p,m)=>Qr(m));if(d&&!h){let p=n.syncPointTree_.subtree(s);if(!p.isEmpty()){let m=XO(p);for(let y=0;y<m.length;++y){let b=m[y],S=b.query,k=nT(n,b);n.listenProvider_.startListening(Lc(S),Wc(n,S),k.hashFn,k.onComplete)}}}!h&&c.length>0&&!i&&(d?n.listenProvider_.stopListening(Lc(e),null):c.forEach(p=>{let m=n.queryToTagMap.get(np(p));n.listenProvider_.stopListening(Lc(p),m)}))}JO(n,c)}return a}function ZE(n,e,t,i){let r=m_(n,i);if(r!=null){let s=g_(r),o=s.path,a=s.queryId,l=xn(o,e),c=new xa(u_(a),l,t);return __(n,o,c)}else return[]}function QO(n,e,t,i){let r=m_(n,i);if(r){let s=g_(r),o=s.path,a=s.queryId,l=xn(o,e),c=Sn.fromObject(t),d=new Gc(u_(a),l,c);return __(n,o,d)}else return[]}function M0(n,e,t,i=!1){let r=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(p,m)=>{let y=xn(p,r);s=s||Hr(m,y),o=o||Qr(m)});let a=n.syncPointTree_.get(r);a?(o=o||Qr(a),s=s||Hr(a,Je())):(a=new $h,n.syncPointTree_=n.syncPointTree_.set(r,a));let l;s!=null?l=!0:(l=!1,s=Ne.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((m,y)=>{let b=Hr(y,Je());b&&(s=s.updateImmediateChild(m,b))}));let c=JE(a,e);if(!c&&!e._queryParams.loadsAllData()){let p=np(e);ie(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");let m=ZO();n.queryToTagMap.set(p,m),n.tagToQueryMap.set(m,p)}let d=Zh(n.pendingWriteTree_,r),h=$O(a,e,t,d,s,l);if(!c&&!o&&!i){let p=XE(a,e);h=h.concat(eF(n,e,p))}return h}function tp(n,e,t){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let l=xn(o,e),c=Hr(a,l);if(c)return c});return BE(r,e,s,t,!0)}function YO(n,e){let t=e._path,i=null;n.syncPointTree_.foreachOnPath(t,(c,d)=>{let h=xn(c,t);i=i||Hr(d,h)});let r=n.syncPointTree_.get(t);r?i=i||Hr(r,Je()):(r=new $h,n.syncPointTree_=n.syncPointTree_.set(t,r));let s=i!=null,o=s?new Gi(i,!0,!1):null,a=Zh(n.pendingWriteTree_,e._path),l=QE(r,e,a,s?o.getNode():Ne.EMPTY_NODE,s);return MO(l)}function Aa(n,e){return eT(e,n.syncPointTree_,null,Zh(n.pendingWriteTree_,Je()))}function eT(n,e,t,i){if(ze(n.path))return tT(n,e,t,i);{let r=e.get(Je());t==null&&r!=null&&(t=Hr(r,Je()));let s=[],o=$e(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){let c=t?t.getImmediateChild(o):null,d=qE(i,o);s=s.concat(eT(a,l,c,d))}return r&&(s=s.concat(p_(r,n,i,t))),s}}function tT(n,e,t,i){let r=e.get(Je());t==null&&r!=null&&(t=Hr(r,Je()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,c=qE(i,o),d=n.operationForChild(o);d&&(s=s.concat(tT(d,a,l,c)))}),r&&(s=s.concat(p_(r,n,i,t))),s}function nT(n,e){let t=e.query,i=Wc(n,t);return{hashFn:()=>(DO(e)||Ne.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?KO(n,t._path,i):WO(n,t._path);{let s=uN(r,t);return Bh(n,t,null,s)}}}}function Wc(n,e){let t=np(e);return n.queryToTagMap.get(t)}function np(n){return n._path.toString()+"$"+n._queryIdentifier}function m_(n,e){return n.tagToQueryMap.get(e)}function g_(n){let e=n.indexOf("$");return ie(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ze(n.substr(0,e))}}function __(n,e,t){let i=n.syncPointTree_.get(e);ie(i,"Missing sync point for query tag that we're tracking");let r=Zh(n.pendingWriteTree_,e);return p_(i,t,r,null)}function XO(n){return n.fold((e,t,i)=>{if(t&&Qr(t))return[ep(t)];{let r=[];return t&&(r=YE(t)),on(i,(s,o)=>{r=r.concat(o)}),r}})}function Lc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(BO())(n._repo,n._path):n}function JO(n,e){for(let t=0;t<e.length;++t){let i=e[t];if(!i._queryParams.loadsAllData()){let r=np(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function ZO(){return qO++}function eF(n,e,t){let i=e._path,r=Wc(n,e),s=nT(n,t),o=n.listenProvider_.startListening(Lc(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)ie(!Qr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,d,h)=>{if(!ze(c)&&d&&Qr(d))return[ep(d).query];{let p=[];return d&&(p=p.concat(YE(d).map(m=>m.query))),on(h,(m,y)=>{p=p.concat(y)}),p}});for(let c=0;c<l.length;++c){let d=l[c];n.listenProvider_.stopListening(Lc(d),Wc(n,d))}}return o}var N0=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},O0=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=yt(this.path_,e);return new n(this.syncTree_,t)}node(){return tp(this.syncTree_,this.path_)}},tF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},oE=function(n,e,t){if(!n||typeof n!="object")return n;if(ie(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return nF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return iF(n[".sv"],e);ie(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},nF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ie(!1,"Unexpected server value: "+n)}},iF=function(n,e,t){n.hasOwnProperty("increment")||ie(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&ie(!1,"Unexpected increment value: "+i);let r=e.node();if(ie(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},iT=function(n,e,t,i){return w_(e,new O0(t,n),i)},v_=function(n,e,t){return w_(n,new N0(e),t)};function w_(n,e,t){let i=n.getPriority().val(),r=oE(i,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=oE(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new wa(a,Tt(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new wa(r))),o.forEachChild(pt,(a,l)=>{let c=w_(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var Kc=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function ip(n,e){let t=e instanceof Ze?e:new Ze(e),i=n,r=$e(t);for(;r!==null;){let s=Nr(i.node.children,r)||{children:{},childCount:0};i=new Kc(r,i,s),t=ut(t),r=$e(t)}return i}function Ks(n){return n.node.value}function y_(n,e){n.node.value=e,F0(n)}function rT(n){return n.node.childCount>0}function rF(n){return Ks(n)===void 0&&!rT(n)}function rp(n,e){on(n.node.children,(t,i)=>{e(new Kc(t,n,i))})}function sT(n,e,t,i){t&&!i&&e(n),rp(n,r=>{sT(r,e,!0,i)}),t&&i&&e(n)}function sF(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function nu(n){return new Ze(n.parent===null?n.name:nu(n.parent)+"/"+n.name)}function F0(n){n.parent!==null&&oF(n.parent,n.name,n)}function oF(n,e,t){let i=rF(t),r=ai(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,F0(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,F0(n))}var aF=/[\[\].#$\/\u0000-\u001F\u007F]/,lF=/[\[\].#$\u0000-\u001F\u007F]/,Wg=10*1024*1024,sp=function(n){return typeof n=="string"&&n.length!==0&&!aF.test(n)},oT=function(n){return typeof n=="string"&&n.length!==0&&!lF.test(n)},cF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oT(n)},Qc=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Yh(n)||n&&typeof n=="object"&&ai(n,".sv")},Hi=function(n,e,t,i){i&&e===void 0||iu(Dn(n,"value"),e,t)},iu=function(n,e,t){let i=t instanceof Ze?new o0(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+js(i));if(typeof e=="function")throw new Error(n+"contains a function "+js(i)+" with contents = "+e.toString());if(Yh(e))throw new Error(n+"contains "+e.toString()+" "+js(i));if(typeof e=="string"&&e.length>Wg/3&&ec(e)>Wg)throw new Error(n+"contains a string greater than "+Wg+" utf8 bytes "+js(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(on(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!sp(o)))throw new Error(n+" contains an invalid key ("+o+") "+js(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);UN(i,o),iu(n,a,i),$N(i)}),r&&s)throw new Error(n+' contains ".value" child '+js(i)+" in addition to actual children.")}},uF=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];let s=Uc(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!sp(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(VN);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&di(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},aT=function(n,e,t,i){if(i&&e===void 0)return;let r=Dn(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");let s=[];on(e,(o,a)=>{let l=new Ze(o);if(iu(r,a,yt(t,l)),i_(l)===".priority"&&!Qc(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),uF(r,s)},b_=function(n,e,t){if(!(t&&e===void 0)){if(Yh(e))throw new Error(Dn(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qc(e))throw new Error(Dn(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ru=function(n,e,t,i){if(!(i&&t===void 0)&&!sp(t))throw new Error(Dn(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Pa=function(n,e,t,i){if(!(i&&t===void 0)&&!oT(t))throw new Error(Dn(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},dF=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Pa(n,e,t,i)},Gn=function(n,e){if($e(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},lT=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sp(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!cF(t))throw new Error(Dn(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var L0=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function op(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();t!==null&&!r_(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function cT(n,e,t){op(n,t),uT(n,i=>r_(i,e))}function Hn(n,e,t){op(n,t),uT(n,i=>di(i,e)||di(e,i))}function uT(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;e(s)?(hF(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function hF(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();qs&&sn("event: "+t.toString()),Ca(i)}}}var dT="repo_interrupt",pF=25,V0=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new L0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Mh(),this.transactionQueueTree_=new Kc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function fF(n,e,t){if(n.stats_=n_(n.repoInfo_),n.forceRestClient_||fN())n.server_=new _0(n.repoInfo_,(i,r,s,o)=>{aE(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>lE(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new s_(n.repoInfo_,e,(i,r,s,o)=>{aE(n,i,r,s,o)},i=>{lE(n,i)},i=>{mF(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=gN(n.repoInfo_,()=>new x0(n.stats_,n.server_)),n.infoData_=new v0,n.infoSyncTree_=new jh({startListening:(i,r,s,o)=>{let a=[],l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=tu(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),x_(n,"connected",!1),n.serverSyncTree_=new jh({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{let c=o(a,l);Hn(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function hT(n){let t=n.infoData_.getNode(new Ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function su(n){return tF({timestamp:hT(n)})}function aE(n,e,t,i,r){n.dataUpdateCount++;let s=new Ze(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){let l=Zl(t,c=>Tt(c));o=QO(n.serverSyncTree_,s,l,r)}else{let l=Tt(t);o=ZE(n.serverSyncTree_,s,l,r)}else if(i){let l=Zl(t,c=>Tt(c));o=HO(n.serverSyncTree_,s,l)}else{let l=Tt(t);o=tu(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ea(n,s)),Hn(n.eventQueue_,a,o)}function lE(n,e){x_(n,"connected",e),e===!1&&vF(n)}function mF(n,e){on(e,(t,i)=>{x_(n,t,i)})}function x_(n,e,t){let i=new Ze("/.info/"+e),r=Tt(t);n.infoData_.updateSnapshot(i,r);let s=tu(n.infoSyncTree_,i,r);Hn(n.eventQueue_,i,s)}function ap(n){return n.nextWriteId_++}function gF(n,e,t){let i=YO(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(r=>{let s=Tt(r).withIndex(e._queryParams.getIndex());M0(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=tu(n.serverSyncTree_,e._path,s);else{let a=Wc(n.serverSyncTree_,e);o=ZE(n.serverSyncTree_,e._path,s,a)}return Hn(n.eventQueue_,e._path,o),Bh(n.serverSyncTree_,e,t,null,!0),s},r=>(Ra(n,"get for query "+zt(e)+" failed: "+r),Promise.reject(new Error(r))))}function S_(n,e,t,i,r){Ra(n,"set",{path:e.toString(),value:t,priority:i});let s=su(n),o=Tt(t,i),a=tp(n.serverSyncTree_,e),l=v_(o,a,s),c=ap(n),d=f_(n.serverSyncTree_,e,l,c,!0);op(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(p,m)=>{let y=p==="ok";y||gn("set at "+e+" failed: "+p);let b=qr(n.serverSyncTree_,c,!y);Hn(n.eventQueue_,e,b),Yr(n,r,p,m)});let h=T_(n,e);Ea(n,h),Hn(n.eventQueue_,h,[])}function _F(n,e,t,i){Ra(n,"update",{path:e.toString(),value:t});let r=!0,s=su(n),o={};if(on(t,(a,l)=>{r=!1,o[a]=iT(yt(e,a),Tt(l),n.serverSyncTree_,s)}),r)sn("update() called with empty data.  Don't do anything."),Yr(n,i,"ok",void 0);else{let a=ap(n),l=GO(n.serverSyncTree_,e,o,a);op(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,d)=>{let h=c==="ok";h||gn("update at "+e+" failed: "+c);let p=qr(n.serverSyncTree_,a,!h),m=p.length>0?Ea(n,e):e;Hn(n.eventQueue_,m,p),Yr(n,i,c,d)}),on(t,c=>{let d=T_(n,yt(e,c));Ea(n,d)}),Hn(n.eventQueue_,e,[])}}function vF(n){Ra(n,"onDisconnectEvents");let e=su(n),t=Mh();y0(n.onDisconnect_,Je(),(r,s)=>{let o=iT(r,s,n.serverSyncTree_,e);Ia(t,r,o)});let i=[];y0(t,Je(),(r,s)=>{i=i.concat(tu(n.serverSyncTree_,r,s));let o=T_(n,r);Ea(n,o)}),n.onDisconnect_=Mh(),Hn(n.eventQueue_,Je(),i)}function wF(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&w0(n.onDisconnect_,e),Yr(n,t,i,r)})}function cE(n,e,t,i){let r=Tt(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{s==="ok"&&Ia(n.onDisconnect_,e,r),Yr(n,i,s,o)})}function yF(n,e,t,i,r){let s=Tt(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Ia(n.onDisconnect_,e,s),Yr(n,r,o,a)})}function bF(n,e,t,i){if(Vd(t)){sn("onDisconnect().update() called with empty data.  Don't do anything."),Yr(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{r==="ok"&&on(t,(o,a)=>{let l=Tt(a);Ia(n.onDisconnect_,yt(e,o),l)}),Yr(n,i,r,s)})}function xF(n,e,t){let i;$e(e._path)===".info"?i=M0(n.infoSyncTree_,e,t):i=M0(n.serverSyncTree_,e,t),cT(n.eventQueue_,e._path,i)}function U0(n,e,t){let i;$e(e._path)===".info"?i=Bh(n.infoSyncTree_,e,t):i=Bh(n.serverSyncTree_,e,t),cT(n.eventQueue_,e._path,i)}function pT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(dT)}function SF(n){n.persistentConnection_&&n.persistentConnection_.resume(dT)}function Ra(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),sn(t,...e)}function Yr(n,e,t,i){e&&Ca(()=>{if(t==="ok")e(null);else{let r=(t||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,e(o)}})}function EF(n,e,t,i,r,s){Ra(n,"transaction on "+e);let o={path:e,update:t,onComplete:i,status:null,order:hE(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=E_(n,e,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{iu("transaction failed: Data returned ",l,o.path),o.status=0;let c=ip(n.transactionQueueTree_,e),d=Ks(c)||[];d.push(o),y_(c,d);let h;typeof l=="object"&&l!==null&&ai(l,".priority")?(h=Nr(l,".priority"),ie(Qc(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(tp(n.serverSyncTree_,e)||Ne.EMPTY_NODE).getPriority().val();let p=su(n),m=Tt(l,h),y=v_(m,a,p);o.currentOutputSnapshotRaw=m,o.currentOutputSnapshotResolved=y,o.currentWriteId=ap(n);let b=f_(n.serverSyncTree_,e,y,o.currentWriteId,o.applyLocally);Hn(n.eventQueue_,e,b),lp(n,n.transactionQueueTree_)}}function E_(n,e,t){return tp(n.serverSyncTree_,e,t)||Ne.EMPTY_NODE}function lp(n,e=n.transactionQueueTree_){if(e||cp(n,e),Ks(e)){let t=mT(n,e);ie(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&TF(n,nu(e),t)}else rT(e)&&rp(e,t=>{lp(n,t)})}function TF(n,e,t){let i=t.map(c=>c.currentWriteId),r=E_(n,e,i),s=r,o=r.hash();for(let c=0;c<t.length;c++){let d=t[c];ie(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let h=xn(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Ra(n,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let h=[];for(let p=0;p<t.length;p++)t[p].status=2,d=d.concat(qr(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&h.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();cp(n,ip(n.transactionQueueTree_,e)),lp(n,n.transactionQueueTree_),Hn(n.eventQueue_,e,d);for(let p=0;p<h.length;p++)Ca(h[p])}else{if(c==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{gn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}Ea(n,e)}},o)}function Ea(n,e){let t=fT(n,e),i=nu(t),r=mT(n,t);return CF(n,r,i),i}function CF(n,e,t){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=xn(t,l.path),d=!1,h;if(ie(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,r=r.concat(qr(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=pF)d=!0,h="maxretry",r=r.concat(qr(n.serverSyncTree_,l.currentWriteId,!0));else{let p=E_(n,l.path,o);l.currentInputSnapshot=p;let m=e[a].update(p.val());if(m!==void 0){iu("transaction failed: Data returned ",m,l.path);let y=Tt(m);typeof m=="object"&&m!=null&&ai(m,".priority")||(y=y.updatePriority(p.getPriority()));let S=l.currentWriteId,k=su(n),A=v_(y,p,k);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=A,l.currentWriteId=ap(n),o.splice(o.indexOf(S),1),r=r.concat(f_(n.serverSyncTree_,l.path,A,l.currentWriteId,l.applyLocally)),r=r.concat(qr(n.serverSyncTree_,S,!0))}else d=!0,h="nodata",r=r.concat(qr(n.serverSyncTree_,l.currentWriteId,!0))}Hn(n.eventQueue_,t,r),r=[],d&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}cp(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Ca(i[a]);lp(n,n.transactionQueueTree_)}function fT(n,e){let t,i=n.transactionQueueTree_;for(t=$e(e);t!==null&&Ks(i)===void 0;)i=ip(i,t),e=ut(e),t=$e(e);return i}function mT(n,e){let t=[];return gT(n,e,t),t.sort((i,r)=>i.order-r.order),t}function gT(n,e,t){let i=Ks(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);rp(e,r=>{gT(n,r,t)})}function cp(n,e){let t=Ks(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,y_(e,t.length>0?t:void 0)}rp(e,i=>{cp(n,i)})}function T_(n,e){let t=nu(fT(n,e)),i=ip(n.transactionQueueTree_,e);return sF(i,r=>{Kg(n,r)}),Kg(n,i),sT(i,r=>{Kg(n,r)}),t}function Kg(n,e){let t=Ks(e);if(t){let i=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(ie(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(ie(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(qr(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?y_(e,void 0):t.length=s+1,Hn(n.eventQueue_,nu(e),r);for(let o=0;o<i.length;o++)Ca(i[o])}}function IF(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function AF(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):gn(`Invalid query segment '${t}' in query '${n}'`)}return e}var $0=function(n,e){let t=PF(n),i=t.namespace;t.domain==="firebase.com"&&qi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&qi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||sN();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Th(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new Ze(t.pathString)}},PF=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let d=n.indexOf("/");d===-1&&(d=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(d,h)),d<h&&(r=IF(n.substring(d,h)));let p=AF(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let m=e.slice(0,c);if(m.toLowerCase()==="localhost")t="localhost";else if(m.split(".").length<=2)t=m;else{let y=e.indexOf(".");i=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=i}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var uE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",RF=function(){let n=0,e=[];return function(t){let i=t===n;n=t;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=uE.charAt(t%64),t=Math.floor(t/64);ie(t===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=uE.charAt(e[r]);return ie(o.length===20,"nextPushId: Length should be 20."),o}}();var qh=class{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zt(this.snapshot.exportVal())}},Gh=class{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Yc=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ie(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Hh=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new tn;return wF(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Gn("OnDisconnect.remove",this._path);let e=new tn;return cE(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Gn("OnDisconnect.set",this._path),Hi("OnDisconnect.set",e,this._path,!1);let t=new tn;return cE(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Gn("OnDisconnect.setWithPriority",this._path),Hi("OnDisconnect.setWithPriority",e,this._path,!1),b_("OnDisconnect.setWithPriority",t,!1);let i=new tn;return yF(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Gn("OnDisconnect.update",this._path),aT("OnDisconnect.update",e,this._path,!1);let t=new tn;return bF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var En=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return ze(this._path)?null:i_(this._path)}get ref(){return new Wn(this._repo,this._path)}get _queryIdentifier(){let e=YS(this._queryParams),t=t_(e);return t==="{}"?"default":t}get _queryObject(){return YS(this._queryParams)}isEqual(e){if(e=qe(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=r_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+LN(this._path)}};function up(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Jr(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Bi){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Wr)throw new Error(i);if(typeof e!="string")throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==hr)throw new Error(i);if(typeof t!="string")throw new Error(r)}}else if(n.getIndex()===pt){if(e!=null&&!Qc(e)||t!=null&&!Qc(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ie(n.getIndex()instanceof $c||n.getIndex()===a_,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dp(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Wn=class n extends En{constructor(e,t){super(e,t,new qc,!1)}get parent(){let e=ME(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Ta=class n{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Ze(e),i=Xr(this.ref,e);return new n(this._node.getChild(t),i,pt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new n(r,Xr(this.ref,i),pt)))}hasChild(e){let t=new Ze(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function C_(n,e){return n=qe(n),n._checkNotDeleted("ref"),e!==void 0?Xr(n._root,e):n._root}function I_(n,e){n=qe(n),n._checkNotDeleted("refFromURL");let t=$0(e,n._repo.repoInfo_.nodeAdmin);lT("refFromURL",t);let i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&qi("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),C_(n,t.path.toString())}function Xr(n,e){return n=qe(n),$e(n._path)===null?dF("child","path",e,!1):Pa("child","path",e,!1),new Wn(n._repo,yt(n._path,e))}function _T(n,e){n=qe(n),Gn("push",n._path),Hi("push",e,n._path,!0);let t=hT(n._repo),i=RF(t),r=Xr(n,i),s=Xr(n,i),o;return e!=null?o=hp(s,e).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function vT(n){return Gn("remove",n._path),hp(n,null)}function hp(n,e){n=qe(n),Gn("set",n._path),Hi("set",e,n._path,!1);let t=new tn;return S_(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function wT(n,e){n=qe(n),Gn("setPriority",n._path),b_("setPriority",e,!1);let t=new tn;return S_(n._repo,yt(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function yT(n,e,t){if(Gn("setWithPriority",n._path),Hi("setWithPriority",e,n._path,!1),b_("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let i=new tn;return S_(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}function bT(n,e){aT("update",e,n._path,!1);let t=new tn;return _F(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function xT(n){n=qe(n);let e=new Yc(()=>{}),t=new Xc(e);return gF(n._repo,n,t).then(i=>new Ta(i,new Wn(n._repo,n._path),n._queryParams.getIndex()))}var Xc=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let i=t._queryParams.getIndex();return new qh("value",this,new Ta(e.snapshotNode,new Wn(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gh(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Wh=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gh(this,e,t):null}createEvent(e,t){ie(e.childName!=null,"Child events should have a childName.");let i=Xr(new Wn(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new qh(e.type,this,new Ta(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function ou(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let l=t,c=(d,h)=>{U0(n._repo,n,a),l(d,h)};c.userCallback=t.userCallback,c.context=t.context,t=c}let o=new Yc(t,s||void 0),a=e==="value"?new Xc(o):new Wh(e,o);return xF(n._repo,n,a),()=>U0(n._repo,n,a)}function pp(n,e,t,i){return ou(n,"value",e,t,i)}function A_(n,e,t,i){return ou(n,"child_added",e,t,i)}function P_(n,e,t,i){return ou(n,"child_changed",e,t,i)}function R_(n,e,t,i){return ou(n,"child_moved",e,t,i)}function k_(n,e,t,i){return ou(n,"child_removed",e,t,i)}function D_(n,e,t){let i=null,r=t?new Yc(t):null;e==="value"?i=new Xc(r):e&&(i=new Wh(e,r)),U0(n._repo,n,i)}var Kn=class{},Kh=class extends Kn{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Hi("endAt",this._value,e._path,!0);let t=g0(e._queryParams,this._value,this._key);if(dp(t),Jr(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new En(e._repo,e._path,t,e._orderByCalled)}};function ST(n,e){return ru("endAt","key",e,!0),new Kh(n,e)}var z0=class extends Kn{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Hi("endBefore",this._value,e._path,!1);let t=nO(e._queryParams,this._value,this._key);if(dp(t),Jr(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new En(e._repo,e._path,t,e._orderByCalled)}};function ET(n,e){return ru("endBefore","key",e,!0),new z0(n,e)}var Qh=class extends Kn{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Hi("startAt",this._value,e._path,!0);let t=m0(e._queryParams,this._value,this._key);if(dp(t),Jr(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new En(e._repo,e._path,t,e._orderByCalled)}};function TT(n=null,e){return ru("startAt","key",e,!0),new Qh(n,e)}var j0=class extends Kn{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Hi("startAfter",this._value,e._path,!1);let t=tO(e._queryParams,this._value,this._key);if(dp(t),Jr(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new En(e._repo,e._path,t,e._orderByCalled)}};function CT(n,e){return ru("startAfter","key",e,!0),new j0(n,e)}var B0=class extends Kn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new En(e._repo,e._path,ZN(e._queryParams,this._limit),e._orderByCalled)}};function IT(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new B0(n)}var q0=class extends Kn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new En(e._repo,e._path,eO(e._queryParams,this._limit),e._orderByCalled)}};function AT(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new q0(n)}var G0=class extends Kn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){up(e,"orderByChild");let t=new Ze(this._path);if(ze(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new $c(t),r=Xh(e._queryParams,i);return Jr(r),new En(e._repo,e._path,r,!0)}};function PT(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pa("orderByChild","path",n,!1),new G0(n)}var H0=class extends Kn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){up(e,"orderByKey");let t=Xh(e._queryParams,Bi);return Jr(t),new En(e._repo,e._path,t,!0)}};function RT(){return new H0}var W0=class extends Kn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){up(e,"orderByPriority");let t=Xh(e._queryParams,pt);return Jr(t),new En(e._repo,e._path,t,!0)}};function kT(){return new W0}var K0=class extends Kn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){up(e,"orderByValue");let t=Xh(e._queryParams,a_);return Jr(t),new En(e._repo,e._path,t,!0)}};function DT(){return new K0}var Q0=class extends Kn{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Hi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Kh(this._value,this._key)._apply(new Qh(this._value,this._key)._apply(e))}};function MT(n,e){return ru("equalTo","key",e,!0),new Q0(n,e)}function pi(n,...e){let t=qe(n);for(let i of e)t=i._apply(t);return t}LO(Wn);jO(Wn);var kF="FIREBASE_DATABASE_EMULATOR_HOST",Y0={},DF=!1;function MF(n,e,t,i){n.repoInfo_=new Th(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function M_(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||qi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=$0(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[kF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=$0(s,r),a=o.repoInfo):l=!o.repoInfo.secure;let d=r&&l?new Nc(Nc.OWNER):new e0(n.name,n.options,e);lT("Invalid Firebase Database URL",o),ze(o.path)||qi("Database URL must point to the root of a Firebase Database (not including a child path).");let h=OF(a,n,d,new Zg(n.name,t));return new X0(h,n)}function NF(n,e){let t=Y0[e];(!t||t[n.key]!==n)&&qi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),pT(n),delete t[n.key]}function OF(n,e,t,i){let r=Y0[e.name];r||(r={},Y0[e.name]=r);let s=r[n.toURLString()];return s&&qi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new V0(n,DF,t,i),r[n.toURLString()]=s,s}var X0=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wn(this._repo,Je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(NF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qi("Cannot call "+e+" on a deleted database.")}};function NT(){DE.IS_TRANSPORT_INITIALIZED&&gn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function OT(){NT(),Vc.forceDisallow()}function FT(){NT(),ma.forceDisallow(),Vc.forceAllow()}function LT(n,e,t,i={}){n=qe(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&qi("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Nc(Nc.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Od(i.mockUserToken,n.app.options.projectId);s=new Nc(o)}MF(r,e,t,s)}function VT(n){n=qe(n),n._checkNotDeleted("goOffline"),pT(n._repo)}function UT(n){n=qe(n),n._checkNotDeleted("goOnline"),SF(n._repo)}function $T(n,e){fE(n,e)}function FF(n){e_($d),Vs(new jn("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return M_(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),Ti(MS,NS,n),Ti(MS,NS,"esm2017")}var LF={".sv":"timestamp"};function zT(){return LF}function jT(n){return{".sv":{increment:n}}}var J0=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function BT(n,e,t){var i;if(n=qe(n),Gn("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let r=(i=t?.applyLocally)!==null&&i!==void 0?i:!0,s=new tn,o=(l,c,d)=>{let h=null;l?s.reject(l):(h=new Ta(d,new Wn(n._repo,n._path),pt),s.resolve(new J0(c,h)))},a=pp(n,()=>{});return EF(n._repo,n._path,e,o,a,r),s.promise}s_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};s_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};FF();var VF="@firebase/database-compat",UF="1.0.8";var $F=new Or("@firebase/database-compat"),qT=function(n){let e="FIREBASE WARNING: "+n;$F.warn(e)};var zF=function(n,e,t,i){if(!(i&&t===void 0)&&typeof t!="boolean")throw new Error(Dn(n,e)+"must be a boolean.")},jF=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Dn(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var N_=class{constructor(e){this._delegate=e}cancel(e){Ie("OnDisconnect.cancel",0,1,arguments.length),Xt("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){Ie("OnDisconnect.remove",0,1,arguments.length),Xt("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){Ie("OnDisconnect.set",1,2,arguments.length),Xt("OnDisconnect.set","onComplete",t,!0);let i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){Ie("OnDisconnect.setWithPriority",2,3,arguments.length),Xt("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if(Ie("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,qT("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xt("OnDisconnect.update","onComplete",t,!0);let i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}};var O_=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Ie("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Qs=class n{constructor(e,t){this._database=e,this._delegate=t}val(){return Ie("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Ie("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Ie("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Ie("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Ie("DataSnapshot.child",0,1,arguments.length),e=String(e),Pa("DataSnapshot.child","path",e,!1),new n(this._database,this._delegate.child(e))}hasChild(e){return Ie("DataSnapshot.hasChild",1,1,arguments.length),Pa("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Ie("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Ie("DataSnapshot.forEach",1,1,arguments.length),Xt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new n(this._database,t)))}hasChildren(){return Ie("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Ie("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Ie("DataSnapshot.ref",0,0,arguments.length),new pr(this._database,this._delegate.ref)}get ref(){return this.getRef()}},fp=class n{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;Ie("Query.on",2,4,arguments.length),Xt("Query.on","callback",t,!1);let o=n.getCancelAndContextArgs_("Query.on",i,r),a=(c,d)=>{t.call(o.context,new Qs(this.database,c),d)};a.userCallback=t,a.context=o.context;let l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return pp(this._delegate,a,l),t;case"child_added":return A_(this._delegate,a,l),t;case"child_removed":return k_(this._delegate,a,l),t;case"child_changed":return P_(this._delegate,a,l),t;case"child_moved":return R_(this._delegate,a,l),t;default:throw new Error(Dn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if(Ie("Query.off",0,3,arguments.length),jF("Query.off",e,!0),Xt("Query.off","callback",t,!0),Lm("Query.off","context",i,!0),t){let r=()=>{};r.userCallback=t,r.context=i,D_(this._delegate,e,r)}else D_(this._delegate,e)}get(){return xT(this._delegate).then(e=>new Qs(this.database,e))}once(e,t,i,r){Ie("Query.once",1,4,arguments.length),Xt("Query.once","callback",t,!0);let s=n.getCancelAndContextArgs_("Query.once",i,r),o=new tn,a=(c,d)=>{let h=new Qs(this.database,c);t&&t.call(s.context,h,d),o.resolve(h)};a.userCallback=t,a.context=s.context;let l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":pp(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":A_(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":k_(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":P_(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":R_(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Dn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return Ie("Query.limitToFirst",1,1,arguments.length),new n(this.database,pi(this._delegate,IT(e)))}limitToLast(e){return Ie("Query.limitToLast",1,1,arguments.length),new n(this.database,pi(this._delegate,AT(e)))}orderByChild(e){return Ie("Query.orderByChild",1,1,arguments.length),new n(this.database,pi(this._delegate,PT(e)))}orderByKey(){return Ie("Query.orderByKey",0,0,arguments.length),new n(this.database,pi(this._delegate,RT()))}orderByPriority(){return Ie("Query.orderByPriority",0,0,arguments.length),new n(this.database,pi(this._delegate,kT()))}orderByValue(){return Ie("Query.orderByValue",0,0,arguments.length),new n(this.database,pi(this._delegate,DT()))}startAt(e=null,t){return Ie("Query.startAt",0,2,arguments.length),new n(this.database,pi(this._delegate,TT(e,t)))}startAfter(e=null,t){return Ie("Query.startAfter",0,2,arguments.length),new n(this.database,pi(this._delegate,CT(e,t)))}endAt(e=null,t){return Ie("Query.endAt",0,2,arguments.length),new n(this.database,pi(this._delegate,ST(e,t)))}endBefore(e=null,t){return Ie("Query.endBefore",0,2,arguments.length),new n(this.database,pi(this._delegate,ET(e,t)))}equalTo(e,t){return Ie("Query.equalTo",1,2,arguments.length),new n(this.database,pi(this._delegate,MT(e,t)))}toString(){return Ie("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Ie("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Ie("Query.isEqual",1,1,arguments.length),!(e instanceof n)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){let r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,Xt(e,"cancel",r.cancel,!0),r.context=i,Lm(e,"context",r.context,!0);else if(t)if(typeof t=="object"&&t!==null)r.context=t;else if(typeof t=="function")r.cancel=t;else throw new Error(Dn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new pr(this.database,new Wn(this._delegate._repo,this._delegate._path))}},pr=class n extends fp{constructor(e,t){super(e,new En(t._repo,t._path,new qc,!1)),this.database=e,this._delegate=t}getKey(){return Ie("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Ie("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new n(this.database,Xr(this._delegate,e))}getParent(){Ie("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new n(this.database,e):null}getRoot(){return Ie("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(e,t){Ie("Reference.set",1,2,arguments.length),Xt("Reference.set","onComplete",t,!0);let i=hp(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if(Ie("Reference.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,qT("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Gn("Reference.update",this._delegate._path),Xt("Reference.update","onComplete",t,!0);let i=bT(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){Ie("Reference.setWithPriority",2,3,arguments.length),Xt("Reference.setWithPriority","onComplete",i,!0);let r=yT(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){Ie("Reference.remove",0,1,arguments.length),Xt("Reference.remove","onComplete",e,!0);let t=vT(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){Ie("Reference.transaction",1,3,arguments.length),Xt("Reference.transaction","transactionUpdate",e,!1),Xt("Reference.transaction","onComplete",t,!0),zF("Reference.transaction","applyLocally",i,!0);let r=BT(this._delegate,e,{applyLocally:i}).then(s=>new O_(s.committed,new Qs(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){Ie("Reference.setPriority",1,2,arguments.length),Xt("Reference.setPriority","onComplete",t,!0);let i=wT(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){Ie("Reference.push",0,2,arguments.length),Xt("Reference.push","onComplete",t,!0);let i=_T(this._delegate,e),r=i.then(o=>new n(this.database,o));t&&r.then(()=>t(null),o=>t(o));let s=new n(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Gn("Reference.onDisconnect",this._delegate._path),new N_(new Hh(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Ys=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:OT,forceLongPolling:FT}}useEmulator(e,t,i={}){LT(this._delegate,e,t,i)}ref(e){if(Ie("database.ref",0,1,arguments.length),e instanceof pr){let t=I_(this._delegate,e.toString());return new pr(this,t)}else{let t=C_(this._delegate,e);return new pr(this,t)}}refFromURL(e){Ie("database.refFromURL",1,1,arguments.length);let i=I_(this._delegate,e);return new pr(this,i)}goOffline(){return Ie("database.goOffline",0,0,arguments.length),VT(this._delegate)}goOnline(){return Ie("database.goOnline",0,0,arguments.length),UT(this._delegate)}};Ys.ServerValue={TIMESTAMP:zT(),increment:n=>jT(n)};function BF({app:n,url:e,version:t,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){e_(t);let a=new Vm("database-standalone"),l=new Ud("auth-internal",a);l.setComponent(new jn("auth-internal",()=>i,"PRIVATE"));let c;return r&&(c=new Ud("app-check-internal",a),c.setComponent(new jn("app-check-internal",()=>r,"PRIVATE"))),{instance:new Ys(M_(n,l,c,e,o),n),namespace:s}}var qF=Object.freeze({__proto__:null,initStandalone:BF});var GF=Ys.ServerValue;function HF(n){n.INTERNAL.registerComponent(new jn("database-compat",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Ys(r,i)},"PUBLIC").setServiceProps({Reference:pr,Query:fp,Database:Ys,DataSnapshot:Qs,enableLogging:$T,INTERNAL:qF,ServerValue:GF}).setMultipleInstances(!0)),n.registerVersion(VF,UF)}HF(nn);function au(n,e,t="on",i=$o){return new kr(r=>{let s=null;return s=n[t](e,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),t==="once"&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),t==="on"?{unsubscribe(){s!=null&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(Ce(r=>{let{snapshot:s,prevKey:o}=r,a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),p1())}function WF(n){return typeof n=="string"}function KF(n){return typeof n.exportVal=="function"}function QT(n){return n==null}function YT(n){return typeof n.set=="function"}function GT(n,e){return YT(e)?e:n.ref(e)}function XT(n,e){if(WF(n))return e.stringCase();if(YT(n))return e.firebaseCase();if(KF(n))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function JT(n){return(QT(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ZT(n,e,t){e=JT(e);let i=e.map(r=>au(n,r,"on",t));return zl(...i)}function QF(n,e,t){let i=ZT(n,e).pipe(lr((r,s)=>[...r,s],[]));return XF(n,i,t)}function YF(n,e){return au(n,"value","on",e).pipe(Ce(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}function XF(n,e,t){return YF(n,t).pipe(_1(e),Ce(([r,s])=>{let o=r.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),f1(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),Ce(r=>r.actions))}function HT(n,e){return function(i,r){return XT(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function JF(n){return function(t){return t?XT(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ZF(n,e,t){return au(n,"value","once",t).pipe(Yt(i=>{let r=[Te(i)];return e.forEach(s=>r.push(au(n,s,"on",t))),zl(...r).pipe(lr(tL,[]))}),gd())}function eC(n,e){let t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function eL(n,e){if(QT(e))return 0;{let t=eC(n,e);return t===-1?n.length:t+1}}function tL(n,e){let{payload:t,prevKey:i,key:r}=e,s=eC(n,r),o=eL(n,i);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(l=>l.payload.key!==t.key),n.splice(o,0,e));else{if(i==null)return[e,...n];n=n.slice(),n.splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===r?e:a);case"child_moved":if(s>-1){let a=n.splice(s,1)[0];return n=n.slice(),n.splice(o,0,a),n}return n;default:return n}}function WT(n,e,t){return e=JT(e),ZF(n,e,t)}function nL(n,e){let t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:HT(i,"update"),set:HT(i,"set"),push:r=>i.push(r),remove:JF(i),snapshotChanges(r){return WT(n,r,t).pipe(Ot)},stateChanges(r){return ZT(n,r,t).pipe(Ot)},auditTrail(r){return QF(n,r,t).pipe(Ot)},valueChanges(r,s){return WT(n,r,t).pipe(Ce(a=>a.map(l=>s&&s.idField?et(he({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),Ot)}}}function KT(n,e){return function(){return au(n,"value","on",e)}}function iL(n,e){return{query:n,snapshotChanges(){return KT(n,e.schedulers.outsideAngular)().pipe(Ot)},update(t){return n.ref.update(t)},set(t){return n.ref.set(t)},remove(){return n.ref.remove()},valueChanges(){return KT(n,e.schedulers.outsideAngular)().pipe(Ot,Ce(i=>i.payload.exists()?i.payload.val():null))}}}var rL=new tt("angularfire2.realtimeDatabaseURL"),sL=new tt("angularfire2.database.use-emulator"),F_=(()=>{class n{schedulers;database;constructor(t,i,r,s,o,a,l,c,d,h,p,m,y,b,S){this.schedulers=a;let k=l,A=zs(t,o,i);c&&Ac(A,o,d,p,m,y,h,b),this.database=pa(`${A.name}.database.${r}`,"AngularFireDatabase",A.name,()=>{let x=o.runOutsideAngular(()=>A.database(r||void 0));return k&&x.useEmulator(...k),x},[k])}list(t,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>GT(this.database,t)),s=r;return i&&(s=i(r)),nL(s,this)}object(t){let i=this.schedulers.ngZone.runOutsideAngular(()=>GT(this.database,t));return iL(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(ae(zr),ae(jr,8),ae(rL,8),ae(Nt),ae(ht),ae(ha),ae(sL,8),ae(xh,8),ae(xc,8),ae(Sc,8),ae(Ec,8),ae(Tc,8),ae(Cc,8),ae(Ic,8),ae(dr,8))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),tC=(()=>{class n{constructor(){nn.registerVersion("angularfire",$r.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=xi({type:n});static \u0275inj=bi({providers:[F_]})}return n})();var nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iC={};var Zr,L_;(function(){var n;function e(M,C){function E(){}E.prototype=C.prototype,M.D=C.prototype,M.prototype=new E,M.prototype.constructor=M,M.C=function(D,N,O){for(var T=Array(arguments.length-2),H=2;H<arguments.length;H++)T[H-2]=arguments[H];return C.prototype[N].apply(D,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,C,E){E||(E=0);var D=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)D[N]=C.charCodeAt(E++)|C.charCodeAt(E++)<<8|C.charCodeAt(E++)<<16|C.charCodeAt(E++)<<24;else for(N=0;16>N;++N)D[N]=C[E++]|C[E++]<<8|C[E++]<<16|C[E++]<<24;C=M.g[0],E=M.g[1],N=M.g[2];var O=M.g[3],T=C+(O^E&(N^O))+D[0]+3614090360&4294967295;C=E+(T<<7&4294967295|T>>>25),T=O+(N^C&(E^N))+D[1]+3905402710&4294967295,O=C+(T<<12&4294967295|T>>>20),T=N+(E^O&(C^E))+D[2]+606105819&4294967295,N=O+(T<<17&4294967295|T>>>15),T=E+(C^N&(O^C))+D[3]+3250441966&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(O^E&(N^O))+D[4]+4118548399&4294967295,C=E+(T<<7&4294967295|T>>>25),T=O+(N^C&(E^N))+D[5]+1200080426&4294967295,O=C+(T<<12&4294967295|T>>>20),T=N+(E^O&(C^E))+D[6]+2821735955&4294967295,N=O+(T<<17&4294967295|T>>>15),T=E+(C^N&(O^C))+D[7]+4249261313&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(O^E&(N^O))+D[8]+1770035416&4294967295,C=E+(T<<7&4294967295|T>>>25),T=O+(N^C&(E^N))+D[9]+2336552879&4294967295,O=C+(T<<12&4294967295|T>>>20),T=N+(E^O&(C^E))+D[10]+4294925233&4294967295,N=O+(T<<17&4294967295|T>>>15),T=E+(C^N&(O^C))+D[11]+2304563134&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(O^E&(N^O))+D[12]+1804603682&4294967295,C=E+(T<<7&4294967295|T>>>25),T=O+(N^C&(E^N))+D[13]+4254626195&4294967295,O=C+(T<<12&4294967295|T>>>20),T=N+(E^O&(C^E))+D[14]+2792965006&4294967295,N=O+(T<<17&4294967295|T>>>15),T=E+(C^N&(O^C))+D[15]+1236535329&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(N^O&(E^N))+D[1]+4129170786&4294967295,C=E+(T<<5&4294967295|T>>>27),T=O+(E^N&(C^E))+D[6]+3225465664&4294967295,O=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(O^C))+D[11]+643717713&4294967295,N=O+(T<<14&4294967295|T>>>18),T=E+(O^C&(N^O))+D[0]+3921069994&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^O&(E^N))+D[5]+3593408605&4294967295,C=E+(T<<5&4294967295|T>>>27),T=O+(E^N&(C^E))+D[10]+38016083&4294967295,O=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(O^C))+D[15]+3634488961&4294967295,N=O+(T<<14&4294967295|T>>>18),T=E+(O^C&(N^O))+D[4]+3889429448&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^O&(E^N))+D[9]+568446438&4294967295,C=E+(T<<5&4294967295|T>>>27),T=O+(E^N&(C^E))+D[14]+3275163606&4294967295,O=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(O^C))+D[3]+4107603335&4294967295,N=O+(T<<14&4294967295|T>>>18),T=E+(O^C&(N^O))+D[8]+1163531501&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^O&(E^N))+D[13]+2850285829&4294967295,C=E+(T<<5&4294967295|T>>>27),T=O+(E^N&(C^E))+D[2]+4243563512&4294967295,O=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(O^C))+D[7]+1735328473&4294967295,N=O+(T<<14&4294967295|T>>>18),T=E+(O^C&(N^O))+D[12]+2368359562&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(E^N^O)+D[5]+4294588738&4294967295,C=E+(T<<4&4294967295|T>>>28),T=O+(C^E^N)+D[8]+2272392833&4294967295,O=C+(T<<11&4294967295|T>>>21),T=N+(O^C^E)+D[11]+1839030562&4294967295,N=O+(T<<16&4294967295|T>>>16),T=E+(N^O^C)+D[14]+4259657740&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^O)+D[1]+2763975236&4294967295,C=E+(T<<4&4294967295|T>>>28),T=O+(C^E^N)+D[4]+1272893353&4294967295,O=C+(T<<11&4294967295|T>>>21),T=N+(O^C^E)+D[7]+4139469664&4294967295,N=O+(T<<16&4294967295|T>>>16),T=E+(N^O^C)+D[10]+3200236656&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^O)+D[13]+681279174&4294967295,C=E+(T<<4&4294967295|T>>>28),T=O+(C^E^N)+D[0]+3936430074&4294967295,O=C+(T<<11&4294967295|T>>>21),T=N+(O^C^E)+D[3]+3572445317&4294967295,N=O+(T<<16&4294967295|T>>>16),T=E+(N^O^C)+D[6]+76029189&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^O)+D[9]+3654602809&4294967295,C=E+(T<<4&4294967295|T>>>28),T=O+(C^E^N)+D[12]+3873151461&4294967295,O=C+(T<<11&4294967295|T>>>21),T=N+(O^C^E)+D[15]+530742520&4294967295,N=O+(T<<16&4294967295|T>>>16),T=E+(N^O^C)+D[2]+3299628645&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(N^(E|~O))+D[0]+4096336452&4294967295,C=E+(T<<6&4294967295|T>>>26),T=O+(E^(C|~N))+D[7]+1126891415&4294967295,O=C+(T<<10&4294967295|T>>>22),T=N+(C^(O|~E))+D[14]+2878612391&4294967295,N=O+(T<<15&4294967295|T>>>17),T=E+(O^(N|~C))+D[5]+4237533241&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~O))+D[12]+1700485571&4294967295,C=E+(T<<6&4294967295|T>>>26),T=O+(E^(C|~N))+D[3]+2399980690&4294967295,O=C+(T<<10&4294967295|T>>>22),T=N+(C^(O|~E))+D[10]+4293915773&4294967295,N=O+(T<<15&4294967295|T>>>17),T=E+(O^(N|~C))+D[1]+2240044497&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~O))+D[8]+1873313359&4294967295,C=E+(T<<6&4294967295|T>>>26),T=O+(E^(C|~N))+D[15]+4264355552&4294967295,O=C+(T<<10&4294967295|T>>>22),T=N+(C^(O|~E))+D[6]+2734768916&4294967295,N=O+(T<<15&4294967295|T>>>17),T=E+(O^(N|~C))+D[13]+1309151649&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~O))+D[4]+4149444226&4294967295,C=E+(T<<6&4294967295|T>>>26),T=O+(E^(C|~N))+D[11]+3174756917&4294967295,O=C+(T<<10&4294967295|T>>>22),T=N+(C^(O|~E))+D[2]+718787259&4294967295,N=O+(T<<15&4294967295|T>>>17),T=E+(O^(N|~C))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+O&4294967295}i.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var E=C-this.blockSize,D=this.B,N=this.h,O=0;O<C;){if(N==0)for(;O<=E;)r(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<C;)if(D[N++]=M.charCodeAt(O++),N==this.blockSize){r(this,D),N=0;break}}else for(;O<C;)if(D[N++]=M[O++],N==this.blockSize){r(this,D),N=0;break}}this.h=N,this.o+=C},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var E=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=E&255,E/=256;for(this.u(M),M=Array(16),C=E=0;4>C;++C)for(var D=0;32>D;D+=8)M[E++]=this.g[C]>>>D&255;return M};function s(M,C){var E=a;return Object.prototype.hasOwnProperty.call(E,M)?E[M]:E[M]=C(M)}function o(M,C){this.h=C;for(var E=[],D=!0,N=M.length-1;0<=N;N--){var O=M[N]|0;D&&O==C||(E[N]=O,D=!1)}this.g=E}var a={};function l(M){return-128<=M&&128>M?s(M,function(C){return new o([C|0],0>C?-1:0)}):new o([M|0],0>M?-1:0)}function c(M){if(isNaN(M)||!isFinite(M))return h;if(0>M)return S(c(-M));for(var C=[],E=1,D=0;M>=E;D++)C[D]=M/E|0,E*=4294967296;return new o(C,0)}function d(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return S(d(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(C,8)),D=h,N=0;N<M.length;N+=8){var O=Math.min(8,M.length-N),T=parseInt(M.substring(N,N+O),C);8>O?(O=c(Math.pow(C,O)),D=D.j(O).add(c(T))):(D=D.j(E),D=D.add(c(T)))}return D}var h=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(b(this))return-S(this).m();for(var M=0,C=1,E=0;E<this.g.length;E++){var D=this.i(E);M+=(0<=D?D:4294967296+D)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(y(this))return"0";if(b(this))return"-"+S(this).toString(M);for(var C=c(Math.pow(M,6)),E=this,D="";;){var N=F(E,C).g;E=k(E,N.j(C));var O=((0<E.g.length?E.g[0]:E.h)>>>0).toString(M);if(E=N,y(E))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function y(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function b(M){return M.h==-1}n.l=function(M){return M=k(this,M),b(M)?-1:y(M)?0:1};function S(M){for(var C=M.g.length,E=[],D=0;D<C;D++)E[D]=~M.g[D];return new o(E,~M.h).add(p)}n.abs=function(){return b(this)?S(this):this},n.add=function(M){for(var C=Math.max(this.g.length,M.g.length),E=[],D=0,N=0;N<=C;N++){var O=D+(this.i(N)&65535)+(M.i(N)&65535),T=(O>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);D=T>>>16,O&=65535,T&=65535,E[N]=T<<16|O}return new o(E,E[E.length-1]&-2147483648?-1:0)};function k(M,C){return M.add(S(C))}n.j=function(M){if(y(this)||y(M))return h;if(b(this))return b(M)?S(this).j(S(M)):S(S(this).j(M));if(b(M))return S(this.j(S(M)));if(0>this.l(m)&&0>M.l(m))return c(this.m()*M.m());for(var C=this.g.length+M.g.length,E=[],D=0;D<2*C;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var N=0;N<M.g.length;N++){var O=this.i(D)>>>16,T=this.i(D)&65535,H=M.i(N)>>>16,X=M.i(N)&65535;E[2*D+2*N]+=T*X,A(E,2*D+2*N),E[2*D+2*N+1]+=O*X,A(E,2*D+2*N+1),E[2*D+2*N+1]+=T*H,A(E,2*D+2*N+1),E[2*D+2*N+2]+=O*H,A(E,2*D+2*N+2)}for(D=0;D<C;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=C;D<2*C;D++)E[D]=0;return new o(E,0)};function A(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function x(M,C){this.g=M,this.h=C}function F(M,C){if(y(C))throw Error("division by zero");if(y(M))return new x(h,h);if(b(M))return C=F(S(M),C),new x(S(C.g),S(C.h));if(b(C))return C=F(M,S(C)),new x(S(C.g),C.h);if(30<M.g.length){if(b(M)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var E=p,D=C;0>=D.l(M);)E=V(E),D=V(D);var N=z(E,1),O=z(D,1);for(D=z(D,2),E=z(E,2);!y(D);){var T=O.add(D);0>=T.l(M)&&(N=N.add(E),O=T),D=z(D,1),E=z(E,1)}return C=k(M,N.j(C)),new x(N,C)}for(N=h;0<=M.l(C);){for(E=Math.max(1,Math.floor(M.m()/C.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=c(E),T=O.j(C);b(T)||0<T.l(M);)E-=D,O=c(E),T=O.j(C);y(O)&&(O=p),N=N.add(O),M=k(M,T)}return new x(N,M)}n.A=function(M){return F(this,M).h},n.and=function(M){for(var C=Math.max(this.g.length,M.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)&M.i(D);return new o(E,this.h&M.h)},n.or=function(M){for(var C=Math.max(this.g.length,M.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)|M.i(D);return new o(E,this.h|M.h)},n.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)^M.i(D);return new o(E,this.h^M.h)};function V(M){for(var C=M.g.length+1,E=[],D=0;D<C;D++)E[D]=M.i(D)<<1|M.i(D-1)>>>31;return new o(E,M.h)}function z(M,C){var E=C>>5;C%=32;for(var D=M.g.length-E,N=[],O=0;O<D;O++)N[O]=0<C?M.i(O+E)>>>C|M.i(O+E+1)<<32-C:M.i(O+E);return new o(N,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,L_=iC.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Zr=iC.Integer=o}).apply(typeof nC<"u"?nC:typeof self<"u"?self:typeof window<"u"?window:{});var mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var V_,U_,ka,$_,lu,gp,z_,j_,B_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,v){return u==Array.prototype||u==Object.prototype||(u[f]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mp=="object"&&mp];for(var f=0;f<u.length;++f){var v=u[f];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function r(u,f){if(f)e:{var v=i;u=u.split(".");for(var R=0;R<u.length-1;R++){var $=u[R];if(!($ in v))break e;v=v[$]}u=u[u.length-1],R=v[u],f=f(R),f!=R&&f!=null&&e(v,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var v=0,R=!1,$={next:function(){if(!R&&v<u.length){var K=v++;return{value:f(K,u[K]),done:!1}}return R=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,v){return v})}});var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,v){return u.call.apply(u.bind,arguments)}function h(u,f,v){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,R),u.apply(f,$)}}return function(){return u.apply(f,arguments)}}function p(u,f,v){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(u,f){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function y(u,f){function v(){}v.prototype=f.prototype,u.aa=f.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(R,$,K){for(var le=Array(arguments.length-2),at=2;at<arguments.length;at++)le[at-2]=arguments[at];return f.prototype[$].apply(R,le)}}function b(u){let f=u.length;if(0<f){let v=Array(f);for(let R=0;R<f;R++)v[R]=u[R];return v}return[]}function S(u,f){for(let v=1;v<arguments.length;v++){let R=arguments[v];if(l(R)){let $=u.length||0,K=R.length||0;u.length=$+K;for(let le=0;le<K;le++)u[$+le]=R[le]}else u.push(R)}}class k{constructor(f,v){this.i=f,this.j=v,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function A(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function z(u,f,v){for(let R in u)f.call(v,u[R],R,u)}function M(u,f){for(let v in u)f.call(void 0,u[v],v,u)}function C(u){let f={};for(let v in u)f[v]=u[v];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,f){let v,R;for(let $=1;$<arguments.length;$++){R=arguments[$];for(v in R)u[v]=R[v];for(let K=0;K<E.length;K++)v=E[K],Object.prototype.hasOwnProperty.call(R,v)&&(u[v]=R[v])}}function N(u){var f=1;u=u.split(":");let v=[];for(;0<f&&u.length;)v.push(u.shift()),f--;return u.length&&v.push(u.join(":")),v}function O(u){a.setTimeout(()=>{throw u},0)}function T(){var u=de;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class H{constructor(){this.h=this.g=null}add(f,v){let R=X.get();R.set(f,v),this.h?this.h.next=R:this.g=R,this.h=R}}var X=new k(()=>new me,u=>u.reset());class me{constructor(){this.next=this.g=this.h=null}set(f,v){this.h=f,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,Y=!1,de=new H,Pe=()=>{let u=a.Promise.resolve(void 0);Q=()=>{u.then(ne)}};var ne=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(v){O(v)}var f=X;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Y=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let v=()=>{};a.addEventListener("test",v,f),a.removeEventListener("test",v,f)}catch{}return u}();function ye(u,f){if(oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{F(f.nodeName);var $=!0;break e}catch{}$=!1}$||(f=null)}}else v=="mouseover"?f=u.fromElement:v=="mouseout"&&(f=u.toElement);this.relatedTarget=f,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ye[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}y(ye,oe);var Ye={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Cr=0;function Po(u,f,v,R,$){this.listener=u,this.proxy=null,this.src=f,this.type=v,this.capture=!!R,this.ha=$,this.key=++Cr,this.da=this.fa=!1}function Pn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Jn(u){this.src=u,this.g={},this.h=0}Jn.prototype.add=function(u,f,v,R,$){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var le=ko(u,f,R,$);return-1<le?(f=u[le],v||(f.fa=!1)):(f=new Po(f,this.src,K,!!R,$),f.fa=v,u.push(f)),f};function Ro(u,f){var v=f.type;if(v in u.g){var R=u.g[v],$=Array.prototype.indexOf.call(R,f,void 0),K;(K=0<=$)&&Array.prototype.splice.call(R,$,1),K&&(Pn(f),u.g[v].length==0&&(delete u.g[v],u.h--))}}function ko(u,f,v,R){for(var $=0;$<u.length;++$){var K=u[$];if(!K.da&&K.listener==f&&K.capture==!!v&&K.ha==R)return $}return-1}var Do="closure_lm_"+(1e6*Math.random()|0),Mo={};function Is(u,f,v,R,$){if(R&&R.once)return No(u,f,v,R,$);if(Array.isArray(f)){for(var K=0;K<f.length;K++)Is(u,f[K],v,R,$);return null}return v=Xf(v),u&&u[Dt]?u.K(f,v,c(R)?!!R.capture:!!R,$):As(u,f,v,!1,R,$)}function As(u,f,v,R,$,K){if(!f)throw Error("Invalid event type");var le=c($)?!!$.capture:!!$,at=sr(u);if(at||(u[Do]=at=new Jn(u)),v=at.add(f,v,R,le,K),v.proxy)return v;if(R=Tl(),v.proxy=R,R.src=u,R.listener=v,u.addEventListener)ot||($=le),$===void 0&&($=!1),u.addEventListener(f.toString(),R,$);else if(u.attachEvent)u.attachEvent(Ir(f.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Tl(){function u(v){return f.call(u.src,u.listener,v)}let f=ed;return u}function No(u,f,v,R,$){if(Array.isArray(f)){for(var K=0;K<f.length;K++)No(u,f[K],v,R,$);return null}return v=Xf(v),u&&u[Dt]?u.L(f,v,c(R)?!!R.capture:!!R,$):As(u,f,v,!0,R,$)}function Oo(u,f,v,R,$){if(Array.isArray(f))for(var K=0;K<f.length;K++)Oo(u,f[K],v,R,$);else R=c(R)?!!R.capture:!!R,v=Xf(v),u&&u[Dt]?(u=u.i,f=String(f).toString(),f in u.g&&(K=u.g[f],v=ko(K,v,R,$),-1<v&&(Pn(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete u.g[f],u.h--)))):u&&(u=sr(u))&&(f=u.g[f.toString()],u=-1,f&&(u=ko(f,v,R,$)),(v=-1<u?f[u]:null)&&Ps(v))}function Ps(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Dt])Ro(f.i,u);else{var v=u.type,R=u.proxy;f.removeEventListener?f.removeEventListener(v,R,u.capture):f.detachEvent?f.detachEvent(Ir(v),R):f.addListener&&f.removeListener&&f.removeListener(R),(v=sr(f))?(Ro(v,u),v.h==0&&(v.src=null,f[Do]=null)):Pn(u)}}}function Ir(u){return u in Mo?Mo[u]:Mo[u]="on"+u}function ed(u,f){if(u.da)u=!0;else{f=new ye(f,this);var v=u.listener,R=u.ha||u.src;u.fa&&Ps(u),u=v.call(R,f)}return u}function sr(u){return u=u[Do],u instanceof Jn?u:null}var Yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xf(u){return typeof u=="function"?u:(u[Yf]||(u[Yf]=function(f){return u.handleEvent(f)}),u[Yf])}function dn(){se.call(this),this.i=new Jn(this),this.M=this,this.F=null}y(dn,se),dn.prototype[Dt]=!0,dn.prototype.removeEventListener=function(u,f,v,R){Oo(this,u,f,v,R)};function wn(u,f){var v,R=u.F;if(R)for(v=[];R;R=R.F)v.push(R);if(u=u.M,R=f.type||f,typeof f=="string")f=new oe(f,u);else if(f instanceof oe)f.target=f.target||u;else{var $=f;f=new oe(R,u),D(f,$)}if($=!0,v)for(var K=v.length-1;0<=K;K--){var le=f.g=v[K];$=td(le,R,!0,f)&&$}if(le=f.g=u,$=td(le,R,!0,f)&&$,$=td(le,R,!1,f)&&$,v)for(K=0;K<v.length;K++)le=f.g=v[K],$=td(le,R,!1,f)&&$}dn.prototype.N=function(){if(dn.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var v=u.g[f],R=0;R<v.length;R++)Pn(v[R]);delete u.g[f],u.h--}}this.F=null},dn.prototype.K=function(u,f,v,R){return this.i.add(String(u),f,!1,v,R)},dn.prototype.L=function(u,f,v,R){return this.i.add(String(u),f,!0,v,R)};function td(u,f,v,R){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var $=!0,K=0;K<f.length;++K){var le=f[K];if(le&&!le.da&&le.capture==v){var at=le.listener,an=le.ha||le.src;le.fa&&Ro(u.i,le),$=at.call(an,R)!==!1&&$}}return $&&!R.defaultPrevented}function cb(u,f,v){if(typeof u=="function")v&&(u=p(u,v));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function ub(u){u.g=cb(()=>{u.g=null,u.i&&(u.i=!1,ub(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Ok extends se{constructor(f,v){super(),this.m=f,this.l=v,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ub(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cl(u){se.call(this),this.h=u,this.g={}}y(Cl,se);var db=[];function hb(u){z(u.g,function(f,v){this.g.hasOwnProperty(v)&&Ps(f)},u),u.g={}}Cl.prototype.N=function(){Cl.aa.N.call(this),hb(this)},Cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jf=a.JSON.stringify,Fk=a.JSON.parse,Lk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Zf(){}Zf.prototype.h=null;function pb(u){return u.h||(u.h=u.i())}function fb(){}var Il={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function em(){oe.call(this,"d")}y(em,oe);function tm(){oe.call(this,"c")}y(tm,oe);var Rs={},mb=null;function nd(){return mb=mb||new dn}Rs.La="serverreachability";function gb(u){oe.call(this,Rs.La,u)}y(gb,oe);function Al(u){let f=nd();wn(f,new gb(f))}Rs.STAT_EVENT="statevent";function _b(u,f){oe.call(this,Rs.STAT_EVENT,u),this.stat=f}y(_b,oe);function yn(u){let f=nd();wn(f,new _b(f,u))}Rs.Ma="timingevent";function vb(u,f){oe.call(this,Rs.Ma,u),this.size=f}y(vb,oe);function Pl(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Rl(){this.g=!0}Rl.prototype.xa=function(){this.g=!1};function Vk(u,f,v,R,$,K){u.info(function(){if(u.g)if(K)for(var le="",at=K.split("&"),an=0;an<at.length;an++){var Xe=at[an].split("=");if(1<Xe.length){var hn=Xe[0];Xe=Xe[1];var pn=hn.split("_");le=2<=pn.length&&pn[1]=="type"?le+(hn+"="+Xe+"&"):le+(hn+"=redacted&")}}else le=null;else le=K;return"XMLHTTP REQ ("+R+") [attempt "+$+"]: "+f+`
`+v+`
`+le})}function Uk(u,f,v,R,$,K,le){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+$+"]: "+f+`
`+v+`
`+K+" "+le})}function Fo(u,f,v,R){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+zk(u,v)+(R?" "+R:"")})}function $k(u,f){u.info(function(){return"TIMEOUT: "+f})}Rl.prototype.info=function(){};function zk(u,f){if(!u.g)return f;if(!f)return null;try{var v=JSON.parse(f);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var R=v[u];if(!(2>R.length)){var $=R[1];if(Array.isArray($)&&!(1>$.length)){var K=$[0];if(K!="noop"&&K!="stop"&&K!="close")for(var le=1;le<$.length;le++)$[le]=""}}}}return Jf(v)}catch{return f}}var id={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nm;function rd(){}y(rd,Zf),rd.prototype.g=function(){return new XMLHttpRequest},rd.prototype.i=function(){return{}},nm=new rd;function Ar(u,f,v,R){this.j=u,this.i=f,this.l=v,this.R=R||1,this.U=new Cl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yb}function yb(){this.i=null,this.g="",this.h=!1}var bb={},im={};function rm(u,f,v){u.L=1,u.v=ld(or(f)),u.m=v,u.P=!0,xb(u,null)}function xb(u,f){u.F=Date.now(),sd(u),u.A=or(u.v);var v=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),Fb(v.i,"t",R),u.C=0,v=u.j.J,u.h=new yb,u.g=e1(u.j,v?f:null,!u.m),0<u.O&&(u.M=new Ok(p(u.Y,u,u.g),u.O)),f=u.U,v=u.g,R=u.ca;var $="readystatechange";Array.isArray($)||($&&(db[0]=$.toString()),$=db);for(var K=0;K<$.length;K++){var le=Is(v,$[K],R||f.handleEvent,!1,f.h||f);if(!le)break;f.g[le.key]=le}f=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Al(),Vk(u.i,u.u,u.A,u.l,u.R,u.m)}Ar.prototype.ca=function(u){u=u.target;let f=this.M;f&&ar(u)==3?f.j():this.Y(u)},Ar.prototype.Y=function(u){try{if(u==this.g)e:{let pn=ar(this.g);var f=this.g.Ba();let Uo=this.g.Z();if(!(3>pn)&&(pn!=3||this.g&&(this.h.h||this.g.oa()||Bb(this.g)))){this.J||pn!=4||f==7||(f==8||0>=Uo?Al(3):Al(2)),sm(this);var v=this.g.Z();this.X=v;t:if(Sb(this)){var R=Bb(this.g);u="";var $=R.length,K=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ks(this),kl(this);var le="";break t}this.h.i=new a.TextDecoder}for(f=0;f<$;f++)this.h.h=!0,u+=this.h.i.decode(R[f],{stream:!(K&&f==$-1)});R.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,Uk(this.i,this.u,this.A,this.l,this.R,pn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var at,an=this.g;if((at=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(at)){var Xe=at;break t}}Xe=null}if(v=Xe)Fo(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,om(this,v);else{this.o=!1,this.s=3,yn(12),ks(this),kl(this);break e}}if(this.P){v=!0;let yi;for(;!this.J&&this.C<le.length;)if(yi=jk(this,le),yi==im){pn==4&&(this.s=4,yn(14),v=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(yi==bb){this.s=4,yn(15),Fo(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else Fo(this.i,this.l,yi,null),om(this,yi);if(Sb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pn!=4||le.length!=0||this.h.h||(this.s=1,yn(16),v=!1),this.o=this.o&&v,!v)Fo(this.i,this.l,le,"[Invalid Chunked Response]"),ks(this),kl(this);else if(0<le.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),hm(hn),hn.M=!0,yn(11))}}else Fo(this.i,this.l,le,null),om(this,le);pn==4&&ks(this),this.o&&!this.J&&(pn==4?Yb(this.j,this):(this.o=!1,sd(this)))}else sD(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,yn(12)):(this.s=0,yn(13)),ks(this),kl(this)}}}catch{}finally{}};function Sb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jk(u,f){var v=u.C,R=f.indexOf(`
`,v);return R==-1?im:(v=Number(f.substring(v,R)),isNaN(v)?bb:(R+=1,R+v>f.length?im:(f=f.slice(R,R+v),u.C=R+v,f)))}Ar.prototype.cancel=function(){this.J=!0,ks(this)};function sd(u){u.S=Date.now()+u.I,Eb(u,u.I)}function Eb(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pl(p(u.ba,u),f)}function sm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ar.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?($k(this.i,this.A),this.L!=2&&(Al(),yn(17)),ks(this),this.s=2,kl(this)):Eb(this,this.S-u)};function kl(u){u.j.G==0||u.J||Yb(u.j,u)}function ks(u){sm(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,hb(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function om(u,f){try{var v=u.j;if(v.G!=0&&(v.g==u||am(v.h,u))){if(!u.K&&am(v.h,u)&&v.G==3){try{var R=v.Da.g.parse(f)}catch{R=null}if(Array.isArray(R)&&R.length==3){var $=R;if($[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)pd(v),dd(v);else break e;dm(v),yn(18)}}else v.za=$[1],0<v.za-v.T&&37500>$[2]&&v.F&&v.v==0&&!v.C&&(v.C=Pl(p(v.Za,v),6e3));if(1>=Ib(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ms(v,11)}else if((u.K||v.g==u)&&pd(v),!A(f))for($=v.Da.g.parse(f),f=0;f<$.length;f++){let Xe=$[f];if(v.T=Xe[0],Xe=Xe[1],v.G==2)if(Xe[0]=="c"){v.K=Xe[1],v.ia=Xe[2];let hn=Xe[3];hn!=null&&(v.la=hn,v.j.info("VER="+v.la));let pn=Xe[4];pn!=null&&(v.Aa=pn,v.j.info("SVER="+v.Aa));let Uo=Xe[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(R=1.5*Uo,v.L=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;let yi=u.g;if(yi){let md=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(md){var K=R.h;K.g||md.indexOf("spdy")==-1&&md.indexOf("quic")==-1&&md.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(lm(K,K.h),K.h=null))}if(R.D){let pm=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;pm&&(R.ya=pm,gt(R.I,R.D,pm))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),R=v;var le=u;if(R.qa=Zb(R,R.J?R.ia:null,R.W),le.K){Ab(R.h,le);var at=le,an=R.L;an&&(at.I=an),at.B&&(sm(at),sd(at)),R.g=le}else Kb(R);0<v.i.length&&hd(v)}else Xe[0]!="stop"&&Xe[0]!="close"||Ms(v,7);else v.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Ms(v,7):um(v):Xe[0]!="noop"&&v.l&&v.l.ta(Xe),v.v=0)}}Al(4)}catch{}}var Bk=class{constructor(u,f){this.g=u,this.map=f}};function Tb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ib(u){return u.h?1:u.g?u.g.size:0}function am(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function lm(u,f){u.g?u.g.add(f):u.h=f}function Ab(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Tb.prototype.cancel=function(){if(this.i=Pb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Pb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let v of u.g.values())f=f.concat(v.D);return f}return b(u.i)}function qk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],v=u.length,R=0;R<v;R++)f.push(u[R]);return f}f=[],v=0;for(R in u)f[v++]=u[R];return f}function Gk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var v=0;v<u;v++)f.push(v);return f}f=[],v=0;for(let R in u)f[v++]=R;return f}}}function Rb(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var v=Gk(u),R=qk(u),$=R.length,K=0;K<$;K++)f.call(void 0,R[K],v&&v[K],u)}var kb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hk(u,f){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var R=u[v].indexOf("="),$=null;if(0<=R){var K=u[v].substring(0,R);$=u[v].substring(R+1)}else K=u[v];f(K,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ds(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ds){this.h=u.h,od(this,u.j),this.o=u.o,this.g=u.g,ad(this,u.s),this.l=u.l;var f=u.i,v=new Nl;v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),Db(this,v),this.m=u.m}else u&&(f=String(u).match(kb))?(this.h=!1,od(this,f[1]||"",!0),this.o=Dl(f[2]||""),this.g=Dl(f[3]||"",!0),ad(this,f[4]),this.l=Dl(f[5]||"",!0),Db(this,f[6]||"",!0),this.m=Dl(f[7]||"")):(this.h=!1,this.i=new Nl(null,this.h))}Ds.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ml(f,Mb,!0),":");var v=this.g;return(v||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ml(f,Mb,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ml(v,v.charAt(0)=="/"?Qk:Kk,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ml(v,Xk)),u.join("")};function or(u){return new Ds(u)}function od(u,f,v){u.j=v?Dl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function ad(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Db(u,f,v){f instanceof Nl?(u.i=f,Jk(u.i,u.h)):(v||(f=Ml(f,Yk)),u.i=new Nl(f,u.h))}function gt(u,f,v){u.i.set(f,v)}function ld(u){return gt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Dl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ml(u,f,v){return typeof u=="string"?(u=encodeURI(u).replace(f,Wk),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mb=/[#\/\?@]/g,Kk=/[#\?:]/g,Qk=/[#\?]/g,Yk=/[#\?@]/g,Xk=/#/g;function Nl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Pr(u){u.g||(u.g=new Map,u.h=0,u.i&&Hk(u.i,function(f,v){u.add(decodeURIComponent(f.replace(/\+/g," ")),v)}))}n=Nl.prototype,n.add=function(u,f){Pr(this),this.i=null,u=Lo(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(f),this.h+=1,this};function Nb(u,f){Pr(u),f=Lo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Ob(u,f){return Pr(u),f=Lo(u,f),u.g.has(f)}n.forEach=function(u,f){Pr(this),this.g.forEach(function(v,R){v.forEach(function($){u.call(f,$,R,this)},this)},this)},n.na=function(){Pr(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),v=[];for(let R=0;R<f.length;R++){let $=u[R];for(let K=0;K<$.length;K++)v.push(f[R])}return v},n.V=function(u){Pr(this);let f=[];if(typeof u=="string")Ob(this,u)&&(f=f.concat(this.g.get(Lo(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)f=f.concat(u[v])}return f},n.set=function(u,f){return Pr(this),this.i=null,u=Lo(this,u),Ob(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Fb(u,f,v){Nb(u,f),0<v.length&&(u.i=null,u.g.set(Lo(u,f),b(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var v=0;v<f.length;v++){var R=f[v];let K=encodeURIComponent(String(R)),le=this.V(R);for(R=0;R<le.length;R++){var $=K;le[R]!==""&&($+="="+encodeURIComponent(String(le[R]))),u.push($)}}return this.i=u.join("&")};function Lo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Jk(u,f){f&&!u.j&&(Pr(u),u.i=null,u.g.forEach(function(v,R){var $=R.toLowerCase();R!=$&&(Nb(this,R),Fb(this,$,v))},u)),u.j=f}function Zk(u,f){let v=new Rl;if(a.Image){let R=new Image;R.onload=m(Rr,v,"TestLoadImage: loaded",!0,f,R),R.onerror=m(Rr,v,"TestLoadImage: error",!1,f,R),R.onabort=m(Rr,v,"TestLoadImage: abort",!1,f,R),R.ontimeout=m(Rr,v,"TestLoadImage: timeout",!1,f,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else f(!1)}function eD(u,f){let v=new Rl,R=new AbortController,$=setTimeout(()=>{R.abort(),Rr(v,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:R.signal}).then(K=>{clearTimeout($),K.ok?Rr(v,"TestPingServer: ok",!0,f):Rr(v,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout($),Rr(v,"TestPingServer: error",!1,f)})}function Rr(u,f,v,R,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),R(v)}catch{}}function tD(){this.g=new Lk}function nD(u,f,v){let R=v||"";try{Rb(u,function($,K){let le=$;c($)&&(le=Jf($)),f.push(R+K+"="+encodeURIComponent(le))})}catch($){throw f.push(R+"type="+encodeURIComponent("_badmap")),$}}function Ol(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Ol,Zf),Ol.prototype.g=function(){return new cd(this.l,this.j)},Ol.prototype.i=function(u){return function(){return u}}({});function cd(u,f){dn.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(cd,dn),n=cd.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ll(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fl(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ll(this)),this.g&&(this.readyState=3,Ll(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Fl(this):Ll(this),this.readyState==3&&Lb(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Fl(this))},n.Qa=function(u){this.g&&(this.response=u,Fl(this))},n.ga=function(){this.g&&Fl(this)};function Fl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ll(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var v=f.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=f.next();return u.join(`\r
`)};function Ll(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vb(u){let f="";return z(u,function(v,R){f+=R,f+=":",f+=v,f+=`\r
`}),f}function cm(u,f,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=Vb(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):gt(u,f,v))}function It(u){dn.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(It,dn);var iD=/^https?$/i,rD=["POST","PUT"];n=It.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nm.g(),this.v=this.o?pb(this.o):pb(nm),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(K){Ub(this,K);return}if(u=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var $ in R)v.set($,R[$]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(let K of R.keys())v.set(K,R.get(K));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),$=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rD,f,void 0))||R||$||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[K,le]of v)this.g.setRequestHeader(K,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jb(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){Ub(this,K)}};function Ub(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,$b(u),ud(u)}function $b(u){u.A||(u.A=!0,wn(u,"complete"),wn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wn(this,"complete"),wn(this,"abort"),ud(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ud(this,!0)),It.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zb(this):this.bb())},n.bb=function(){zb(this)};function zb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ar(u)!=4||u.Z()!=2)){if(u.u&&ar(u)==4)cb(u.Ea,0,u);else if(wn(u,"readystatechange"),ar(u)==4){u.h=!1;try{let le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var v;if(!(v=f)){var R;if(R=le===0){var $=String(u.D).match(kb)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),R=!iD.test($?$.toLowerCase():"")}v=R}if(v)wn(u,"complete"),wn(u,"success");else{u.m=6;try{var K=2<ar(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",$b(u)}}finally{ud(u)}}}}function ud(u,f){if(u.g){jb(u);let v=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||wn(u,"ready");try{v.onreadystatechange=R}catch{}}}function jb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ar(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Fk(f)}};function Bb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function sD(u){let f={};u=(u.g&&2<=ar(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(A(u[R]))continue;var v=N(u[R]);let $=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let K=f[$]||[];f[$]=K,K.push(v)}M(f,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vl(u,f,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||f}function qb(u){this.Aa=0,this.i=[],this.j=new Rl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vl("baseRetryDelayMs",5e3,u),this.cb=Vl("retryDelaySeedMs",1e4,u),this.Wa=Vl("forwardChannelMaxRetries",2,u),this.wa=Vl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Tb(u&&u.concurrentRequestLimit),this.Da=new tD,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qb.prototype,n.la=8,n.G=1,n.connect=function(u,f,v,R){yn(0),this.W=u,this.H=f||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.I=Zb(this,null,this.W),hd(this)};function um(u){if(Gb(u),u.G==3){var f=u.U++,v=or(u.I);if(gt(v,"SID",u.K),gt(v,"RID",f),gt(v,"TYPE","terminate"),Ul(u,v),f=new Ar(u,u.j,f),f.L=2,f.v=ld(or(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=f.v,v=!0),v||(f.g=e1(f.j,null),f.g.ea(f.v)),f.F=Date.now(),sd(f)}Jb(u)}function dd(u){u.g&&(hm(u),u.g.cancel(),u.g=null)}function Gb(u){dd(u),u.u&&(a.clearTimeout(u.u),u.u=null),pd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function hd(u){if(!Cb(u.h)&&!u.s){u.s=!0;var f=u.Ga;Q||Pe(),Y||(Q(),Y=!0),de.add(f,u),u.B=0}}function oD(u,f){return Ib(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pl(p(u.Ga,u,f),Xb(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let $=new Ar(this,this.j,u),K=this.o;if(this.S&&(K?(K=C(K),D(K,this.S)):K=this.S),this.m!==null||this.O||($.H=K,K=null),this.P)e:{for(var f=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(f+=R,4096<f){f=v;break e}if(f===4096||v===this.i.length-1){f=v+1;break e}}f=1e3}else f=1e3;f=Wb(this,$,f),v=or(this.I),gt(v,"RID",u),gt(v,"CVER",22),this.D&&gt(v,"X-HTTP-Session-Id",this.D),Ul(this,v),K&&(this.O?f="headers="+encodeURIComponent(String(Vb(K)))+"&"+f:this.m&&cm(v,this.m,K)),lm(this.h,$),this.Ua&&gt(v,"TYPE","init"),this.P?(gt(v,"$req",f),gt(v,"SID","null"),$.T=!0,rm($,v,null)):rm($,v,f),this.G=2}}else this.G==3&&(u?Hb(this,u):this.i.length==0||Cb(this.h)||Hb(this))};function Hb(u,f){var v;f?v=f.l:v=u.U++;let R=or(u.I);gt(R,"SID",u.K),gt(R,"RID",v),gt(R,"AID",u.T),Ul(u,R),u.m&&u.o&&cm(R,u.m,u.o),v=new Ar(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Wb(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),lm(u.h,v),rm(v,R,f)}function Ul(u,f){u.H&&z(u.H,function(v,R){gt(f,R,v)}),u.l&&Rb({},function(v,R){gt(f,R,v)})}function Wb(u,f,v){v=Math.min(u.i.length,v);var R=u.l?p(u.l.Na,u.l,u):null;e:{var $=u.i;let K=-1;for(;;){let le=["count="+v];K==-1?0<v?(K=$[0].g,le.push("ofs="+K)):K=0:le.push("ofs="+K);let at=!0;for(let an=0;an<v;an++){let Xe=$[an].g,hn=$[an].map;if(Xe-=K,0>Xe)K=Math.max(0,$[an].g-100),at=!1;else try{nD(hn,le,"req"+Xe+"_")}catch{R&&R(hn)}}if(at){R=le.join("&");break e}}}return u=u.i.splice(0,v),f.D=u,R}function Kb(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Q||Pe(),Y||(Q(),Y=!0),de.add(f,u),u.v=0}}function dm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pl(p(u.Fa,u),Xb(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Qb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pl(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yn(10),dd(this),Qb(this))};function hm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Qb(u){u.g=new Ar(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=or(u.qa);gt(f,"RID","rpc"),gt(f,"SID",u.K),gt(f,"AID",u.T),gt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&gt(f,"TO",u.ja),gt(f,"TYPE","xmlhttp"),Ul(u,f),u.m&&u.o&&cm(f,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=ld(or(f)),v.m=null,v.P=!0,xb(v,u)}n.Za=function(){this.C!=null&&(this.C=null,dd(this),dm(this),yn(19))};function pd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Yb(u,f){var v=null;if(u.g==f){pd(u),hm(u),u.g=null;var R=2}else if(am(u.h,f))v=f.D,Ab(u.h,f),R=1;else return;if(u.G!=0){if(f.o)if(R==1){v=f.m?f.m.length:0,f=Date.now()-f.F;var $=u.B;R=nd(),wn(R,new vb(R,v)),hd(u)}else Kb(u);else if($=f.s,$==3||$==0&&0<f.X||!(R==1&&oD(u,f)||R==2&&dm(u)))switch(v&&0<v.length&&(f=u.h,f.i=f.i.concat(v)),$){case 1:Ms(u,5);break;case 4:Ms(u,10);break;case 3:Ms(u,6);break;default:Ms(u,2)}}}function Xb(u,f){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*f}function Ms(u,f){if(u.j.info("Error code "+f),f==2){var v=p(u.fb,u),R=u.Xa;let $=!R;R=new Ds(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||od(R,"https"),ld(R),$?Zk(R.toString(),v):eD(R.toString(),v)}else yn(2);u.G=0,u.l&&u.l.sa(f),Jb(u),Gb(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yn(2)):(this.j.info("Failed to ping google.com"),yn(1))};function Jb(u){if(u.G=0,u.ka=[],u.l){let f=Pb(u.h);(f.length!=0||u.i.length!=0)&&(S(u.ka,f),S(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function Zb(u,f,v){var R=v instanceof Ds?or(v):new Ds(v);if(R.g!="")f&&(R.g=f+"."+R.g),ad(R,R.s);else{var $=a.location;R=$.protocol,f=f?f+"."+$.hostname:$.hostname,$=+$.port;var K=new Ds(null);R&&od(K,R),f&&(K.g=f),$&&ad(K,$),v&&(K.l=v),R=K}return v=u.D,f=u.ya,v&&f&&gt(R,v,f),gt(R,"VER",u.la),Ul(u,R),R}function e1(u,f,v){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new It(new Ol({eb:v})):new It(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function t1(){}n=t1.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fd(){}fd.prototype.g=function(u,f){return new Un(u,f)};function Un(u,f){dn.call(this),this.g=new qb(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!A(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Vo(this)}y(Un,dn),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){um(this.g)},Un.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Jf(u),u=v);f.i.push(new Bk(f.Ya++,u)),f.G==3&&hd(f)},Un.prototype.N=function(){this.g.l=null,delete this.j,um(this.g),delete this.g,Un.aa.N.call(this)};function n1(u){em.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let v in f){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(n1,em);function i1(){tm.call(this),this.status=1}y(i1,tm);function Vo(u){this.g=u}y(Vo,t1),Vo.prototype.ua=function(){wn(this.g,"a")},Vo.prototype.ta=function(u){wn(this.g,new n1(u))},Vo.prototype.sa=function(u){wn(this.g,new i1)},Vo.prototype.ra=function(){wn(this.g,"b")},fd.prototype.createWebChannel=fd.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,B_=fr.createWebChannelTransport=function(){return new fd},j_=fr.getStatEventTarget=function(){return nd()},z_=fr.Event=Rs,gp=fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},id.NO_ERROR=0,id.TIMEOUT=8,id.HTTP_ERROR=6,lu=fr.ErrorCode=id,wb.COMPLETE="complete",$_=fr.EventType=wb,fb.EventType=Il,Il.OPEN="a",Il.CLOSE="b",Il.ERROR="c",Il.MESSAGE="d",dn.prototype.listen=dn.prototype.K,ka=fr.WebChannel=fb,U_=fr.FetchXmlHttpFactory=Ol,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,V_=fr.XhrIo=It}).apply(typeof mp<"u"?mp:typeof self<"u"?self:typeof window<"u"?window:{});var rC="@firebase/firestore";var qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");var ll="10.13.2";var os=new Or("@firebase/firestore");function Fa(){return os.logLevel}function oI(n){os.setLogLevel(n)}function Z(n,...e){if(os.logLevel<=li.DEBUG){let t=e.map(Kw);os.debug(`Firestore (${ll}): ${n}`,...t)}}function Ft(n,...e){if(os.logLevel<=li.ERROR){let t=e.map(Kw);os.error(`Firestore (${ll}): ${n}`,...t)}}function mi(n,...e){if(os.logLevel<=li.WARN){let t=e.map(Kw);os.warn(`Firestore (${ll}): ${n}`,...t)}}function Kw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ve(n="Unexpected state"){let e=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: `+n;throw Ft(e),new Error(e)}function xe(n,e){n||ve()}function aI(n,e){n||ve()}function ce(n,e){return n}var W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},J=class extends dx{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Gt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ip=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},K_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qt.UNAUTHENTICATED))}shutdown(){}},Q_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Y_=class{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>q(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xe(typeof i.accessToken=="string"),new Ip(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new qt(e)}},X_=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},J_=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new X_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Z_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ev=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xe(typeof t.token=="string"),this.R=t.token,new Z_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function aL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Ap=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=aL(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function Me(n,e){return n<e?-1:n>e?1:0}function Ga(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function lI(n){return n+"\0"}var Ct=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new J(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ct(0,0))}static max(){return new n(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pp=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&ve(),i===void 0?i=e.length-t:i>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ke=class n extends Pp{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new J(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},lL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lt=class n extends Pp{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return lL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new J(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new J(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new J(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ue=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ke.fromString(e))}static fromName(e){return new n(Ke.fromString(e).popFirst(5))}static empty(){return new n(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ke(e.slice()))}};var Ha=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};function tv(n){return n.fields.find(e=>e.kind===2)}function Js(n){return n.fields.filter(e=>e.kind!==2)}Ha.UNKNOWN_ID=-1;var ja=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var yu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,gi.min())}};function cI(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new Ct(t+1,0):new Ct(t,i));return new gi(r,ue.empty(),e)}function uI(n){return new gi(n.readTime,n.key,-1)}var gi=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Se.min(),ue.empty(),-1)}static max(){return new n(Se.max(),ue.empty(),-1)}};function Qw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}var dI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gs(n){return q(this,null,function*(){if(n.code!==W.FAILED_PRECONDITION||n.message!==dI)throw n;Z("LocalStore","Unexpectedly lost primary lease")})}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};var kp=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Gt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ro(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=Yw(i.target.error);this.V.reject(new ro(e,r))}}static open(e,t,i,r){try{return new n(t,e.transaction(r,i))}catch(s){throw new ro(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new iv(t)}},as=class n{constructor(e,t,i){this.name=e,this.version=t,this.p=i,n.S(Jl())===12.2&&Ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Z("SimpleDb","Removing database:",e),Zs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Fd())return!1;if(n.v())return!0;let e=Jl(),t=n.S(e),i=0<t&&t<10,r=hI(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return q(this,null,function*(){return this.db||(Z("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;t(o)},r.onblocked=()=>{i(new ro(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new J(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new J(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new ro(e,o))},r.onupgradeneeded=s=>{Z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,r.transaction,s.oldVersion,this.version).next(()=>{Z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){return q(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=kp.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),G.reject(c))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&o<3;if(Z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function hI(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var nv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Zs(this.B.delete())}},ro=class extends J{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function _s(n){return n.name==="IndexedDbTransactionError"}var iv=class{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(Z("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Zs(i)}add(e){return Z("SimpleDb","ADD",this.store.name,e,e),Zs(this.store.add(e))}get(e){return Zs(this.store.get(e)).next(t=>(t===void 0&&(t=null),Z("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Z("SimpleDb","DELETE",this.store.name,e),Zs(this.store.delete(e))}count(){return Z("SimpleDb","COUNT",this.store.name),Zs(this.store.count())}U(e,t){let i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new G((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{let s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){let i=this.store.getAll(e,t===null?void 0:t);return new G((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(e,t){Z("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,t);i.H=!1;let r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(e,t){let i;t?i=e:(i={},t=e);let r=this.cursor(i);return this.W(r,t)}Y(e){let t=this.cursor({});return new G((i,r)=>{t.onerror=s=>{let o=Yw(s.target.error);r(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,t){let i=[];return new G((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let l=new nv(a),c=t(a.primaryKey,a.value,l);if(c instanceof G){let d=c.catch(h=>(l.done(),G.reject(h)));i.push(d)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>G.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Zs(n){return new G((e,t)=>{n.onsuccess=i=>{let r=i.target.result;e(r)},n.onerror=i=>{let r=Yw(i.target.error);t(r)}})}var sC=!1;function Yw(n){let e=as.S(Jl());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let i=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sC||(sC=!0,setTimeout(()=>{throw i},0)),i}}return n}var rv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>q(this,null,function*(){this.task=null;try{Z("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){_s(t)?Z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield gs(t)}yield this.X(6e4)}))}},sv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return q(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let i=new Set,r=t,s=!0;return G.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return Z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,s)).next(a=>(Z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let i=e;return t.changes.forEach((r,s)=>{let o=uI(s);Qw(o,i)>0&&(i=o)}),new gi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Qn=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Bu(n){return n==null}function bu(n){return n===0&&1/n==-1/0}function pI(n){return typeof n=="number"&&Number.isInteger(n)&&!bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Tn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oC(e)),e=cL(n.get(t),e);return oC(e)}function cL(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function oC(n){return n+""}function Wi(n){let e=n.length;if(xe(e>=2),e===2)return xe(n.charAt(0)===""&&n.charAt(1)===""),Ke.emptyPath();let t=e-2,i=[],r="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&ve(),n.charAt(o+1)){case"":let a=n.substring(s,o),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:ve()}s=o+2}return new Ke(i)}var aC=["userId","batchId"];function bp(n,e){return[n,Tn(e)]}function fI(n,e,t){return[n,Tn(e),t]}var uL={},dL=["prefixPath","collectionGroup","readTime","documentId"],hL=["prefixPath","collectionGroup","documentId"],pL=["collectionGroup","readTime","prefixPath","documentId"],fL=["canonicalId","targetId"],mL=["targetId","path"],gL=["path","targetId"],_L=["collectionId","parent"],vL=["indexId","uid"],wL=["uid","sequenceNumber"],yL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bL=["indexId","uid","orderedDocumentKey"],xL=["userId","collectionPath","documentId"],SL=["userId","collectionPath","largestBatchId"],EL=["userId","collectionGroup","largestBatchId"],mI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TL=[...mI,"documentOverlays"],gI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_I=gI,Xw=[..._I,"indexConfiguration","indexState","indexEntries"],CL=Xw,IL=[...Xw,"globals"];var xu=class extends Rp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Jt(n,e){let t=ce(n);return as.F(t._e,e)}function lC(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _o(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vI(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var vt=class n{constructor(e,t){this.comparator=e,this.root=t||Qi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}},za=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Qi=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();let e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}};Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1;Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Qi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dt=class n{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dp(this.data.getIterator())}getIteratorFrom(e){return new Dp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Dp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Da(n){return n.hasNext()?n.getNext():void 0}var Yn=class n{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new n([])}unionWith(e){let t=new dt(Lt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ga(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Mp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function wI(){return typeof atob<"u"}var Ut=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ut.EMPTY_BYTE_STRING=new Ut("");var AL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(n){if(xe(!!n),typeof n=="string"){let e=0,t=AL.exec(n);if(xe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ls(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}function Ef(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Jw(n){let e=n.mapValue.fields.__previous_value__;return Ef(e)?Jw(e):e}function Su(n){let e=_r(n.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}var ov=class{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},cs=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var rs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xp={nullValue:"NULL_VALUE"};function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ef(n)?4:yI(n)?9007199254740991:Tf(n)?10:11:ve()}function Ji(n,e){if(n===e)return!0;let t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Su(n).isEqual(Su(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=_r(r.timestampValue),a=_r(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return ls(r.bytesValue).isEqual(ls(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return bt(r.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(r.geoPointValue.longitude)===bt(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return bt(r.integerValue)===bt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=bt(r.doubleValue),a=bt(s.doubleValue);return o===a?bu(o)===bu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ga(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(lC(o)!==lC(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ji(o[l],a[l])))return!1;return!0}(n,e);default:return ve()}}function Eu(n,e){return(n.values||[]).find(t=>Ji(t,e))!==void 0}function us(n,e){if(n===e)return 0;let t=so(n),i=so(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=bt(s.integerValue||s.doubleValue),l=bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return cC(n.timestampValue,e.timestampValue);case 4:return cC(Su(n),Su(e));case 5:return Me(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ls(s),l=ls(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){let d=Me(a[c],l[c]);if(d!==0)return d}return Me(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Me(bt(s.latitude),bt(o.latitude));return a!==0?a:Me(bt(s.longitude),bt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return uC(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;let h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=Me(((c=m?.values)===null||c===void 0?void 0:c.length)||0,((d=y?.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:uC(m,y)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===rs.mapValue&&o===rs.mapValue)return 0;if(s===rs.mapValue)return 1;if(o===rs.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){let p=Me(l[h],d[h]);if(p!==0)return p;let m=us(a[l[h]],c[d[h]]);if(m!==0)return m}return Me(l.length,d.length)}(n.mapValue,e.mapValue);default:throw ve()}}function cC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);let t=_r(n),i=_r(e),r=Me(t.seconds,i.seconds);return r!==0?r:Me(t.nanos,i.nanos)}function uC(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=us(t[r],i[r]);if(s)return s}return Me(t.length,i.length)}function Wa(n){return av(n)}function av(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=_r(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ls(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=av(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${av(t.fields[o])}`;return r+"}"}(n.mapValue):ve()}function oo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lv(n){return!!n&&"integerValue"in n}function Tu(n){return!!n&&"arrayValue"in n}function dC(n){return!!n&&"nullValue"in n}function hC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sp(n){return!!n&&"mapValue"in n}function Tf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _o(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=mu(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bI={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function PL(n){return"nullValue"in n?xp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?oo(cs.empty(),ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Tf(n)?bI:{mapValue:{}}:ve()}function RL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?oo(cs.empty(),ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?bI:"mapValue"in n?Tf(n)?{mapValue:{}}:rs:ve()}function pC(n,e){let t=us(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fC(n,e){let t=us(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=Lt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=mu(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Sp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){_o(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(mu(this.value))}};function xI(n){let e=[];return _o(n.fields,(t,i)=>{let r=new Lt([t]);if(Sp(i)){let s=xI(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Yn(e)}var Ht=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Se.min(),Se.min(),Se.min(),vn.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Se.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Se.min(),Se.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Se.min(),Se.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zi=class{constructor(e,t){this.position=e,this.inclusive=t}};function mC(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=ue.comparator(ue.fromName(o.referenceValue),t.key):i=us(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function gC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}var ao=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function kL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Np=class{},Ge=class n extends Np{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new dv(e,t,i):t==="array-contains"?new fv(e,i):t==="in"?new Op(e,i):t==="not-in"?new mv(e,i):t==="array-contains-any"?new gv(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new hv(e,i):new pv(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(us(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(us(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},rt=class n extends Np{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ka(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ka(n){return n.op==="and"}function cv(n){return n.op==="or"}function Zw(n){return SI(n)&&Ka(n)}function SI(n){for(let e of n.filters)if(e instanceof rt)return!1;return!0}function uv(n){if(n instanceof Ge)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(Zw(n))return n.filters.map(e=>uv(e)).join(",");{let e=n.filters.map(t=>uv(t)).join(",");return`${n.op}(${e})`}}function EI(n,e){return n instanceof Ge?function(i,r){return r instanceof Ge&&i.op===r.op&&i.field.isEqual(r.field)&&Ji(i.value,r.value)}(n,e):n instanceof rt?function(i,r){return r instanceof rt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&EI(o,r.filters[a]),!0):!1}(n,e):void ve()}function TI(n,e){let t=n.filters.concat(e);return rt.create(t,n.op)}function CI(n){return n instanceof Ge?function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`}(n):n instanceof rt?function(t){return t.op.toString()+" {"+t.getFilters().map(CI).join(" ,")+"}"}(n):"Filter"}var dv=class extends Ge{constructor(e,t,i){super(e,t,i),this.key=ue.fromName(i.referenceValue)}matches(e){let t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}},hv=class extends Ge{constructor(e,t){super(e,"in",t),this.keys=II("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pv=class extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=II("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function II(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ue.fromName(i.referenceValue))}var fv=class extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Tu(t)&&Eu(t.arrayValue,this.value)}},Op=class extends Ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}},mv=class extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Eu(this.value.arrayValue,t)}},gv=class extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Tu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Eu(this.value.arrayValue,i))}};var _v=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function vv(n,e=null,t=[],i=[],r=null,s=null,o=null){return new _v(n,e,t,i,r,s,o)}function lo(n){let e=ce(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>uv(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Bu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Wa(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Wa(i)).join(",")),e.ue=t}return e.ue}function qu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gC(n.startAt,e.startAt)&&gC(n.endAt,e.endAt)}function Fp(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Lp(n,e){return n.filters.filter(t=>t instanceof Ge&&t.field.isEqual(e))}function _C(n,e,t){let i=xp,r=!0;for(let s of Lp(n,e)){let o=xp,a=!0;switch(s.op){case"<":case"<=":o=PL(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=xp}pC({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];pC({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}function vC(n,e,t){let i=rs,r=!0;for(let s of Lp(n,e)){let o=rs,a=!0;switch(s.op){case">=":case">":o=RL(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=rs}fC({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];fC({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}var Ri=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function AI(n,e,t,i,r,s,o,a){return new Ri(n,e,t,i,r,s,o,a)}function cl(n){return new Ri(n)}function wC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ey(n){return n.collectionGroup!==null}function Ba(n){let e=ce(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dt(Lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ao(s,i))}),t.has(Lt.keyField().canonicalString())||e.ce.push(new ao(Lt.keyField(),i))}return e.ce}function Cn(n){let e=ce(n);return e.le||(e.le=DL(e,Ba(n))),e.le}function DL(n,e){if(n.limitType==="F")return vv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ao(r.field,s)});let t=n.endAt?new Zi(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Zi(n.startAt.position,n.startAt.inclusive):null;return vv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wv(n,e){let t=n.filters.concat([e]);return new Ri(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vp(n,e,t){return new Ri(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gu(n,e){return qu(Cn(n),Cn(e))&&n.limitType===e.limitType}function PI(n){return`${lo(Cn(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>CI(r)).join(", ")}]`),Bu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Wa(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Wa(r)).join(",")),`Target(${i})`}(Cn(n))}; limitType=${n.limitType})`}function Hu(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ue.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Ba(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){let c=mC(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Ba(i),r)||i.endAt&&!function(o,a,l){let c=mC(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Ba(i),r))}(n,e)}function RI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kI(n){return(e,t)=>{let i=!1;for(let r of Ba(n)){let s=ML(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function ML(n,e,t){let i=n.field.isKeyField()?ue.comparator(e.key,t.key):function(s,o,a){let l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?us(l,c):ve()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ve()}}var er=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return vI(this.inner)}size(){return this.innerSize}};var NL=new vt(ue.comparator);function On(){return NL}var DI=new vt(ue.comparator);function pu(...n){let e=DI;for(let t of n)e=e.insert(t.key,t);return e}function MI(n){let e=DI;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ki(){return gu()}function NI(){return gu()}function gu(){return new er(n=>n.toString(),(n,e)=>n.isEqual(e))}var OL=new vt(ue.comparator),FL=new dt(ue.comparator);function Oe(...n){let e=FL;for(let t of n)e=e.add(t);return e}var LL=new dt(Me);function ty(){return LL}function ny(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function OI(n){return{integerValue:""+n}}function FI(n,e){return pI(e)?OI(e):ny(n,e)}var Qa=class{constructor(){this._=void 0}};function VL(n,e,t){return n instanceof ds?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ef(s)&&(s=Jw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof vr?VI(n,e):n instanceof wr?UI(n,e):function(r,s){let o=LI(r,s),a=yC(o)+yC(r.Pe);return lv(o)&&lv(r.Pe)?OI(a):ny(r.serializer,a)}(n,e)}function UL(n,e,t){return n instanceof vr?VI(n,e):n instanceof wr?UI(n,e):t}function LI(n,e){return n instanceof hs?function(i){return lv(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var ds=class extends Qa{},vr=class extends Qa{constructor(e){super(),this.elements=e}};function VI(n,e){let t=$I(e);for(let i of n.elements)t.some(r=>Ji(r,i))||t.push(i);return{arrayValue:{values:t}}}var wr=class extends Qa{constructor(e){super(),this.elements=e}};function UI(n,e){let t=$I(e);for(let i of n.elements)t=t.filter(r=>!Ji(r,i));return{arrayValue:{values:t}}}var hs=class extends Qa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function yC(n){return bt(n.integerValue||n.doubleValue)}function $I(n){return Tu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var co=class{constructor(e,t){this.field=e,this.transform=t}};function $L(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof vr&&r instanceof vr||i instanceof wr&&r instanceof wr?Ga(i.elements,r.elements,Ji):i instanceof hs&&r instanceof hs?Ji(i.Pe,r.Pe):i instanceof ds&&r instanceof ds}(n.transform,e.transform)}var yv=class{constructor(e,t){this.version=e,this.transformResults=t}},Pt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ep(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ya=class{};function zI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fs(n.key,Pt.none()):new ps(n.key,n.data,Pt.none());{let t=n.data,i=vn.empty(),r=new dt(Lt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ki(n.key,i,new Yn(r.toArray()),Pt.none())}}function zL(n,e,t){n instanceof ps?function(r,s,o){let a=r.value.clone(),l=xC(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ki?function(r,s,o){if(!Ep(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=xC(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(jI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function _u(n,e,t,i){return n instanceof ps?function(s,o,a,l){if(!Ep(s.precondition,o))return a;let c=s.value.clone(),d=SC(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof ki?function(s,o,a,l){if(!Ep(s.precondition,o))return a;let c=SC(s.fieldTransforms,l,o),d=o.data;return d.setAll(jI(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,i):function(s,o,a){return Ep(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function jL(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=LI(i.transform,r||null);s!=null&&(t===null&&(t=vn.empty()),t.set(i.field,s))}return t||null}function bC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ga(i,r,(s,o)=>$L(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ps=class extends Ya{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ki=class extends Ya{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function jI(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function xC(n,e,t){let i=new Map;xe(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,UL(o,a,t[r]))}return i}function SC(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,VL(s,o,e))}return i}var fs=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cu=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Iu=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&zL(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=_u(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=_u(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=NI();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let l=zI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Ga(this.mutations,e.mutations,(t,i)=>bC(t,i))&&Ga(this.baseMutations,e.baseMutations,(t,i)=>bC(t,i))}},bv=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){xe(e.mutations.length===i.length);let r=function(){return OL}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var Au=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var jt,We;function BI(n){switch(n){default:return ve();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function qI(n){if(n===void 0)return Ft("GRPC error has no .code"),W.UNKNOWN;switch(n){case jt.OK:return W.OK;case jt.CANCELLED:return W.CANCELLED;case jt.UNKNOWN:return W.UNKNOWN;case jt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case jt.INTERNAL:return W.INTERNAL;case jt.UNAVAILABLE:return W.UNAVAILABLE;case jt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case jt.NOT_FOUND:return W.NOT_FOUND;case jt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case jt.ABORTED:return W.ABORTED;case jt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case jt.DATA_LOSS:return W.DATA_LOSS;default:return ve()}}(We=jt||(jt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var EC=null;function GI(){return new TextEncoder}var BL=new Zr([4294967295,4294967295],0);function TC(n){let e=GI().encode(n),t=new L_;return t.update(e),new Uint8Array(t.digest())}function CC(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zr([t,i],0),new Zr([r,s],0)]}var Sv=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new io(`Invalid padding: ${t}`);if(i<0)throw new io(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new io(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Zr.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Zr.fromNumber(i)));return r.compare(BL)===1&&(r=new Zr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=TC(e),[i,r]=CC(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=TC(e),[i,r]=CC(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},io=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pu=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Se.min(),r,new vt(Me),On(),Oe())}},Ru=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,Oe(),Oe(),Oe())}};var qa=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Up=class{constructor(e,t){this.targetId=e,this.me=t}},$p=class{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},zp=class{constructor(){this.fe=0,this.ge=AC(),this.pe=Ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),t=Oe(),i=Oe();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ve()}}),new Ru(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=AC()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ev=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=On(),this.qe=IC(),this.Qe=new vt(Me)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(Fp(s))if(i===0){let o=new ue(s.path);this.Ue(t,o,Ht.newNoDocument(o,Se.min()))}else xe(i===1);else{let o=this.Ye(t);if(o!==i){let a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}EC?.et(function(d,h,p,m,y){var b,S,k,A,x,F;let V={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},z=h.unchangedNames;return z&&(V.bloomFilter={applied:y===0,hashCount:(b=z?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(A=(k=(S=z?.bits)===null||S===void 0?void 0:S.bitmap)===null||k===void 0?void 0:k.length)!==null&&A!==void 0?A:0,padding:(F=(x=z?.bits)===null||x===void 0?void 0:x.padding)!==null&&F!==void 0?F:0,mightContain:M=>{var C;return(C=m?.mightContain(M))!==null&&C!==void 0&&C}}),V}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=ls(i).toUint8Array()}catch(l){if(l instanceof Mp)return mi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Sv(o,r,s)}catch(l){return mi(l instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Fp(a.target)){let l=new ue(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ht.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=Oe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new Pu(e,t,this.Qe,this.ke,i);return this.ke=On(),this.qe=IC(),this.Qe=new vt(Me),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new zp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new dt(Me),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function IC(){return new vt(ue.comparator)}function AC(){return new vt(ue.comparator)}var qL={asc:"ASCENDING",desc:"DESCENDING"},GL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HL={and:"AND",or:"OR"},Tv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Cv(n,e){return n.useProto3Json||Bu(e)?e:{value:e}}function Xa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WL(n,e){return Xa(n,e.toTimestamp())}function Vt(n){return xe(!!n),Se.fromTimestamp(function(t){let i=_r(t);return new Ct(i.seconds,i.nanos)}(n))}function iy(n,e){return Iv(n,e).canonicalString()}function Iv(n,e){let t=function(r){return new Ke(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function WI(n){let e=Ke.fromString(n);return xe(iA(e)),e}function ku(n,e){return iy(n.databaseId,e.path)}function Yi(n,e){let t=WI(e);if(t.get(1)!==n.databaseId.projectId)throw new J(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(YI(t))}function KI(n,e){return iy(n.databaseId,e)}function QI(n){let e=WI(n);return e.length===4?Ke.emptyPath():YI(e)}function Av(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YI(n){return xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function PC(n,e,t){return{name:ku(n,e),fields:t.value.mapValue.fields}}function XI(n,e,t){let i=Yi(n,e.name),r=Vt(e.updateTime),s=e.createTime?Vt(e.createTime):Se.min(),o=new vn({mapValue:{fields:e.fields}}),a=Ht.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function KL(n,e){return"found"in e?function(i,r){xe(!!r.found),r.found.name,r.found.updateTime;let s=Yi(i,r.found.name),o=Vt(r.found.updateTime),a=r.found.createTime?Vt(r.found.createTime):Se.min(),l=new vn({mapValue:{fields:r.found.fields}});return Ht.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(i,r){xe(!!r.missing),xe(!!r.readTime);let s=Yi(i,r.missing),o=Vt(r.readTime);return Ht.newNoDocument(s,o)}(n,e):ve()}function QL(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(xe(d===void 0||typeof d=="string"),Ut.fromBase64String(d||"")):(xe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ut.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let d=c.code===void 0?W.UNKNOWN:qI(c.code);return new J(d,c.message||"")}(o);t=new $p(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Yi(n,i.document.name),s=Vt(i.document.updateTime),o=i.document.createTime?Vt(i.document.createTime):Se.min(),a=new vn({mapValue:{fields:i.document.fields}}),l=Ht.newFoundDocument(r,s,o,a),c=i.targetIds||[],d=i.removedTargetIds||[];t=new qa(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Yi(n,i.document),s=i.readTime?Vt(i.readTime):Se.min(),o=Ht.newNoDocument(r,s),a=i.removedTargetIds||[];t=new qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Yi(n,i.document),s=i.removedTargetIds||[];t=new qa([],s,r,null)}else{if(!("filter"in e))return ve();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new xv(r,s),a=i.targetId;t=new Up(a,o)}}return t}function Du(n,e){let t;if(e instanceof ps)t={update:PC(n,e.key,e.value)};else if(e instanceof fs)t={delete:ku(n,e.key)};else if(e instanceof ki)t={update:PC(n,e.key,e.data),updateMask:t4(e.fieldMask)};else{if(!(e instanceof Cu))return ve();t={verify:ku(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof ds)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ve()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:WL(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve()}(n,e.precondition)),t}function Pv(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?Pt.updateTime(Vt(s.updateTime)):s.exists!==void 0?Pt.exists(s.exists):Pt.none()}(e.currentDocument):Pt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;if("setToServerValue"in a)xe(a.setToServerValue==="REQUEST_TIME"),l=new ds;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new vr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new wr(d)}else"increment"in a?l=new hs(o,a.increment):ve();let c=Lt.fromServerFormat(a.fieldPath);return new co(c,l)}(n,r)):[];if(e.update){e.update.name;let r=Yi(n,e.update.name),s=new vn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(l){let c=l.fieldPaths||[];return new Yn(c.map(d=>Lt.fromServerFormat(d)))}(e.updateMask);return new ki(r,s,o,t,i)}return new ps(r,s,t,i)}if(e.delete){let r=Yi(n,e.delete);return new fs(r,t)}if(e.verify){let r=Yi(n,e.verify);return new Cu(r,t)}return ve()}function YL(n,e){return n&&n.length>0?(xe(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Vt(r.updateTime):Vt(s);return o.isEqual(Se.min())&&(o=Vt(s)),new yv(o,r.transformResults||[])}(t,e))):[]}function JI(n,e){return{documents:[KI(n,e.path)]}}function ZI(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=KI(n,r);let s=function(c){if(c.length!==0)return nA(rt.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Va(p.field),direction:JL(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Cv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:r}}function eA(n){let e=QI(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){xe(i===1);let d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let p=tA(h);return p instanceof rt&&Zw(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(y){return new ao(Ua(y.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Bu(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(h){let p=!!h.before,m=h.values||[];return new Zi(m,p)}(t.startAt));let c=null;return t.endAt&&(c=function(h){let p=!h.before,m=h.values||[];return new Zi(m,p)}(t.endAt)),AI(e,r,o,s,a,"F",l,c)}function XL(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Ua(t.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Ua(t.unaryFilter.field);return Ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ua(t.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ua(t.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(n):n.fieldFilter!==void 0?function(t){return Ge.create(Ua(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return rt.create(t.compositeFilter.filters.map(i=>tA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(n):ve()}function JL(n){return qL[n]}function ZL(n){return GL[n]}function e4(n){return HL[n]}function Va(n){return{fieldPath:n.canonicalString()}}function Ua(n){return Lt.fromServerFormat(n.fieldPath)}function nA(n){return n instanceof Ge?function(t){if(t.op==="=="){if(hC(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(dC(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hC(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(dC(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:ZL(t.op),value:t.value}}}(n):n instanceof rt?function(t){let i=t.getFilters().map(r=>nA(r));return i.length===1?i[0]:{compositeFilter:{op:e4(t.op),filters:i}}}(n):ve()}function t4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ja=class n{constructor(e,t,i,r,s=Se.min(),o=Se.min(),a=Ut.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jp=class{constructor(e){this.ct=e}};function n4(n,e){let t;if(e.document)t=XI(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=ue.fromSegments(e.noDocument.path),r=ho(e.noDocument.readTime);t=Ht.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve();{let i=ue.fromSegments(e.unknownDocument.path),r=ho(e.unknownDocument.version);t=Ht.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){let s=new Ct(r[0],r[1]);return Se.fromTimestamp(s)}(e.readTime)),t}function RC(n,e){let t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:ku(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Xa(s,o.version.toTimestamp()),createTime:Xa(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:uo(e.version)};else{if(!e.isUnknownDocument())return ve();i.unknownDocument={path:t.path.toArray(),version:uo(e.version)}}return i}function Bp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function uo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(n){let e=new Ct(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function eo(n,e){let t=(e.baseMutations||[]).map(s=>Pv(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>Pv(n.ct,s)),r=Ct.fromMillis(e.localWriteTimeMs);return new Iu(e.batchId,r,t,i)}function fu(n){let e=ho(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ho(n.lastLimboFreeSnapshotVersion):Se.min(),i;return i=function(s){return s.documents!==void 0}(n.query)?function(s){return xe(s.documents.length===1),Cn(cl(QI(s.documents[0])))}(n.query):function(s){return Cn(eA(s))}(n.query),new Ja(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ut.fromBase64String(n.resumeToken))}function rA(n,e){let t=uo(e.snapshotVersion),i=uo(e.lastLimboFreeSnapshotVersion),r;r=Fp(e.target)?JI(n.ct,e.target):ZI(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:lo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function ry(n){let e=eA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vp(e,e.limit,"L"):e}function q_(n,e){return new Au(e.largestBatchId,Pv(n.ct,e.overlayMutation))}function kC(n,e){let t=e.path.lastSegment();return[n,Tn(e.path.popLast()),t]}function DC(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:uo(i.readTime),documentKey:Tn(i.documentKey.path),largestBatchId:i.largestBatchId}}var Rv=class{getBundleMetadata(e,t){return MC(e).get(t).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:ho(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,t){return MC(e).put(function(r){return{bundleId:r.id,createTime:uo(Vt(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return NC(e).get(t).next(i=>{if(i)return function(s){return{name:s.name,query:ry(s.bundledQuery),readTime:ho(s.readTime)}}(i)})}saveNamedQuery(e,t){return NC(e).put(function(r){return{name:r.name,readTime:uo(Vt(r.readTime)),bundledQuery:r.bundledQuery}}(t))}};function MC(n){return Jt(n,"bundles")}function NC(n){return Jt(n,"namedQueries")}var qp=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let i=t.uid||"";return new n(e,i)}getOverlay(e,t){return cu(e).get(kC(this.userId,t)).next(i=>i?q_(this.serializer,i):null)}getOverlays(e,t){let i=Ki();return G.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){let r=[];return i.forEach((s,o)=>{let a=new Au(t,o);r.push(this.ht(e,a))}),G.waitFor(r)}removeOverlaysForBatchId(e,t,i){let r=new Set;t.forEach(o=>r.add(Tn(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(cu(e).j("collectionPathOverlayIndex",a))}),G.waitFor(s)}getOverlaysForCollection(e,t,i){let r=Ki(),s=Tn(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cu(e).U("collectionPathOverlayIndex",o).next(a=>{for(let l of a){let c=q_(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){let s=Ki(),o,a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{let h=q_(this.serializer,c);s.size()<r||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return cu(e).put(function(r,s,o){let[a,l,c]=kC(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Du(r.ct,o.mutation)}}(this.serializer,this.userId,t))}};function cu(n){return Jt(n,"documentOverlays")}var kv=class{Pt(e){return Jt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let i=t?.value;return i?Ut.fromUint8Array(i):Ut.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var mr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(bt(e.integerValue));else if("doubleValue"in e){let i=bt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),bu(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=_r(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ls(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?yI(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Tf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ve()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(bt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),ue.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};mr.vt=new mr;function i4(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function OC(n){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=i4(255&i[s]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(e/8)}var Dv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ot(i.value),i=t.next();this.Nt()}Lt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=t.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){let t=this.qt(e),i=OC(t);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){let t=this.qt(e),i=OC(t);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Mv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Nv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},to=class{constructor(){this.jt=new Dv,this.Ht=new Mv(this.jt),this.Jt=new Nv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var no=class n{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function es(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=FC(n.arrayValue,e.arrayValue),t!==0?t:(t=FC(n.directionalValue,e.directionalValue),t!==0?t:ue.comparator(n.documentKey,e.documentKey)))}function FC(n,e){for(let t=0;t<n.length&&t<e.length;++t){let i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}var Gp=class{constructor(e){this.Xt=new dt((t,i)=>Lt.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let i=t;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(xe(e.collectionGroup===this.collectionId),this.nn)return!1;let t=tv(e);if(t!==void 0&&!this.sn(t))return!1;let i=Js(e),r=new Set,s=0,o=0;for(;s<i.length&&this.sn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new dt(Lt.comparator),t=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new ja(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new ja(i.field,0))}for(let i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new ja(i.field,i.dir==="asc"?0:1)));return new Ha(Ha.UNKNOWN_ID,this.collectionId,t,yu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function sA(n){var e,t;if(xe(n instanceof Ge||n instanceof rt),n instanceof Ge){if(n instanceof Op){let r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ge.create(n.field,"==",s)))||[];return rt.create(r,"or")}return n}let i=n.filters.map(r=>sA(r));return rt.create(i,n.op)}function r4(n){if(n.getFilters().length===0)return[];let e=Lv(sA(n));return xe(oA(e)),Ov(e)||Fv(e)?[e]:e.getFilters()}function Ov(n){return n instanceof Ge}function Fv(n){return n instanceof rt&&Zw(n)}function oA(n){return Ov(n)||Fv(n)||function(t){if(t instanceof rt&&cv(t)){for(let i of t.getFilters())if(!Ov(i)&&!Fv(i))return!1;return!0}return!1}(n)}function Lv(n){if(xe(n instanceof Ge||n instanceof rt),n instanceof Ge)return n;if(n.filters.length===1)return Lv(n.filters[0]);let e=n.filters.map(i=>Lv(i)),t=rt.create(e,n.op);return t=Hp(t),oA(t)?t:(xe(t instanceof rt),xe(Ka(t)),xe(t.filters.length>1),t.filters.reduce((i,r)=>sy(i,r)))}function sy(n,e){let t;return xe(n instanceof Ge||n instanceof rt),xe(e instanceof Ge||e instanceof rt),t=n instanceof Ge?e instanceof Ge?function(r,s){return rt.create([r,s],"and")}(n,e):LC(n,e):e instanceof Ge?LC(e,n):function(r,s){if(xe(r.filters.length>0&&s.filters.length>0),Ka(r)&&Ka(s))return TI(r,s.getFilters());let o=cv(r)?r:s,a=cv(r)?s:r,l=o.filters.map(c=>sy(c,a));return rt.create(l,"or")}(n,e),Hp(t)}function LC(n,e){if(Ka(e))return TI(e,n.getFilters());{let t=e.filters.map(i=>sy(n,i));return rt.create(t,"or")}}function Hp(n){if(xe(n instanceof Ge||n instanceof rt),n instanceof Ge)return n;let e=n.getFilters();if(e.length===1)return Hp(e[0]);if(SI(n))return n;let t=e.map(r=>Hp(r)),i=[];return t.forEach(r=>{r instanceof Ge?i.push(r):r instanceof rt&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:rt.create(i,n.op)}var Vv=class{constructor(){this.un=new Mu}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(gi.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},Mu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new dt(Ke.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new dt(Ke.comparator)).toArray()}};var _p=new Uint8Array(0),Uv=class{constructor(e,t){this.databaseId=t,this.cn=new Mu,this.ln=new er(i=>lo(i),(i,r)=>qu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:i,parent:Tn(r)};return VC(e).put(s)}return G.resolve()}getCollectionParents(e,t){let i=[],r=IDBKeyRange.bound([t,""],[lI(t),""],!1,!0);return VC(e).U(r).next(s=>{for(let o of s){if(o.collectionId!==t)break;i.push(Wi(o.parent))}return i})}addFieldIndex(e,t){let i=uu(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete r.indexId;let s=i.add(r);if(t.indexState){let o=Na(e);return s.next(a=>{o.put(DC(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let i=uu(e),r=Na(e),s=Ma(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=uu(e),i=Ma(e),r=Na(e);return t.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,t){return G.forEach(this.hn(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new Gp(i).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let i=Ma(e),r=!0,s=new Map;return G.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Oe(),a=[];return G.forEach(s,(l,c)=>{Z("IndexedDbIndexManager",`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(l)} to execute ${lo(t)}`);let d=function(x,F){let V=tv(F);if(V===void 0)return null;for(let z of Lp(x,V.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(c,l),h=function(x,F){let V=new Map;for(let z of Js(F))for(let M of Lp(x,z.fieldPath))switch(M.op){case"==":case"in":V.set(z.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return V.set(z.fieldPath.canonicalString(),M.value),Array.from(V.values())}return null}(c,l),p=function(x,F){let V=[],z=!0;for(let M of Js(F)){let C=M.kind===0?_C(x,M.fieldPath,x.startAt):vC(x,M.fieldPath,x.startAt);V.push(C.value),z&&(z=C.inclusive)}return new Zi(V,z)}(c,l),m=function(x,F){let V=[],z=!0;for(let M of Js(F)){let C=M.kind===0?vC(x,M.fieldPath,x.endAt):_C(x,M.fieldPath,x.endAt);V.push(C.value),z&&(z=C.inclusive)}return new Zi(V,z)}(c,l),y=this.In(l,c,p),b=this.In(l,c,m),S=this.Tn(l,c,h),k=this.En(l.indexId,d,y,p.inclusive,b,m.inclusive,S);return G.forEach(k,A=>i.G(A,t.limit).next(x=>{x.forEach(F=>{let V=ue.fromSegments(F.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return G.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=r4(rt.create(e.filters,"and")).map(i=>vv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,i,r,s,o,a){let l=(t!=null?t.length:1)*Math.max(i.length,s.length),c=l/(t!=null?t.length:1),d=[];for(let h=0;h<l;++h){let p=t?this.dn(t[h/c]):_p,m=this.An(e,p,i[h%c],r),y=this.Rn(e,p,s[h%c],o),b=a.map(S=>this.An(e,p,S,!0));d.push(...this.createRange(m,y,b))}return d}An(e,t,i,r){let s=new no(e,ue.empty(),t,i);return r?s:s.Zt()}Rn(e,t,i,r){let s=new no(e,ue.empty(),t,i);return r?s.Zt():s}Pn(e,t){let i=new Gp(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2,r=this.hn(t);return G.forEach(r,s=>this.Pn(e,s).next(o=>{o?i!==0&&o.fields.length<function(l){let c=new dt(Lt.comparator),d=!1;for(let h of l.filters)for(let p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(let h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(t)&&r.length>1&&i===2?1:i)}Vn(e,t){let i=new to;for(let r of Js(e)){let s=t.data.field(r.fieldPath);if(s==null)return null;let o=i.Yt(r.kind);mr.vt.It(s,o)}return i.zt()}dn(e){let t=new to;return mr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let i=new to;return mr.vt.It(oo(this.databaseId,t),i.Yt(function(s){let o=Js(s);return o.length===0?0:o[o.length-1].kind}(e))),i.zt()}Tn(e,t,i){if(i===null)return[];let r=[];r.push(new to);let s=0;for(let o of Js(e)){let a=i[s++];for(let l of r)if(this.fn(t,o.fieldPath)&&Tu(a))r=this.gn(r,o,a);else{let c=l.Yt(o.kind);mr.vt.It(a,c)}}return this.pn(r)}In(e,t,i){return this.Tn(e,t,i.position)}pn(e){let t=[];for(let i=0;i<e.length;++i)t[i]=e[i].zt();return t}gn(e,t,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let l=new to;l.seed(a.zt()),mr.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(i=>i instanceof Ge&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){let i=uu(e),r=Na(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(s=>{let o=[];return G.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){let p=h?new yu(h.sequenceNumber,new gi(ho(h.readTime),new ue(Wi(h.documentKey)),h.largestBatchId)):yu.empty(),m=d.fields.map(([y,b])=>new ja(Lt.fromServerFormat(y),b));return new Ha(d.indexId,d.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:Me(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){let r=uu(e),s=Na(e);return this.yn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>G.forEach(a,l=>s.put(DC(l.indexId,this.uid,o,i)))))}updateIndexEntries(e,t){let i=new Map;return G.forEach(t,(r,s)=>{let o=i.get(r.collectionGroup);return(o?G.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),G.forEach(a,l=>this.wn(e,r,l).next(c=>{let d=this.Sn(s,l);return c.isEqual(d)?G.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,t,i,r){return Ma(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,t.key),documentKey:t.key.path.toArray()})}vn(e,t,i,r){return Ma(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,t.key),t.key.path.toArray()])}wn(e,t,i){let r=Ma(e),s=new dt(es);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,t)])},(o,a)=>{s=s.add(new no(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let i=new dt(es),r=this.Vn(t,e);if(r==null)return i;let s=tv(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Tu(o))for(let a of o.arrayValue.values||[])i=i.add(new no(t.indexId,e.key,this.dn(a),r))}else i=i.add(new no(t.indexId,e.key,_p,r));return i}bn(e,t,i,r,s){Z("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(l,c,d,h,p){let m=l.getIterator(),y=c.getIterator(),b=Da(m),S=Da(y);for(;b||S;){let k=!1,A=!1;if(b&&S){let x=d(b,S);x<0?A=!0:x>0&&(k=!0)}else b!=null?A=!0:k=!0;k?(h(S),S=Da(y)):A?(p(b),b=Da(m)):(b=Da(m),S=Da(y))}}(r,s,es,a=>{o.push(this.Dn(e,t,i,a))},a=>{o.push(this.vn(e,t,i,a))}),G.waitFor(o)}yn(e){let t=1;return Na(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>es(o,a)).filter((o,a,l)=>!a||es(o,l[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=es(o,e),l=es(o,t);if(a===0)r[0]=e.Zt();else if(a>0&&l<0)r.push(o),r.push(o.Zt());else if(l>0)break}r.push(t);let s=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,_p,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,_p,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return es(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(UC)}getMinOffset(e,t){return G.mapArray(this.hn(t),i=>this.Pn(e,i).next(r=>r||ve())).next(UC)}};function VC(n){return Jt(n,"collectionParents")}function Ma(n){return Jt(n,"indexEntries")}function uu(n){return Jt(n,"indexConfiguration")}function Na(n){return Jt(n,"indexState")}function UC(n){xe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;Qw(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new gi(e.readTime,e.documentKey,t)}var $C={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fi=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function aA(n,e,t){let i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,l=i.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{xe(a===1)}));let c=[];for(let d of t.mutations){let h=fI(e,d.key.path,t.batchId);s.push(r.delete(h)),c.push(d.key)}return G.waitFor(s).next(()=>c)}function Wp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ve();e=n.noDocument}return JSON.stringify(e).length}fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(41943040,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);var Kp=class n{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,t,i,r){xe(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,i,r)}checkEmpty(e){let t=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){let s=$a(e),o=ts(e);return o.add({}).next(a=>{xe(typeof a=="number");let l=new Iu(a,t,i,r),c=function(m,y,b){let S=b.baseMutations.map(A=>Du(m.ct,A)),k=b.mutations.map(A=>Du(m.ct,A));return{userId:y,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:S,mutations:k}}(this.serializer,this.userId,l),d=[],h=new dt((p,m)=>Me(p.canonicalString(),m.canonicalString()));for(let p of r){let m=fI(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(m,uL))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),G.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return ts(e).get(t).next(i=>i?(xe(i.userId===this.userId),eo(this.serializer,i)):null)}Mn(e,t){return this.Fn[t]?G.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){let r=i.keys();return this.Fn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return ts(e).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(xe(a.batchId>=i),s=eo(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return ts(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).U("userMutationsIndex",t).next(i=>i.map(r=>eo(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){let i=bp(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return $a(e).J({range:r},(o,a,l)=>{let[c,d,h]=o,p=Wi(d);if(c===this.userId&&t.path.isEqual(p))return ts(e).get(h).next(m=>{if(!m)throw ve();xe(m.userId===this.userId),s.push(eo(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new dt(Me),r=[];return t.forEach(s=>{let o=bp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=$a(e).J({range:a},(c,d,h)=>{let[p,m,y]=c,b=Wi(m);p===this.userId&&s.path.isEqual(b)?i=i.add(y):h.done()});r.push(l)}),G.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=bp(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new dt(Me);return $a(e).J({range:o},(l,c,d)=>{let[h,p,m]=l,y=Wi(p);h===this.userId&&i.isPrefixOf(y)?y.length===r&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let i=[],r=[];return t.forEach(s=>{r.push(ts(e).get(s).next(o=>{if(o===null)throw ve();xe(o.userId===this.userId),i.push(eo(this.serializer,o))}))}),G.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return aA(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),G.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return $a(e).J({range:i},(s,o,a)=>{if(s[0]===this.userId){let l=Wi(s[1]);r.push(l)}else a.done()}).next(()=>{xe(r.length===0)})})}containsKey(e,t){return lA(e,this.userId,t)}Nn(e){return cA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function lA(n,e,t){let i=bp(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return $a(n).J({range:s,H:!0},(a,l,c)=>{let[d,h,p]=a;d===e&&h===r&&(o=!0),c.done()}).next(()=>o)}function ts(n){return Jt(n,"mutations")}function $a(n){return Jt(n,"documentMutations")}function cA(n){return Jt(n,"mutationQueues")}var Za=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var $v=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let i=new Za(t.highestTargetId);return t.highestTargetId=i.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Se.fromTimestamp(new Ct(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(t,i),this.Qn(e,i))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oa(e).delete(t.targetId)).next(()=>this.qn(e)).next(i=>(xe(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,t,i){let r=0,s=[];return Oa(e).J((o,a)=>{let l=fu(a);l.sequenceNumber<=t&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>G.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Oa(e).J((i,r)=>{let s=fu(r);t(s)})}qn(e){return zC(e).get("targetGlobalKey").next(t=>(xe(t!==null),t))}Qn(e,t){return zC(e).put("targetGlobalKey",t)}Kn(e,t){return Oa(e).put(rA(this.serializer,t))}$n(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let i=lo(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return Oa(e).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{let c=fu(a);qu(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){let r=[],s=ns(e);return t.forEach(o=>{let a=Tn(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),G.waitFor(r)}removeMatchingKeys(e,t,i){let r=ns(e);return G.forEach(t,s=>{let o=Tn(s.path);return G.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){let i=ns(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){let i=IDBKeyRange.bound([t],[t+1],!1,!0),r=ns(e),s=Oe();return r.J({range:i,H:!0},(o,a,l)=>{let c=Wi(o[1]),d=new ue(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){let i=Tn(t.path),r=IDBKeyRange.bound([i],[lI(i)],!1,!0),s=0;return ns(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Oa(e).get(t).next(i=>i?fu(i):null)}};function Oa(n){return Jt(n,"targets")}function zC(n){return Jt(n,"targetGlobal")}function ns(n){return Jt(n,"targetDocuments")}function jC([n,e],[t,i]){let r=Me(n,t);return r===0?Me(e,i):r}var zv=class{constructor(e){this.Un=e,this.buffer=new dt(jC),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();jC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},jv=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>q(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){_s(t)?Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield gs(t)}yield this.Hn(3e5)}))}},Bv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Qn.oe);let i=new zv(t);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve($C)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$C):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let i,r,s,o,a,l,c,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(i=h,a=Date.now(),this.removeTargets(e,i,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),Fa()<=li.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:h})))}};function s4(n,e){return new Bv(n,e)}var qv=class{constructor(e,t){this.db=e,this.garbageCollector=s4(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}er(e){let t=0;return this.Zn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(i,r)=>t(r))}addReference(e,t,i){return vp(e,i)}removeReference(e,t,i){return vp(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return vp(e,t)}nr(e,t){return function(r,s){let o=!1;return cA(r).Y(a=>lA(r,a,s).next(l=>(l&&(o=!0),G.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let l=this.nr(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,Se.min()),ns(e).delete(function(h){return[0,Tn(h.path)]}(o))))});r.push(l)}}).next(()=>G.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return vp(e,t)}tr(e,t){let i=ns(e),r,s=Qn.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Qn.oe&&t(new ue(Wi(r)),s),s=c,r=l):s=Qn.oe}).next(()=>{s!==Qn.oe&&t(new ue(Wi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function vp(n,e){return ns(n).put(function(i,r){return{targetId:0,path:Tn(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}var Qp=class{constructor(){this.changes=new er(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Xs(e).put(i)}removeEntry(e,t,i){return Xs(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bp(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.rr(e,i)))}getEntry(e,t){let i=Ht.newInvalidDocument(t);return Xs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(du(t))},(r,s)=>{i=this.ir(t,s)}).next(()=>i)}sr(e,t){let i={size:0,document:Ht.newInvalidDocument(t)};return Xs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(du(t))},(r,s)=>{i={document:this.ir(t,s),size:Wp(s)}}).next(()=>i)}getEntries(e,t){let i=On();return this._r(e,t,(r,s)=>{let o=this.ir(r,s);i=i.insert(r,o)}).next(()=>i)}ar(e,t){let i=On(),r=new vt(ue.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);i=i.insert(s,a),r=r.insert(s,Wp(o))}).next(()=>({documents:i,ur:r}))}_r(e,t,i){if(t.isEmpty())return G.resolve();let r=new dt(GC);t.forEach(l=>r=r.add(l));let s=IDBKeyRange.bound(du(r.first()),du(r.last())),o=r.getIterator(),a=o.getNext();return Xs(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{let h=ue.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&GC(a,h)<0;)i(a,null),a=o.getNext();a&&a.isEqual(h)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?d.$(du(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Bp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xs(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let d=On();for(let h of c){let p=this.ir(ue.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Hu(t,p)||r.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,i,r){let s=On(),o=qC(t,i),a=qC(t,gi.max());return Xs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{let h=this.ir(ue.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===r&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Hv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return BC(e).get("remoteDocumentGlobalKey").next(t=>(xe(!!t),t))}rr(e,t){return BC(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let i=n4(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Se.min())))return i}return Ht.newInvalidDocument(e)}};function uA(n){return new Gv(n)}var Hv=class extends Qp{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new er(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let t=[],i=0,r=new dt((s,o)=>Me(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let l=RC(this.cr.serializer,o);r=r.add(s.path.popLast());let c=Wp(l);i+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){let l=RC(this.cr.serializer,o.convertToNoDocument(Se.min()));t.push(this.cr.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,i)),G.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(i=>(this.lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:i,ur:r})=>(r.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function BC(n){return Jt(n,"remoteDocumentGlobal")}function Xs(n){return Jt(n,"remoteDocumentsV14")}function du(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qC(n,e){let t=e.documentKey.path.toArray();return[n,Bp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function GC(n,e){let t=n.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Me(t[s],i[s]),r)return r;return r=Me(t.length,i.length),r||(r=Me(t[t.length-2],i[i.length-2]),r||Me(t[t.length-1],i[i.length-1]))}var Wv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Yp=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&_u(i.mutation,r,Yn.empty(),Ct.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Oe()){let r=Ki();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=pu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Ki();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Oe()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=On(),o=gu(),a=function(){return gu()}();return t.forEach((l,c)=>{let d=i.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof ki)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),_u(d.mutation,c,d.mutation.getFieldMask(),Ct.now())):o.set(c.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var h;return a.set(c,new Wv(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let i=gu(),r=new vt((o,a)=>o-a),s=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=t.get(l);if(c===null)return;let d=i.get(l)||Yn.empty();d=a.applyToLocalView(c,d),i.set(l,d);let h=(r.get(a.batchId)||Oe()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,d=l.value,h=NI();d.forEach(p=>{if(!s.has(p)){let m=zI(t.get(p),i.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return G.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ey(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):G.resolve(Ki()),a=-1,l=s;return o.next(c=>G.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?G.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Oe())).next(d=>({batchId:a,changes:MI(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(i=>{let r=pu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=pu();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,l=>{let c=function(h,p){return new Ri(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{let d=c.getKey();o.get(d)===null&&(o=o.insert(d,Ht.newInvalidDocument(d)))});let a=pu();return o.forEach((l,c)=>{let d=s.get(l);d!==void 0&&_u(d.mutation,c,Yn.empty(),Ct.now()),Hu(t,c)&&(a=a.insert(l,c))}),a})}};var Kv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Vt(r.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:ry(r.bundledQuery),readTime:Vt(r.readTime)}}(t)),G.resolve()}};var Qv=class{constructor(){this.overlays=new vt(ue.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Ki();return G.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){let r=Ki(),s=t.length+1,o=new ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return G.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new vt((c,d)=>c-d),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let d=s.get(c.largestBatchId);d===null&&(d=Ki(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}let a=Ki(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=r)););return G.resolve(a)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Au(t,i));let s=this.Ir.get(t);s===void 0&&(s=Oe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var Yv=class{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var Nu=class{constructor(){this.Tr=new dt(Bt.Er),this.dr=new dt(Bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new Bt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Bt(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new ue(new Ke([])),i=new Bt(t,e),r=new Bt(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ue(new Ke([])),i=new Bt(t,e),r=new Bt(t,e+1),s=Oe();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Bt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Bt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ue.comparator(e.key,t.key)||Me(e.wr,t.wr)}static Ar(e,t){return Me(e.wr,t.wr)||ue.comparator(e.key,t.key)}};var Xv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new dt(Bt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Iu(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.br=this.br.add(new Bt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Bt(t,0),r=new Bt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let a=this.Dr(o.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new dt(Me);return t.forEach(r=>{let s=new Bt(r,0),o=new Bt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),G.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;ue.isDocumentKey(s)||(s=s.child(""));let o=new Bt(new ue(s),0),a=new dt(Me);return this.br.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){xe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return G.forEach(t.mutations,r=>{let s=new Bt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new Bt(t,0),r=this.br.firstAfterOrEqual(i);return G.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Jv=class{constructor(e){this.Mr=e,this.docs=function(){return new vt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let i=On();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ht.newInvalidDocument(r))}),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=On(),o=t.path,a=new ue(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Qw(uI(d),i)<=0||(r.has(d.key)||Hu(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ve()}Or(e,t){return G.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Zv(this)}getSize(e){return G.resolve(this.size)}},Zv=class extends Qp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var ew=class{constructor(e){this.persistence=e,this.Nr=new er(t=>lo(t),qu),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nu,this.targetCount=0,this.kr=Za.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),G.waitFor(s).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}};var Xp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Qn(0),this.Kr=!1,this.Kr=!0,this.$r=new Yv,this.referenceDelegate=e(this),this.Ur=new ew(this),this.indexManager=new Vv,this.remoteDocumentCache=function(r){return new Jv(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new jp(t),this.Gr=new Kv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Xv(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){Z("MemoryPersistence","Starting transaction:",e);let r=new tw(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return G.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},tw=class extends Rp{constructor(e){super(),this.currentSequenceNumber=e}},Jp=class n{constructor(e){this.persistence=e,this.Jr=new Nu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,i=>{let r=ue.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,Se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var nw=class{constructor(e){this.serializer=e}O(e,t,i,r){let s=new kp("createOrUpgrade",t);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aC,{unique:!0}),l.createObjectStore("documentMutations")}(e),HC(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=G.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),HC(e)),o=o.next(()=>function(l){let c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aC,{unique:!0});let h=c.store("mutations"),p=d.map(m=>h.put(m));return G.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.ni(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),i<7&&r>=7&&(o=o.next(()=>this.ii(s))),i<8&&r>=8&&(o=o.next(()=>this.si(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.oi(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(l){let c=l.createObjectStore("documentOverlays",{keyPath:xL});c.createIndex("collectionPathOverlayIndex",SL,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",EL,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){let c=l.createObjectStore("remoteDocumentsV14",{keyPath:dL});c.createIndex("documentKeyIndex",hL),c.createIndex("collectionGroupIndex",pL)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ai(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:vL}).createIndex("sequenceNumberIndex",wL,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:yL}).createIndex("documentKeyIndex",bL,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),i<17&&r>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=Wp(r)}).next(()=>{let i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){let t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(r=>G.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>G.forEach(a,l=>{xe(l.userId===s.userId);let c=eo(this.serializer,l);return aA(e,s.userId,c).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.J((o,a)=>{let l=new Ke(o),c=function(h){return[0,Tn(h)]}(l);s.push(t.get(c).next(d=>d?G.resolve():(h=>t.put({targetId:0,path:Tn(h),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>G.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:_L});let i=t.store("collectionParents"),r=new Mu,s=o=>{if(r.add(o)){let a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Tn(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let l=new Ke(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{let d=Wi(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((i,r)=>{let s=fu(r),o=rA(this.serializer,s);return t.put(o)})}_i(e,t){let i=t.store("remoteDocuments"),r=[];return i.J((s,o)=>{let a=t.store("remoteDocumentsV14"),l=function(h){return h.document?new ue(Ke.fromString(h.document.name).popFirst(5)):h.noDocument?ue.fromSegments(h.noDocument.path):h.unknownDocument?ue.fromSegments(h.unknownDocument.path):ve()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(c))}).next(()=>G.waitFor(r))}ai(e,t){let i=t.store("mutations"),r=uA(this.serializer),s=new Xp(Jp.Zr,this.serializer.ct);return i.U().next(o=>{let a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Oe();eo(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),G.forEach(a,(l,c)=>{let d=new qt(c),h=qp.lt(this.serializer,d),p=s.getIndexManager(d),m=Kp.lt(d,this.serializer,p,s.referenceDelegate);return new Yp(r,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new xu(t,Qn.oe),l).next()})})}};function HC(n){n.createObjectStore("targetDocuments",{keyPath:mL}).createIndex("documentTargetsIndex",gL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fL,{unique:!0}),n.createObjectStore("targetGlobal")}var G_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iw=class n{constructor(e,t,i,r,s,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!n.D())throw new J(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qv(this,r),this.Ai=t+"main",this.serializer=new jp(l),this.Ri=new as(this.Ai,this.hi,new nw(this.serializer)),this.$r=new kv,this.Ur=new $v(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uA(this.serializer),this.Gr=new Rv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ft("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(W.FAILED_PRECONDITION,G_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Qn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>q(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>q(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>q(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(_s(e))return Z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return hu(e).get("owner").next(t=>G.resolve(this.vi(t)))}Ci(e){return wp(e).delete(this.clientId)}Fi(){return q(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let i=Jt(t,"clientMetadata");return i.U().next(r=>{let s=this.xi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return G.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):hu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new J(W.FAILED_PRECONDITION,G_);return!1}}return!(!this.networkEnabled||!this.inForeground)||wp(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Z("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return q(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new xu(e,Qn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(i=>this.Mi(i.updateTimeMs,t)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>wp(e).U().next(t=>this.xi(t,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Kp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,i){Z("IndexedDbPersistence","Starting transaction:",e);let r=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?IL:l===16?CL:l===15?Xw:l===14?_I:l===13?gI:l===12?TL:l===11?mI:void ve()}(this.hi),o;return this.Ri.runTransaction(e,r,s,a=>(o=new xu(a,this.Qr?this.Qr.next():Qn.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new J(W.FAILED_PRECONDITION,dI);return i(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return hu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new J(W.FAILED_PRECONDITION,G_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hu(e).put("owner",t)}static D(){return as.D()}bi(e){let t=hu(e);return t.get("owner").next(i=>this.vi(i)?(Z("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Mi(e,t){let i=Date.now();return!(e<i-t)&&(!(e>i)||(Ft(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Om()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let i=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Z("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ft("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ft("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function hu(n){return Jt(n,"owner")}function wp(n){return Jt(n,"clientMetadata")}function oy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var rw=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=Oe(),r=Oe();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var sw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Om()?8:hI(Jl())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new sw;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(Fa()<=li.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Fa()<=li.DEBUG&&Z("QueryEngine","Query:",La(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Fa()<=li.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):G.resolve())}Yi(e,t){if(wC(t))return G.resolve(null);let i=Cn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Vp(t,null,"F"),i=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=Oe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{let c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,Vp(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,i,r){return wC(t)||r.isEqual(Se.min())?G.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?G.resolve(null):(Fa()<=li.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),La(t)),this.rs(e,o,t,cI(r,-1)).next(a=>a))})}ts(e,t){let i=new dt(kI(e));return t.forEach((r,s)=>{Hu(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return Fa()<=li.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",La(t)),this.Ji.getDocumentsMatchingQuery(e,t,gi.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ow=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new vt(Me),this._s=new er(s=>lo(s),qu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function dA(n,e,t,i){return new ow(n,e,t,i)}function hA(n,e){return q(this,null,function*(){let t=ce(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],l=Oe();for(let c of r){o.push(c.batchId);for(let d of c.mutations)l=l.add(d.key)}for(let c of s){a.push(c.batchId);for(let d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})}function o4(n,e){let t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){let h=c.batch,p=h.keys(),m=G.resolve();return p.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(b=>{let S=c.docVersions.get(y);xe(S!==null),b.version.compareTo(S)<0&&(h.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),d.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Oe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function pA(n){let e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function a4(n,e){let t=ce(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let p=r.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ut.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,i)),r=r.insert(h,m),function(b,S,k){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(p,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let l=On(),c=Oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(fA(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!i.isEqual(Se.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=r,s))}function fA(n,e,t){let i=Oe(),r=Oe();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=On();return t.forEach((a,l)=>{let c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function l4(n,e){let t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function el(n,e){let t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,G.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Ja(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function tl(n,e,t){return q(this,null,function*(){let i=ce(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!_s(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function ef(n,e,t){let i=ce(n),r=Se.min(),s=Oe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){let h=ce(l),p=h._s.get(d);return p!==void 0?G.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(i,o,Cn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:Se.min(),t?s:Oe())).next(a=>(_A(i,RI(e),a),{documents:a,Ts:s})))}function mA(n,e){let t=ce(n),i=ce(t.Ur),r=t.os.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,e).next(o=>o?o.target:null))}function gA(n,e){let t=ce(n),i=t.us.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.cs.getAllFromCollectionGroup(r,e,cI(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(_A(t,e,r),r))}function _A(n,e,t){let i=n.us.get(e)||Se.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}function c4(n,e,t,i){return q(this,null,function*(){let r=ce(n),s=Oe(),o=On();for(let c of t){let d=e.Es(c.metadata.name);c.document&&(s=s.add(d));let h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield el(r,function(d){return Cn(cl(Ke.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>fA(c,a,o).next(d=>(a.apply(c),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))})}function u4(i,r){return q(this,arguments,function*(n,e,t=Oe()){let s=yield el(n,Cn(ry(e.bundledQuery))),o=ce(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let l=Vt(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.Gr.saveNamedQuery(a,e);let c=s.withResumeToken(Ut.EMPTY_BYTE_STRING,l);return o.os=o.os.insert(c.targetId,c),o.Ur.updateTargetData(a,c).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function WC(n,e){return`firestore_clients_${n}_${e}`}function KC(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function H_(n,e){return`firestore_targets_${n}_${e}`}var tf=class n{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Rs(e,t,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new J(r.error.code,r.error.message))),o?new n(e,t,r.state,s):(Ft("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},vu=class n{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Rs(e,t){let i=JSON.parse(t),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new J(i.error.code,i.error.message))),s?new n(e,i.state,r):(Ft("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let i=JSON.parse(t),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=ty();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=pI(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new n(e,s):(Ft("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},aw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ft("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ou=class{constructor(){this.activeTargetIds=ty()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},wu=class{constructor(e,t,i,r,s){this.window=e,this.ui=t,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new vt(Me),this.started=!1,this.bs=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=WC(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ou),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return q(this,null,function*(){let e=yield this.syncEngine.Qi();for(let i of e){if(i===this.ps)continue;let r=this.getItem(WC(this.persistenceKey,i));if(r){let s=nf.Rs(i,r);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let i=this.Ls(t);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,i){this.qs(e,t,i),this.Qs(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(H_(this.persistenceKey,e));if(r){let s=vu.Rs(e,r);s&&(i=s.state)}}return t&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(H_(this.persistenceKey,e))}updateQueryState(e,t,i){this.$s(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return Z("SharedClientState","READ",e,t),t}setItem(e,t){Z("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(Z("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>q(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let i=this.Gs(t.key);return this.zs(i,null)}{let i=this.js(t.key,t.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let i=this.Hs(t.key,t.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let i=this.Ys(t.key,t.newValue);if(i)return this.Zs(i)}}else if(t.key===this.xs){if(t.newValue!==null){let i=this.Ls(t.newValue);if(i)return this.Bs(i)}}else if(t.key===this.vs){let i=function(s){let o=Qn.oe;if(s!=null)try{let a=JSON.parse(s);xe(typeof a=="number"),o=a}catch(a){Ft("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);i!==Qn.oe&&this.sequenceNumberHandler(i)}else if(t.key===this.Os){let i=this.Xs(t.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,i){let r=new tf(this.currentUser,e,t,i),s=KC(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Vs())}Qs(e){let t=KC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,i){let r=H_(this.persistenceKey,e),s=new vu(e,t,i);this.setItem(r,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let i=this.Gs(e);return nf.Rs(i,t)}Hs(e,t){let i=this.Fs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return tf.Rs(new qt(s),r,t)}Ys(e,t){let i=this.Ms.exec(e),r=Number(i[1]);return vu.Rs(r,t)}Ls(e){return aw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return q(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let i=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),s=this.ks(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=ty();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}},rf=class{constructor(){this.so=new Ou,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ou,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lw=class{_o(e){}shutdown(){}};var sf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yp=null;function W_(){return yp===null?yp=function(){return 268435456+Math.round(2147483648*Math.random())}():yp++,"0x"+yp.toString(16)}var d4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var cw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var _n="WebChannelConnection",uw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let a=W_(),l=this.xo(t,i.toUriEncodedString());Z("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);let c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,r).then(d=>(Z("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw mi("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(t,i,r,s,o,a){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ll}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=d4[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=W_();return new Promise((o,a)=>{let l=new V_;l.setWithCredentials(!0),l.listenOnce($_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lu.NO_ERROR:let d=l.getResponseJson();Z(_n,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case lu.TIMEOUT:Z(_n,`RPC '${e}' ${s} timed out`),a(new J(W.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:let h=l.getStatus();if(Z(_n,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let m=p?.error;if(m&&m.status&&m.message){let y=function(S){let k=S.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(k)>=0?k:W.UNKNOWN}(m.status);a(new J(y,m.message))}else a(new J(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(W.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{Z(_n,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(r);Z(_n,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Bo(e,t,i){let r=W_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=B_(),a=j_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new U_({})),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let d=s.join("");Z(_n,`Creating RPC '${e}' stream ${r}: ${d}`,l);let h=o.createWebChannel(d,l),p=!1,m=!1,y=new cw({Io:S=>{m?Z(_n,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(p||(Z(_n,`Opening RPC '${e}' stream ${r} transport.`),h.open(),p=!0),Z(_n,`RPC '${e}' stream ${r} sending:`,S),h.send(S))},To:()=>h.close()}),b=(S,k,A)=>{S.listen(k,x=>{try{A(x)}catch(F){setTimeout(()=>{throw F},0)}})};return b(h,ka.EventType.OPEN,()=>{m||(Z(_n,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),b(h,ka.EventType.CLOSE,()=>{m||(m=!0,Z(_n,`RPC '${e}' stream ${r} transport closed`),y.So())}),b(h,ka.EventType.ERROR,S=>{m||(m=!0,mi(_n,`RPC '${e}' stream ${r} transport errored:`,S),y.So(new J(W.UNAVAILABLE,"The operation could not be completed")))}),b(h,ka.EventType.MESSAGE,S=>{var k;if(!m){let A=S.data[0];xe(!!A);let x=A,F=x.error||((k=x[0])===null||k===void 0?void 0:k.error);if(F){Z(_n,`RPC '${e}' stream ${r} received error:`,F);let V=F.status,z=function(E){let D=jt[E];if(D!==void 0)return qI(D)}(V),M=F.message;z===void 0&&(z=W.INTERNAL,M="Unknown error status: "+V+" with message "+F.message),m=!0,y.So(new J(z,M)),h.close()}else Z(_n,`RPC '${e}' stream ${r} received:`,A),y.bo(A)}}),b(a,z_.STAT_EVENT,S=>{S.stat===gp.PROXY?Z(_n,`RPC '${e}' stream ${r} detected buffering proxy`):S.stat===gp.NOPROXY&&Z(_n,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}};function vA(){return typeof window<"u"?window:null}function Tp(){return typeof document<"u"?document:null}function Wu(n){return new Tv(n,!0)}var Fu=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var of=class{constructor(e,t,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return q(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return q(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return q(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Ft(t.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new J(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>q(this,null,function*(){this.state=0,this.start()}))}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dw=class extends of{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=QL(this.serializer,e),i=function(s){if(!("targetChange"in s))return Se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?Vt(o.readTime):Se.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=Av(this.serializer),t.addTarget=function(s,o){let a,l=o.target;if(a=Fp(l)?{documents:JI(s,l)}:{query:ZI(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HI(s,o.resumeToken);let c=Cv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=Xa(s,o.snapshotVersion.toTimestamp());let c=Cv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let i=XL(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=Av(this.serializer),t.removeTarget=e,this.a_(t)}},hw=class extends of{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=YL(e.writeResults,e.commitTime),i=Vt(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=Av(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>Du(this.serializer,i))};this.a_(t)}};var pw=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new J(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Iv(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(W.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Iv(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},fw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ft(t),this.D_=!1):Z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var mw=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>q(this,null,function*(){vs(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),yield function(l){return q(this,null,function*(){let c=ce(l);c.L_.add(4),yield ul(c),c.q_.set("Unknown"),c.L_.delete(4),yield Ku(c)})}(this))}))}),this.q_=new fw(i,r)}};function Ku(n){return q(this,null,function*(){if(vs(n))for(let e of n.B_)yield e(!0)})}function ul(n){return q(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Cf(n,e){let t=ce(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),cy(t)?ly(t):hl(t).r_()&&ay(t,e))}function nl(n,e){let t=ce(n),i=hl(t);t.N_.delete(e),i.r_()&&wA(t,e),t.N_.size===0&&(i.r_()?i.o_():vs(t)&&t.q_.set("Unknown"))}function ay(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).A_(e)}function wA(n,e){n.Q_.xe(e),hl(n).R_(e)}function ly(n){n.Q_=new Ev({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.q_.v_()}function cy(n){return vs(n)&&!hl(n).n_()&&n.N_.size>0}function vs(n){return ce(n).L_.size===0}function yA(n){n.Q_=void 0}function h4(n){return q(this,null,function*(){n.q_.set("Online")})}function p4(n){return q(this,null,function*(){n.N_.forEach((e,t)=>{ay(n,e)})})}function f4(n,e){return q(this,null,function*(){yA(n),cy(n)?(n.q_.M_(e),ly(n)):n.q_.set("Unknown")})}function m4(n,e,t){return q(this,null,function*(){if(n.q_.set("Online"),e instanceof $p&&e.state===2&&e.cause)try{yield function(r,s){return q(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,e)}catch(i){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield af(n,i)}else if(e instanceof qa?n.Q_.Ke(e):e instanceof Up?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Se.min()))try{let i=yield pA(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{let d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Ut.EMPTY_BYTE_STRING,d.snapshotVersion)),wA(s,l);let h=new Ja(d.target,l,c,d.sequenceNumber);ay(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){Z("RemoteStore","Failed to raise snapshot:",i),yield af(n,i)}})}function af(n,e,t){return q(this,null,function*(){if(!_s(e))throw e;n.L_.add(1),yield ul(n),n.q_.set("Offline"),t||(t=()=>pA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>q(this,null,function*(){Z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ku(n)}))})}function bA(n,e){return e().catch(t=>af(n,t,e))}function dl(n){return q(this,null,function*(){let e=ce(n),t=ms(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;g4(e);)try{let r=yield l4(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,_4(e,r)}catch(r){yield af(e,r)}xA(e)&&SA(e)})}function g4(n){return vs(n)&&n.O_.length<10}function _4(n,e){n.O_.push(e);let t=ms(n);t.r_()&&t.V_&&t.m_(e.mutations)}function xA(n){return vs(n)&&!ms(n).n_()&&n.O_.length>0}function SA(n){ms(n).start()}function v4(n){return q(this,null,function*(){ms(n).p_()})}function w4(n){return q(this,null,function*(){let e=ms(n);for(let t of n.O_)e.m_(t.mutations)})}function y4(n,e,t){return q(this,null,function*(){let i=n.O_.shift(),r=bv.from(i,e,t);yield bA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield dl(n)})}function b4(n,e){return q(this,null,function*(){e&&ms(n).V_&&(yield function(i,r){return q(this,null,function*(){if(function(o){return BI(o)&&o!==W.ABORTED}(r.code)){let s=i.O_.shift();ms(i).s_(),yield bA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield dl(i)}})}(n,e)),xA(n)&&SA(n)})}function QC(n,e){return q(this,null,function*(){let t=ce(n);t.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");let i=vs(t);t.L_.add(3),yield ul(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ku(t)})}function gw(n,e){return q(this,null,function*(){let t=ce(n);e?(t.L_.delete(2),yield Ku(t)):e||(t.L_.add(2),yield ul(t),t.q_.set("Unknown"))})}function hl(n){return n.K_||(n.K_=function(t,i,r){let s=ce(t);return s.w_(),new dw(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:h4.bind(null,n),Ro:p4.bind(null,n),mo:f4.bind(null,n),d_:m4.bind(null,n)}),n.B_.push(e=>q(this,null,function*(){e?(n.K_.s_(),cy(n)?ly(n):n.q_.set("Unknown")):(yield n.K_.stop(),yA(n))}))),n.K_}function ms(n){return n.U_||(n.U_=function(t,i,r){let s=ce(t);return s.w_(),new hw(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:v4.bind(null,n),mo:b4.bind(null,n),f_:w4.bind(null,n),g_:y4.bind(null,n)}),n.B_.push(e=>q(this,null,function*(){e?(n.U_.s_(),yield dl(n)):(yield n.U_.stop(),n.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var _w=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pl(n,e){if(Ft("AsyncQueue",`${e}: ${n}`),_s(n))return new J(W.UNAVAILABLE,`${e}: ${n}`);throw n}var lf=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ue.comparator(t.key,i.key):(t,i)=>ue.comparator(t.key,i.key),this.keyedMap=pu(),this.sortedSet=new vt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var cf=class{constructor(){this.W_=new vt(ue.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},il=class n{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,lf.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var vw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ww=class{constructor(){this.queries=YC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=ce(t),s=r.queries;r.queries=YC(),s.forEach((o,a)=>{for(let l of a.j_)l.onError(i)})})(this,new J(W.ABORTED,"Firestore shutting down"))}};function YC(){return new er(n=>PI(n),Gu)}function uy(n,e){return q(this,null,function*(){let t=ce(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new vw,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let a=pl(o,`Initialization of query '${La(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&hy(t)})}function dy(n,e){return q(this,null,function*(){let t=ce(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function x4(n,e){let t=ce(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&hy(t)}function S4(n,e,t){let i=ce(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function hy(n){n.Y_.forEach(e=>{e.next()})}var yw,XC;(XC=yw||(yw={})).ea="default",XC.Cache="cache";var Lu=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yw.Cache}};var bw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var uf=class{constructor(e){this.serializer=e}Es(e){return Yi(this.serializer,e)}ds(e){return e.metadata.exists?XI(this.serializer,e.document,!1):Ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Vt(e)}},xw=class{constructor(e,t,i){this.ca=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let i=Ke.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,i=new uf(this.serializer);for(let r of e)if(r.metadata.queries){let s=i.Es(r.metadata.name);for(let o of r.metadata.queries){let a=(t.get(o)||Oe()).add(s);t.set(o,a)}}return t}complete(){return q(this,null,function*(){let e=yield c4(this.localStore,new uf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let i of this.queries)yield u4(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function EA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var df=class{constructor(e){this.key=e}},hf=class{constructor(e){this.key=e}},pf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=kI(e),this.Ra=new lf(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new cf,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,h)=>{let p=r.get(d),m=Hu(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),S=!1;p&&m?p.data.isEqual(m.data)?y!==b&&(i.track({type:3,doc:m}),S=!0):this.ga(p,m)||(i.track({type:2,doc:m}),S=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),S=!0):p&&!m&&(i.track({type:1,doc:p}),S=!0,(l||c)&&(a=!0)),S&&(m?(o=o.add(m),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(m,y){let b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return b(m)-b(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(i),r=r!=null&&r;let a=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new il(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Oe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new hf(i))}),this.da.forEach(i=>{e.has(i)||t.push(new df(i))}),t}ba(e){this.Ta=e.Ts,this.da=Oe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return il.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Sw=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Ew=class{constructor(e){this.key=e,this.va=!1}},Tw=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new er(a=>PI(a),Gu),this.Ma=new Map,this.xa=new Set,this.Oa=new vt(ue.comparator),this.Na=new Map,this.La=new Nu,this.Ba={},this.ka=new Map,this.qa=Za.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function E4(n,e,t=!0){return q(this,null,function*(){let i=If(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield TA(i,e,t,!0),r})}function T4(n,e){return q(this,null,function*(){let t=If(n);yield TA(t,e,!0,!1)})}function TA(n,e,t,i){return q(this,null,function*(){let r=yield el(n.localStore,Cn(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=yield py(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Cf(n.remoteStore,r),a})}function py(n,e,t,i,r){return q(this,null,function*(){n.Ka=(h,p,m)=>function(b,S,k,A){return q(this,null,function*(){let x=S.view.ma(k);x.ns&&(x=yield ef(b.localStore,S.query,!1).then(({documents:M})=>S.view.ma(M,x)));let F=A&&A.targetChanges.get(S.targetId),V=A&&A.targetMismatches.get(S.targetId)!=null,z=S.view.applyChanges(x,b.isPrimaryClient,F,V);return Cw(b,S.targetId,z.wa),z.snapshot})}(n,h,p,m);let s=yield ef(n.localStore,e,!0),o=new pf(e,s.Ts),a=o.ma(s.documents),l=Ru.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);Cw(n,t,c.wa);let d=new Sw(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot})}function C4(n,e,t){return q(this,null,function*(){let i=ce(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Gu(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield tl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&nl(i.remoteStore,r.targetId),rl(i,r.targetId)}).catch(gs))):(rl(i,r.targetId),yield tl(i.localStore,r.targetId,!0))})}function I4(n,e){return q(this,null,function*(){let t=ce(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),nl(t.remoteStore,i.targetId))})}function A4(n,e,t){return q(this,null,function*(){let i=_y(n);try{let r=yield function(o,a){let l=ce(o),c=Ct.now(),d=a.reduce((m,y)=>m.add(y.key),Oe()),h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=On(),b=Oe();return l.cs.getEntries(m,d).next(S=>{y=S,y.forEach((k,A)=>{A.isValidDocument()||(b=b.add(k))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(S=>{h=S;let k=[];for(let A of a){let x=jL(A,h.get(A.key).overlayedDocument);x!=null&&k.push(new ki(A.key,x,xI(x.value.mapValue),Pt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,k,a)}).next(S=>{p=S;let k=S.applyToLocalDocumentSet(h,b);return l.documentOverlayCache.saveOverlays(m,S.batchId,k)})}).then(()=>({batchId:p.batchId,changes:MI(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new vt(Me)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,t),yield xr(i,r.changes),yield dl(i.remoteStore)}catch(r){let s=pl(r,"Failed to persist write");t.reject(s)}})}function CA(n,e){return q(this,null,function*(){let t=ce(n);try{let i=yield a4(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(xe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?xe(o.va):r.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),yield xr(t,i,e)}catch(i){yield gs(i)}})}function JC(n,e,t){let i=ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(let p of h.j_)p.Z_(a)&&(c=!0)}),c&&hy(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function P4(n,e,t){return q(this,null,function*(){let i=ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new vt(ue.comparator);o=o.insert(s,Ht.newNoDocument(s,Se.min()));let a=Oe().add(s),l=new Pu(Se.min(),new Map,new vt(Me),o,a);yield CA(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),gy(i)}else yield tl(i.localStore,e,!1).then(()=>rl(i,e,t)).catch(gs)})}function R4(n,e){return q(this,null,function*(){let t=ce(n),i=e.batch.batchId;try{let r=yield o4(t.localStore,e);my(t,i,null),fy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield xr(t,r)}catch(r){yield gs(r)}})}function k4(n,e,t){return q(this,null,function*(){let i=ce(n);try{let r=yield function(o,a){let l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(xe(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(i.localStore,e);my(i,e,t),fy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield xr(i,r)}catch(r){yield gs(r)}})}function D4(n,e){return q(this,null,function*(){let t=ce(n);vs(t.remoteStore)||Z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(o){let a=ce(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(i===-1)return void e.resolve();let r=t.ka.get(i)||[];r.push(e),t.ka.set(i,r)}catch(i){let r=pl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function fy(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function my(n,e,t){let i=ce(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function rl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||IA(n,i)})}function IA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(nl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),gy(n))}function Cw(n,e,t){for(let i of t)i instanceof df?(n.La.addReference(i.key,e),M4(n,i)):i instanceof hf?(Z("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||IA(n,i.key)):ve()}function M4(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(Z("SyncEngine","New document in limbo: "+t),n.xa.add(i),gy(n))}function gy(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ue(Ke.fromString(e)),i=n.qa.next();n.Na.set(i,new Ew(t)),n.Oa=n.Oa.insert(t,i),Cf(n.remoteStore,new Ja(Cn(cl(t.path)),i,"TargetPurposeLimboResolution",Qn.oe))}}function xr(n,e,t){return q(this,null,function*(){let i=ce(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,t).then(c=>{var d;if((c||t)&&i.isPrimaryClient){let h=c?!c.fromCache:(d=t?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);let h=rw.Wi(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,c){return q(this,null,function*(){let d=ce(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>G.forEach(c,p=>G.forEach(p.$i,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>G.forEach(p.Ui,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!_s(h))throw h;Z("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let p=h.targetId;if(!h.fromCache){let m=d.os.get(p),y=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(p,b)}}})}(i.localStore,s))})}function N4(n,e){return q(this,null,function*(){let t=ce(n);if(!t.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());let i=yield hA(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new J(W.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield xr(t,i.hs)}})}function O4(n,e){let t=ce(n),i=t.Na.get(e);if(i&&i.va)return Oe().add(i.key);{let r=Oe(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let a=t.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function F4(n,e){return q(this,null,function*(){let t=ce(n),i=yield ef(t.localStore,e.query,!0),r=e.view.ba(i);return t.isPrimaryClient&&Cw(t,e.targetId,r.wa),r})}function L4(n,e){return q(this,null,function*(){let t=ce(n);return gA(t.localStore,e).then(i=>xr(t,i))})}function V4(n,e,t,i){return q(this,null,function*(){let r=ce(n),s=yield function(a,l){let c=ce(a),d=ce(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):G.resolve(null)))}(r.localStore,e);s!==null?(t==="pending"?yield dl(r.remoteStore):t==="acknowledged"||t==="rejected"?(my(r,e,i||null),fy(r,e),function(a,l){ce(ce(a).mutationQueue).On(l)}(r.localStore,e)):ve(),yield xr(r,s)):Z("SyncEngine","Cannot apply mutation batch with id: "+e)})}function U4(n,e){return q(this,null,function*(){let t=ce(n);if(If(t),_y(t),e===!0&&t.Qa!==!0){let i=t.sharedClientState.getAllActiveQueryTargets(),r=yield ZC(t,i.toArray());t.Qa=!0,yield gw(t.remoteStore,!0);for(let s of r)Cf(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let i=[],r=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(rl(t,o),tl(t.localStore,o,!0))),nl(t.remoteStore,o)}),yield r,yield ZC(t,i),function(o){let a=ce(o);a.Na.forEach((l,c)=>{nl(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new vt(ue.comparator)}(t),t.Qa=!1,yield gw(t.remoteStore,!1)}})}function ZC(n,e,t){return q(this,null,function*(){let i=ce(n),r=[],s=[];for(let o of e){let a,l=i.Ma.get(o);if(l&&l.length!==0){a=yield el(i.localStore,Cn(l[0]));for(let c of l){let d=i.Fa.get(c),h=yield F4(i,d);h.snapshot&&s.push(h.snapshot)}}else{let c=yield mA(i.localStore,o);a=yield el(i.localStore,c),yield py(i,AA(c),o,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(s),r})}function AA(n){return AI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $4(n){return function(t){return ce(ce(t).persistence).Qi()}(ce(n).localStore)}function z4(n,e,t,i){return q(this,null,function*(){let r=ce(n);if(r.Qa)return void Z("SyncEngine","Ignoring unexpected query state notification.");let s=r.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield gA(r.localStore,RI(s[0])),a=Pu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ut.EMPTY_BYTE_STRING);yield xr(r,o,a);break}case"rejected":yield tl(r.localStore,e,!0),rl(r,e,i);break;default:ve()}})}function j4(n,e,t){return q(this,null,function*(){let i=If(n);if(i.Qa){for(let r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Z("SyncEngine","Adding an already active target "+r);continue}let s=yield mA(i.localStore,r),o=yield el(i.localStore,s);yield py(i,AA(s),o.targetId,!1,o.resumeToken),Cf(i.remoteStore,o)}for(let r of t)i.Ma.has(r)&&(yield tl(i.localStore,r,!1).then(()=>{nl(i.remoteStore,r),rl(i,r)}).catch(gs))}})}function If(n){let e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.Ca.d_=x4.bind(null,e.eventManager),e.Ca.$a=S4.bind(null,e.eventManager),e}function _y(n){let e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k4.bind(null,e),e}function B4(n,e,t){let i=ce(n);(function(s,o,a){return q(this,null,function*(){try{let l=yield o.getMetadata();if(yield function(m,y){let b=ce(m),S=Vt(y.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",k=>b.Gr.getBundleMetadata(k,y.id)).then(k=>!!k&&k.createTime.compareTo(S)>=0)}(s.localStore,l))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(EA(l));let c=new xw(l,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let p=yield c.la(d);p&&a._updateProgress(p),d=yield o.Ua()}let h=yield c.complete();return yield xr(s,h.Ia,void 0),yield function(m,y){let b=ce(m);return b.persistence.runTransaction("Save bundle","readwrite",S=>b.Gr.saveBundleMetadata(S,y))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return mi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Vu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return q(this,null,function*(){this.serializer=Wu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dA(this.persistence,new Zp,e.initialUser,this.serializer)}createPersistence(e){return new Xp(Jp.Zr,this.serializer)}createSharedClientState(e){return new rf}terminate(){return q(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ff=class n extends Vu{constructor(e,t,i){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return q(this,null,function*(){yield fm(n.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield _y(this.Wa.syncEngine),yield dl(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return dA(this.persistence,new Zp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let i=this.persistence.referenceDelegate.garbageCollector;return new jv(i,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let i=new sv(t,this.persistence);return new rv(e.asyncQueue,i)}createPersistence(e){let t=oy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?fi.withCacheSize(this.cacheSizeBytes):fi.DEFAULT;return new iw(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,vA(),Tp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rf}},Iw=class n extends ff{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return q(this,null,function*(){yield fm(n.prototype,this,"initialize").call(this,e);let t=this.Wa.syncEngine;this.sharedClientState instanceof wu&&(this.sharedClientState.syncEngine={no:V4.bind(null,t),ro:z4.bind(null,t),io:j4.bind(null,t),Qi:$4.bind(null,t),eo:L4.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>q(this,null,function*(){yield U4(this.Wa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=vA();if(!wu.D(t))throw new J(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=oy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wu(t,e.asyncQueue,i,e.clientId,e.initialUser)}},Uu=class{initialize(e,t){return q(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=N4.bind(null,this.syncEngine),yield gw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new ww}()}createDatastore(e){let t=Wu(e.databaseInfo.databaseId),i=function(s){return new uw(s)}(e.databaseInfo);return function(s,o,a,l){return new pw(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new mw(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>JC(this.syncEngine,t,0),function(){return sf.D()?new sf:new lw}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,d){let h=new Tw(r,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return q(this,null,function*(){var e,t;yield function(r){return q(this,null,function*(){let s=ce(r);Z("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ul(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};function eI(n,e=10240){let t=0;return{read(){return q(this,null,function*(){if(t<n.byteLength){let r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})},cancel(){return q(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var sl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Aw=class{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new Gt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.ja.cancel()}getMetadata(){return q(this,null,function*(){return this.metadata.promise})}Ua(){return q(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return q(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let t=this.Ha.decode(e),i=Number(t);isNaN(i)&&this.Za(`length string (${t}) is not valid number`);let r=yield this.Xa(i);return new bw(JSON.parse(r),e.length+i)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return q(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Xa(e){return q(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let t=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return q(this,null,function*(){let e=yield this.ja.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Pw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return q(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(r,s){return q(this,null,function*(){let o=ce(r),a={documents:s.map(h=>ku(o.serializer,h))},l=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Ke.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{let p=KL(o.serializer,h);c.set(p.key.toString(),p)});let d=[];return s.forEach(h=>{let p=c.get(h.toString());xe(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new fs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return q(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{let r=ue.fromPath(i);this.mutations.push(new Cu(r,this.precondition(r)))}),yield function(i,r){return q(this,null,function*(){let s=ce(i),o={writes:r.map(a=>Du(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Ke.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ve();t=Se.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new J(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Se.min())?Pt.exists(!1):Pt.updateTime(t):Pt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Se.min()))throw new J(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pt.updateTime(t)}return Pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Rw=class{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.nu=i.maxAttempts,this.t_=new Fu(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>q(this,null,function*(){let e=new Pw(this.datastore),t=this.su(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ou(r)}))}).catch(i=>{this.ou(i)})}))}su(e){try{let t=this.updateFunction(e);return!Bu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!BI(t)}return!1}};var kw=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=qt.UNAUTHENTICATED,this.clientId=Ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>q(this,null,function*(){Z("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(Z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(W.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>q(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=pl(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Cp(n,e){return q(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>q(this,null,function*(){i.isEqual(r)||(yield hA(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Dw(n,e){return q(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield vy(n);Z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>QC(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>QC(e.remoteStore,r)),n._onlineComponents=e})}function PA(n){return n.name==="FirebaseError"?n.code===W.FAILED_PRECONDITION||n.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function vy(n){return q(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!PA(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),yield Cp(n,new Vu)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),yield Cp(n,new Vu);return n._offlineComponents})}function Af(n){return q(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dw(n,n._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),yield Dw(n,new Uu))),n._onlineComponents})}function RA(n){return vy(n).then(e=>e.persistence)}function wy(n){return vy(n).then(e=>e.localStore)}function kA(n){return Af(n).then(e=>e.remoteStore)}function yy(n){return Af(n).then(e=>e.syncEngine)}function q4(n){return Af(n).then(e=>e.datastore)}function ol(n){return q(this,null,function*(){let e=yield Af(n),t=e.eventManager;return t.onListen=E4.bind(null,e.syncEngine),t.onUnlisten=C4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=T4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=I4.bind(null,e.syncEngine),t})}function G4(n){return n.asyncQueue.enqueue(()=>q(this,null,function*(){let e=yield RA(n),t=yield kA(n);return e.setNetworkEnabled(!0),function(r){let s=ce(r);return s.L_.delete(0),Ku(s)}(t)}))}function H4(n){return n.asyncQueue.enqueue(()=>q(this,null,function*(){let e=yield RA(n),t=yield kA(n);return e.setNetworkEnabled(!1),function(r){return q(this,null,function*(){let s=ce(r);s.L_.add(0),yield ul(s),s.q_.set("Offline")})}(t)}))}function W4(n,e){let t=new Gt;return n.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return function(r,s,o){return q(this,null,function*(){try{let a=yield function(c,d){let h=ce(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new J(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=pl(a,`Failed to get document '${s} from cache`);o.reject(l)}})}(yield wy(n),e,t)})),t.promise}function DA(n,e,t={}){let i=new Gt;return n.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return function(s,o,a,l,c){let d=new sl({next:p=>{o.enqueueAndForget(()=>dy(s,h));let m=p.docs.has(a);!m&&p.fromCache?c.reject(new J(W.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new J(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Lu(cl(a.path),d,{includeMetadataChanges:!0,_a:!0});return uy(s,h)}(yield ol(n),n.asyncQueue,e,t,i)})),i.promise}function K4(n,e){let t=new Gt;return n.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return function(r,s,o){return q(this,null,function*(){try{let a=yield ef(r,s,!0),l=new pf(s,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){let l=pl(a,`Failed to execute query '${s} against cache`);o.reject(l)}})}(yield wy(n),e,t)})),t.promise}function MA(n,e,t={}){let i=new Gt;return n.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return function(s,o,a,l,c){let d=new sl({next:p=>{o.enqueueAndForget(()=>dy(s,h)),p.fromCache&&l.source==="server"?c.reject(new J(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Lu(a,d,{includeMetadataChanges:!0,_a:!0});return uy(s,h)}(yield ol(n),n.asyncQueue,e,t,i)})),i.promise}function Q4(n,e){let t=new sl(e);return n.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return function(r,s){ce(r).Y_.add(s),s.next()}(yield ol(n),t)})),()=>{t.za(),n.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return function(r,s){ce(r).Y_.delete(s)}(yield ol(n),t)}))}}function Y4(n,e,t,i){let r=function(o,a){let l;return l=typeof o=="string"?GI().encode(o):o,function(d,h){return new Aw(d,h)}(function(d,h){if(d instanceof Uint8Array)return eI(d,h);if(d instanceof ArrayBuffer)return eI(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,Wu(e));n.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){B4(yield yy(n),r,i)}))}function X4(n,e){return n.asyncQueue.enqueue(()=>q(this,null,function*(){return function(i,r){let s=ce(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,r))}(yield wy(n),e)}))}function NA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tI=new Map;function by(n,e,t){if(!t)throw new J(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xy(n,e,t,i){if(e===!0&&i===!0)throw new J(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nI(n){if(!ue.isDocumentKey(n))throw new J(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iI(n){if(ue.isDocumentKey(n))throw new J(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Pf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve()}function Qe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Pf(n);throw new J(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function OA(n,e){if(e<=0)throw new J(W.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var mf=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new J(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},po=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new J(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mf(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new K_;switch(i.type){case"firstParty":return new J_(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new J(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=tI.get(t);i&&(Z("ComponentProvider","Removing Datastore"),tI.delete(t),i.terminate())}(this),Promise.resolve()}};function FA(n,e,t,i={}){var r;let s=(n=Qe(n,po))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=qt.MOCK_USER;else{a=Od(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new J(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new qt(c)}n._authCredentials=new Q_(new Ip(a,l))}}var un=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ft=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Xi=class n extends un{constructor(e,t,i){super(e,t,cl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ue(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Sy(n,e,...t){if(n=qe(n),by("collection","path",e),n instanceof po){let i=Ke.fromString(e,...t);return iI(i),new Xi(n,null,i)}{if(!(n instanceof ft||n instanceof Xi))throw new J(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ke.fromString(e,...t));return iI(i),new Xi(n.firestore,null,i)}}function LA(n,e){if(n=Qe(n,po),by("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new un(n,null,function(i){return new Ri(Ke.emptyPath(),i)}(e))}function Qu(n,e,...t){if(n=qe(n),arguments.length===1&&(e=Ap.newId()),by("doc","path",e),n instanceof po){let i=Ke.fromString(e,...t);return nI(i),new ft(n,null,new ue(i))}{if(!(n instanceof ft||n instanceof Xi))throw new J(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ke.fromString(e,...t));return nI(i),new ft(n.firestore,n instanceof Xi?n.converter:null,new ue(i))}}function Ey(n,e){return n=qe(n),e=qe(e),(n instanceof ft||n instanceof Xi)&&(e instanceof ft||e instanceof Xi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ty(n,e){return n=qe(n),e=qe(e),n instanceof un&&e instanceof un&&n.firestore===e.firestore&&Gu(n._query,e._query)&&n.converter===e.converter}var Mw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Fu(this,"async_queue_retry"),this.Eu=()=>{let t=Tp();t&&Z("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Tp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Tp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Gt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return q(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!_s(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ft("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=t,t}enqueueAfterDelay(e,t,i){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let r=_w.createAndSchedule(this,e,t,i,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&ve()}verifyOperationInProgress(){}mu(){return q(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function Nw(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Ow=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var VA=-1,xt=class extends po{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new Mw}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||UA(this),this._firestoreClient.terminate()}};function Zt(n){return n._firestoreClient||UA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UA(n){var e,t,i;let r=n._freezeSettings(),s=function(a,l,c,d){return new ov(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NA(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new kw(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function $A(n,e){QA(n=Qe(n,xt));let t=Zt(n);if(t._uninitializedComponentsProvider)throw new J(W.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=n._freezeSettings(),r=new Uu;return jA(t,r,new ff(r,i.cacheSizeBytes,e?.forceOwnership))}function zA(n){QA(n=Qe(n,xt));let e=Zt(n);if(e._uninitializedComponentsProvider)throw new J(W.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),i=new Uu;return jA(e,i,new Iw(i,t.cacheSizeBytes))}function jA(n,e,t){let i=new Gt;return n.asyncQueue.enqueue(()=>q(this,null,function*(){try{yield Cp(n,t),yield Dw(n,e),i.resolve()}catch(r){let s=r;if(!PA(s))throw s;mi("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function BA(n){if(n._initialized&&!n._terminated)throw new J(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Gt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>q(this,null,function*(){try{yield function(i){return q(this,null,function*(){if(!as.D())return Promise.resolve();let r=i+"main";yield as.delete(r)})}(oy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function qA(n){return function(t){let i=new Gt;return t.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return D4(yield yy(t),i)})),i.promise}(Zt(n=Qe(n,xt)))}function GA(n){return G4(Zt(n=Qe(n,xt)))}function HA(n){return H4(Zt(n=Qe(n,xt)))}function WA(n,e){let t=Zt(n=Qe(n,xt)),i=new Ow;return Y4(t,n._databaseId,e,i),i}function KA(n,e){return X4(Zt(n=Qe(n,xt)),e).then(t=>t?new un(n,null,t.query):null)}function QA(n){if(n._initialized||n._terminated)throw new J(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var tr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ut.fromBase64String(e))}catch(t){throw new J(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Di=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yr=class{constructor(e){this._methodName=e}};var fo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}};var $u=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var J4=/^__.*__$/,Fw=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new ps(e,this.data,t,this.fieldTransforms)}},gf=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function YA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}var _f=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return vf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(YA(this.wu)&&J4.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Lw=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Wu(e)}Nu(e,t,i,r=!1){return new _f({wu:e,methodName:t,Ou:i,path:Lt.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function vo(n){let e=n._freezeSettings(),t=Wu(n._databaseId);return new Lw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Rf(n,e,t,i,r,s={}){let o=n.Nu(s.merge||s.mergeFields?2:0,e,t,r);Ay("Data must be an object, but it was:",o,i);let a=ZA(i,o),l,c;if(s.merge)l=new Yn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let p=jw(e,h,t);if(!o.contains(p))throw new J(W.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);tP(d,p)||d.push(p)}l=new Yn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new Fw(new vn(a),l,c)}var zu=class n extends yr{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function XA(n,e,t){return new _f({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Vw=class n extends yr{_toFieldTransform(e){return new co(e.path,new ds)}isEqual(e){return e instanceof n}},Uw=class n extends yr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=XA(this,e,!0),i=this.Lu.map(s=>wo(s,t)),r=new vr(i);return new co(e.path,r)}isEqual(e){return e instanceof n&&Fm(this.Lu,e.Lu)}},$w=class n extends yr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=XA(this,e,!0),i=this.Lu.map(s=>wo(s,t)),r=new wr(i);return new co(e.path,r)}isEqual(e){return e instanceof n&&Fm(this.Lu,e.Lu)}},zw=class n extends yr{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){let t=new hs(e.serializer,FI(e.serializer,this.Bu));return new co(e.path,t)}isEqual(e){return e instanceof n&&this.Bu===e.Bu}};function Cy(n,e,t,i){let r=n.Nu(1,e,t);Ay("Data must be an object, but it was:",r,i);let s=[],o=vn.empty();_o(i,(l,c)=>{let d=Py(e,l,t);c=qe(c);let h=r.Cu(d);if(c instanceof zu)s.push(d);else{let p=wo(c,h);p!=null&&(s.push(d),o.set(d,p))}});let a=new Yn(s);return new gf(o,a,r.fieldTransforms)}function Iy(n,e,t,i,r,s){let o=n.Nu(1,e,t),a=[jw(e,i,t)],l=[r];if(s.length%2!=0)throw new J(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(jw(e,s[p])),l.push(s[p+1]);let c=[],d=vn.empty();for(let p=a.length-1;p>=0;--p)if(!tP(c,a[p])){let m=a[p],y=l[p];y=qe(y);let b=o.Cu(m);if(y instanceof zu)c.push(m);else{let S=wo(y,b);S!=null&&(c.push(m),d.set(m,S))}}let h=new Yn(c);return new gf(d,h,o.fieldTransforms)}function JA(n,e,t,i=!1){return wo(t,n.Nu(i?4:3,e))}function wo(n,e){if(eP(n=qe(n)))return Ay("Unsupported field value:",e,n),ZA(n,e);if(n instanceof yr)return function(i,r){if(!YA(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let l=wo(a,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ct.fromDate(i);return{timestampValue:Xa(r.serializer,s)}}if(i instanceof Ct){let s=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xa(r.serializer,s)}}if(i instanceof fo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof tr)return{bytesValue:HI(r.serializer,i._byteString)};if(i instanceof ft){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof $u)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return ny(a.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${Pf(i)}`)}(n,e)}function ZA(n,e){let t={};return vI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(n,(i,r)=>{let s=wo(r,e.bu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function eP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof fo||n instanceof tr||n instanceof ft||n instanceof yr||n instanceof $u)}function Ay(n,e,t){if(!eP(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Pf(t);throw i==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+i)}}function jw(n,e,t){if((e=qe(e))instanceof Di)return e._internalPath;if(typeof e=="string")return Py(n,e);throw vf("Field path arguments must be of type string or ",n,!1,void 0,t)}var Z4=new RegExp("[~\\*/\\[\\]]");function Py(n,e,t){if(e.search(Z4)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Di(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vf(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new J(W.INVALID_ARGUMENT,a+n+l)}function tP(n,e){return n.some(t=>t.isEqual(e))}var mo=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(kf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Bw=class extends mo{data(){return super.data()}};function kf(n,e){return typeof e=="string"?Py(n,e):e instanceof Di?e._internalPath:e._delegate._internalPath}function nP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ju=class{},go=class extends ju{};function Sr(n,e,...t){let i=[];e instanceof ju&&i.push(e),i=i.concat(t),function(s){let o=s.filter(l=>l instanceof qw).length,a=s.filter(l=>l instanceof wf).length;if(o>1||o>0&&a>0)throw new J(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var wf=class n extends go{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return hP(e._query,t),new un(e.firestore,e.converter,wv(e._query,t))}_parse(e){let t=vo(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){sI(h,d);let m=[];for(let y of h)m.push(rI(l,s,y));p={arrayValue:{values:m}}}else p=rI(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||sI(h,d),p=JA(a,o,h,d==="in"||d==="not-in");return Ge.create(c,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function iP(n,e,t){let i=e,r=kf("where",n);return wf._create(r,i,t)}var qw=class n extends ju{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:rt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let l of a)hP(o,l),o=wv(o,l)}(e._query,t),new un(e.firestore,e.converter,wv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Gw=class n extends go{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new J(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new J(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(s,o)}(e._query,this._field,this._direction);return new un(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Ri(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function rP(n,e="asc"){let t=e,i=kf("orderBy",n);return Gw._create(i,t)}var yf=class n extends go{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new un(e.firestore,e.converter,Vp(e._query,this._limit,this._limitType))}};function sP(n){return OA("limit",n),yf._create("limit",n,"F")}function oP(n){return OA("limitToLast",n),yf._create("limitToLast",n,"L")}var bf=class n extends go{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=dP(e,this.type,this._docOrFields,this._inclusive);return new un(e.firestore,e.converter,function(r,s){return new Ri(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,t))}};function aP(...n){return bf._create("startAt",n,!0)}function lP(...n){return bf._create("startAfter",n,!1)}var xf=class n extends go{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=dP(e,this.type,this._docOrFields,this._inclusive);return new un(e.firestore,e.converter,function(r,s){return new Ri(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,t))}};function cP(...n){return xf._create("endBefore",n,!1)}function uP(...n){return xf._create("endAt",n,!0)}function dP(n,e,t,i){if(t[0]=qe(t[0]),t[0]instanceof mo)return function(s,o,a,l,c){if(!l)throw new J(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of Ba(s))if(h.field.isKeyField())d.push(oo(o,l.key));else{let p=l.data.field(h.field);if(Ef(p))throw new J(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=h.field.canonicalString();throw new J(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Zi(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=vo(n.firestore);return function(o,a,l,c,d,h){let p=o.explicitOrderBy;if(d.length>p.length)throw new J(W.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let y=0;y<d.length;y++){let b=d[y];if(p[y].field.isKeyField()){if(typeof b!="string")throw new J(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof b}`);if(!ey(o)&&b.indexOf("/")!==-1)throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${b}' contains a slash.`);let S=o.path.child(Ke.fromString(b));if(!ue.isDocumentKey(S))throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);let k=new ue(S);m.push(oo(a,k))}else{let S=JA(l,c,b);m.push(S)}}return new Zi(m,h)}(n._query,n.firestore._databaseId,r,e,t,i)}}function rI(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new J(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ey(e)&&t.indexOf("/")!==-1)throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Ke.fromString(t));if(!ue.isDocumentKey(i))throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return oo(n,new ue(i))}if(t instanceof ft)return oo(n,t._key);throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(t)}.`)}function sI(n,e){if(!Array.isArray(n)||n.length===0)throw new J(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hP(n,e){let t=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new J(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var al=class{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return _o(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>bt(o.doubleValue));return new $u(s)}convertGeoPoint(e){return new fo(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Jw(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){let t=_r(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ke.fromString(e);xe(iA(i));let r=new cs(i.get(1),i.get(3)),s=new ue(i.popFirst(5));return r.isEqual(t)||Ft(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Df(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Hw=class extends al{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}};var gr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},_i=class extends mo{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(kf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ss=class extends _i{data(e={}){return super.data(e)}},Mi=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new gr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ss(this._firestore,this._userDataWriter,i.key,i,new gr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let l=new ss(r._firestore,r._userDataWriter,a.doc.key,a.doc,new gr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new ss(r._firestore,r._userDataWriter,a.doc.key,a.doc,new gr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:e3(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function e3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function Ry(n,e){return n instanceof _i&&e instanceof _i?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mi&&e instanceof Mi&&n._firestore===e._firestore&&Ty(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function pP(n){n=Qe(n,ft);let e=Qe(n.firestore,xt);return DA(Zt(e),n._key).then(t=>Ny(e,n,t))}var br=class extends al{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}};function fP(n){n=Qe(n,ft);let e=Qe(n.firestore,xt),t=Zt(e),i=new br(e);return W4(t,n._key).then(r=>new _i(e,i,n._key,r,new gr(r!==null&&r.hasLocalMutations,!0),n.converter))}function mP(n){n=Qe(n,ft);let e=Qe(n.firestore,xt);return DA(Zt(e),n._key,{source:"server"}).then(t=>Ny(e,n,t))}function gP(n){n=Qe(n,un);let e=Qe(n.firestore,xt),t=Zt(e),i=new br(e);return nP(n._query),MA(t,n._query).then(r=>new Mi(e,i,n,r))}function _P(n){n=Qe(n,un);let e=Qe(n.firestore,xt),t=Zt(e),i=new br(e);return K4(t,n._query).then(r=>new Mi(e,i,n,r))}function vP(n){n=Qe(n,un);let e=Qe(n.firestore,xt),t=Zt(e),i=new br(e);return MA(t,n._query,{source:"server"}).then(r=>new Mi(e,i,n,r))}function ky(n,e,t){n=Qe(n,ft);let i=Qe(n.firestore,xt),r=Df(n.converter,e,t);return fl(i,[Rf(vo(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Pt.none())])}function Dy(n,e,t,...i){n=Qe(n,ft);let r=Qe(n.firestore,xt),s=vo(r),o;return o=typeof(e=qe(e))=="string"||e instanceof Di?Iy(s,"updateDoc",n._key,e,t,i):Cy(s,"updateDoc",n._key,e),fl(r,[o.toMutation(n._key,Pt.exists(!0))])}function wP(n){return fl(Qe(n.firestore,xt),[new fs(n._key,Pt.none())])}function yP(n,e){let t=Qe(n.firestore,xt),i=Qu(n),r=Df(n.converter,e);return fl(t,[Rf(vo(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Pt.exists(!1))]).then(()=>i)}function My(n,...e){var t,i,r;n=qe(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nw(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Nw(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,d;if(n instanceof ft)c=Qe(n.firestore,xt),d=cl(n._key.path),l={next:h=>{e[o]&&e[o](Ny(c,n,h))},error:e[o+1],complete:e[o+2]};else{let h=Qe(n,un);c=Qe(h.firestore,xt),d=h._query;let p=new br(c);l={next:m=>{e[o]&&e[o](new Mi(c,p,h,m))},error:e[o+1],complete:e[o+2]},nP(n._query)}return function(p,m,y,b){let S=new sl(b),k=new Lu(m,S,y);return p.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return uy(yield ol(p),k)})),()=>{S.za(),p.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return dy(yield ol(p),k)}))}}(Zt(c),d,a,l)}function bP(n,e){return Q4(Zt(n=Qe(n,xt)),Nw(e)?e:{next:e})}function fl(n,e){return function(i,r){let s=new Gt;return i.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){return A4(yield yy(i),r,s)})),s.promise}(Zt(n),e)}function Ny(n,e,t){let i=t.docs.get(e._key),r=new br(n);return new _i(n,r,e._key,i,new gr(t.hasPendingWrites,t.fromCache),e.converter)}var t3={maxAttempts:5};var Sf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vo(e)}set(e,t,i){this._verifyNotCommitted();let r=is(e,this._firestore),s=Df(r.converter,t,i),o=Rf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Pt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=is(e,this._firestore),o;return o=typeof(t=qe(t))=="string"||t instanceof Di?Iy(this._dataReader,"WriteBatch.update",s._key,t,i,r):Cy(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Pt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=is(e,this._firestore);return this._mutations=this._mutations.concat(new fs(t._key,Pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function is(n,e){if((n=qe(n)).firestore!==e)throw new J(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Ww=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=vo(t)}get(t){let i=is(t,this._firestore),r=new Hw(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return ve();let o=s[0];if(o.isFoundDocument())return new mo(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new mo(this._firestore,r,i._key,null,i.converter);throw ve()})}set(t,i,r){let s=is(t,this._firestore),o=Df(s.converter,i,r),a=Rf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){let o=is(t,this._firestore),a;return a=typeof(i=qe(i))=="string"||i instanceof Di?Iy(this._dataReader,"Transaction.update",o._key,i,r,s):Cy(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){let i=is(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=is(e,this._firestore),i=new br(this._firestore);return super.get(e).then(r=>new _i(this._firestore,i,t._key,r._document,new gr(!1,!1),t.converter))}};function xP(n,e,t){n=Qe(n,xt);let i=Object.assign(Object.assign({},t3),t);return function(s){if(s.maxAttempts<1)throw new J(W.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){let l=new Gt;return s.asyncQueue.enqueueAndForget(()=>q(this,null,function*(){let c=yield q4(s);new Rw(s.asyncQueue,c,a,o,l).ru()})),l.promise}(Zt(n),r=>e(new Ww(n,r)),i)}function SP(){return new zu("deleteField")}function EP(){return new Vw("serverTimestamp")}function TP(...n){return new Uw("arrayUnion",n)}function CP(...n){return new $w("arrayRemove",n)}function IP(n){return new zw("increment",n)}(function(e,t=!0){(function(r){ll=r})($d),Vs(new jn("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new xt(new Y_(i.getProvider("auth-internal")),new ev(i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cs(c.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ti(rC,"4.7.2",e),Ti(rC,"4.7.2","esm2017")})();var n3="@firebase/firestore-compat",i3="0.3.37";function $y(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new J("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function AP(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function PP(){if(!wI())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Mf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return PP(),new n(tr.fromBase64String(e))}static fromUint8Array(e){return AP(),new n(tr.fromUint8Array(e))}toBase64(){return PP(),this._delegate.toBase64()}toUint8Array(){return AP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Oy(n){return r3(n,["next","error","complete"])}function r3(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}var Fy=class{enableIndexedDbPersistence(e,t){return $A(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return zA(e._delegate)}clearIndexedDbPersistence(e){return BA(e._delegate)}},Nf=class{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof cs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){FA(this._delegate,e,t,i)}enableNetwork(){return GA(this._delegate)}disableNetwork(){return HA(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,xy("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qA(this._delegate)}onSnapshotsInSync(e){return bP(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _l(this,Sy(this._delegate,e))}catch(t){throw In(t,"collection()","Firestore.collection()")}}doc(e){try{return new nr(this,Qu(this._delegate,e))}catch(t){throw In(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new So(this,LA(this._delegate,e))}catch(t){throw In(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return xP(this._delegate,t=>e(new Of(this,t)))}batch(){return Zt(this._delegate),new Ff(new Sf(this._delegate,e=>fl(this._delegate,e)))}loadBundle(e){return WA(this._delegate,e)}namedQuery(e){return KA(this._delegate,e).then(t=>t?new So(this,t):null)}},ml=class extends al{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mf(new tr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return nr.forKey(t,this.firestore,null)}};function s3(n){oI(n)}var Of=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ml(e)}get(e){let t=yo(e);return this._delegate.get(t).then(i=>new bo(this._firestore,new _i(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){let r=yo(e);return i?($y("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=yo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=yo(e);return this._delegate.delete(t),this}},Ff=class{constructor(e){this._delegate=e}set(e,t,i){let r=yo(e);return i?($y("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=yo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=yo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},gl=class n{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){let i=new ss(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xo(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let i=n.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new n(e,new ml(e),t),r.set(t,s)),s}};gl.INSTANCES=new WeakMap;var nr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ml(e)}static forPath(e,t,i){if(e.length%2!==0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new ft(t._delegate,i,new ue(e)))}static forKey(e,t,i){return new n(t,new ft(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new _l(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _l(this.firestore,Sy(this._delegate,e))}catch(t){throw In(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=qe(e),e instanceof ft?Ey(this._delegate,e):!1}set(e,t){t=$y("DocumentReference.set",t);try{return t?ky(this._delegate,e,t):ky(this._delegate,e)}catch(i){throw In(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?Dy(this._delegate,e):Dy(this._delegate,e,t,...i)}catch(r){throw In(r,"updateDoc()","DocumentReference.update()")}}delete(){return wP(this._delegate)}onSnapshot(...e){let t=RP(e),i=kP(e,r=>new bo(this.firestore,new _i(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return My(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=fP(this._delegate):e?.source==="server"?t=mP(this._delegate):t=pP(this._delegate),t.then(i=>new bo(this.firestore,new _i(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(gl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function In(n,e,t){return n.message=n.message.replace(e,t),n}function RP(n){for(let e of n)if(typeof e=="object"&&!Oy(e))return e;return{}}function kP(n,e){var t,i;let r;return Oy(n[0])?r=n[0]:Oy(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var bo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ry(this._delegate,e._delegate)}},xo=class extends bo{data(e){let t=this._delegate.data(e);return this._delegate._converter||aI(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},So=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ml(e)}where(e,t,i){try{return new n(this.firestore,Sr(this._delegate,iP(e,t,i)))}catch(r){throw In(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Sr(this._delegate,rP(e,t)))}catch(i){throw In(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Sr(this._delegate,sP(e)))}catch(t){throw In(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Sr(this._delegate,oP(e)))}catch(t){throw In(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Sr(this._delegate,aP(...e)))}catch(t){throw In(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Sr(this._delegate,lP(...e)))}catch(t){throw In(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Sr(this._delegate,cP(...e)))}catch(t){throw In(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Sr(this._delegate,uP(...e)))}catch(t){throw In(t,"endAt()","Query.endAt()")}}isEqual(e){return Ty(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=_P(this._delegate):e?.source==="server"?t=vP(this._delegate):t=gP(this._delegate),t.then(i=>new Yu(this.firestore,new Mi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let t=RP(e),i=kP(e,r=>new Yu(this.firestore,new Mi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return My(this._delegate,t,i)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(gl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Ly=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Yu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new So(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ly(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new xo(this._firestore,i))})}isEqual(e){return Ry(this._delegate,e._delegate)}},_l=class n extends So{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new nr(this.firestore,e):null}doc(e){try{return e===void 0?new nr(this.firestore,Qu(this._delegate)):new nr(this.firestore,Qu(this._delegate,e))}catch(t){throw In(t,"doc()","CollectionReference.doc()")}}add(e){return yP(this._delegate,e).then(t=>new nr(this.firestore,t))}isEqual(e){return Ey(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(gl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function yo(n){return Qe(n,ft)}var Vy=class n{constructor(...e){this._delegate=new Di(...e)}static documentId(){return new n(Lt.keyField().canonicalString())}isEqual(e){return e=qe(e),e instanceof Di?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Uy=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=EP();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=SP();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=TP(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=CP(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=IP(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var o3={Firestore:Nf,GeoPoint:fo,Timestamp:Ct,Blob:Mf,Transaction:Of,WriteBatch:Ff,DocumentReference:nr,DocumentSnapshot:bo,Query:So,QueryDocumentSnapshot:xo,QuerySnapshot:Yu,CollectionReference:_l,FieldPath:Vy,FieldValue:Uy,setLogLevel:s3,CACHE_SIZE_UNLIMITED:VA};function a3(n,e){n.INTERNAL.registerComponent(new jn("firestore-compat",t=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},o3)))}function l3(n){a3(n,(e,t)=>new Nf(e,t,new Fy)),n.registerVersion(n3,i3)}l3(nn);function c3(n,e=$o){return new kr(t=>{let i;return e!=null?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}function DP(n,e){return c3(n,e)}function u3(n,e){return DP(n,e).pipe(qo(void 0),vd(),Ce(t=>{let[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function By(n,e){return DP(n,e).pipe(Ce(t=>({payload:t,type:"query"})))}var Lf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let i=this.ref.collection(e),{ref:r,query:s}=LP(i,t);return new Uf(r,s,this.afs)}snapshotChanges(){return u3(this.ref,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return this.snapshotChanges().pipe(Ce(({payload:t})=>e.idField?et(he({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Qt(this.ref.get(e)).pipe(Ot)}};function Vf(n,e){return By(n,e).pipe(qo(void 0),vd(),Ce(t=>{let[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let c=s.find(h=>h.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(h=>h.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function MP(n,e,t){return Vf(n,t).pipe(lr((i,r)=>d3(i,r.map(s=>s.payload),e),[]),gd(),Ce(i=>i.map(r=>({type:r.type,payload:r}))))}function d3(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=h3(n,i))}),n}function zy(n,e,t,...i){let r=n.slice();return r.splice(e,t,...i),r}function h3(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return zy(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return zy(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zy(n,e.oldIndex,1);break}return n}function NP(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Uf=class{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Vf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ce(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(qo(void 0),vd(),$n(([i,r])=>r.length>0||!i),Ce(([,i])=>i),Ot)}auditTrail(e){return this.stateChanges(e).pipe(lr((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=NP(e);return MP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return By(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(t=>t.payload.docs.map(i=>e.idField?et(he({},i.data()),{[e.idField]:i.id}):i.data())),Ot)}get(e){return Qt(this.query.get(e)).pipe(Ot)}add(e){return this.ref.add(e)}doc(e){return new Lf(this.ref.doc(e),this.afs)}},jy=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Vf(this.query,this.afs.schedulers.outsideAngular).pipe(Ot):Vf(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(t=>t.filter(i=>e.indexOf(i.type)>-1)),$n(t=>t.length>0),Ot)}auditTrail(e){return this.stateChanges(e).pipe(lr((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=NP(e);return MP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return By(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(i=>i.payload.docs.map(r=>e.idField?he({[e.idField]:r.id},r.data()):r.data())),Ot)}get(e){return Qt(this.query.get(e)).pipe(Ot)}},OP=new tt("angularfire2.enableFirestorePersistence"),FP=new tt("angularfire2.firestore.persistenceSettings"),p3=new tt("angularfire2.firestore.settings"),f3=new tt("angularfire2.firestore.use-emulator");function LP(n,e=t=>t){return{query:e(n),ref:n}}var m3=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,l,c,d,h,p,m,y,b,S,k,A){this.schedulers=l;let x=zs(t,a,i),F=d;h&&Ac(x,a,p,y,b,S,m,k),[this.firestore,this.persistenceEnabled$]=pa(`${x.name}.firestore`,"AngularFirestore",x.name,()=>{let V=a.runOutsideAngular(()=>x.firestore());if(s&&V.settings(s),F&&V.useEmulator(...F),r&&!Ls(o)){let z=()=>{try{return Qt(V.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(M){return typeof console<"u"&&console.warn(M),Te(!1)}};return[V,a.runOutsideAngular(z)]}else return[V,Te(!1)]},[s,F,r])}collection(t,i){let r;typeof t=="string"?r=this.firestore.collection(t):r=t;let{ref:s,query:o}=LP(r,i),a=this.schedulers.ngZone.run(()=>s);return new Uf(a,o,this)}collectionGroup(t,i){let r=i||(o=>o),s=this.firestore.collectionGroup(t);return new jy(r(s),this)}doc(t){let i;typeof t=="string"?i=this.firestore.doc(t):i=t;let r=this.schedulers.ngZone.run(()=>i);return new Lf(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(ae(zr),ae(jr,8),ae(OP,8),ae(p3,8),ae(Nt),ae(ht),ae(ha),ae(FP,8),ae(f3,8),ae(xh,8),ae(xc,8),ae(Sc,8),ae(Ec,8),ae(Tc,8),ae(Cc,8),ae(Ic,8),ae(dr,8))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),VP=(()=>{class n{constructor(){nn.registerVersion("angularfire",$r.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:OP,useValue:!0},{provide:FP,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=xi({type:n});static \u0275inj=bi({providers:[m3]})}return n})();var Wt=(()=>{let e=class e{constructor(){this._HttpClient=B(kn)}getMovies(i,r){return this._HttpClient.get(`${te.url}movie/${i}?api_key=${te.apiKey}&page=${r}`)}getPopularPeople(i,r){return this._HttpClient.get(`${te.url}person/popular?api_key=${te.apiKey}&page=${r}`)}getPopularMovies(i){return this._HttpClient.get(`${te.url}movie/popular?api_key=${te.apiKey}&page=${i}`)}getTrendingShows(i,r,s){return i=i||"movie",r=r||"day",s=s||1,this._HttpClient.get(`${te.url}trending/${i}/${r}?api_key=${te.apiKey}&page=${s}`)}getMovieGenres(){return this._HttpClient.get(`${te.url}genre/movie/list?api_key=${te.apiKey}`)}getTvGenres(){return this._HttpClient.get(`${te.url}genre/tv/list?api_key=${te.apiKey}`)}getNowPLayingMovies(){return this._HttpClient.get(`${te.url}movie/now_playing?api_key=${te.apiKey}&language=en-US&page=1`)}getTopRatedMovies(){return this._HttpClient.get(`${te.url}movie/top_rated?api_key=${te.apiKey}&language=en-US&page=1`)}getUpcomingMovies(){return this._HttpClient.get(`${te.url}movie/upcoming?api_key=${te.apiKey}&language=en-US&page=1`)}getShowDetails(i,r){return this._HttpClient.get(`${te.url}${r}/${i}?api_key=${te.apiKey}`)}getShowTrailers(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/videos?api_key=${te.apiKey}`)}getMovieCredits(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/credits?api_key=${te.apiKey}`)}getShowCredits(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/aggregate_credits?api_key=${te.apiKey}`)}getShowImages(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/images?api_key=${te.apiKey}`)}getShowVideos(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/videos?api_key=${te.apiKey}`)}getShowRecommendations(i,r,s){return this._HttpClient.get(`${te.url}${r}/${i}/recommendations?api_key=${te.apiKey}&page=${s}`)}getShowReviews(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/reviews?api_key=${te.apiKey}`)}getShowExternalIDs(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/external_ids?api_key=${te.apiKey}`)}getShowSimilar(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/similar?api_key=${te.apiKey}`)}getShowLists(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/lists?api_key=${te.apiKey}`)}getShowKeywords(i,r){return this._HttpClient.get(`${te.url}${r}/${i}/keywords?api_key=${te.apiKey}`)}getCollection(i){return this._HttpClient.get(`${te.url}collection/${i}?api_key=${te.apiKey}`)}getNetworkDetails(i){return this._HttpClient.get(`${te.url}network/${i}?api_key=${te.apiKey}`)}getKeywordDetails(i,r){return this._HttpClient.get(`${te.url}discover/${r}?api_key=${te.apiKey}&with_keywords=${i}`)}getSeasonDetails(i,r){return this._HttpClient.get(`${te.url}tv/${i}/season/${r}?api_key=${te.apiKey}`)}discoverMovies(i=28,r=2024,s="popularity",o="desc"){return this._HttpClient.get(`${te.url}discover/movie?api_key=${te.apiKey}&primary_release_year=${r}&with_genres=${i}&sort_by=${s}.${o}`)}discoverShows(i=28,r=2024,s="popularity",o="desc"){return this._HttpClient.get(`${te.url}discover/movie?api_key=${te.apiKey}&first_air_date_year=${r}&with_genres=${i}&sort_by=${s}.${o}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function UP(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function qy(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:UP(e[t])&&UP(n[t])&&Object.keys(e[t]).length>0&&qy(n[t],e[t])})}var $P={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function mt(){let n=typeof document<"u"?document:{};return qy(n,$P),n}var g3={document:$P,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function st(){let n=typeof window<"u"?window:{};return qy(n,g3),n}function Er(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function zP(n){let e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Ni(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function An(){return Date.now()}function _3(n){let e=st(),t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function Xu(n,e){e===void 0&&(e="x");let t=st(),i,r,s,o=_3(n);return t.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function vl(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function v3(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Fn(){let n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){let i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!v3(i)){let r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,o=r.length;s<o;s+=1){let a=r[s],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(vl(n[a])&&vl(i[a])?i[a].__swiper__?n[a]=i[a]:Fn(n[a],i[a]):!vl(n[a])&&vl(i[a])?(n[a]={},i[a].__swiper__?n[a]=i[a]:Fn(n[a],i[a])):n[a]=i[a])}}}return n}function Eo(n,e,t){n.style.setProperty(e,t)}function Gy(n){let{swiper:e,targetPosition:t,side:i}=n,r=st(),s=-e.translate,o=null,a,l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);let c=t>s?"next":"prev",d=(p,m)=>c==="next"&&p>=m||c==="prev"&&p<=m,h=()=>{a=new Date().getTime(),o===null&&(o=a);let p=Math.max(Math.min((a-o)/l,1),0),m=.5-Math.cos(p*Math.PI)/2,y=s+m*(t-s);if(d(y,t)&&(y=t),e.wrapperEl.scrollTo({[i]:y}),d(y,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:y})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(h)};h()}function Ln(n){return n.querySelector(".swiper-slide-transform")||n.shadowRoot&&n.shadowRoot.querySelector(".swiper-slide-transform")||n}function St(n,e){e===void 0&&(e="");let t=[...n.children];return n instanceof HTMLSlotElement&&t.push(...n.assignedElements()),e?t.filter(i=>i.matches(e)):t}function jP(n,e){let t=e.contains(n);return!t&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(n):t}function Ju(n){try{console.warn(n);return}catch{}}function Kt(n,e){e===void 0&&(e=[]);let t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:Er(e)),t}function To(n){let e=st(),t=mt(),i=n.getBoundingClientRect(),r=t.body,s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,a=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:i.top+a-s,left:i.left+l-o}}function BP(n,e){let t=[];for(;n.previousElementSibling;){let i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function qP(n,e){let t=[];for(;n.nextElementSibling;){let i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Tr(n,e){return st().getComputedStyle(n,null).getPropertyValue(e)}function ws(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Oi(n,e){let t=[],i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function ys(n,e){function t(i){i.target===n&&(e.call(n,i),n.removeEventListener("transitionend",t))}e&&n.addEventListener("transitionend",t)}function Zu(n,e,t){let i=st();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}function Le(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function bs(n){return e=>Math.abs(e)>0&&n.browser&&n.browser.need3dFix&&Math.abs(e)%90===0?e+.001:e}var Hy;function w3(){let n=st(),e=mt();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function QP(){return Hy||(Hy=w3()),Hy}var Wy;function y3(n){let{userAgent:e}=n===void 0?{}:n,t=QP(),i=st(),r=i.navigator.platform,s=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/),d=s.match(/(iPad).*OS\s([\d_]+)/),h=s.match(/(iPod)(.*OS\s([\d_]+))?/),p=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=r==="Win32",y=r==="MacIntel",b=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&y&&t.touch&&b.indexOf(`${a}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),y=!1),c&&!m&&(o.os="android",o.android=!0),(d||p||h)&&(o.os="ios",o.ios=!0),o}function YP(n){return n===void 0&&(n={}),Wy||(Wy=y3(n)),Wy}var Ky;function b3(){let n=st(),e=YP(),t=!1;function i(){let a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){let a=String(n.navigator.userAgent);if(a.includes("Version/")){let[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=l<16||l===16&&c<2}}let r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=i(),o=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:o,isWebView:r}}function x3(){return Ky||(Ky=b3()),Ky}function S3(n){let{swiper:e,on:t,emit:i}=n,r=st(),s=null,o=null,a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=r.requestAnimationFrame(()=>{let{width:p,height:m}=e,y=p,b=m;h.forEach(S=>{let{contentBoxSize:k,contentRect:A,target:x}=S;x&&x!==e.el||(y=A?A.width:(k[0]||k).inlineSize,b=A?A.height:(k[0]||k).blockSize)}),(y!==p||b!==m)&&a()})}),s.observe(e.el))},c=()=>{o&&r.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",d)}),t("destroy",()=>{c(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",d)})}function E3(n){let{swiper:e,extendParams:t,on:i,emit:r}=n,s=[],o=st(),a=function(d,h){h===void 0&&(h={});let p=o.MutationObserver||o.WebkitMutationObserver,m=new p(y=>{if(e.__preventObserver__)return;if(y.length===1){r("observerUpdate",y[0]);return}let b=function(){r("observerUpdate",y[0])};o.requestAnimationFrame?o.requestAnimationFrame(b):o.setTimeout(b,0)});m.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(m)},l=()=>{if(e.params.observer){if(e.params.observeParents){let d=Oi(e.hostEl);for(let h=0;h<d.length;h+=1)a(d[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var T3={on(n,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;let r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(i,o)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){let t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;let i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){let e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;let t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){let t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){let n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function C3(){let n=this,e,t,i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Tr(i,"padding-left")||0,10)-parseInt(Tr(i,"padding-right")||0,10),t=t-parseInt(Tr(i,"padding-top")||0,10)-parseInt(Tr(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function I3(){let n=this;function e(D,N){return parseFloat(D.getPropertyValue(n.getDirectionLabel(N))||0)}let t=n.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,d=St(r,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:d.length,p=[],m=[],y=[],b=t.slidesOffsetBefore;typeof b=="function"&&(b=t.slidesOffsetBefore.call(n));let S=t.slidesOffsetAfter;typeof S=="function"&&(S=t.slidesOffsetAfter.call(n));let k=n.snapGrid.length,A=n.slidesGrid.length,x=t.spaceBetween,F=-b,V=0,z=0;if(typeof s>"u")return;typeof x=="string"&&x.indexOf("%")>=0?x=parseFloat(x.replace("%",""))/100*s:typeof x=="string"&&(x=parseFloat(x)),n.virtualSize=-x,d.forEach(D=>{o?D.style.marginLeft="":D.style.marginRight="",D.style.marginBottom="",D.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(Eo(i,"--swiper-centered-offset-before",""),Eo(i,"--swiper-centered-offset-after",""));let M=t.grid&&t.grid.rows>1&&n.grid;M?n.grid.initSlides(d):n.grid&&n.grid.unsetSlides();let C,E=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(D=>typeof t.breakpoints[D].slidesPerView<"u").length>0;for(let D=0;D<h;D+=1){C=0;let N;if(d[D]&&(N=d[D]),M&&n.grid.updateSlide(D,N,d),!(d[D]&&Tr(N,"display")==="none")){if(t.slidesPerView==="auto"){E&&(d[D].style[n.getDirectionLabel("width")]="");let O=getComputedStyle(N),T=N.style.transform,H=N.style.webkitTransform;if(T&&(N.style.transform="none"),H&&(N.style.webkitTransform="none"),t.roundLengths)C=n.isHorizontal()?Zu(N,"width",!0):Zu(N,"height",!0);else{let X=e(O,"width"),me=e(O,"padding-left"),Q=e(O,"padding-right"),Y=e(O,"margin-left"),de=e(O,"margin-right"),Pe=O.getPropertyValue("box-sizing");if(Pe&&Pe==="border-box")C=X+Y+de;else{let{clientWidth:ne,offsetWidth:se}=N;C=X+me+Q+Y+de+(se-ne)}}T&&(N.style.transform=T),H&&(N.style.webkitTransform=H),t.roundLengths&&(C=Math.floor(C))}else C=(s-(t.slidesPerView-1)*x)/t.slidesPerView,t.roundLengths&&(C=Math.floor(C)),d[D]&&(d[D].style[n.getDirectionLabel("width")]=`${C}px`);d[D]&&(d[D].swiperSlideSize=C),y.push(C),t.centeredSlides?(F=F+C/2+V/2+x,V===0&&D!==0&&(F=F-s/2-x),D===0&&(F=F-s/2-x),Math.abs(F)<1/1e3&&(F=0),t.roundLengths&&(F=Math.floor(F)),z%t.slidesPerGroup===0&&p.push(F),m.push(F)):(t.roundLengths&&(F=Math.floor(F)),(z-Math.min(n.params.slidesPerGroupSkip,z))%n.params.slidesPerGroup===0&&p.push(F),m.push(F),F=F+C+x),n.virtualSize+=C+x,V=C,z+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+S,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+x}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+x}px`),M&&n.grid.updateWrapperSize(C,p),!t.centeredSlides){let D=[];for(let N=0;N<p.length;N+=1){let O=p[N];t.roundLengths&&(O=Math.floor(O)),p[N]<=n.virtualSize-s&&D.push(O)}p=D,Math.floor(n.virtualSize-s)-Math.floor(p[p.length-1])>1&&p.push(n.virtualSize-s)}if(l&&t.loop){let D=y[0]+x;if(t.slidesPerGroup>1){let N=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),O=D*t.slidesPerGroup;for(let T=0;T<N;T+=1)p.push(p[p.length-1]+O)}for(let N=0;N<n.virtual.slidesBefore+n.virtual.slidesAfter;N+=1)t.slidesPerGroup===1&&p.push(p[p.length-1]+D),m.push(m[m.length-1]+D),n.virtualSize+=D}if(p.length===0&&(p=[0]),x!==0){let D=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");d.filter((N,O)=>!t.cssMode||t.loop?!0:O!==d.length-1).forEach(N=>{N.style[D]=`${x}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let D=0;y.forEach(O=>{D+=O+(x||0)}),D-=x;let N=D>s?D-s:0;p=p.map(O=>O<=0?-b:O>N?N+S:O)}if(t.centerInsufficientSlides){let D=0;y.forEach(O=>{D+=O+(x||0)}),D-=x;let N=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(D+N<s){let O=(s-D-N)/2;p.forEach((T,H)=>{p[H]=T-O}),m.forEach((T,H)=>{m[H]=T+O})}}if(Object.assign(n,{slides:d,snapGrid:p,slidesGrid:m,slidesSizesGrid:y}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){Eo(i,"--swiper-centered-offset-before",`${-p[0]}px`),Eo(i,"--swiper-centered-offset-after",`${n.size/2-y[y.length-1]/2}px`);let D=-n.snapGrid[0],N=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(O=>O+D),n.slidesGrid=n.slidesGrid.map(O=>O+N)}if(h!==c&&n.emit("slidesLengthChange"),p.length!==k&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),m.length!==A&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){let D=`${t.containerModifierClass}backface-hidden`,N=n.el.classList.contains(D);h<=t.maxBackfaceHiddenSlides?N||n.el.classList.add(D):N&&n.el.classList.remove(D)}}function A3(n){let e=this,t=[],i=e.virtual&&e.params.virtual.enabled,r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);let o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){let a=e.activeIndex+s;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){let a=t[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function P3(){let n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}var GP=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function R3(n){n===void 0&&(n=this&&this.translate||0);let e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;r&&(o=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){let c=i[l],d=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(d-=i[0].swiperSlideOffset);let h=(o+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),p=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),m=-(o-d),y=m+e.slidesSizesGrid[l],b=m>=0&&m<=e.size-e.slidesSizesGrid[l],S=m>=0&&m<e.size-1||y>1&&y<=e.size||m<=0&&y>=e.size;S&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),GP(c,S,t.slideVisibleClass),GP(c,b,t.slideFullyVisibleClass),c.progress=r?-h:h,c.originalProgress=r?-p:p}}function k3(n){let e=this;if(typeof n>"u"){let d=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*d||0}let t=e.params,i=e.maxTranslate()-e.minTranslate(),{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e,l=s,c=o;if(i===0)r=0,s=!0,o=!0;else{r=(n-e.minTranslate())/i;let d=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;s=d||r<=0,o=h||r>=1,d&&(r=0),h&&(r=1)}if(t.loop){let d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),p=e.slidesGrid[d],m=e.slidesGrid[h],y=e.slidesGrid[e.slidesGrid.length-1],b=Math.abs(n);b>=p?a=(b-p)/y:a=(b+y-m)/y,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}var Qy=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function D3(){let n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=h=>St(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0],l,c,d;if(s)if(t.loop){let h=r-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=e.filter(h=>h.column===r)[0],d=e.filter(h=>h.column===r+1)[0],c=e.filter(h=>h.column===r-1)[0]):l=e[r];l&&(o||(d=qP(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d&&(d=e[0]),c=BP(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{Qy(h,h===l,t.slideActiveClass),Qy(h,h===d,t.slideNextClass),Qy(h,h===c,t.slidePrevClass)}),n.emitSlidesClasses()}var $f=(n,e)=>{if(!n||n.destroyed||!n.params)return;let t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Yy=(n,e)=>{if(!n.slides[e])return;let t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Zy=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext,t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);let i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){let o=r,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&Yy(n,c)});return}let s=r+i-1;if(n.params.rewind||n.params.loop)for(let o=r-e;o<=s+e;o+=1){let a=(o%t+t)%t;(a<r||a>s)&&Yy(n,a)}else for(let o=Math.max(r-e,0);o<=Math.min(s+e,t-1);o+=1)o!==r&&(o>s||o<r)&&Yy(n,o)};function M3(n){let{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate,r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function N3(n){let e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e,l=n,c,d=m=>{let y=m-e.virtual.slidesBefore;return y<0&&(y=e.virtual.slides.length+y),y>=e.virtual.slides.length&&(y-=e.virtual.slides.length),y};if(typeof l>"u"&&(l=M3(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{let m=Math.min(r.slidesPerGroupSkip,l);c=m+Math.floor((l-m)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}let h=e.grid&&r.grid&&r.grid.rows>1,p;if(e.virtual&&r.virtual.enabled&&r.loop)p=d(l);else if(h){let m=e.slides.filter(b=>b.column===l)[0],y=parseInt(m.getAttribute("data-swiper-slide-index"),10);Number.isNaN(y)&&(y=Math.max(e.slides.indexOf(m),0)),p=Math.floor(y/r.grid.rows)}else if(e.slides[l]){let m=e.slides[l].getAttribute("data-swiper-slide-index");m?p=parseInt(m,10):p=l}else p=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:p,previousIndex:s,activeIndex:l}),e.initialized&&Zy(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==p&&e.emit("realIndexChange"),e.emit("slideChange"))}function O3(n,e){let t=this,i=t.params,r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(r=a)});let s=!1,o;if(r){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){s=!0,o=a;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var F3={updateSize:C3,updateSlides:I3,updateAutoHeight:A3,updateSlidesOffset:P3,updateSlidesProgress:R3,updateProgress:k3,updateSlidesClasses:D3,updateActiveIndex:N3,updateClickedSlide:O3};function L3(n){n===void 0&&(n=this.isHorizontal()?"x":"y");let e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let o=Xu(s,n);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function V3(n,e){let t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:o}=t,a=0,l=0,c=0;t.isHorizontal()?a=i?-n:n:l=n,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:r.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let d,h=t.maxTranslate()-t.minTranslate();h===0?d=0:d=(n-t.minTranslate())/h,d!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function U3(){return-this.snapGrid[0]}function $3(){return-this.snapGrid[this.snapGrid.length-1]}function z3(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);let s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;let l=s.minTranslate(),c=s.maxTranslate(),d;if(i&&n>l?d=l:i&&n<c?d=c:d=n,s.updateProgress(d),o.cssMode){let h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return Gy({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(p){!s||s.destroyed||p.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var j3={getTranslate:L3,setTranslate:V3,minTranslate:U3,maxTranslate:$3,translateTo:z3};function B3(n,e){let t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function XP(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n,{activeIndex:s,previousIndex:o}=e,a=i;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${r}`),t&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),a==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function q3(n,e){n===void 0&&(n=!0);let t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),XP({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function G3(n,e){n===void 0&&(n=!0);let t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),XP({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var H3={setTransition:B3,transitionStart:q3,transitionEnd:G3};function W3(n,e,t,i,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));let s=this,o=n;o<0&&(o=0);let{params:a,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:p,wrapperEl:m,enabled:y}=s;if(!y&&!i&&!r||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);let b=Math.min(s.params.slidesPerGroupSkip,o),S=b+Math.floor((o-b)/s.params.slidesPerGroup);S>=l.length&&(S=l.length-1);let k=-l[S];if(a.normalizeSlideIndex)for(let V=0;V<c.length;V+=1){let z=-Math.floor(k*100),M=Math.floor(c[V]*100),C=Math.floor(c[V+1]*100);typeof c[V+1]<"u"?z>=M&&z<C-(C-M)/2?o=V:z>=M&&z<C&&(o=V+1):z>=M&&(o=V)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(p?k>s.translate&&k>s.minTranslate():k<s.translate&&k<s.minTranslate())||!s.allowSlidePrev&&k>s.translate&&k>s.maxTranslate()&&(h||0)!==o))return!1;o!==(d||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(k);let A;o>h?A="next":o<h?A="prev":A="reset";let x=s.virtual&&s.params.virtual.enabled;if(!(x&&r)&&(p&&-k===s.translate||!p&&k===s.translate))return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(k),A!=="reset"&&(s.transitionStart(t,A),s.transitionEnd(t,A)),!1;if(a.cssMode){let V=s.isHorizontal(),z=p?k:-k;if(e===0)x&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),x&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{m[V?"scrollLeft":"scrollTop"]=z})):m[V?"scrollLeft":"scrollTop"]=z,x&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return Gy({swiper:s,targetPosition:z,side:V?"left":"top"}),!0;m.scrollTo({[V?"left":"top"]:z,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(k),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,A),e===0?s.transitionEnd(t,A):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(z){!s||s.destroyed||z.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,A))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function K3(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));let r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);let s=r.grid&&r.params.grid&&r.params.grid.rows>1,o=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let a;if(s){let p=o*r.params.grid.rows;a=r.slides.filter(m=>m.getAttribute("data-swiper-slide-index")*1===p)[0].column}else a=r.getSlideIndexByData(o);let l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params,d=r.params.slidesPerView;d==="auto"?d=r.slidesPerViewDynamic():(d=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&d%2===0&&(d=d+1));let h=l-a<d;if(c&&(h=h||a<Math.ceil(d/2)),i&&c&&r.params.slidesPerView!=="auto"&&!s&&(h=!1),h){let p=c?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:p,slideTo:!0,activeSlideIndex:p==="next"?a+1:a-l+1,slideRealIndex:p==="next"?r.realIndex:void 0})}if(s){let p=o*r.params.grid.rows;o=r.slides.filter(m=>m.getAttribute("data-swiper-slide-index")*1===p)[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,t,i)}),r}function Q3(n,e,t){e===void 0&&(e=!0);let i=this,{enabled:r,params:s,animating:o}=i;if(!r||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));let l=i.activeIndex<s.slidesPerGroupSkip?1:a,c=i.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function Y3(n,e,t){e===void 0&&(e=!0);let i=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let d=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}let h=a?i.translate:-i.translate;function p(k){return k<0?-Math.floor(Math.abs(k)):Math.floor(k)}let m=p(h),y=s.map(k=>p(k)),b=s[y.indexOf(m)-1];if(typeof b>"u"&&r.cssMode){let k;s.forEach((A,x)=>{m>=A&&(k=x)}),typeof k<"u"&&(b=s[k>0?k-1:k])}let S=0;if(typeof b<"u"&&(S=o.indexOf(b),S<0&&(S=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(S=S-i.slidesPerViewDynamic("previous",!0)+1,S=Math.max(S,0))),r.rewind&&i.isBeginning){let k=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(k,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(S,n,e,t)}),!0;return i.slideTo(S,n,e,t)}function X3(n,e,t){e===void 0&&(e=!0);let i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function J3(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);let r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let s=r.activeIndex,o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){let c=r.snapGrid[a],d=r.snapGrid[a+1];l-c>(d-c)*i&&(s+=r.params.slidesPerGroup)}else{let c=r.snapGrid[a-1],d=r.snapGrid[a];l-c<=(d-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function Z3(){let n=this;if(n.destroyed)return;let{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView,r=n.clickedIndex,s,o=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(St(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),Ni(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(St(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),Ni(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var eV={slideTo:W3,slideToLoop:K3,slideNext:Q3,slidePrev:Y3,slideReset:X3,slideToClosest:J3,slideToClickedSlide:Z3};function tV(n){let e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;let r=()=>{St(i,`.${t.slideClass}, swiper-slide`).forEach((h,p)=>{h.setAttribute("data-swiper-slide-index",p)})},s=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(s?t.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%t.grid.rows!==0,c=d=>{for(let h=0;h<d;h+=1){let p=e.isElement?Kt("swiper-slide",[t.slideBlankClass]):Kt("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(p)}};if(a){if(t.loopAddBlankSlides){let d=o-e.slides.length%o;c(d),e.recalcSlides(),e.updateSlides()}else Ju("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(t.loopAddBlankSlides){let d=t.grid.rows-e.slides.length%t.grid.rows;c(d),e.recalcSlides(),e.updateSlides()}else Ju("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function nV(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:o,byMousewheel:a}=n===void 0?{}:n,l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");let{slides:c,allowSlidePrev:d,allowSlideNext:h,slidesEl:p,params:m}=l,{centeredSlides:y}=m;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&m.virtual.enabled){t&&(!m.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):m.centeredSlides&&l.snapIndex<m.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=h,l.emit("loopFix");return}let b=m.slidesPerView;b==="auto"?b=l.slidesPerViewDynamic():(b=Math.ceil(parseFloat(m.slidesPerView,10)),y&&b%2===0&&(b=b+1));let S=m.slidesPerGroupAuto?b:m.slidesPerGroup,k=S;k%S!==0&&(k+=S-k%S),k+=m.loopAdditionalSlides,l.loopedSlides=k;let A=l.grid&&m.grid&&m.grid.rows>1;c.length<b+k?Ju("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):A&&m.grid.fill==="row"&&Ju("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");let x=[],F=[],V=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(T=>T.classList.contains(m.slideActiveClass))[0]):V=s;let z=i==="next"||!i,M=i==="prev"||!i,C=0,E=0,D=A?Math.ceil(c.length/m.grid.rows):c.length,O=(A?c[s].column:s)+(y&&typeof r>"u"?-b/2+.5:0);if(O<k){C=Math.max(k-O,S);for(let T=0;T<k-O;T+=1){let H=T-Math.floor(T/D)*D;if(A){let X=D-H-1;for(let me=c.length-1;me>=0;me-=1)c[me].column===X&&x.push(me)}else x.push(D-H-1)}}else if(O+b>D-k){E=Math.max(O-(D-k*2),S);for(let T=0;T<E;T+=1){let H=T-Math.floor(T/D)*D;A?c.forEach((X,me)=>{X.column===H&&F.push(me)}):F.push(H)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),M&&x.forEach(T=>{c[T].swiperLoopMoveDOM=!0,p.prepend(c[T]),c[T].swiperLoopMoveDOM=!1}),z&&F.forEach(T=>{c[T].swiperLoopMoveDOM=!0,p.append(c[T]),c[T].swiperLoopMoveDOM=!1}),l.recalcSlides(),m.slidesPerView==="auto"?l.updateSlides():A&&(x.length>0&&M||F.length>0&&z)&&l.slides.forEach((T,H)=>{l.grid.updateSlide(H,T,l.slides)}),m.watchSlidesProgress&&l.updateSlidesOffset(),t){if(x.length>0&&M){if(typeof e>"u"){let T=l.slidesGrid[V],X=l.slidesGrid[V+C]-T;a?l.setTranslate(l.translate-X):(l.slideTo(V+Math.ceil(C),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-X,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-X))}else if(r){let T=A?x.length/m.grid.rows:x.length;l.slideTo(l.activeIndex+T,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(F.length>0&&z)if(typeof e>"u"){let T=l.slidesGrid[V],X=l.slidesGrid[V-E]-T;a?l.setTranslate(l.translate-X):(l.slideTo(V-E,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-X,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-X))}else{let T=A?F.length/m.grid.rows:F.length;l.slideTo(l.activeIndex-T,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){let T={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(H=>{!H.destroyed&&H.params.loop&&H.loopFix(et(he({},T),{slideTo:H.params.slidesPerView===m.slidesPerView?t:!1}))}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(et(he({},T),{slideTo:l.controller.control.params.slidesPerView===m.slidesPerView?t:!1}))}l.emit("loopFix")}function iV(){let n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();let i=[];n.slides.forEach(r=>{let s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var rV={loopCreate:tV,loopFix:nV,loopDestroy:iV};function sV(n){let e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;let t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function oV(){let n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var aV={setGrabCursor:sV,unsetGrabCursor:oV};function lV(n,e){e===void 0&&(e=this);function t(i){if(!i||i===mt()||i===st())return null;i.assignedSlot&&(i=i.assignedSlot);let r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function HP(n,e,t){let i=st(),{params:r}=n,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(t<=o||t>=i.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function cV(n){let e=this,t=mt(),i=n;i.originalEvent&&(i=i.originalEvent);let r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){HP(e,i,i.targetTouches[0].pageX);return}let{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!jP(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;let c=!!s.noSwipingClass&&s.noSwipingClass!=="",d=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&d&&(l=d[0]);let h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,p=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(p?lV(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;let m=o.currentX,y=o.currentY;if(!HP(e,i,m))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=m,o.startY=y,r.touchStartTime=An(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let b=!0;l.matches(r.focusableElements)&&(b=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!l.matches(r.focusableElements))&&t.activeElement.blur();let S=b&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||S)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function uV(n){let e=mt(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(z=>z.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}let d=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),i.touchStartTime=An());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;let p=s.currentX-s.startX,m=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(p**2+m**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let z;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:p*p+m*m>=25&&(z=Math.atan2(Math.abs(m),Math.abs(p))*180/Math.PI,i.isScrolling=t.isHorizontal()?z>r.touchAngle:90-z>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let y=t.isHorizontal()?p:m,b=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(y=Math.abs(y)*(o?1:-1),b=Math.abs(b)*(o?1:-1)),s.diff=y,y*=r.touchRatio,o&&(y=-y,b=-b);let S=t.touchesDirection;t.swipeDirection=y>0?"prev":"next",t.touchesDirection=b>0?"prev":"next";let k=t.params.loop&&!r.cssMode,A=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(k&&A&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){let z=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(z)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let x;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&S!==t.touchesDirection&&k&&A&&Math.abs(y)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=y+i.startTranslate;let F=!0,V=r.resistanceRatio;if(r.touchReleaseOnEdges&&(V=0),y>0?(k&&A&&!x&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(F=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+y)**V))):y<0&&(k&&A&&!x&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(F=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-y)**V))),F&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(y)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function dV(n){let e=this,t=e.touchEventsData,i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(V=>V.identifier===t.touchId)[0],!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;let{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:d}=e;if(!d||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);let h=An(),p=h-t.touchStartTime;if(e.allowClick){let V=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(V&&V[0]||i.target,V),e.emit("tap click",i),p<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=An(),Ni(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let m;if(o.followFinger?m=l?e.translate:-e.translate:m=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:m});return}let y=m>=-e.maxTranslate()&&!e.params.loop,b=0,S=e.slidesSizesGrid[0];for(let V=0;V<c.length;V+=V<o.slidesPerGroupSkip?1:o.slidesPerGroup){let z=V<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[V+z]<"u"?(y||m>=c[V]&&m<c[V+z])&&(b=V,S=c[V+z]-c[V]):(y||m>=c[V])&&(b=V,S=c[c.length-1]-c[c.length-2])}let k=null,A=null;o.rewind&&(e.isBeginning?A=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(k=0));let x=(m-c[b])/S,F=b<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(p>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(x>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?k:b+F):e.slideTo(b)),e.swipeDirection==="prev"&&(x>1-o.longSwipesRatio?e.slideTo(b+F):A!==null&&x<0&&Math.abs(x)>o.longSwipesRatio?e.slideTo(A):e.slideTo(b))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(b+F):e.slideTo(b):(e.swipeDirection==="next"&&e.slideTo(k!==null?k:b+F),e.swipeDirection==="prev"&&e.slideTo(A!==null?A:b))}}function WP(){let n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();let{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();let a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function hV(n){let e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function pV(){let n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r,s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function fV(n){let e=this;$f(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function mV(){let n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}var JP=(n,e)=>{let t=mt(),{params:i,el:r,wrapperEl:s,device:o}=n,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!r||typeof r=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",n.onTouchStart,{passive:!1}),r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",WP,!0):n[c]("observerUpdate",WP,!0),r[l]("load",n.onLoad,{capture:!0}))};function gV(){let n=this,{params:e}=n;n.onTouchStart=cV.bind(n),n.onTouchMove=uV.bind(n),n.onTouchEnd=dV.bind(n),n.onDocumentTouchStart=mV.bind(n),e.cssMode&&(n.onScroll=pV.bind(n)),n.onClick=hV.bind(n),n.onLoad=fV.bind(n),JP(n,"on")}function _V(){JP(this,"off")}var vV={attachEvents:gV,detachEvents:_V},KP=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function wV(){let n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;let o=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!o||n.currentBreakpoint===o)return;let l=(o in s?s[o]:void 0)||n.originalParams,c=KP(n,i),d=KP(n,l),h=n.params.grabCursor,p=l.grabCursor,m=i.enabled;c&&!d?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&d&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),h&&!p?n.unsetGrabCursor():!h&&p&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(x=>{if(typeof l[x]>"u")return;let F=i[x]&&i[x].enabled,V=l[x]&&l[x].enabled;F&&!V&&n[x].disable(),!F&&V&&n[x].enable()});let y=l.direction&&l.direction!==i.direction,b=i.loop&&(l.slidesPerView!==i.slidesPerView||y),S=i.loop;y&&t&&n.changeDirection(),Fn(n.params,l);let k=n.params.enabled,A=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),m&&!k?n.disable():!m&&k&&n.enable(),n.currentBreakpoint=o,n.emit("_beforeBreakpoint",l),t&&(b?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!S&&A?(n.loopCreate(e),n.updateSlides()):S&&!A&&n.loopDestroy()),n.emit("breakpoint",l)}function yV(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1,r=st(),s=e==="window"?r.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){let l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){let{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var bV={setBreakpoint:wV,getBreakpoint:yV};function xV(n,e){let t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function SV(){let n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,o=xV(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),r.classList.add(...e),n.emitContainerClasses()}function EV(){let n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var TV={addClasses:SV,removeClasses:EV};function CV(){let n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){let r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var IV={checkOverflow:CV},zf={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function AV(n,e){return function(i){i===void 0&&(i={});let r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){Fn(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){Fn(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),Fn(e,i)}}var Xy={eventsEmitter:T3,update:F3,translate:j3,transition:H3,slide:eV,loop:rV,grabCursor:aV,events:vV,breakpoints:bV,checkOverflow:IV,classes:TV},Jy={},xs=class n{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=Fn({},t),e&&!t.el&&(t.el=e);let o=mt();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){let d=[];return o.querySelectorAll(t.el).forEach(h=>{let p=Fn({},t,{el:h});d.push(new n(p))}),d}let a=this;a.__swiper__=!0,a.support=QP(),a.device=YP({userAgent:t.userAgent}),a.browser=x3(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);let l={};a.modules.forEach(d=>{d({params:t,swiper:a,extendParams:AV(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});let c=Fn({},zf,l);return a.params=Fn({},c,Jy,t),a.originalParams=Fn({},a.params),a.passedParams=Fn({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(d=>{a.on(d,a.params.on[d])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){let{slidesEl:t,params:i}=this,r=St(t,`.${i.slideClass}, swiper-slide`),s=ws(r[0]);return ws(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){let e=this,{slidesEl:t,params:i}=e;e.slides=St(t,`.${i.slideClass}, swiper-slide`)}enable(){let e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){let e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){let i=this;e=Math.min(Math.max(e,0),1);let r=i.minTranslate(),o=(i.maxTranslate()-r)*e+r;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){let t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=[];e.slides.forEach(i=>{let r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);let i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i,d=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,p;for(let m=c+1;m<s.length;m+=1)s[m]&&!p&&(h+=Math.ceil(s[m].swiperSlideSize),d+=1,h>l&&(p=!0));for(let m=c-1;m>=0;m-=1)s[m]&&!p&&(h+=s[m].swiperSlideSize,d+=1,h>l&&(p=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(t?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(d+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(d+=1);return d}update(){let e=this;if(!e||e.destroyed)return;let{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&$f(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){let o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){let o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);let i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){let t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){let t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);let r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):St(i,r())[0];return!o&&t.params.createElements&&(o=Kt("div",t.params.wrapperClass),i.append(o),St(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Tr(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Tr(i,"direction")==="rtl"),wrongRTL:Tr(o,"display")==="-webkit-box"}),!0}init(e){let t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();let r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?$f(t,s):s.addEventListener("load",o=>{$f(t,o.target)})}),Zy(t),t.initialized=!0,Zy(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);let i=this,{params:r,el:s,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),zP(i)),i.destroyed=!0),null}static extendDefaults(e){Fn(Jy,e)}static get extendedDefaults(){return Jy}static get defaults(){return zf}static installModule(e){n.prototype.__modules__||(n.prototype.__modules__=[]);let t=n.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>n.installModule(t)),n):(n.installModule(e),n)}};Object.keys(Xy).forEach(n=>{Object.keys(Xy[n]).forEach(e=>{xs.prototype[e]=Xy[n][e]})});xs.use([S3,E3]);function ZP(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let s,o=mt();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};let a=o.createElement("div");function l(y,b){let S=e.params.virtual;if(S.cache&&e.virtual.cache[b])return e.virtual.cache[b];let k;return S.renderSlide?(k=S.renderSlide.call(e,y,b),typeof k=="string"&&(a.innerHTML=k,k=a.children[0])):e.isElement?k=Kt("swiper-slide"):k=Kt("div",e.params.slideClass),k.setAttribute("data-swiper-slide-index",b),S.renderSlide||(k.innerHTML=y),S.cache&&(e.virtual.cache[b]=k),k}function c(y,b){let{slidesPerView:S,slidesPerGroup:k,centeredSlides:A,loop:x,initialSlide:F}=e.params;if(b&&!x&&F>0)return;let{addSlidesBefore:V,addSlidesAfter:z}=e.params.virtual,{from:M,to:C,slides:E,slidesGrid:D,offset:N}=e.virtual;e.params.cssMode||e.updateActiveIndex();let O=e.activeIndex||0,T;e.rtlTranslate?T="right":T=e.isHorizontal()?"left":"top";let H,X;A?(H=Math.floor(S/2)+k+z,X=Math.floor(S/2)+k+V):(H=S+(k-1)+z,X=(x?S:k)+V);let me=O-X,Q=O+H;x||(me=Math.max(me,0),Q=Math.min(Q,E.length-1));let Y=(e.slidesGrid[me]||0)-(e.slidesGrid[0]||0);x&&O>=X?(me-=X,A||(Y+=e.slidesGrid[0])):x&&O<X&&(me=-X,A&&(Y+=e.slidesGrid[0])),Object.assign(e.virtual,{from:me,to:Q,offset:Y,slidesGrid:e.slidesGrid,slidesBefore:X,slidesAfter:H});function de(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),r("virtualUpdate")}if(M===me&&C===Q&&!y){e.slidesGrid!==D&&Y!==N&&e.slides.forEach(ye=>{ye.style[T]=`${Y-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),r("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:Y,from:me,to:Q,slides:function(){let Ye=[];for(let Dt=me;Dt<=Q;Dt+=1)Ye.push(E[Dt]);return Ye}()}),e.params.virtual.renderExternalUpdate?de():r("virtualUpdate");return}let Pe=[],ne=[],se=ye=>{let Ye=ye;return ye<0?Ye=E.length+ye:Ye>=E.length&&(Ye=Ye-E.length),Ye};if(y)e.slides.filter(ye=>ye.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(ye=>{ye.remove()});else for(let ye=M;ye<=C;ye+=1)if(ye<me||ye>Q){let Ye=se(ye);e.slides.filter(Dt=>Dt.matches(`.${e.params.slideClass}[data-swiper-slide-index="${Ye}"], swiper-slide[data-swiper-slide-index="${Ye}"]`)).forEach(Dt=>{Dt.remove()})}let oe=x?-E.length:0,ot=x?E.length*2:E.length;for(let ye=oe;ye<ot;ye+=1)if(ye>=me&&ye<=Q){let Ye=se(ye);typeof C>"u"||y?ne.push(Ye):(ye>C&&ne.push(Ye),ye<M&&Pe.push(Ye))}if(ne.forEach(ye=>{e.slidesEl.append(l(E[ye],ye))}),x)for(let ye=Pe.length-1;ye>=0;ye-=1){let Ye=Pe[ye];e.slidesEl.prepend(l(E[Ye],Ye))}else Pe.sort((ye,Ye)=>Ye-ye),Pe.forEach(ye=>{e.slidesEl.prepend(l(E[ye],ye))});St(e.slidesEl,".swiper-slide, swiper-slide").forEach(ye=>{ye.style[T]=`${Y-Math.abs(e.cssOverflowAdjustment())}px`}),de()}function d(y){if(typeof y=="object"&&"length"in y)for(let b=0;b<y.length;b+=1)y[b]&&e.virtual.slides.push(y[b]);else e.virtual.slides.push(y);c(!0)}function h(y){let b=e.activeIndex,S=b+1,k=1;if(Array.isArray(y)){for(let A=0;A<y.length;A+=1)y[A]&&e.virtual.slides.unshift(y[A]);S=b+y.length,k=y.length}else e.virtual.slides.unshift(y);if(e.params.virtual.cache){let A=e.virtual.cache,x={};Object.keys(A).forEach(F=>{let V=A[F],z=V.getAttribute("data-swiper-slide-index");z&&V.setAttribute("data-swiper-slide-index",parseInt(z,10)+k),x[parseInt(F,10)+k]=V}),e.virtual.cache=x}c(!0),e.slideTo(S,0)}function p(y){if(typeof y>"u"||y===null)return;let b=e.activeIndex;if(Array.isArray(y))for(let S=y.length-1;S>=0;S-=1)e.params.virtual.cache&&(delete e.virtual.cache[y[S]],Object.keys(e.virtual.cache).forEach(k=>{k>y&&(e.virtual.cache[k-1]=e.virtual.cache[k],e.virtual.cache[k-1].setAttribute("data-swiper-slide-index",k-1),delete e.virtual.cache[k])})),e.virtual.slides.splice(y[S],1),y[S]<b&&(b-=1),b=Math.max(b,0);else e.params.virtual.cache&&(delete e.virtual.cache[y],Object.keys(e.virtual.cache).forEach(S=>{S>y&&(e.virtual.cache[S-1]=e.virtual.cache[S],e.virtual.cache[S-1].setAttribute("data-swiper-slide-index",S-1),delete e.virtual.cache[S])})),e.virtual.slides.splice(y,1),y<b&&(b-=1),b=Math.max(b,0);c(!0),e.slideTo(b,0)}function m(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),c(!0),e.slideTo(0,0)}i("beforeInit",()=>{if(!e.params.virtual.enabled)return;let y;if(typeof e.passedParams.virtual.slides>"u"){let b=[...e.slidesEl.children].filter(S=>S.matches(`.${e.params.slideClass}, swiper-slide`));b&&b.length&&(e.virtual.slides=[...b],y=!0,b.forEach((S,k)=>{S.setAttribute("data-swiper-slide-index",k),e.virtual.cache[k]=S,S.remove()}))}y||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,c(!1,!0)}),i("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(s),s=setTimeout(()=>{c()},100)):c())}),i("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&Eo(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:d,prependSlide:h,removeSlide:p,removeAllSlides:m,update:c})}function eR(n){let{swiper:e,extendParams:t,on:i,emit:r}=n,s=mt(),o=st();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function a(d){if(!e.enabled)return;let{rtlTranslate:h}=e,p=d;p.originalEvent&&(p=p.originalEvent);let m=p.keyCode||p.charCode,y=e.params.keyboard.pageUpDown,b=y&&m===33,S=y&&m===34,k=m===37,A=m===39,x=m===38,F=m===40;if(!e.allowSlideNext&&(e.isHorizontal()&&A||e.isVertical()&&F||S)||!e.allowSlidePrev&&(e.isHorizontal()&&k||e.isVertical()&&x||b))return!1;if(!(p.shiftKey||p.altKey||p.ctrlKey||p.metaKey)&&!(s.activeElement&&s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(b||S||k||A||x||F)){let V=!1;if(Oi(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&Oi(e.el,`.${e.params.slideActiveClass}`).length===0)return;let z=e.el,M=z.clientWidth,C=z.clientHeight,E=o.innerWidth,D=o.innerHeight,N=To(z);h&&(N.left-=z.scrollLeft);let O=[[N.left,N.top],[N.left+M,N.top],[N.left,N.top+C],[N.left+M,N.top+C]];for(let T=0;T<O.length;T+=1){let H=O[T];if(H[0]>=0&&H[0]<=E&&H[1]>=0&&H[1]<=D){if(H[0]===0&&H[1]===0)continue;V=!0}}if(!V)return}e.isHorizontal()?((b||S||k||A)&&(p.preventDefault?p.preventDefault():p.returnValue=!1),((S||A)&&!h||(b||k)&&h)&&e.slideNext(),((b||k)&&!h||(S||A)&&h)&&e.slidePrev()):((b||S||x||F)&&(p.preventDefault?p.preventDefault():p.returnValue=!1),(S||F)&&e.slideNext(),(b||x)&&e.slidePrev()),r("keyPress",m)}}function l(){e.keyboard.enabled||(s.addEventListener("keydown",a),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(s.removeEventListener("keydown",a),e.keyboard.enabled=!1)}i("init",()=>{e.params.keyboard.enabled&&l()}),i("destroy",()=>{e.keyboard.enabled&&c()}),Object.assign(e.keyboard,{enable:l,disable:c})}function tR(n){let{swiper:e,extendParams:t,on:i,emit:r}=n,s=st();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let o,a=An(),l,c=[];function d(x){let M=0,C=0,E=0,D=0;return"detail"in x&&(C=x.detail),"wheelDelta"in x&&(C=-x.wheelDelta/120),"wheelDeltaY"in x&&(C=-x.wheelDeltaY/120),"wheelDeltaX"in x&&(M=-x.wheelDeltaX/120),"axis"in x&&x.axis===x.HORIZONTAL_AXIS&&(M=C,C=0),E=M*10,D=C*10,"deltaY"in x&&(D=x.deltaY),"deltaX"in x&&(E=x.deltaX),x.shiftKey&&!E&&(E=D,D=0),(E||D)&&x.deltaMode&&(x.deltaMode===1?(E*=40,D*=40):(E*=800,D*=800)),E&&!M&&(M=E<1?-1:1),D&&!C&&(C=D<1?-1:1),{spinX:M,spinY:C,pixelX:E,pixelY:D}}function h(){e.enabled&&(e.mouseEntered=!0)}function p(){e.enabled&&(e.mouseEntered=!1)}function m(x){return e.params.mousewheel.thresholdDelta&&x.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&An()-a<e.params.mousewheel.thresholdTime?!1:x.delta>=6&&An()-a<60?!0:(x.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),r("scroll",x.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),r("scroll",x.raw)),a=new s.Date().getTime(),!1)}function y(x){let F=e.params.mousewheel;if(x.direction<0){if(e.isEnd&&!e.params.loop&&F.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&F.releaseOnEdges)return!0;return!1}function b(x){let F=x,V=!0;if(!e.enabled||x.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;let z=e.params.mousewheel;e.params.cssMode&&F.preventDefault();let M=e.el;e.params.mousewheel.eventsTarget!=="container"&&(M=document.querySelector(e.params.mousewheel.eventsTarget));let C=M&&M.contains(F.target);if(!e.mouseEntered&&!C&&!z.releaseOnEdges)return!0;F.originalEvent&&(F=F.originalEvent);let E=0,D=e.rtlTranslate?-1:1,N=d(F);if(z.forceToAxis)if(e.isHorizontal())if(Math.abs(N.pixelX)>Math.abs(N.pixelY))E=-N.pixelX*D;else return!0;else if(Math.abs(N.pixelY)>Math.abs(N.pixelX))E=-N.pixelY;else return!0;else E=Math.abs(N.pixelX)>Math.abs(N.pixelY)?-N.pixelX*D:-N.pixelY;if(E===0)return!0;z.invert&&(E=-E);let O=e.getTranslate()+E*z.sensitivity;if(O>=e.minTranslate()&&(O=e.minTranslate()),O<=e.maxTranslate()&&(O=e.maxTranslate()),V=e.params.loop?!0:!(O===e.minTranslate()||O===e.maxTranslate()),V&&e.params.nested&&F.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){let T={time:An(),delta:Math.abs(E),direction:Math.sign(E),raw:x};c.length>=2&&c.shift();let H=c.length?c[c.length-1]:void 0;if(c.push(T),H?(T.direction!==H.direction||T.delta>H.delta||T.time>H.time+150)&&m(T):m(T),y(T))return!0}else{let T={time:An(),delta:Math.abs(E),direction:Math.sign(E)},H=l&&T.time<l.time+500&&T.delta<=l.delta&&T.direction===l.direction;if(!H){l=void 0;let X=e.getTranslate()+E*z.sensitivity,me=e.isBeginning,Q=e.isEnd;if(X>=e.minTranslate()&&(X=e.minTranslate()),X<=e.maxTranslate()&&(X=e.maxTranslate()),e.setTransition(0),e.setTranslate(X),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!me&&e.isBeginning||!Q&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:T.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(o),o=void 0,c.length>=15&&c.shift();let Y=c.length?c[c.length-1]:void 0,de=c[0];if(c.push(T),Y&&(T.delta>Y.delta||T.direction!==Y.direction))c.splice(0);else if(c.length>=15&&T.time-de.time<500&&de.delta-T.delta>=1&&T.delta<=6){let Pe=E>0?.8:.2;l=T,c.splice(0),o=Ni(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,Pe)},0)}o||(o=Ni(()=>{if(e.destroyed||!e.params)return;let Pe=.5;l=T,c.splice(0),e.slideToClosest(e.params.speed,!0,void 0,Pe)},500))}if(H||r("scroll",F),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),z.releaseOnEdges&&(X===e.minTranslate()||X===e.maxTranslate()))return!0}}return F.preventDefault?F.preventDefault():F.returnValue=!1,!1}function S(x){let F=e.el;e.params.mousewheel.eventsTarget!=="container"&&(F=document.querySelector(e.params.mousewheel.eventsTarget)),F[x]("mouseenter",h),F[x]("mouseleave",p),F[x]("wheel",b)}function k(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",b),!0):e.mousewheel.enabled?!1:(S("addEventListener"),e.mousewheel.enabled=!0,!0)}function A(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,b),!0):e.mousewheel.enabled?(S("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}i("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&A(),e.params.mousewheel.enabled&&k()}),i("destroy",()=>{e.params.cssMode&&k(),e.mousewheel.enabled&&A()}),Object.assign(e.mousewheel,{enable:k,disable:A})}function wl(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let s=St(n.el,`.${i[r]}`)[0];s||(s=Kt("div",i[r]),s.className=i[r],n.el.append(s)),t[r]=s,e[r]=s}}),t}function nR(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(y){let b;return y&&typeof y=="string"&&e.isElement&&(b=e.el.querySelector(y)||e.hostEl.querySelector(y),b)?b:(y&&(typeof y=="string"&&(b=[...document.querySelectorAll(y)]),e.params.uniqueNavElements&&typeof y=="string"&&b&&b.length>1&&e.el.querySelectorAll(y).length===1?b=e.el.querySelector(y):b&&b.length===1&&(b=b[0])),y&&!b?y:b)}function o(y,b){let S=e.params.navigation;y=Le(y),y.forEach(k=>{k&&(k.classList[b?"add":"remove"](...S.disabledClass.split(" ")),k.tagName==="BUTTON"&&(k.disabled=b),e.params.watchOverflow&&e.enabled&&k.classList[e.isLocked?"add":"remove"](S.lockClass))})}function a(){let{nextEl:y,prevEl:b}=e.navigation;if(e.params.loop){o(b,!1),o(y,!1);return}o(b,e.isBeginning&&!e.params.rewind),o(y,e.isEnd&&!e.params.rewind)}function l(y){y.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(y){y.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){let y=e.params.navigation;if(e.params.navigation=wl(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(y.nextEl||y.prevEl))return;let b=s(y.nextEl),S=s(y.prevEl);Object.assign(e.navigation,{nextEl:b,prevEl:S}),b=Le(b),S=Le(S);let k=(A,x)=>{A&&A.addEventListener("click",x==="next"?c:l),!e.enabled&&A&&A.classList.add(...y.lockClass.split(" "))};b.forEach(A=>k(A,"next")),S.forEach(A=>k(A,"prev"))}function h(){let{nextEl:y,prevEl:b}=e.navigation;y=Le(y),b=Le(b);let S=(k,A)=>{k.removeEventListener("click",A==="next"?c:l),k.classList.remove(...e.params.navigation.disabledClass.split(" "))};y.forEach(k=>S(k,"next")),b.forEach(k=>S(k,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?m():(d(),a())}),i("toEdge fromEdge lock unlock",()=>{a()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:y,prevEl:b}=e.navigation;if(y=Le(y),b=Le(b),e.enabled){a();return}[...y,...b].filter(S=>!!S).forEach(S=>S.classList.add(e.params.navigation.lockClass))}),i("click",(y,b)=>{let{nextEl:S,prevEl:k}=e.navigation;S=Le(S),k=Le(k);let A=b.target,x=k.includes(A)||S.includes(A);if(e.isElement&&!x){let F=b.path||b.composedPath&&b.composedPath();F&&(x=F.find(V=>S.includes(V)||k.includes(V)))}if(e.params.navigation.hideOnClick&&!x){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===A||e.pagination.el.contains(A)))return;let F;S.length?F=S[0].classList.contains(e.params.navigation.hiddenClass):k.length&&(F=k[0].classList.contains(e.params.navigation.hiddenClass)),r(F===!0?"navigationShow":"navigationHide"),[...S,...k].filter(V=>!!V).forEach(V=>V.classList.toggle(e.params.navigation.hiddenClass))}});let p=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),a()},m=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:p,disable:m,update:a,init:d,destroy:h})}function vi(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function iR(n){let{swiper:e,extendParams:t,on:i,emit:r}=n,s="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:A=>A,formatFractionTotal:A=>A,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(A,x){let{bulletActiveClass:F}=e.params.pagination;A&&(A=A[`${x==="prev"?"previous":"next"}ElementSibling`],A&&(A.classList.add(`${F}-${x}`),A=A[`${x==="prev"?"previous":"next"}ElementSibling`],A&&A.classList.add(`${F}-${x}-${x}`)))}function d(A,x,F){if(A=A%F,x=x%F,x===A+1)return"next";if(x===A-1)return"previous"}function h(A){let x=A.target.closest(vi(e.params.pagination.bulletClass));if(!x)return;A.preventDefault();let F=ws(x)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===F)return;let V=d(e.realIndex,F,e.slides.length);V==="next"?e.slideNext():V==="previous"?e.slidePrev():e.slideToLoop(F)}else e.slideTo(F)}function p(){let A=e.rtl,x=e.params.pagination;if(l())return;let F=e.pagination.el;F=Le(F);let V,z,M=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,C=e.params.loop?Math.ceil(M/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(z=e.previousRealIndex||0,V=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(V=e.snapIndex,z=e.previousSnapIndex):(z=e.previousIndex||0,V=e.activeIndex||0),x.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){let E=e.pagination.bullets,D,N,O;if(x.dynamicBullets&&(o=Zu(E[0],e.isHorizontal()?"width":"height",!0),F.forEach(T=>{T.style[e.isHorizontal()?"width":"height"]=`${o*(x.dynamicMainBullets+4)}px`}),x.dynamicMainBullets>1&&z!==void 0&&(a+=V-(z||0),a>x.dynamicMainBullets-1?a=x.dynamicMainBullets-1:a<0&&(a=0)),D=Math.max(V-a,0),N=D+(Math.min(E.length,x.dynamicMainBullets)-1),O=(N+D)/2),E.forEach(T=>{let H=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(X=>`${x.bulletActiveClass}${X}`)].map(X=>typeof X=="string"&&X.includes(" ")?X.split(" "):X).flat();T.classList.remove(...H)}),F.length>1)E.forEach(T=>{let H=ws(T);H===V?T.classList.add(...x.bulletActiveClass.split(" ")):e.isElement&&T.setAttribute("part","bullet"),x.dynamicBullets&&(H>=D&&H<=N&&T.classList.add(...`${x.bulletActiveClass}-main`.split(" ")),H===D&&c(T,"prev"),H===N&&c(T,"next"))});else{let T=E[V];if(T&&T.classList.add(...x.bulletActiveClass.split(" ")),e.isElement&&E.forEach((H,X)=>{H.setAttribute("part",X===V?"bullet-active":"bullet")}),x.dynamicBullets){let H=E[D],X=E[N];for(let me=D;me<=N;me+=1)E[me]&&E[me].classList.add(...`${x.bulletActiveClass}-main`.split(" "));c(H,"prev"),c(X,"next")}}if(x.dynamicBullets){let T=Math.min(E.length,x.dynamicMainBullets+4),H=(o*T-o)/2-O*o,X=A?"right":"left";E.forEach(me=>{me.style[e.isHorizontal()?X:"top"]=`${H}px`})}}F.forEach((E,D)=>{if(x.type==="fraction"&&(E.querySelectorAll(vi(x.currentClass)).forEach(N=>{N.textContent=x.formatFractionCurrent(V+1)}),E.querySelectorAll(vi(x.totalClass)).forEach(N=>{N.textContent=x.formatFractionTotal(C)})),x.type==="progressbar"){let N;x.progressbarOpposite?N=e.isHorizontal()?"vertical":"horizontal":N=e.isHorizontal()?"horizontal":"vertical";let O=(V+1)/C,T=1,H=1;N==="horizontal"?T=O:H=O,E.querySelectorAll(vi(x.progressbarFillClass)).forEach(X=>{X.style.transform=`translate3d(0,0,0) scaleX(${T}) scaleY(${H})`,X.style.transitionDuration=`${e.params.speed}ms`})}x.type==="custom"&&x.renderCustom?(E.innerHTML=x.renderCustom(e,V+1,C),D===0&&r("paginationRender",E)):(D===0&&r("paginationRender",E),r("paginationUpdate",E)),e.params.watchOverflow&&e.enabled&&E.classList[e.isLocked?"add":"remove"](x.lockClass)})}function m(){let A=e.params.pagination;if(l())return;let x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length,F=e.pagination.el;F=Le(F);let V="";if(A.type==="bullets"){let z=e.params.loop?Math.ceil(x/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&z>x&&(z=x);for(let M=0;M<z;M+=1)A.renderBullet?V+=A.renderBullet.call(e,M,A.bulletClass):V+=`<${A.bulletElement} ${e.isElement?'part="bullet"':""} class="${A.bulletClass}"></${A.bulletElement}>`}A.type==="fraction"&&(A.renderFraction?V=A.renderFraction.call(e,A.currentClass,A.totalClass):V=`<span class="${A.currentClass}"></span> / <span class="${A.totalClass}"></span>`),A.type==="progressbar"&&(A.renderProgressbar?V=A.renderProgressbar.call(e,A.progressbarFillClass):V=`<span class="${A.progressbarFillClass}"></span>`),e.pagination.bullets=[],F.forEach(z=>{A.type!=="custom"&&(z.innerHTML=V||""),A.type==="bullets"&&e.pagination.bullets.push(...z.querySelectorAll(vi(A.bulletClass)))}),A.type!=="custom"&&r("paginationRender",F[0])}function y(){e.params.pagination=wl(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});let A=e.params.pagination;if(!A.el)return;let x;typeof A.el=="string"&&e.isElement&&(x=e.el.querySelector(A.el)),!x&&typeof A.el=="string"&&(x=[...document.querySelectorAll(A.el)]),x||(x=A.el),!(!x||x.length===0)&&(e.params.uniqueNavElements&&typeof A.el=="string"&&Array.isArray(x)&&x.length>1&&(x=[...e.el.querySelectorAll(A.el)],x.length>1&&(x=x.filter(F=>Oi(F,".swiper")[0]===e.el)[0])),Array.isArray(x)&&x.length===1&&(x=x[0]),Object.assign(e.pagination,{el:x}),x=Le(x),x.forEach(F=>{A.type==="bullets"&&A.clickable&&F.classList.add(...(A.clickableClass||"").split(" ")),F.classList.add(A.modifierClass+A.type),F.classList.add(e.isHorizontal()?A.horizontalClass:A.verticalClass),A.type==="bullets"&&A.dynamicBullets&&(F.classList.add(`${A.modifierClass}${A.type}-dynamic`),a=0,A.dynamicMainBullets<1&&(A.dynamicMainBullets=1)),A.type==="progressbar"&&A.progressbarOpposite&&F.classList.add(A.progressbarOppositeClass),A.clickable&&F.addEventListener("click",h),e.enabled||F.classList.add(A.lockClass)}))}function b(){let A=e.params.pagination;if(l())return;let x=e.pagination.el;x&&(x=Le(x),x.forEach(F=>{F.classList.remove(A.hiddenClass),F.classList.remove(A.modifierClass+A.type),F.classList.remove(e.isHorizontal()?A.horizontalClass:A.verticalClass),A.clickable&&(F.classList.remove(...(A.clickableClass||"").split(" ")),F.removeEventListener("click",h))})),e.pagination.bullets&&e.pagination.bullets.forEach(F=>F.classList.remove(...A.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;let A=e.params.pagination,{el:x}=e.pagination;x=Le(x),x.forEach(F=>{F.classList.remove(A.horizontalClass,A.verticalClass),F.classList.add(e.isHorizontal()?A.horizontalClass:A.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?k():(y(),m(),p())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&p()}),i("snapIndexChange",()=>{p()}),i("snapGridLengthChange",()=>{m(),p()}),i("destroy",()=>{b()}),i("enable disable",()=>{let{el:A}=e.pagination;A&&(A=Le(A),A.forEach(x=>x.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{p()}),i("click",(A,x)=>{let F=x.target,V=Le(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&V&&V.length>0&&!F.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&F===e.navigation.nextEl||e.navigation.prevEl&&F===e.navigation.prevEl))return;let z=V[0].classList.contains(e.params.pagination.hiddenClass);r(z===!0?"paginationShow":"paginationHide"),V.forEach(M=>M.classList.toggle(e.params.pagination.hiddenClass))}});let S=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:A}=e.pagination;A&&(A=Le(A),A.forEach(x=>x.classList.remove(e.params.pagination.paginationDisabledClass))),y(),m(),p()},k=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:A}=e.pagination;A&&(A=Le(A),A.forEach(x=>x.classList.add(e.params.pagination.paginationDisabledClass))),b()};Object.assign(e.pagination,{enable:S,disable:k,render:m,update:p,init:y,destroy:b})}function rR(n){let{swiper:e,extendParams:t,on:i,emit:r}=n,s=mt(),o=!1,a=null,l=null,c,d,h,p;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function m(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:O,rtlTranslate:T}=e,{dragEl:H,el:X}=O,me=e.params.scrollbar,Q=e.params.loop?e.progressLoop:e.progress,Y=d,de=(h-d)*Q;T?(de=-de,de>0?(Y=d-de,de=0):-de+d>h&&(Y=h+de)):de<0?(Y=d+de,de=0):de+d>h&&(Y=h-de),e.isHorizontal()?(H.style.transform=`translate3d(${de}px, 0, 0)`,H.style.width=`${Y}px`):(H.style.transform=`translate3d(0px, ${de}px, 0)`,H.style.height=`${Y}px`),me.hide&&(clearTimeout(a),X.style.opacity=1,a=setTimeout(()=>{X.style.opacity=0,X.style.transitionDuration="400ms"},1e3))}function y(O){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${O}ms`)}function b(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:O}=e,{dragEl:T,el:H}=O;T.style.width="",T.style.height="",h=e.isHorizontal()?H.offsetWidth:H.offsetHeight,p=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?d=h*p:d=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?T.style.width=`${d}px`:T.style.height=`${d}px`,p>=1?H.style.display="none":H.style.display="",e.params.scrollbar.hide&&(H.style.opacity=0),e.params.watchOverflow&&e.enabled&&O.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function S(O){return e.isHorizontal()?O.clientX:O.clientY}function k(O){let{scrollbar:T,rtlTranslate:H}=e,{el:X}=T,me;me=(S(O)-To(X)[e.isHorizontal()?"left":"top"]-(c!==null?c:d/2))/(h-d),me=Math.max(Math.min(me,1),0),H&&(me=1-me);let Q=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*me;e.updateProgress(Q),e.setTranslate(Q),e.updateActiveIndex(),e.updateSlidesClasses()}function A(O){let T=e.params.scrollbar,{scrollbar:H,wrapperEl:X}=e,{el:me,dragEl:Q}=H;o=!0,c=O.target===Q?S(O)-O.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,O.preventDefault(),O.stopPropagation(),X.style.transitionDuration="100ms",Q.style.transitionDuration="100ms",k(O),clearTimeout(l),me.style.transitionDuration="0ms",T.hide&&(me.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",O)}function x(O){let{scrollbar:T,wrapperEl:H}=e,{el:X,dragEl:me}=T;o&&(O.preventDefault&&O.cancelable?O.preventDefault():O.returnValue=!1,k(O),H.style.transitionDuration="0ms",X.style.transitionDuration="0ms",me.style.transitionDuration="0ms",r("scrollbarDragMove",O))}function F(O){let T=e.params.scrollbar,{scrollbar:H,wrapperEl:X}=e,{el:me}=H;o&&(o=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",X.style.transitionDuration=""),T.hide&&(clearTimeout(l),l=Ni(()=>{me.style.opacity=0,me.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",O),T.snapOnRelease&&e.slideToClosest())}function V(O){let{scrollbar:T,params:H}=e,X=T.el;if(!X)return;let me=X,Q=H.passiveListeners?{passive:!1,capture:!1}:!1,Y=H.passiveListeners?{passive:!0,capture:!1}:!1;if(!me)return;let de=O==="on"?"addEventListener":"removeEventListener";me[de]("pointerdown",A,Q),s[de]("pointermove",x,Q),s[de]("pointerup",F,Y)}function z(){!e.params.scrollbar.el||!e.scrollbar.el||V("on")}function M(){!e.params.scrollbar.el||!e.scrollbar.el||V("off")}function C(){let{scrollbar:O,el:T}=e;e.params.scrollbar=wl(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});let H=e.params.scrollbar;if(!H.el)return;let X;if(typeof H.el=="string"&&e.isElement&&(X=e.el.querySelector(H.el)),!X&&typeof H.el=="string"){if(X=s.querySelectorAll(H.el),!X.length)return}else X||(X=H.el);e.params.uniqueNavElements&&typeof H.el=="string"&&X.length>1&&T.querySelectorAll(H.el).length===1&&(X=T.querySelector(H.el)),X.length>0&&(X=X[0]),X.classList.add(e.isHorizontal()?H.horizontalClass:H.verticalClass);let me;X&&(me=X.querySelector(vi(e.params.scrollbar.dragClass)),me||(me=Kt("div",e.params.scrollbar.dragClass),X.append(me))),Object.assign(O,{el:X,dragEl:me}),H.draggable&&z(),X&&X.classList[e.enabled?"remove":"add"](...Er(e.params.scrollbar.lockClass))}function E(){let O=e.params.scrollbar,T=e.scrollbar.el;T&&T.classList.remove(...Er(e.isHorizontal()?O.horizontalClass:O.verticalClass)),M()}i("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;let O=e.params.scrollbar,{el:T}=e.scrollbar;T=Le(T),T.forEach(H=>{H.classList.remove(O.horizontalClass,O.verticalClass),H.classList.add(e.isHorizontal()?O.horizontalClass:O.verticalClass)})}),i("init",()=>{e.params.scrollbar.enabled===!1?N():(C(),b(),m())}),i("update resize observerUpdate lock unlock changeDirection",()=>{b()}),i("setTranslate",()=>{m()}),i("setTransition",(O,T)=>{y(T)}),i("enable disable",()=>{let{el:O}=e.scrollbar;O&&O.classList[e.enabled?"remove":"add"](...Er(e.params.scrollbar.lockClass))}),i("destroy",()=>{E()});let D=()=>{e.el.classList.remove(...Er(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...Er(e.params.scrollbar.scrollbarDisabledClass)),C(),b(),m()},N=()=>{e.el.classList.add(...Er(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...Er(e.params.scrollbar.scrollbarDisabledClass)),E()};Object.assign(e.scrollbar,{enable:D,disable:N,updateSize:b,setTranslate:m,init:C,destroy:E})}function sR(n){let{swiper:e,extendParams:t,on:i}=n;t({parallax:{enabled:!1}});let r="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",s=(l,c)=>{let{rtl:d}=e,h=d?-1:1,p=l.getAttribute("data-swiper-parallax")||"0",m=l.getAttribute("data-swiper-parallax-x"),y=l.getAttribute("data-swiper-parallax-y"),b=l.getAttribute("data-swiper-parallax-scale"),S=l.getAttribute("data-swiper-parallax-opacity"),k=l.getAttribute("data-swiper-parallax-rotate");if(m||y?(m=m||"0",y=y||"0"):e.isHorizontal()?(m=p,y="0"):(y=p,m="0"),m.indexOf("%")>=0?m=`${parseInt(m,10)*c*h}%`:m=`${m*c*h}px`,y.indexOf("%")>=0?y=`${parseInt(y,10)*c}%`:y=`${y*c}px`,typeof S<"u"&&S!==null){let x=S-(S-1)*(1-Math.abs(c));l.style.opacity=x}let A=`translate3d(${m}, ${y}, 0px)`;if(typeof b<"u"&&b!==null){let x=b-(b-1)*(1-Math.abs(c));A+=` scale(${x})`}if(k&&typeof k<"u"&&k!==null){let x=k*c*-1;A+=` rotate(${x}deg)`}l.style.transform=A},o=()=>{let{el:l,slides:c,progress:d,snapGrid:h,isElement:p}=e,m=St(l,r);e.isElement&&m.push(...St(e.hostEl,r)),m.forEach(y=>{s(y,d)}),c.forEach((y,b)=>{let S=y.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(S+=Math.ceil(b/2)-d*(h.length-1)),S=Math.min(Math.max(S,-1),1),y.querySelectorAll(`${r}, [data-swiper-parallax-rotate]`).forEach(k=>{s(k,S)})})},a=function(l){l===void 0&&(l=e.params.speed);let{el:c,hostEl:d}=e,h=[...c.querySelectorAll(r)];e.isElement&&h.push(...d.querySelectorAll(r)),h.forEach(p=>{let m=parseInt(p.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(m=0),p.style.transitionDuration=`${m}ms`})};i("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),i("init",()=>{e.params.parallax.enabled&&o()}),i("setTranslate",()=>{e.params.parallax.enabled&&o()}),i("setTransition",(l,c)=>{e.params.parallax.enabled&&a(c)})}function oR(n){let{swiper:e,extendParams:t,on:i,emit:r}=n,s=st();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let o=1,a=!1,l,c,d=[],h={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},p={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},m={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},y=1;Object.defineProperty(e.zoom,"scale",{get(){return y},set(ne){if(y!==ne){let se=h.imageEl,oe=h.slideEl;r("zoomChange",ne,se,oe)}y=ne}});function b(){if(d.length<2)return 1;let ne=d[0].pageX,se=d[0].pageY,oe=d[1].pageX,ot=d[1].pageY;return Math.sqrt((oe-ne)**2+(ot-se)**2)}function S(){let ne=e.params.zoom,se=h.imageWrapEl.getAttribute("data-swiper-zoom")||ne.maxRatio;if(ne.limitToOriginalSize&&h.imageEl&&h.imageEl.naturalWidth){let oe=h.imageEl.naturalWidth/h.imageEl.offsetWidth;return Math.min(oe,se)}return se}function k(){if(d.length<2)return{x:null,y:null};let ne=h.imageEl.getBoundingClientRect();return[(d[0].pageX+(d[1].pageX-d[0].pageX)/2-ne.x-s.scrollX)/o,(d[0].pageY+(d[1].pageY-d[0].pageY)/2-ne.y-s.scrollY)/o]}function A(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function x(ne){let se=A();return!!(ne.target.matches(se)||e.slides.filter(oe=>oe.contains(ne.target)).length>0)}function F(ne){let se=`.${e.params.zoom.containerClass}`;return!!(ne.target.matches(se)||[...e.hostEl.querySelectorAll(se)].filter(oe=>oe.contains(ne.target)).length>0)}function V(ne){if(ne.pointerType==="mouse"&&d.splice(0,d.length),!x(ne))return;let se=e.params.zoom;if(l=!1,c=!1,d.push(ne),!(d.length<2)){if(l=!0,h.scaleStart=b(),!h.slideEl){h.slideEl=ne.target.closest(`.${e.params.slideClass}, swiper-slide`),h.slideEl||(h.slideEl=e.slides[e.activeIndex]);let oe=h.slideEl.querySelector(`.${se.containerClass}`);if(oe&&(oe=oe.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),h.imageEl=oe,oe?h.imageWrapEl=Oi(h.imageEl,`.${se.containerClass}`)[0]:h.imageWrapEl=void 0,!h.imageWrapEl){h.imageEl=void 0;return}h.maxRatio=S()}if(h.imageEl){let[oe,ot]=k();h.originX=oe,h.originY=ot,h.imageEl.style.transitionDuration="0ms"}a=!0}}function z(ne){if(!x(ne))return;let se=e.params.zoom,oe=e.zoom,ot=d.findIndex(ye=>ye.pointerId===ne.pointerId);ot>=0&&(d[ot]=ne),!(d.length<2)&&(c=!0,h.scaleMove=b(),h.imageEl&&(oe.scale=h.scaleMove/h.scaleStart*o,oe.scale>h.maxRatio&&(oe.scale=h.maxRatio-1+(oe.scale-h.maxRatio+1)**.5),oe.scale<se.minRatio&&(oe.scale=se.minRatio+1-(se.minRatio-oe.scale+1)**.5),h.imageEl.style.transform=`translate3d(0,0,0) scale(${oe.scale})`))}function M(ne){if(!x(ne)||ne.pointerType==="mouse"&&ne.type==="pointerout")return;let se=e.params.zoom,oe=e.zoom,ot=d.findIndex(ye=>ye.pointerId===ne.pointerId);ot>=0&&d.splice(ot,1),!(!l||!c)&&(l=!1,c=!1,h.imageEl&&(oe.scale=Math.max(Math.min(oe.scale,h.maxRatio),se.minRatio),h.imageEl.style.transitionDuration=`${e.params.speed}ms`,h.imageEl.style.transform=`translate3d(0,0,0) scale(${oe.scale})`,o=oe.scale,a=!1,oe.scale>1&&h.slideEl?h.slideEl.classList.add(`${se.zoomedSlideClass}`):oe.scale<=1&&h.slideEl&&h.slideEl.classList.remove(`${se.zoomedSlideClass}`),oe.scale===1&&(h.originX=0,h.originY=0,h.slideEl=void 0)))}let C;function E(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function D(){clearTimeout(C),e.touchEventsData.preventTouchMoveFromPointerMove=!0,C=setTimeout(()=>{e.destroyed||E()})}function N(ne){let se=e.device;if(!h.imageEl||p.isTouched)return;se.android&&ne.cancelable&&ne.preventDefault(),p.isTouched=!0;let oe=d.length>0?d[0]:ne;p.touchesStart.x=oe.pageX,p.touchesStart.y=oe.pageY}function O(ne){if(!x(ne)||!F(ne))return;let se=e.zoom;if(!h.imageEl||!p.isTouched||!h.slideEl)return;p.isMoved||(p.width=h.imageEl.offsetWidth||h.imageEl.clientWidth,p.height=h.imageEl.offsetHeight||h.imageEl.clientHeight,p.startX=Xu(h.imageWrapEl,"x")||0,p.startY=Xu(h.imageWrapEl,"y")||0,h.slideWidth=h.slideEl.offsetWidth,h.slideHeight=h.slideEl.offsetHeight,h.imageWrapEl.style.transitionDuration="0ms");let oe=p.width*se.scale,ot=p.height*se.scale;if(p.minX=Math.min(h.slideWidth/2-oe/2,0),p.maxX=-p.minX,p.minY=Math.min(h.slideHeight/2-ot/2,0),p.maxY=-p.minY,p.touchesCurrent.x=d.length>0?d[0].pageX:ne.pageX,p.touchesCurrent.y=d.length>0?d[0].pageY:ne.pageY,Math.max(Math.abs(p.touchesCurrent.x-p.touchesStart.x),Math.abs(p.touchesCurrent.y-p.touchesStart.y))>5&&(e.allowClick=!1),!p.isMoved&&!a){if(e.isHorizontal()&&(Math.floor(p.minX)===Math.floor(p.startX)&&p.touchesCurrent.x<p.touchesStart.x||Math.floor(p.maxX)===Math.floor(p.startX)&&p.touchesCurrent.x>p.touchesStart.x)){p.isTouched=!1,E();return}if(!e.isHorizontal()&&(Math.floor(p.minY)===Math.floor(p.startY)&&p.touchesCurrent.y<p.touchesStart.y||Math.floor(p.maxY)===Math.floor(p.startY)&&p.touchesCurrent.y>p.touchesStart.y)){p.isTouched=!1,E();return}}ne.cancelable&&ne.preventDefault(),ne.stopPropagation(),D(),p.isMoved=!0;let Ye=(se.scale-o)/(h.maxRatio-e.params.zoom.minRatio),{originX:Dt,originY:Cr}=h;p.currentX=p.touchesCurrent.x-p.touchesStart.x+p.startX+Ye*(p.width-Dt*2),p.currentY=p.touchesCurrent.y-p.touchesStart.y+p.startY+Ye*(p.height-Cr*2),p.currentX<p.minX&&(p.currentX=p.minX+1-(p.minX-p.currentX+1)**.8),p.currentX>p.maxX&&(p.currentX=p.maxX-1+(p.currentX-p.maxX+1)**.8),p.currentY<p.minY&&(p.currentY=p.minY+1-(p.minY-p.currentY+1)**.8),p.currentY>p.maxY&&(p.currentY=p.maxY-1+(p.currentY-p.maxY+1)**.8),m.prevPositionX||(m.prevPositionX=p.touchesCurrent.x),m.prevPositionY||(m.prevPositionY=p.touchesCurrent.y),m.prevTime||(m.prevTime=Date.now()),m.x=(p.touchesCurrent.x-m.prevPositionX)/(Date.now()-m.prevTime)/2,m.y=(p.touchesCurrent.y-m.prevPositionY)/(Date.now()-m.prevTime)/2,Math.abs(p.touchesCurrent.x-m.prevPositionX)<2&&(m.x=0),Math.abs(p.touchesCurrent.y-m.prevPositionY)<2&&(m.y=0),m.prevPositionX=p.touchesCurrent.x,m.prevPositionY=p.touchesCurrent.y,m.prevTime=Date.now(),h.imageWrapEl.style.transform=`translate3d(${p.currentX}px, ${p.currentY}px,0)`}function T(){let ne=e.zoom;if(!h.imageEl)return;if(!p.isTouched||!p.isMoved){p.isTouched=!1,p.isMoved=!1;return}p.isTouched=!1,p.isMoved=!1;let se=300,oe=300,ot=m.x*se,ye=p.currentX+ot,Ye=m.y*oe,Dt=p.currentY+Ye;m.x!==0&&(se=Math.abs((ye-p.currentX)/m.x)),m.y!==0&&(oe=Math.abs((Dt-p.currentY)/m.y));let Cr=Math.max(se,oe);p.currentX=ye,p.currentY=Dt;let Po=p.width*ne.scale,Pn=p.height*ne.scale;p.minX=Math.min(h.slideWidth/2-Po/2,0),p.maxX=-p.minX,p.minY=Math.min(h.slideHeight/2-Pn/2,0),p.maxY=-p.minY,p.currentX=Math.max(Math.min(p.currentX,p.maxX),p.minX),p.currentY=Math.max(Math.min(p.currentY,p.maxY),p.minY),h.imageWrapEl.style.transitionDuration=`${Cr}ms`,h.imageWrapEl.style.transform=`translate3d(${p.currentX}px, ${p.currentY}px,0)`}function H(){let ne=e.zoom;h.slideEl&&e.activeIndex!==e.slides.indexOf(h.slideEl)&&(h.imageEl&&(h.imageEl.style.transform="translate3d(0,0,0) scale(1)"),h.imageWrapEl&&(h.imageWrapEl.style.transform="translate3d(0,0,0)"),h.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),ne.scale=1,o=1,h.slideEl=void 0,h.imageEl=void 0,h.imageWrapEl=void 0,h.originX=0,h.originY=0)}function X(ne){let se=e.zoom,oe=e.params.zoom;if(!h.slideEl){ne&&ne.target&&(h.slideEl=ne.target.closest(`.${e.params.slideClass}, swiper-slide`)),h.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?h.slideEl=St(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:h.slideEl=e.slides[e.activeIndex]);let sr=h.slideEl.querySelector(`.${oe.containerClass}`);sr&&(sr=sr.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),h.imageEl=sr,sr?h.imageWrapEl=Oi(h.imageEl,`.${oe.containerClass}`)[0]:h.imageWrapEl=void 0}if(!h.imageEl||!h.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),h.slideEl.classList.add(`${oe.zoomedSlideClass}`);let ot,ye,Ye,Dt,Cr,Po,Pn,Jn,Ro,ko,Do,Mo,Is,As,Tl,No,Oo,Ps;typeof p.touchesStart.x>"u"&&ne?(ot=ne.pageX,ye=ne.pageY):(ot=p.touchesStart.x,ye=p.touchesStart.y);let Ir=typeof ne=="number"?ne:null;o===1&&Ir&&(ot=void 0,ye=void 0,p.touchesStart.x=void 0,p.touchesStart.y=void 0);let ed=S();se.scale=Ir||ed,o=Ir||ed,ne&&!(o===1&&Ir)?(Oo=h.slideEl.offsetWidth,Ps=h.slideEl.offsetHeight,Ye=To(h.slideEl).left+s.scrollX,Dt=To(h.slideEl).top+s.scrollY,Cr=Ye+Oo/2-ot,Po=Dt+Ps/2-ye,Ro=h.imageEl.offsetWidth||h.imageEl.clientWidth,ko=h.imageEl.offsetHeight||h.imageEl.clientHeight,Do=Ro*se.scale,Mo=ko*se.scale,Is=Math.min(Oo/2-Do/2,0),As=Math.min(Ps/2-Mo/2,0),Tl=-Is,No=-As,Pn=Cr*se.scale,Jn=Po*se.scale,Pn<Is&&(Pn=Is),Pn>Tl&&(Pn=Tl),Jn<As&&(Jn=As),Jn>No&&(Jn=No)):(Pn=0,Jn=0),Ir&&se.scale===1&&(h.originX=0,h.originY=0),h.imageWrapEl.style.transitionDuration="300ms",h.imageWrapEl.style.transform=`translate3d(${Pn}px, ${Jn}px,0)`,h.imageEl.style.transitionDuration="300ms",h.imageEl.style.transform=`translate3d(0,0,0) scale(${se.scale})`}function me(){let ne=e.zoom,se=e.params.zoom;if(!h.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?h.slideEl=St(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:h.slideEl=e.slides[e.activeIndex];let oe=h.slideEl.querySelector(`.${se.containerClass}`);oe&&(oe=oe.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),h.imageEl=oe,oe?h.imageWrapEl=Oi(h.imageEl,`.${se.containerClass}`)[0]:h.imageWrapEl=void 0}!h.imageEl||!h.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),ne.scale=1,o=1,p.touchesStart.x=void 0,p.touchesStart.y=void 0,h.imageWrapEl.style.transitionDuration="300ms",h.imageWrapEl.style.transform="translate3d(0,0,0)",h.imageEl.style.transitionDuration="300ms",h.imageEl.style.transform="translate3d(0,0,0) scale(1)",h.slideEl.classList.remove(`${se.zoomedSlideClass}`),h.slideEl=void 0,h.originX=0,h.originY=0)}function Q(ne){let se=e.zoom;se.scale&&se.scale!==1?me():X(ne)}function Y(){let ne=e.params.passiveListeners?{passive:!0,capture:!1}:!1,se=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:ne,activeListenerWithCapture:se}}function de(){let ne=e.zoom;if(ne.enabled)return;ne.enabled=!0;let{passiveListener:se,activeListenerWithCapture:oe}=Y();e.wrapperEl.addEventListener("pointerdown",V,se),e.wrapperEl.addEventListener("pointermove",z,oe),["pointerup","pointercancel","pointerout"].forEach(ot=>{e.wrapperEl.addEventListener(ot,M,se)}),e.wrapperEl.addEventListener("pointermove",O,oe)}function Pe(){let ne=e.zoom;if(!ne.enabled)return;ne.enabled=!1;let{passiveListener:se,activeListenerWithCapture:oe}=Y();e.wrapperEl.removeEventListener("pointerdown",V,se),e.wrapperEl.removeEventListener("pointermove",z,oe),["pointerup","pointercancel","pointerout"].forEach(ot=>{e.wrapperEl.removeEventListener(ot,M,se)}),e.wrapperEl.removeEventListener("pointermove",O,oe)}i("init",()=>{e.params.zoom.enabled&&de()}),i("destroy",()=>{Pe()}),i("touchStart",(ne,se)=>{e.zoom.enabled&&N(se)}),i("touchEnd",(ne,se)=>{e.zoom.enabled&&T()}),i("doubleTap",(ne,se)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&Q(se)}),i("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&H()}),i("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&H()}),Object.assign(e.zoom,{enable:de,disable:Pe,in:X,out:me,toggle:Q})}function aR(n){let{swiper:e,extendParams:t,on:i}=n;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function r(c,d){let h=function(){let b,S,k;return(A,x)=>{for(S=-1,b=A.length;b-S>1;)k=b+S>>1,A[k]<=x?S=k:b=k;return b}}();this.x=c,this.y=d,this.lastIndex=c.length-1;let p,m;return this.interpolate=function(b){return b?(m=h(this.x,b),p=m-1,(b-this.x[p])*(this.y[m]-this.y[p])/(this.x[m]-this.x[p])+this.y[p]):0},this}function s(c){e.controller.spline=e.params.loop?new r(e.slidesGrid,c.slidesGrid):new r(e.snapGrid,c.snapGrid)}function o(c,d){let h=e.controller.control,p,m,y=e.constructor;function b(S){if(S.destroyed)return;let k=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(s(S),m=-e.controller.spline.interpolate(-k)),(!m||e.params.controller.by==="container")&&(p=(S.maxTranslate()-S.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(p)||!Number.isFinite(p))&&(p=1),m=(k-e.minTranslate())*p+S.minTranslate()),e.params.controller.inverse&&(m=S.maxTranslate()-m),S.updateProgress(m),S.setTranslate(m,e),S.updateActiveIndex(),S.updateSlidesClasses()}if(Array.isArray(h))for(let S=0;S<h.length;S+=1)h[S]!==d&&h[S]instanceof y&&b(h[S]);else h instanceof y&&d!==h&&b(h)}function a(c,d){let h=e.constructor,p=e.controller.control,m;function y(b){b.destroyed||(b.setTransition(c,e),c!==0&&(b.transitionStart(),b.params.autoHeight&&Ni(()=>{b.updateAutoHeight()}),ys(b.wrapperEl,()=>{p&&b.transitionEnd()})))}if(Array.isArray(p))for(m=0;m<p.length;m+=1)p[m]!==d&&p[m]instanceof h&&y(p[m]);else p instanceof h&&d!==p&&y(p)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}i("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(d=>{if(e.controller.control||(e.controller.control=[]),d&&d.swiper)e.controller.control.push(d.swiper);else if(d){let h=`${e.params.eventsPrefix}init`,p=m=>{e.controller.control.push(m.detail[0]),e.update(),d.removeEventListener(h,p)};d.addEventListener(h,p)}});return}e.controller.control=e.params.controller.control}),i("update",()=>{l()}),i("resize",()=>{l()}),i("observerUpdate",()=>{l()}),i("setTranslate",(c,d,h)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(d,h)}),i("setTransition",(c,d,h)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(d,h)}),Object.assign(e.controller,{setTranslate:o,setTransition:a})}function lR(n){let{swiper:e,extendParams:t,on:i}=n;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let r=null,s,o,a=new Date().getTime();function l(Q){let Y=r;Y.length!==0&&(Y.innerHTML="",Y.innerHTML=Q)}function c(Q){Q===void 0&&(Q=16);let Y=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(Q).replace(/x/g,Y)}function d(Q){Q=Le(Q),Q.forEach(Y=>{Y.setAttribute("tabIndex","0")})}function h(Q){Q=Le(Q),Q.forEach(Y=>{Y.setAttribute("tabIndex","-1")})}function p(Q,Y){Q=Le(Q),Q.forEach(de=>{de.setAttribute("role",Y)})}function m(Q,Y){Q=Le(Q),Q.forEach(de=>{de.setAttribute("aria-roledescription",Y)})}function y(Q,Y){Q=Le(Q),Q.forEach(de=>{de.setAttribute("aria-controls",Y)})}function b(Q,Y){Q=Le(Q),Q.forEach(de=>{de.setAttribute("aria-label",Y)})}function S(Q,Y){Q=Le(Q),Q.forEach(de=>{de.setAttribute("id",Y)})}function k(Q,Y){Q=Le(Q),Q.forEach(de=>{de.setAttribute("aria-live",Y)})}function A(Q){Q=Le(Q),Q.forEach(Y=>{Y.setAttribute("aria-disabled",!0)})}function x(Q){Q=Le(Q),Q.forEach(Y=>{Y.setAttribute("aria-disabled",!1)})}function F(Q){if(Q.keyCode!==13&&Q.keyCode!==32)return;let Y=e.params.a11y,de=Q.target;if(!(e.pagination&&e.pagination.el&&(de===e.pagination.el||e.pagination.el.contains(Q.target))&&!Q.target.matches(vi(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){let Pe=Le(e.navigation.prevEl);Le(e.navigation.nextEl).includes(de)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?l(Y.lastSlideMessage):l(Y.nextSlideMessage)),Pe.includes(de)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?l(Y.firstSlideMessage):l(Y.prevSlideMessage))}e.pagination&&de.matches(vi(e.params.pagination.bulletClass))&&de.click()}}function V(){if(e.params.loop||e.params.rewind||!e.navigation)return;let{nextEl:Q,prevEl:Y}=e.navigation;Y&&(e.isBeginning?(A(Y),h(Y)):(x(Y),d(Y))),Q&&(e.isEnd?(A(Q),h(Q)):(x(Q),d(Q)))}function z(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function M(){return z()&&e.params.pagination.clickable}function C(){let Q=e.params.a11y;z()&&e.pagination.bullets.forEach(Y=>{e.params.pagination.clickable&&(d(Y),e.params.pagination.renderBullet||(p(Y,"button"),b(Y,Q.paginationBulletMessage.replace(/\{\{index\}\}/,ws(Y)+1)))),Y.matches(vi(e.params.pagination.bulletActiveClass))?Y.setAttribute("aria-current","true"):Y.removeAttribute("aria-current")})}let E=(Q,Y,de)=>{d(Q),Q.tagName!=="BUTTON"&&(p(Q,"button"),Q.addEventListener("keydown",F)),b(Q,de),y(Q,Y)},D=Q=>{o&&o!==Q.target&&!o.contains(Q.target)&&(s=!0),e.a11y.clicked=!0},N=()=>{s=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},O=Q=>{a=new Date().getTime()},T=Q=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-a<100)return;let Y=Q.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!Y||!e.slides.includes(Y))return;o=Y;let de=e.slides.indexOf(Y)===e.activeIndex,Pe=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(Y);de||Pe||Q.sourceCapabilities&&Q.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{s||(e.params.loop?e.slideToLoop(parseInt(Y.getAttribute("data-swiper-slide-index")),0):e.slideTo(e.slides.indexOf(Y),0),s=!1)}))},H=()=>{let Q=e.params.a11y;Q.itemRoleDescriptionMessage&&m(e.slides,Q.itemRoleDescriptionMessage),Q.slideRole&&p(e.slides,Q.slideRole);let Y=e.slides.length;Q.slideLabelMessage&&e.slides.forEach((de,Pe)=>{let ne=e.params.loop?parseInt(de.getAttribute("data-swiper-slide-index"),10):Pe,se=Q.slideLabelMessage.replace(/\{\{index\}\}/,ne+1).replace(/\{\{slidesLength\}\}/,Y);b(de,se)})},X=()=>{let Q=e.params.a11y;e.el.append(r);let Y=e.el;Q.containerRoleDescriptionMessage&&m(Y,Q.containerRoleDescriptionMessage),Q.containerMessage&&b(Y,Q.containerMessage),Q.containerRole&&p(Y,Q.containerRole);let de=e.wrapperEl,Pe=Q.id||de.getAttribute("id")||`swiper-wrapper-${c(16)}`,ne=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";S(de,Pe),k(de,ne),H();let{nextEl:se,prevEl:oe}=e.navigation?e.navigation:{};se=Le(se),oe=Le(oe),se&&se.forEach(ye=>E(ye,Pe,Q.nextSlideMessage)),oe&&oe.forEach(ye=>E(ye,Pe,Q.prevSlideMessage)),M()&&Le(e.pagination.el).forEach(Ye=>{Ye.addEventListener("keydown",F)}),mt().addEventListener("visibilitychange",O),e.el.addEventListener("focus",T,!0),e.el.addEventListener("focus",T,!0),e.el.addEventListener("pointerdown",D,!0),e.el.addEventListener("pointerup",N,!0)};function me(){r&&r.remove();let{nextEl:Q,prevEl:Y}=e.navigation?e.navigation:{};Q=Le(Q),Y=Le(Y),Q&&Q.forEach(Pe=>Pe.removeEventListener("keydown",F)),Y&&Y.forEach(Pe=>Pe.removeEventListener("keydown",F)),M()&&Le(e.pagination.el).forEach(ne=>{ne.removeEventListener("keydown",F)}),mt().removeEventListener("visibilitychange",O),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",T,!0),e.el.removeEventListener("pointerdown",D,!0),e.el.removeEventListener("pointerup",N,!0))}i("beforeInit",()=>{r=Kt("span",e.params.a11y.notificationClass),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true")}),i("afterInit",()=>{e.params.a11y.enabled&&X()}),i("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&H()}),i("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&V()}),i("paginationUpdate",()=>{e.params.a11y.enabled&&C()}),i("destroy",()=>{e.params.a11y.enabled&&me()})}function cR(n){let{swiper:e,extendParams:t,on:i}=n;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let r=!1,s={},o=m=>m.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),a=m=>{let y=st(),b;m?b=new URL(m):b=y.location;let S=b.pathname.slice(1).split("/").filter(F=>F!==""),k=S.length,A=S[k-2],x=S[k-1];return{key:A,value:x}},l=(m,y)=>{let b=st();if(!r||!e.params.history.enabled)return;let S;e.params.url?S=new URL(e.params.url):S=b.location;let k=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${y}"]`):e.slides[y],A=o(k.getAttribute("data-history"));if(e.params.history.root.length>0){let F=e.params.history.root;F[F.length-1]==="/"&&(F=F.slice(0,F.length-1)),A=`${F}/${m?`${m}/`:""}${A}`}else S.pathname.includes(m)||(A=`${m?`${m}/`:""}${A}`);e.params.history.keepQuery&&(A+=S.search);let x=b.history.state;x&&x.value===A||(e.params.history.replaceState?b.history.replaceState({value:A},null,A):b.history.pushState({value:A},null,A))},c=(m,y,b)=>{if(y)for(let S=0,k=e.slides.length;S<k;S+=1){let A=e.slides[S];if(o(A.getAttribute("data-history"))===y){let F=e.getSlideIndex(A);e.slideTo(F,m,b)}}else e.slideTo(0,m,b)},d=()=>{s=a(e.params.url),c(e.params.speed,s.value,!1)},h=()=>{let m=st();if(e.params.history){if(!m.history||!m.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(r=!0,s=a(e.params.url),!s.key&&!s.value){e.params.history.replaceState||m.addEventListener("popstate",d);return}c(0,s.value,e.params.runCallbacksOnInit),e.params.history.replaceState||m.addEventListener("popstate",d)}},p=()=>{let m=st();e.params.history.replaceState||m.removeEventListener("popstate",d)};i("init",()=>{e.params.history.enabled&&h()}),i("destroy",()=>{e.params.history.enabled&&p()}),i("transitionEnd _freeModeNoMomentumRelease",()=>{r&&l(e.params.history.key,e.activeIndex)}),i("slideChange",()=>{r&&e.params.cssMode&&l(e.params.history.key,e.activeIndex)})}function uR(n){let{swiper:e,extendParams:t,emit:i,on:r}=n,s=!1,o=mt(),a=st();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(p,m){if(e.virtual&&e.params.virtual.enabled){let y=e.slides.filter(S=>S.getAttribute("data-hash")===m)[0];return y?parseInt(y.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(St(e.slidesEl,`.${e.params.slideClass}[data-hash="${m}"], swiper-slide[data-hash="${m}"]`)[0])}}});let l=()=>{i("hashChange");let p=o.location.hash.replace("#",""),m=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],y=m?m.getAttribute("data-hash"):"";if(p!==y){let b=e.params.hashNavigation.getSlideIndex(e,p);if(typeof b>"u"||Number.isNaN(b))return;e.slideTo(b)}},c=()=>{if(!s||!e.params.hashNavigation.enabled)return;let p=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],m=p?p.getAttribute("data-hash")||p.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&a.history&&a.history.replaceState?(a.history.replaceState(null,null,`#${m}`||""),i("hashSet")):(o.location.hash=m||"",i("hashSet"))},d=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;s=!0;let p=o.location.hash.replace("#","");if(p){let y=e.params.hashNavigation.getSlideIndex(e,p);e.slideTo(y||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&a.addEventListener("hashchange",l)},h=()=>{e.params.hashNavigation.watchState&&a.removeEventListener("hashchange",l)};r("init",()=>{e.params.hashNavigation.enabled&&d()}),r("destroy",()=>{e.params.hashNavigation.enabled&&h()}),r("transitionEnd _freeModeNoMomentumRelease",()=>{s&&c()}),r("slideChange",()=>{s&&e.params.cssMode&&c()})}function dR(n){let{swiper:e,extendParams:t,on:i,emit:r,params:s}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=s&&s.autoplay?s.autoplay.delay:3e3,c=s&&s.autoplay?s.autoplay.delay:3e3,d,h=new Date().getTime(),p,m,y,b,S,k,A;function x(Y){!e||e.destroyed||!e.wrapperEl||Y.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",x),!(A||Y.detail&&Y.detail.bySwiperTouchMove)&&D())}let F=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?p=!0:p&&(c=d,p=!1);let Y=e.autoplay.paused?d:h+c-new Date().getTime();e.autoplay.timeLeft=Y,r("autoplayTimeLeft",Y,Y/l),a=requestAnimationFrame(()=>{F()})},V=()=>{let Y;return e.virtual&&e.params.virtual.enabled?Y=e.slides.filter(Pe=>Pe.classList.contains("swiper-slide-active"))[0]:Y=e.slides[e.activeIndex],Y?parseInt(Y.getAttribute("data-swiper-autoplay"),10):void 0},z=Y=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),F();let de=typeof Y>"u"?e.params.autoplay.delay:Y;l=e.params.autoplay.delay,c=e.params.autoplay.delay;let Pe=V();!Number.isNaN(Pe)&&Pe>0&&typeof Y>"u"&&(de=Pe,l=Pe,c=Pe),d=de;let ne=e.params.speed,se=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(ne,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,ne,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(ne,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,ne,!0,!0),r("autoplay")),e.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{z()})))};return de>0?(clearTimeout(o),o=setTimeout(()=>{se()},de)):requestAnimationFrame(()=>{se()}),de},M=()=>{h=new Date().getTime(),e.autoplay.running=!0,z(),r("autoplayStart")},C=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),r("autoplayStop")},E=(Y,de)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),Y||(k=!0);let Pe=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",x):D()};if(e.autoplay.paused=!0,de){S&&(d=e.params.autoplay.delay),S=!1,Pe();return}d=(d||e.params.autoplay.delay)-(new Date().getTime()-h),!(e.isEnd&&d<0&&!e.params.loop)&&(d<0&&(d=0),Pe())},D=()=>{e.isEnd&&d<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(h=new Date().getTime(),k?(k=!1,z(d)):z(),e.autoplay.paused=!1,r("autoplayResume"))},N=()=>{if(e.destroyed||!e.autoplay.running)return;let Y=mt();Y.visibilityState==="hidden"&&(k=!0,E(!0)),Y.visibilityState==="visible"&&D()},O=Y=>{Y.pointerType==="mouse"&&(k=!0,A=!0,!(e.animating||e.autoplay.paused)&&E(!0))},T=Y=>{Y.pointerType==="mouse"&&(A=!1,e.autoplay.paused&&D())},H=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",O),e.el.addEventListener("pointerleave",T))},X=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",O),e.el.removeEventListener("pointerleave",T))},me=()=>{mt().addEventListener("visibilitychange",N)},Q=()=>{mt().removeEventListener("visibilitychange",N)};i("init",()=>{e.params.autoplay.enabled&&(H(),me(),M())}),i("destroy",()=>{X(),Q(),e.autoplay.running&&C()}),i("_freeModeStaticRelease",()=>{(y||k)&&D()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?C():E(!0,!0)}),i("beforeTransitionStart",(Y,de,Pe)=>{e.destroyed||!e.autoplay.running||(Pe||!e.params.autoplay.disableOnInteraction?E(!0,!0):C())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){C();return}m=!0,y=!1,k=!1,b=setTimeout(()=>{k=!0,y=!0,E(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!m)){if(clearTimeout(b),clearTimeout(o),e.params.autoplay.disableOnInteraction){y=!1,m=!1;return}y&&e.params.cssMode&&D(),y=!1,m=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(S=!0)}),Object.assign(e.autoplay,{start:M,stop:C,pause:E,resume:D})}function hR(n){let{swiper:e,extendParams:t,on:i}=n;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,s=!1;e.thumbs={swiper:null};function o(){let c=e.thumbs.swiper;if(!c||c.destroyed)return;let d=c.clickedIndex,h=c.clickedSlide;if(h&&h.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof d>"u"||d===null)return;let p;c.params.loop?p=parseInt(c.clickedSlide.getAttribute("data-swiper-slide-index"),10):p=d,e.params.loop?e.slideToLoop(p):e.slideTo(p)}function a(){let{thumbs:c}=e.params;if(r)return!1;r=!0;let d=e.constructor;if(c.swiper instanceof d)e.thumbs.swiper=c.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(vl(c.swiper)){let h=Object.assign({},c.swiper);Object.assign(h,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new d(h),s=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",o),!0}function l(c){let d=e.thumbs.swiper;if(!d||d.destroyed)return;let h=d.params.slidesPerView==="auto"?d.slidesPerViewDynamic():d.params.slidesPerView,p=1,m=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(p=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(p=1),p=Math.floor(p),d.slides.forEach(S=>S.classList.remove(m)),d.params.loop||d.params.virtual&&d.params.virtual.enabled)for(let S=0;S<p;S+=1)St(d.slidesEl,`[data-swiper-slide-index="${e.realIndex+S}"]`).forEach(k=>{k.classList.add(m)});else for(let S=0;S<p;S+=1)d.slides[e.realIndex+S]&&d.slides[e.realIndex+S].classList.add(m);let y=e.params.thumbs.autoScrollOffset,b=y&&!d.params.loop;if(e.realIndex!==d.realIndex||b){let S=d.activeIndex,k,A;if(d.params.loop){let x=d.slides.filter(F=>F.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];k=d.slides.indexOf(x),A=e.activeIndex>e.previousIndex?"next":"prev"}else k=e.realIndex,A=k>e.previousIndex?"next":"prev";b&&(k+=A==="next"?y:-1*y),d.visibleSlidesIndexes&&d.visibleSlidesIndexes.indexOf(k)<0&&(d.params.centeredSlides?k>S?k=k-Math.floor(h/2)+1:k=k+Math.floor(h/2)-1:k>S&&d.params.slidesPerGroup,d.slideTo(k,c?0:void 0))}}i("beforeInit",()=>{let{thumbs:c}=e.params;if(!(!c||!c.swiper))if(typeof c.swiper=="string"||c.swiper instanceof HTMLElement){let d=mt(),h=()=>{let m=typeof c.swiper=="string"?d.querySelector(c.swiper):c.swiper;if(m&&m.swiper)c.swiper=m.swiper,a(),l(!0);else if(m){let y=`${e.params.eventsPrefix}init`,b=S=>{c.swiper=S.detail[0],m.removeEventListener(y,b),a(),l(!0),c.swiper.update(),e.update()};m.addEventListener(y,b)}return m},p=()=>{if(e.destroyed)return;h()||requestAnimationFrame(p)};requestAnimationFrame(p)}else a(),l(!0)}),i("slideChange update resize observerUpdate",()=>{l()}),i("setTransition",(c,d)=>{let h=e.thumbs.swiper;!h||h.destroyed||h.setTransition(d)}),i("beforeDestroy",()=>{let c=e.thumbs.swiper;!c||c.destroyed||s&&c.destroy()}),Object.assign(e.thumbs,{init:a,update:l})}function pR(n){let{swiper:e,extendParams:t,emit:i,once:r}=n;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function s(){if(e.params.cssMode)return;let l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function o(){if(e.params.cssMode)return;let{touchEventsData:l,touches:c}=e;l.velocities.length===0&&l.velocities.push({position:c[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[e.isHorizontal()?"currentX":"currentY"],time:An()})}function a(l){let{currentPos:c}=l;if(e.params.cssMode)return;let{params:d,wrapperEl:h,rtlTranslate:p,snapGrid:m,touchEventsData:y}=e,S=An()-y.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<m.length?e.slideTo(m.length-1):e.slideTo(e.slides.length-1);return}if(d.freeMode.momentum){if(y.velocities.length>1){let C=y.velocities.pop(),E=y.velocities.pop(),D=C.position-E.position,N=C.time-E.time;e.velocity=D/N,e.velocity/=2,Math.abs(e.velocity)<d.freeMode.minimumVelocity&&(e.velocity=0),(N>150||An()-C.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=d.freeMode.momentumVelocityRatio,y.velocities.length=0;let k=1e3*d.freeMode.momentumRatio,A=e.velocity*k,x=e.translate+A;p&&(x=-x);let F=!1,V,z=Math.abs(e.velocity)*20*d.freeMode.momentumBounceRatio,M;if(x<e.maxTranslate())d.freeMode.momentumBounce?(x+e.maxTranslate()<-z&&(x=e.maxTranslate()-z),V=e.maxTranslate(),F=!0,y.allowMomentumBounce=!0):x=e.maxTranslate(),d.loop&&d.centeredSlides&&(M=!0);else if(x>e.minTranslate())d.freeMode.momentumBounce?(x-e.minTranslate()>z&&(x=e.minTranslate()+z),V=e.minTranslate(),F=!0,y.allowMomentumBounce=!0):x=e.minTranslate(),d.loop&&d.centeredSlides&&(M=!0);else if(d.freeMode.sticky){let C;for(let E=0;E<m.length;E+=1)if(m[E]>-x){C=E;break}Math.abs(m[C]-x)<Math.abs(m[C-1]-x)||e.swipeDirection==="next"?x=m[C]:x=m[C-1],x=-x}if(M&&r("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(p?k=Math.abs((-x-e.translate)/e.velocity):k=Math.abs((x-e.translate)/e.velocity),d.freeMode.sticky){let C=Math.abs((p?-x:x)-e.translate),E=e.slidesSizesGrid[e.activeIndex];C<E?k=d.speed:C<2*E?k=d.speed*1.5:k=d.speed*2.5}}else if(d.freeMode.sticky){e.slideToClosest();return}d.freeMode.momentumBounce&&F?(e.updateProgress(V),e.setTransition(k),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating=!0,ys(h,()=>{!e||e.destroyed||!y.allowMomentumBounce||(i("momentumBounce"),e.setTransition(d.speed),setTimeout(()=>{e.setTranslate(V),ys(h,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(i("_freeModeNoMomentumRelease"),e.updateProgress(x),e.setTransition(k),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,ys(h,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(x),e.updateActiveIndex(),e.updateSlidesClasses()}else if(d.freeMode.sticky){e.slideToClosest();return}else d.freeMode&&i("_freeModeNoMomentumRelease");(!d.freeMode.momentum||S>=d.longSwipesMs)&&(i("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:s,onTouchMove:o,onTouchEnd:a}})}function fR(n){let{swiper:e,extendParams:t,on:i}=n;t({grid:{rows:1,fill:"column"}});let r,s,o,a,l=()=>{let b=e.params.spaceBetween;return typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*e.size:typeof b=="string"&&(b=parseFloat(b)),b},c=b=>{let{slidesPerView:S}=e.params,{rows:k,fill:A}=e.params.grid,x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:b.length;o=Math.floor(x/k),Math.floor(x/k)===x/k?r=x:r=Math.ceil(x/k)*k,S!=="auto"&&A==="row"&&(r=Math.max(r,S*k)),s=r/k},d=()=>{e.slides&&e.slides.forEach(b=>{b.swiperSlideGridSet&&(b.style.height="",b.style[e.getDirectionLabel("margin-top")]="")})},h=(b,S,k)=>{let{slidesPerGroup:A}=e.params,x=l(),{rows:F,fill:V}=e.params.grid,z=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:k.length,M,C,E;if(V==="row"&&A>1){let D=Math.floor(b/(A*F)),N=b-F*A*D,O=D===0?A:Math.min(Math.ceil((z-D*F*A)/F),A);E=Math.floor(N/O),C=N-E*O+D*A,M=C+E*r/F,S.style.order=M}else V==="column"?(C=Math.floor(b/F),E=b-C*F,(C>o||C===o&&E===F-1)&&(E+=1,E>=F&&(E=0,C+=1))):(E=Math.floor(b/s),C=b-E*s);S.row=E,S.column=C,S.style.height=`calc((100% - ${(F-1)*x}px) / ${F})`,S.style[e.getDirectionLabel("margin-top")]=E!==0?x&&`${x}px`:"",S.swiperSlideGridSet=!0},p=(b,S)=>{let{centeredSlides:k,roundLengths:A}=e.params,x=l(),{rows:F}=e.params.grid;if(e.virtualSize=(b+x)*r,e.virtualSize=Math.ceil(e.virtualSize/F)-x,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+x}px`),k){let V=[];for(let z=0;z<S.length;z+=1){let M=S[z];A&&(M=Math.floor(M)),S[z]<e.virtualSize+S[0]&&V.push(M)}S.splice(0,S.length),S.push(...V)}},m=()=>{a=e.params.grid&&e.params.grid.rows>1},y=()=>{let{params:b,el:S}=e,k=b.grid&&b.grid.rows>1;a&&!k?(S.classList.remove(`${b.containerModifierClass}grid`,`${b.containerModifierClass}grid-column`),o=1,e.emitContainerClasses()):!a&&k&&(S.classList.add(`${b.containerModifierClass}grid`),b.grid.fill==="column"&&S.classList.add(`${b.containerModifierClass}grid-column`),e.emitContainerClasses()),a=k};i("init",m),i("update",y),e.grid={initSlides:c,unsetSlides:d,updateSlide:h,updateWrapperSize:p}}function PV(n){let e=this,{params:t,slidesEl:i}=e;t.loop&&e.loopDestroy();let r=s=>{if(typeof s=="string"){let o=document.createElement("div");o.innerHTML=s,i.append(o.children[0]),o.innerHTML=""}else i.append(s)};if(typeof n=="object"&&"length"in n)for(let s=0;s<n.length;s+=1)n[s]&&r(n[s]);else r(n);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function RV(n){let e=this,{params:t,activeIndex:i,slidesEl:r}=e;t.loop&&e.loopDestroy();let s=i+1,o=a=>{if(typeof a=="string"){let l=document.createElement("div");l.innerHTML=a,r.prepend(l.children[0]),l.innerHTML=""}else r.prepend(a)};if(typeof n=="object"&&"length"in n){for(let a=0;a<n.length;a+=1)n[a]&&o(n[a]);s=i+n.length}else o(n);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(s,0,!1)}function kV(n,e){let t=this,{params:i,activeIndex:r,slidesEl:s}=t,o=r;i.loop&&(o-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());let a=t.slides.length;if(n<=0){t.prependSlide(e);return}if(n>=a){t.appendSlide(e);return}let l=o>n?o+1:o,c=[];for(let d=a-1;d>=n;d-=1){let h=t.slides[d];h.remove(),c.unshift(h)}if(typeof e=="object"&&"length"in e){for(let d=0;d<e.length;d+=1)e[d]&&s.append(e[d]);l=o>n?o+e.length:o}else s.append(e);for(let d=0;d<c.length;d+=1)s.append(c[d]);t.recalcSlides(),i.loop&&t.loopCreate(),(!i.observer||t.isElement)&&t.update(),i.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function DV(n){let e=this,{params:t,activeIndex:i}=e,r=i;t.loop&&(r-=e.loopedSlides,e.loopDestroy());let s=r,o;if(typeof n=="object"&&"length"in n){for(let a=0;a<n.length;a+=1)o=n[a],e.slides[o]&&e.slides[o].remove(),o<s&&(s-=1);s=Math.max(s,0)}else o=n,e.slides[o]&&e.slides[o].remove(),o<s&&(s-=1),s=Math.max(s,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(s+e.loopedSlides,0,!1):e.slideTo(s,0,!1)}function MV(){let n=this,e=[];for(let t=0;t<n.slides.length;t+=1)e.push(t);n.removeSlide(e)}function mR(n){let{swiper:e}=n;Object.assign(e,{appendSlide:PV.bind(e),prependSlide:RV.bind(e),addSlide:kV.bind(e),removeSlide:DV.bind(e),removeAllSlides:MV.bind(e)})}function wi(n){let{effect:e,swiper:t,on:i,setTranslate:r,setTransition:s,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=n;i("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);let h=o?o():{};Object.assign(t.params,h),Object.assign(t.originalParams,h)}),i("setTranslate",()=>{t.params.effect===e&&r()}),i("setTransition",(h,p)=>{t.params.effect===e&&s(p)}),i("transitionEnd",()=>{if(t.params.effect===e&&l){if(!c||!c().slideShadows)return;t.slides.forEach(h=>{h.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),l()}});let d;i("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(d=!0),requestAnimationFrame(()=>{d&&t.slides&&t.slides.length&&(r(),d=!1)}))})}function ir(n,e){let t=Ln(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function Ss(n){let{swiper:e,duration:t,transformElements:i,allSlides:r}=n,{activeIndex:s}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(c=>c.shadowRoot&&c.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let a=!1,l;r?l=i:l=i.filter(c=>{let d=c.classList.contains("swiper-slide-transform")?o(c):c;return e.getSlideIndex(d)===s}),l.forEach(c=>{ys(c,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;let d=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(d)})})}}function gR(n){let{swiper:e,extendParams:t,on:i}=n;t({fadeEffect:{crossFade:!1}}),wi({effect:"fade",swiper:e,on:i,setTranslate:()=>{let{slides:o}=e,a=e.params.fadeEffect;for(let l=0;l<o.length;l+=1){let c=e.slides[l],h=-c.swiperSlideOffset;e.params.virtualTranslate||(h-=e.translate);let p=0;e.isHorizontal()||(p=h,h=0);let m=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(c.progress),0):1+Math.min(Math.max(c.progress,-1),0),y=ir(a,c);y.style.opacity=m,y.style.transform=`translate3d(${h}px, ${p}px, 0px)`}},setTransition:o=>{let a=e.slides.map(l=>Ln(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`}),Ss({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function _R(n){let{swiper:e,extendParams:t,on:i}=n;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});let r=(l,c,d)=>{let h=d?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),p=d?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");h||(h=Kt("div",`swiper-slide-shadow-cube swiper-slide-shadow-${d?"left":"top"}`.split(" ")),l.append(h)),p||(p=Kt("div",`swiper-slide-shadow-cube swiper-slide-shadow-${d?"right":"bottom"}`.split(" ")),l.append(p)),h&&(h.style.opacity=Math.max(-c,0)),p&&(p.style.opacity=Math.max(c,0))};wi({effect:"cube",swiper:e,on:i,setTranslate:()=>{let{el:l,wrapperEl:c,slides:d,width:h,height:p,rtlTranslate:m,size:y,browser:b}=e,S=bs(e),k=e.params.cubeEffect,A=e.isHorizontal(),x=e.virtual&&e.params.virtual.enabled,F=0,V;k.shadow&&(A?(V=e.wrapperEl.querySelector(".swiper-cube-shadow"),V||(V=Kt("div","swiper-cube-shadow"),e.wrapperEl.append(V)),V.style.height=`${h}px`):(V=l.querySelector(".swiper-cube-shadow"),V||(V=Kt("div","swiper-cube-shadow"),l.append(V))));for(let M=0;M<d.length;M+=1){let C=d[M],E=M;x&&(E=parseInt(C.getAttribute("data-swiper-slide-index"),10));let D=E*90,N=Math.floor(D/360);m&&(D=-D,N=Math.floor(-D/360));let O=Math.max(Math.min(C.progress,1),-1),T=0,H=0,X=0;E%4===0?(T=-N*4*y,X=0):(E-1)%4===0?(T=0,X=-N*4*y):(E-2)%4===0?(T=y+N*4*y,X=y):(E-3)%4===0&&(T=-y,X=3*y+y*4*N),m&&(T=-T),A||(H=T,T=0);let me=`rotateX(${S(A?0:-D)}deg) rotateY(${S(A?D:0)}deg) translate3d(${T}px, ${H}px, ${X}px)`;O<=1&&O>-1&&(F=E*90+O*90,m&&(F=-E*90-O*90)),C.style.transform=me,k.slideShadows&&r(C,O,A)}if(c.style.transformOrigin=`50% 50% -${y/2}px`,c.style["-webkit-transform-origin"]=`50% 50% -${y/2}px`,k.shadow)if(A)V.style.transform=`translate3d(0px, ${h/2+k.shadowOffset}px, ${-h/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${k.shadowScale})`;else{let M=Math.abs(F)-Math.floor(Math.abs(F)/90)*90,C=1.5-(Math.sin(M*2*Math.PI/360)/2+Math.cos(M*2*Math.PI/360)/2),E=k.shadowScale,D=k.shadowScale/C,N=k.shadowOffset;V.style.transform=`scale3d(${E}, 1, ${D}) translate3d(0px, ${p/2+N}px, ${-p/2/D}px) rotateX(-89.99deg)`}let z=(b.isSafari||b.isWebView)&&b.needPerspectiveFix?-y/2:0;c.style.transform=`translate3d(0px,0,${z}px) rotateX(${S(e.isHorizontal()?0:F)}deg) rotateY(${S(e.isHorizontal()?-F:0)}deg)`,c.style.setProperty("--swiper-cube-translate-z",`${z}px`)},setTransition:l=>{let{el:c,slides:d}=e;if(d.forEach(h=>{h.style.transitionDuration=`${l}ms`,h.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>{p.style.transitionDuration=`${l}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){let h=c.querySelector(".swiper-cube-shadow");h&&(h.style.transitionDuration=`${l}ms`)}},recreateShadows:()=>{let l=e.isHorizontal();e.slides.forEach(c=>{let d=Math.max(Math.min(c.progress,1),-1);r(c,d,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function rr(n,e,t){let i=`swiper-slide-shadow${t?`-${t}`:""}${n?` swiper-slide-shadow-${n}`:""}`,r=Ln(e),s=r.querySelector(`.${i.split(" ").join(".")}`);return s||(s=Kt("div",i.split(" ")),r.append(s)),s}function vR(n){let{swiper:e,extendParams:t,on:i}=n;t({flipEffect:{slideShadows:!0,limitRotation:!0}});let r=(l,c)=>{let d=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),h=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");d||(d=rr("flip",l,e.isHorizontal()?"left":"top")),h||(h=rr("flip",l,e.isHorizontal()?"right":"bottom")),d&&(d.style.opacity=Math.max(-c,0)),h&&(h.style.opacity=Math.max(c,0))};wi({effect:"flip",swiper:e,on:i,setTranslate:()=>{let{slides:l,rtlTranslate:c}=e,d=e.params.flipEffect,h=bs(e);for(let p=0;p<l.length;p+=1){let m=l[p],y=m.progress;e.params.flipEffect.limitRotation&&(y=Math.max(Math.min(m.progress,1),-1));let b=m.swiperSlideOffset,k=-180*y,A=0,x=e.params.cssMode?-b-e.translate:-b,F=0;e.isHorizontal()?c&&(k=-k):(F=x,x=0,A=-k,k=0),m.style.zIndex=-Math.abs(Math.round(y))+l.length,d.slideShadows&&r(m,y);let V=`translate3d(${x}px, ${F}px, 0px) rotateX(${h(A)}deg) rotateY(${h(k)}deg)`,z=ir(d,m);z.style.transform=V}},setTransition:l=>{let c=e.slides.map(d=>Ln(d));c.forEach(d=>{d.style.transitionDuration=`${l}ms`,d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${l}ms`})}),Ss({swiper:e,duration:l,transformElements:c})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(l=>{let c=l.progress;e.params.flipEffect.limitRotation&&(c=Math.max(Math.min(l.progress,1),-1)),r(l,c)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function wR(n){let{swiper:e,extendParams:t,on:i}=n;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),wi({effect:"coverflow",swiper:e,on:i,setTranslate:()=>{let{width:o,height:a,slides:l,slidesSizesGrid:c}=e,d=e.params.coverflowEffect,h=e.isHorizontal(),p=e.translate,m=h?-p+o/2:-p+a/2,y=h?d.rotate:-d.rotate,b=d.depth,S=bs(e);for(let k=0,A=l.length;k<A;k+=1){let x=l[k],F=c[k],V=x.swiperSlideOffset,z=(m-V-F/2)/F,M=typeof d.modifier=="function"?d.modifier(z):z*d.modifier,C=h?y*M:0,E=h?0:y*M,D=-b*Math.abs(M),N=d.stretch;typeof N=="string"&&N.indexOf("%")!==-1&&(N=parseFloat(d.stretch)/100*F);let O=h?0:N*M,T=h?N*M:0,H=1-(1-d.scale)*Math.abs(M);Math.abs(T)<.001&&(T=0),Math.abs(O)<.001&&(O=0),Math.abs(D)<.001&&(D=0),Math.abs(C)<.001&&(C=0),Math.abs(E)<.001&&(E=0),Math.abs(H)<.001&&(H=0);let X=`translate3d(${T}px,${O}px,${D}px)  rotateX(${S(E)}deg) rotateY(${S(C)}deg) scale(${H})`,me=ir(d,x);if(me.style.transform=X,x.style.zIndex=-Math.abs(Math.round(M))+1,d.slideShadows){let Q=h?x.querySelector(".swiper-slide-shadow-left"):x.querySelector(".swiper-slide-shadow-top"),Y=h?x.querySelector(".swiper-slide-shadow-right"):x.querySelector(".swiper-slide-shadow-bottom");Q||(Q=rr("coverflow",x,h?"left":"top")),Y||(Y=rr("coverflow",x,h?"right":"bottom")),Q&&(Q.style.opacity=M>0?M:0),Y&&(Y.style.opacity=-M>0?-M:0)}}},setTransition:o=>{e.slides.map(l=>Ln(l)).forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${o}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function yR(n){let{swiper:e,extendParams:t,on:i}=n;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});let r=a=>typeof a=="string"?a:`${a}px`;wi({effect:"creative",swiper:e,on:i,setTranslate:()=>{let{slides:a,wrapperEl:l,slidesSizesGrid:c}=e,d=e.params.creativeEffect,{progressMultiplier:h}=d,p=e.params.centeredSlides,m=bs(e);if(p){let y=c[0]/2-e.params.slidesOffsetBefore||0;l.style.transform=`translateX(calc(50% - ${y}px))`}for(let y=0;y<a.length;y+=1){let b=a[y],S=b.progress,k=Math.min(Math.max(b.progress,-d.limitProgress),d.limitProgress),A=k;p||(A=Math.min(Math.max(b.originalProgress,-d.limitProgress),d.limitProgress));let x=b.swiperSlideOffset,F=[e.params.cssMode?-x-e.translate:-x,0,0],V=[0,0,0],z=!1;e.isHorizontal()||(F[1]=F[0],F[0]=0);let M={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};k<0?(M=d.next,z=!0):k>0&&(M=d.prev,z=!0),F.forEach((H,X)=>{F[X]=`calc(${H}px + (${r(M.translate[X])} * ${Math.abs(k*h)}))`}),V.forEach((H,X)=>{let me=M.rotate[X]*Math.abs(k*h);V[X]=me}),b.style.zIndex=-Math.abs(Math.round(S))+a.length;let C=F.join(", "),E=`rotateX(${m(V[0])}deg) rotateY(${m(V[1])}deg) rotateZ(${m(V[2])}deg)`,D=A<0?`scale(${1+(1-M.scale)*A*h})`:`scale(${1-(1-M.scale)*A*h})`,N=A<0?1+(1-M.opacity)*A*h:1-(1-M.opacity)*A*h,O=`translate3d(${C}) ${E} ${D}`;if(z&&M.shadow||!z){let H=b.querySelector(".swiper-slide-shadow");if(!H&&M.shadow&&(H=rr("creative",b)),H){let X=d.shadowPerProgress?k*(1/d.limitProgress):k;H.style.opacity=Math.min(Math.max(Math.abs(X),0),1)}}let T=ir(d,b);T.style.transform=O,T.style.opacity=N,M.origin&&(T.style.transformOrigin=M.origin)}},setTransition:a=>{let l=e.slides.map(c=>Ln(c));l.forEach(c=>{c.style.transitionDuration=`${a}ms`,c.querySelectorAll(".swiper-slide-shadow").forEach(d=>{d.style.transitionDuration=`${a}ms`})}),Ss({swiper:e,duration:a,transformElements:l,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function bR(n){let{swiper:e,extendParams:t,on:i}=n;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),wi({effect:"cards",swiper:e,on:i,setTranslate:()=>{let{slides:o,activeIndex:a,rtlTranslate:l}=e,c=e.params.cardsEffect,{startTranslate:d,isTouched:h}=e.touchEventsData,p=l?-e.translate:e.translate;for(let m=0;m<o.length;m+=1){let y=o[m],b=y.progress,S=Math.min(Math.max(b,-4),4),k=y.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(k-=o[0].swiperSlideOffset);let A=e.params.cssMode?-k-e.translate:-k,x=0,F=-100*Math.abs(S),V=1,z=-c.perSlideRotate*S,M=c.perSlideOffset-Math.abs(S)*.75,C=e.virtual&&e.params.virtual.enabled?e.virtual.from+m:m,E=(C===a||C===a-1)&&S>0&&S<1&&(h||e.params.cssMode)&&p<d,D=(C===a||C===a+1)&&S<0&&S>-1&&(h||e.params.cssMode)&&p>d;if(E||D){let H=(1-Math.abs((Math.abs(S)-.5)/.5))**.5;z+=-28*S*H,V+=-.5*H,M+=96*H,x=`${-25*H*Math.abs(S)}%`}if(S<0?A=`calc(${A}px ${l?"-":"+"} (${M*Math.abs(S)}%))`:S>0?A=`calc(${A}px ${l?"-":"+"} (-${M*Math.abs(S)}%))`:A=`${A}px`,!e.isHorizontal()){let H=x;x=A,A=H}let N=S<0?`${1+(1-V)*S}`:`${1-(1-V)*S}`,O=`
        translate3d(${A}, ${x}, ${F}px)
        rotateZ(${c.rotate?l?-z:z:0}deg)
        scale(${N})
      `;if(c.slideShadows){let H=y.querySelector(".swiper-slide-shadow");H||(H=rr("cards",y)),H&&(H.style.opacity=Math.min(Math.max((Math.abs(S)-.5)/.5,0),1))}y.style.zIndex=-Math.abs(Math.round(b))+o.length;let T=ir(c,y);T.style.transform=O}},setTransition:o=>{let a=e.slides.map(l=>Ln(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${o}ms`})}),Ss({swiper:e,duration:o,transformElements:a})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}var NV=[ZP,eR,tR,nR,iR,rR,sR,oR,aR,lR,cR,uR,dR,hR,pR,fR,mR,gR,_R,vR,wR,yR,bR];xs.use(NV);var yl=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Co(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function jf(n,e){let t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:Co(e[i])&&Co(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:jf(n[i],e[i]):n[i]=e[i]})}function xR(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function SR(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function ER(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function bl(n){return n===void 0&&(n=""),n.replace(/-[a-z]/g,e=>e.toUpperCase().replace("-",""))}function TR(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=n,c=r.filter(E=>E!=="children"&&E!=="direction"&&E!=="wrapperClass"),{params:d,pagination:h,navigation:p,scrollbar:m,virtual:y,thumbs:b}=e,S,k,A,x,F,V,z,M;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(S=!0),r.includes("controller")&&i.controller&&i.controller.control&&d.controller&&!d.controller.control&&(k=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(A=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&m&&!m.el&&(x=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||o)&&(i.navigation.nextEl||s)&&(d.navigation||d.navigation===!1)&&p&&!p.prevEl&&!p.nextEl&&(F=!0);let C=E=>{e[E]&&(e[E].destroy(),E==="navigation"?(e.isElement&&(e[E].prevEl.remove(),e[E].nextEl.remove()),d[E].prevEl=void 0,d[E].nextEl=void 0,e[E].prevEl=void 0,e[E].nextEl=void 0):(e.isElement&&e[E].el.remove(),d[E].el=void 0,e[E].el=void 0))};r.includes("loop")&&e.isElement&&(d.loop&&!i.loop?V=!0:!d.loop&&i.loop?z=!0:M=!0),c.forEach(E=>{if(Co(d[E])&&Co(i[E]))Object.assign(d[E],i[E]),(E==="navigation"||E==="pagination"||E==="scrollbar")&&"enabled"in i[E]&&!i[E].enabled&&C(E);else{let D=i[E];(D===!0||D===!1)&&(E==="navigation"||E==="pagination"||E==="scrollbar")?D===!1&&C(E):d[E]=i[E]}}),c.includes("controller")&&!k&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),r.includes("children")&&t&&y&&d.virtual.enabled?(y.slides=t,y.update(!0)):r.includes("virtual")&&y&&d.virtual.enabled&&(t&&(y.slides=t),y.update(!0)),r.includes("children")&&t&&d.loop&&(M=!0),S&&b.init()&&b.update(!0),k&&(e.controller.control=d.controller.control),A&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(d.pagination.el=l),h.init(),h.render(),h.update()),x&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(d.scrollbar.el=a),m.init(),m.updateSize(),m.setTranslate()),F&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(d.navigation.nextEl=s),o&&(d.navigation.prevEl=o),p.init(),p.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(V||M)&&e.loopDestroy(),(z||M)&&e.loopCreate(),e.update()}var CR=n=>{if(parseFloat(n)===Number(n))return Number(n);if(n==="true"||n==="")return!0;if(n==="false")return!1;if(n==="null")return null;if(n!=="undefined"){if(typeof n=="string"&&n.includes("{")&&n.includes("}")&&n.includes('"')){let e;try{e=JSON.parse(n)}catch{e=n}return e}return n}},IR=["a11y","autoplay","controller","cards-effect","coverflow-effect","creative-effect","cube-effect","fade-effect","flip-effect","free-mode","grid","hash-navigation","history","keyboard","mousewheel","navigation","pagination","parallax","scrollbar","thumbs","virtual","zoom"];function eb(n,e,t){let i={},r={};jf(i,zf);let s=[...yl,"on"],o=s.map(l=>l.replace(/_/,""));s.forEach(l=>{l=l.replace("_",""),typeof n[l]<"u"&&(r[l]=n[l])});let a=[...n.attributes];return typeof e=="string"&&typeof t<"u"&&a.push({name:e,value:Co(t)?he({},t):t}),a.forEach(l=>{let c=IR.filter(d=>l.name.indexOf(`${d}-`)===0)[0];if(c){let d=bl(c),h=bl(l.name.split(`${c}-`)[1]);typeof r[d]>"u"&&(r[d]={}),r[d]===!0&&(r[d]={enabled:!0}),r[d][h]=CR(l.value)}else{let d=bl(l.name);if(!o.includes(d))return;let h=CR(l.value);r[d]&&IR.includes(l.name)&&!Co(h)?(r[d].constructor!==Object&&(r[d]={}),r[d].enabled=!!h):r[d]=h}}),jf(i,r),i.navigation?i.navigation=he({prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},i.navigation!==!0?i.navigation:{}):i.navigation===!1&&delete i.navigation,i.scrollbar?i.scrollbar=he({el:".swiper-scrollbar"},i.scrollbar!==!0?i.scrollbar:{}):i.scrollbar===!1&&delete i.scrollbar,i.pagination?i.pagination=he({el:".swiper-pagination"},i.pagination!==!0?i.pagination:{}):i.pagination===!1&&delete i.pagination,{params:i,passedParams:r}}var OV=":host{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{width:100%;height:100%;margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android ::slotted(swiper-slide),.swiper-ios ::slotted(swiper-slide),.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}::slotted(swiper-slide){flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}::slotted(.swiper-slide-invisible-blank){visibility:hidden}.swiper-autoheight,.swiper-autoheight ::slotted(swiper-slide){height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden ::slotted(swiper-slide){transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d ::slotted(swiper-slide){transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode ::slotted(swiper-slide){scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode ::slotted(swiper-slide){scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered ::slotted(swiper-slide){scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal ::slotted(swiper-slide):first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical ::slotted(swiper-slide):first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-virtual ::slotted(swiper-slide){-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:host{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}::slotted(.swiper-slide-zoomed){cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode ::slotted(swiper-slide){transition-timing-function:ease-out}.swiper-fade ::slotted(swiper-slide){pointer-events:none;transition-property:opacity}.swiper-fade ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-fade ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-fade ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper.swiper-cube{overflow:visible}.swiper-cube ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-cube.swiper-rtl ::slotted(swiper-slide){transform-origin:100% 0}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-next),.swiper-cube ::slotted(.swiper-slide-prev){pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube ::slotted(.swiper-slide-next)+::slotted(swiper-slide){pointer-events:auto;visibility:visible}.swiper.swiper-flip{overflow:visible}.swiper-flip ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-flip ::slotted(.swiper-slide-active),.swiper-flip ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-creative ::slotted(swiper-slide){-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper.swiper-cards{overflow:visible}.swiper-cards ::slotted(swiper-slide){transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}",FV="::slotted(.swiper-slide-shadow),::slotted(.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-top){position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}::slotted(.swiper-slide-shadow){background:rgba(0,0,0,.15)}::slotted(.swiper-slide-shadow-left){background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-right){background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-top){background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-bottom){background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear;width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-zoom-container){width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}::slotted(.swiper-zoom-container)>canvas,::slotted(.swiper-zoom-container)>img,::slotted(.swiper-zoom-container)>svg{max-width:100%;max-height:100%;object-fit:contain}",tb=class{},PR=typeof window>"u"||typeof HTMLElement>"u"?tb:HTMLElement,AR=`<svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>
    `,RR=(n,e)=>{if(typeof CSSStyleSheet<"u"&&n.adoptedStyleSheets){let t=new CSSStyleSheet;t.replaceSync(e),n.adoptedStyleSheets=[t]}else{let t=document.createElement("style");t.rel="stylesheet",t.textContent=e,n.appendChild(t)}},Bf=class extends PR{constructor(){super(),this.attachShadow({mode:"open"})}static get nextButtonSvg(){return AR}static get prevButtonSvg(){return AR.replace("/></svg>",' transform-origin="center" transform="rotate(180)"/></svg>')}cssStyles(){return[OV,...this.injectStyles&&Array.isArray(this.injectStyles)?this.injectStyles:[]].join(`
`)}cssLinks(){return this.injectStylesUrls||[]}calcSlideSlots(){let e=this.slideSlots||0,t=[...this.querySelectorAll("[slot^=slide-]")].map(i=>parseInt(i.getAttribute("slot").split("slide-")[1],10));if(this.slideSlots=t.length?Math.max(...t)+1:0,!!this.rendered){if(this.slideSlots>e)for(let i=e;i<this.slideSlots;i+=1){let r=document.createElement("swiper-slide");r.setAttribute("part",`slide slide-${i+1}`);let s=document.createElement("slot");s.setAttribute("name",`slide-${i+1}`),r.appendChild(s),this.shadowRoot.querySelector(".swiper-wrapper").appendChild(r)}else if(this.slideSlots<e){let i=this.swiper.slides;for(let r=i.length-1;r>=0;r-=1)r>this.slideSlots&&i[r].remove()}}}render(){if(this.rendered)return;this.calcSlideSlots();let e=this.cssStyles();this.slideSlots>0&&(e=e.replace(/::slotted\(([a-z-0-9.]*)\)/g,"$1")),e.length&&RR(this.shadowRoot,e),this.cssLinks().forEach(i=>{if(this.shadowRoot.querySelector(`link[href="${i}"]`))return;let s=document.createElement("link");s.rel="stylesheet",s.href=i,this.shadowRoot.appendChild(s)});let t=document.createElement("div");t.classList.add("swiper"),t.part="container",t.innerHTML=`
      <slot name="container-start"></slot>
      <div class="swiper-wrapper" part="wrapper">
        <slot></slot>
        ${Array.from({length:this.slideSlots}).map((i,r)=>`
        <swiper-slide part="slide slide-${r}">
          <slot name="slide-${r}"></slot>
        </swiper-slide>
        `).join("")}
      </div>
      <slot name="container-end"></slot>
      ${xR(this.passedParams)?`
        <div part="button-prev" class="swiper-button-prev">${this.constructor.prevButtonSvg}</div>
        <div part="button-next" class="swiper-button-next">${this.constructor.nextButtonSvg}</div>
      `:""}
      ${SR(this.passedParams)?`
        <div part="pagination" class="swiper-pagination"></div>
      `:""}
      ${ER(this.passedParams)?`
        <div part="scrollbar" class="swiper-scrollbar"></div>
      `:""}
    `,this.shadowRoot.appendChild(t),this.rendered=!0}initialize(){var e=this;if(this.initialized)return;this.initialized=!0;let{params:t,passedParams:i}=eb(this);this.swiperParams=t,this.passedParams=i,delete this.swiperParams.init,this.render(),this.swiper=new xs(this.shadowRoot.querySelector(".swiper"),et(he(he({},t.virtual?{}:{observer:!0}),t),{touchEventsTarget:"container",onAny:function(r){r==="observerUpdate"&&e.calcSlideSlots();let s=t.eventsPrefix?`${t.eventsPrefix}${r.toLowerCase()}`:r.toLowerCase();for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];let c=new CustomEvent(s,{detail:a,bubbles:r!=="hashChange",cancelable:!0});e.dispatchEvent(c)}}))}connectedCallback(){this.initialized&&this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||this.init===!1||this.getAttribute("init")==="false"||this.initialize()}disconnectedCallback(){this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||(this.swiper&&this.swiper.destroy&&this.swiper.destroy(),this.initialized=!1)}updateSwiperOnPropChange(e,t){let{params:i,passedParams:r}=eb(this,e,t);this.passedParams=r,this.swiperParams=i,!(this.swiper&&this.swiper.params[e]===t)&&TR(he(he(he({swiper:this.swiper,passedParams:this.passedParams,changedParams:[bl(e)]},e==="navigation"&&r[e]?{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}:{}),e==="pagination"&&r[e]?{paginationEl:".swiper-pagination"}:{}),e==="scrollbar"&&r[e]?{scrollbarEl:".swiper-scrollbar"}:{}))}attributeChangedCallback(e,t,i){this.initialized&&(t==="true"&&i===null&&(i=!1),this.updateSwiperOnPropChange(e,i))}static get observedAttributes(){return yl.filter(t=>t.includes("_")).map(t=>t.replace(/[A-Z]/g,i=>`-${i}`).replace("_","").toLowerCase())}};yl.forEach(n=>{n!=="init"&&(n=n.replace("_",""),Object.defineProperty(Bf.prototype,n,{configurable:!0,get(){return(this.passedParams||{})[n]},set(e){this.passedParams||(this.passedParams={}),this.passedParams[n]=e,this.initialized&&this.updateSwiperOnPropChange(n,e)}}))});var nb=class extends PR{constructor(){super(),this.attachShadow({mode:"open"})}render(){let e=this.lazy||this.getAttribute("lazy")===""||this.getAttribute("lazy")==="true";if(RR(this.shadowRoot,FV),this.shadowRoot.appendChild(document.createElement("slot")),e){let t=document.createElement("div");t.classList.add("swiper-lazy-preloader"),t.part.add("preloader"),this.shadowRoot.appendChild(t)}}initialize(){this.render()}connectedCallback(){this.initialize()}},kR=()=>{typeof window>"u"||(window.customElements.get("swiper-container")||window.customElements.define("swiper-container",Bf),window.customElements.get("swiper-slide")||window.customElements.define("swiper-slide",nb))};typeof window<"u"&&(window.SwiperElementRegisterParams=n=>{yl.push(...n)});var LV=(n,e)=>({background:n,padding:e}),VV=n=>({"font-size":n}),Rt=(()=>{let e=class e{getProgressColor(){return this.progress>80?"green":this.progress>=50?"yellow":"red"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-progress-circle"]],inputs:{progress:"progress",paddingValue:"paddingValue",fontSizeValue:"fontSizeValue"},standalone:!0,features:[fe],decls:9,vars:10,consts:[[1,"relative","flex","justify-center","items-center","rounded-full","w-10","h-10",3,"ngStyle"],["min","0","max","100",1,"hidden",3,"value"],[1,"absolute","text-sm","font-bold",3,"ngStyle"]],template:function(r,s){r&1&&(g(0,"div",0)(1,"progress",1),P(2),g(3,"sup"),P(4,"%"),_()(),g(5,"div",2),P(6),g(7,"sup"),P(8,"%"),_()()()),r&2&&(I("ngStyle",Ve(5,LV,"radial-gradient(closest-side, white 79%, transparent 80% 100%), conic-gradient("+s.getProgressColor()+" "+s.progress+"%, gray 0%)",s.paddingValue+"px")),w(),I("value",s.progress),w(),ee(s.progress),w(3),I("ngStyle",$t(8,VV,s.fontSizeValue+"px")),w(),we(" ",s.progress,""))},dependencies:[Jo],styles:['.progress-bar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100px;height:100px;border-radius:50%;background:radial-gradient(closest-side,white 79%,transparent 80% 100%),conic-gradient(#ff69b4 5%,pink 0)}.progress-bar[_ngcontent-%COMP%]:before{content:"75%"}']});let n=e;return n})();var kt=(()=>{let e=class e{transform(i){return typeof i!="number"||isNaN(i)?0:Math.round(i*10)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"percentage",type:e,pure:!0,standalone:!0});let n=e;return n})();var DR=(n,e)=>["/m/show-details",n,e];function UV(n,e){if(n&1&&U(0,"img",10),n&2){let t=L(2).$implicit;I("src","https://image.tmdb.org/t/p/w780/"+t.backdrop_path,ge)}}function $V(n,e){n&1&&U(0,"img",11)}function zV(n,e){if(n&1&&(g(0,"div",3),j(1,UV,1,1,"img",10)(2,$V,1,0),_()),n&2){let t=L().$implicit;I("routerLink",Ve(2,DR,t.media_type||"tv",t.id)),w(),je(1,t.backdrop_path?1:2)}}function jV(n,e){if(n&1&&U(0,"img",10),n&2){let t=L(2).$implicit;I("src","https://image.tmdb.org/t/p/w780/"+t.backdrop_path,ge)}}function BV(n,e){n&1&&U(0,"img",11)}function qV(n,e){if(n&1&&(g(0,"div",3),j(1,jV,1,1,"img",10)(2,BV,1,0),_()),n&2){let t=L().$implicit;I("routerLink",Ve(2,DR,t.media_type||"movie",t.id)),w(),je(1,t.backdrop_path?1:2)}}function GV(n,e){n&1&&U(0,"div")}function HV(n,e){if(n&1&&(g(0,"swiper-slide",2),j(1,zV,3,5,"div",3)(2,qV,3,5),g(3,"div",4)(4,"div",5),U(5,"app-progress-circle",6),_e(6,"percentage"),_(),j(7,GV,1,0,"div",7),g(8,"h3",8),P(9),_(),g(10,"p",9),P(11),_e(12,"date"),_()()()),n&2){let t=e.$implicit,i=L();w(),je(1,t.name?1:2),w(4),I("progress",Ae(6,5,t.vote_average)),w(2),I("ngIf",i.displayGenres),w(2),ee(t.title||t.name),w(2),ee(lt(12,7,t.release_date||t.first_air_date,"mediumDate"))}}kR();var qf=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this.shows=[]}ngOnInit(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-movie-slider"]],inputs:{shows:"shows",slidesNum:"slidesNum",displayGenres:"displayGenres"},standalone:!0,features:[fe],decls:2,vars:5,consts:[[3,"slidesPerView","spaceBetween","scrollbar","loop"],["class","w-40 slide min-w-40  rounded-lg  transition-transform duration-500 mb-10",4,"ngFor","ngForOf"],[1,"w-40","slide","min-w-40","rounded-lg","transition-transform","duration-500","mb-10"],[1,"p-1","crp",3,"routerLink"],[1,""],[1,"relative","-top-5","left-2","mb-2","text-black"],[3,"progress"],[4,"ngIf"],[1,"text-sm","font-black","text-black","crp","hover:text-gray-700","duration-200","title"],[1,"text-sm","text-gray-400"],["alt","Movie Image",1,"rounded-lg","h-56","object-cover",3,"src"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","alt","Movie Image",1,"rounded-lg","h-56","object-cover"]],template:function(r,s){r&1&&(g(0,"swiper-container",0),j(1,HV,13,10,"swiper-slide",1),_()),r&2&&(I("slidesPerView",s.slidesNum)("spaceBetween",10)("scrollbar",!0)("loop",!0),w(),I("ngForOf",s.shows))},dependencies:[wt,Rt,kt,He,Re,At],styles:["h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0!important}"]});let n=e;return n})();var xl=(()=>{let e=class e{constructor(){this._HttpClient=B(kn)}getTvShows(i,r){return this._HttpClient.get(`${te.url}tv/${i}?api_key=${te.apiKey}&page=${r}`)}getPopularTvShows(i){return this._HttpClient.get(`${te.url}tv/popular?api_key=${te.apiKey}&page=${i}`)}getTrendingTvShows(){return this._HttpClient.get(`${te.url}trending/tv/week?api_key=${te.apiKey}`)}getTvTrailers(i){return this._HttpClient.get(`${te.url}tv/${i}/videos?api_key=${te.apiKey}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Gf=(()=>{let e=class e{constructor(i){this.sanitizer=i}transform(i){return this.sanitizer.bypassSecurityTrustResourceUrl(i)}};e.\u0275fac=function(r){return new(r||e)(Si(Wm,16))},e.\u0275pipe=en({name:"safeUrl",type:e,pure:!0,standalone:!0});let n=e;return n})();function WV(n,e){if(n&1&&(U(0,"iframe",8),_e(1,"safeUrl")),n&2){let t=L();I("src",Ae(1,1,t.youtubeUrl),xd)}}var Hf=(()=>{let e=class e{constructor(){this.close=new Vi}ngOnInit(){this.addEscapeKeyListener()}ngOnDestroy(){this.removeEscapeKeyListener()}closeModal(){this.close.emit()}addEscapeKeyListener(){this.clickOutsideListener=i=>{i?.key==="Escape"&&this.closeModal()},document.addEventListener("keydown",this.clickOutsideListener)}removeEscapeKeyListener(){document.removeEventListener("keydown",this.clickOutsideListener)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-show-modal"]],inputs:{youtubeUrl:"youtubeUrl",movie:"movie"},outputs:{close:"close"},standalone:!0,features:[fe],decls:9,vars:1,consts:[[1,"fixed","inset-0","z-50","bg-gradient-to-b","from-black","via-gray-900","to-black","bg-opacity-80","flex","justify-center","items-center",3,"click"],[1,"fixed","inset-0","z-50","flex","justify-center","items-center","animate-fade-in"],[1,"bg-gray-800","py-20","rounded-xl","shadow-2xl","max-w-5xl","w-full","mx-4","relative","flex","justify-center","items-center","border","border-gray-700"],[1,"absolute","top-0","right-4","text-4xl","md:top-4","font-bold","cursor-pointer","text-gray-400","hover:text-white","transition","duration-300",3,"click"],[1,"flex","flex-col","md:flex-row","gap-8","w-full","justify-center","items-center","mt-5","p-2","md:mt-0"],[1,"w-full"],[1,"relative","rounded-xl","overflow-hidden","shadow-lg",2,"padding-top","56.25%"],["class","absolute top-0 left-0 w-full h-full rounded-lg","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src",4,"ngIf"],["title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"absolute","top-0","left-0","w-full","h-full","rounded-lg",3,"src"]],template:function(r,s){r&1&&(g(0,"div",0),re("click",function(){return s.closeModal()}),_(),g(1,"div",1)(2,"div",2)(3,"span",3),re("click",function(){return s.closeModal()}),P(4,"\xD7"),_(),g(5,"div",4)(6,"div",5)(7,"div",6),j(8,WV,2,3,"iframe",7),_()()()()()),r&2&&(w(8),I("ngIf",s.youtubeUrl))},dependencies:[Gf,Re],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}"]});let n=e;return n})();function KV(n,e){if(n&1&&U(0,"img",5),n&2){let t=L().$implicit;I("src","https://image.tmdb.org/t/p/w780/"+t.backdrop_path,ge)}}function QV(n,e){n&1&&U(0,"img",11)}function YV(n,e){if(n&1){let t=Ue();g(0,"swiper-slide",3)(1,"div",4),j(2,KV,1,1,"img",5)(3,QV,1,0),g(4,"div",6)(5,"i",7),re("click",function(){let r=ke(t).$implicit,s=L();return De(s.openModal(r))}),_()()(),g(6,"div",8)(7,"h3",9),P(8),_(),g(9,"p",10),P(10),_()()()}if(n&2){let t=e.$implicit;w(2),je(2,t.backdrop_path?2:3),w(6),ee(t.title||t.name),w(2),ee(t.release_date||t.first_air_date)}}function XV(n,e){if(n&1){let t=Ue();g(0,"app-show-modal",12),re("close",function(){ke(t);let r=L();return De(r.closeModal())}),_()}if(n&2){let t=L();I("youtubeUrl",t.selectedMovieUrl)("movie",t.selectedMovie)}}var MR=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._TvShowsService=B(xl),this.shows=[],this.selectedMovie=null,this.selectedMovieUrl="",this.backgroundStyle={"background-size":"cover","background-position":"top",transition:"all 0.5s ease-in-out"}}openModal(i){this.selectedMovie=i,this._MoviesService.getShowTrailers(i.id,i.media_type).subscribe({next:r=>{let s=r.results.find(o=>o.name==="Official Trailer");if(s){let o=`https://www.youtube.com/embed/${s.key}`;this.selectedMovieUrl=o}else if(r.results.length>0){let a=`https://www.youtube.com/embed/${r.results[0].key}`;this.selectedMovieUrl=a}else console.log("No trailers found."),this.selectedMovieUrl=""},error:r=>{console.error("Error fetching show trailers:",r)}})}onHover(i){let r=`https://image.tmdb.org/t/p/original/${i.backdrop_path}`;this.backgroundStyle=et(he({},this.backgroundStyle),{"background-image":`linear-gradient(rgba(3, 37, 65, 0.8), rgba(3, 37, 65, 0.8)), url(${r})`})}closeModal(){this.selectedMovie=null,this.selectedMovieUrl=""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-trailer-slider"]],inputs:{shows:"shows",slidesNum:"slidesNum"},standalone:!0,features:[fe],decls:3,vars:6,consts:[[1,"trailers","p-4","relative","bg-gray-900",3,"slidesPerView","spaceBetween","scrollbar","loop"],["class","relative w-80 min-w-80 rounded-lg overflow-hidden shadow-lg transition-transform duration-500 hover:scale-105 hover:shadow-xl",4,"ngFor","ngForOf"],[3,"youtubeUrl","movie","close",4,"ngIf"],[1,"relative","w-80","min-w-80","rounded-lg","overflow-hidden","shadow-lg","transition-transform","duration-500","hover:scale-105","hover:shadow-xl"],[1,"relative","group"],["alt","Movie Image",1,"w-full","h-56","object-cover","rounded-lg","group-hover:opacity-80","transition-opacity","duration-300",3,"src"],[1,"absolute","inset-0","flex","justify-center","items-center","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"fa-solid","fa-play","text-4xl","text-white","cursor-pointer","hover:text-gray-300",3,"click"],[1,"p-4","rounded-b-lg"],[1,"text-lg","font-bold","text-white"],[1,"text-sm","text-gray-400"],["src","assets/images/2922280_27002.jpg","alt","Movie Image",1,"w-full","h-56","object-cover","rounded-lg","group-hover:opacity-80","transition-opacity","duration-300"],[3,"close","youtubeUrl","movie"]],template:function(r,s){r&1&&(g(0,"swiper-container",0),j(1,YV,11,3,"swiper-slide",1),_(),j(2,XV,1,2,"app-show-modal",2)),r&2&&(I("slidesPerView",4)("spaceBetween",10)("scrollbar",!0)("loop",!0),w(),I("ngForOf",s.shows),w(),I("ngIf",s.selectedMovie))},dependencies:[wt,Re,Hf],styles:[".trailers[_ngcontent-%COMP%]{background:linear-gradient(#032541cc,#032541cc),url(https://image.tmdb.org/t/p/original/r6Ghtw9ENhTXfeUsd1Al20ZAvX.jpg);background-size:cover;background-position:top}h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin:0;text-align:center}"]});let n=e;return n})();var Wf=(()=>{let e=class e{constructor(){this._HttpClient=B(kn)}getSearchResults(i,r){return this._HttpClient.get(`https://api.themoviedb.org/3/search/multi?api_key=${te.apiKey}&query=${i}&page=${r}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var JV=(n,e)=>e.id,NR=(n,e)=>({"px-4 py-2 rounded-full text-sm":!0,"bg-gray-800 text-white":n," active":e}),OR=(n,e)=>({"px-4 py-2 rounded-full text-sm":!0,"bg-gray-800 text-white":n,active:e}),ZV=(n,e)=>["/m/show-details",n,e],e5=n=>["/m/person",n];function t5(n,e){if(n&1&&U(0,"img",29),n&2){let t=L(2).$implicit;zn("alt",t.name||t.title),I("src","https://image.tmdb.org/t/p/w500"+t.poster_path,ge)}}function n5(n,e){if(n&1&&U(0,"img",30),n&2){let t=L(2).$implicit;zn("alt",t.name||t.title)}}function i5(n,e){if(n&1&&(g(0,"a",26),j(1,t5,1,2,"img",27)(2,n5,1,1,"img",28),_()),n&2){let t=L().$implicit;I("routerLink",Ve(3,ZV,t.media_type,t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path)}}function r5(n,e){if(n&1&&U(0,"img",29),n&2){let t=L(2).$implicit;zn("alt",t.name),I("src","https://image.tmdb.org/t/p/w500"+t.profile_path,ge)}}function s5(n,e){if(n&1&&U(0,"img",32),n&2){let t=L(2).$implicit;zn("alt",t.name)}}function o5(n,e){if(n&1&&(g(0,"a",26),j(1,r5,1,2,"img",27)(2,s5,1,1,"img",31),_()),n&2){let t=L().$implicit;I("routerLink",$t(3,e5,t.id)),w(),I("ngIf",t.profile_path),w(),I("ngIf",!t.profile_path)}}function a5(n,e){if(n&1&&(g(0,"h3",22),P(1),_()),n&2){let t=L().$implicit;w(),ee(t.name||t.title)}}function l5(n,e){if(n&1&&(U(0,"app-progress-circle",24),_e(1,"percentage")),n&2){let t=L().$implicit;I("progress",Ae(1,1,t.vote_average))}}function c5(n,e){if(n&1&&(g(0,"div",25)(1,"p"),P(2),_()()),n&2){let t=L().$implicit;w(2),ee(t.media_type)}}function u5(n,e){if(n&1&&(g(0,"li",20),j(1,i5,3,6,"a",21)(2,o5,3,5,"a",21),g(3,"div"),j(4,a5,2,1,"h3",22),g(5,"div",23),j(6,l5,2,3,"app-progress-circle",24)(7,c5,3,1,"div",25),_()()()),n&2){let t=e.$implicit;w(),I("ngIf",t.media_type=="tv"||t.media_type=="movie"),w(),I("ngIf",t.media_type=="person"),w(2),je(4,t.name||t.title?4:-1),w(2),je(6,t.vote_average?6:-1),w(),je(7,t.media_type?7:-1)}}function d5(n,e){if(n&1&&(g(0,"div",19)(1,"ul"),ln(2,u5,8,5,"li",20,JV),_()()),n&2){let t=L();w(2),cn(t.searchResults)}}function h5(n,e){if(n&1&&(g(0,"div",33),P(1),_()),n&2){let t=L();w(),we(' No results found for "',t.searchTerm,'". ')}}var FR=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._TvShowsService=B(xl),this._SearchService=B(Wf),this.selectedTrend="day",this.selectedTrailer="tv",this.trendingShows=[],this.trailersShows=[],this.searchResults=[]}ngOnInit(){this._MoviesService.getTrendingShows("all","day",1).subscribe({next:i=>{this.trendingShows=i.results},error:i=>{}}),this._MoviesService.getTrendingShows("tv","week",1).subscribe({next:i=>{this.trailersShows=i.results},error:i=>{}}),this._TvShowsService.getTrendingTvShows().subscribe({next:i=>{},error:i=>{}})}getTrends(i,r,s){this.selectedTrend=r,this._MoviesService.getTrendingShows(i,r,s).subscribe({next:o=>{this.trendingShows=o.results},error:o=>{}})}getTrailersLists(i,r,s){this.selectedTrailer=i,this._MoviesService.getTrendingShows(i,r,s).subscribe({next:o=>{this.trailersShows=o.results},error:o=>{}})}searchItem(i){this._SearchService.getSearchResults(i,1).subscribe({next:r=>{r.results.length,this.searchResults=r.results}})}isActiveTrend(i){return this.selectedTrend===i}isActiveTrailer(i){return this.selectedTrailer===i}browserLog(i){typeof window<"u"&&console.log(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-home"]],standalone:!0,features:[fe],decls:35,vars:22,consts:[[1,"relative","w-full","xl:w-4/5","mx-auto"],[1,"flex","justify-center","items-center","mb-5"],[1,"flex","flex-col"],[1,"title","text-white","mb-4"],[1,"text-2xl","text-white","mb-8"],[1,"relative","w-full"],["type","text","placeholder","Search for movie or TV show..",1,"w-full","py-3","px-5","pr-28","rounded-full","text-black","outline-none","text-lg",3,"ngModelChange","input","ngModel"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","bg-gradient-to-r","from-yellow-400","to-pink-500","px-6","py-2","rounded-full","text-white","text-lg","font-semibold"],["class","mt-4 bg-white p-4 rounded-lg shadow-lg max-h-80 overflow-auto",4,"ngIf"],["class","mt-4 text-red-500 text-lg",4,"ngIf"],[1,"p-6","bg-new","text-white"],[1,"flex","items-center","mb-4","gap-4"],[1,"text-2xl","font-bold","text-black"],[1,"flex","items-center","space-x-2"],[3,"click","ngClass"],[1,"trending"],[3,"slidesNum","shows"],[1,""],[3,"shows"],[1,"mt-4","bg-white","p-4","rounded-lg","shadow-lg","max-h-80","overflow-auto"],[1,"mb-4","flex","items-start","space-x-4"],["class","cursor-pointer",3,"routerLink",4,"ngIf"],[1,"text-lg","font-bold"],[1,"flex","items-center","space-x-4","mt-2"],[3,"progress"],[1,"bg-blue-100","text-blue-700","text-sm","font-semibold","capitalize","px-2","py-1","rounded-lg","shadow"],[1,"cursor-pointer",3,"routerLink"],["class","w-16 h-24 object-cover rounded",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-16 h-24 object-cover rounded",3,"alt",4,"ngIf"],[1,"w-16","h-24","object-cover","rounded",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-16","h-24","object-cover","rounded",3,"alt"],["src","../../../assets/images/lost_in_Giza.jpeg","class","w-16 h-24 object-cover rounded",3,"alt",4,"ngIf"],["src","../../../assets/images/lost_in_Giza.jpeg",1,"w-16","h-24","object-cover","rounded",3,"alt"],[1,"mt-4","text-red-500","text-lg"]],template:function(r,s){r&1&&(g(0,"section",0)(1,"header",1)(2,"div",2)(3,"h1",3),P(4,"Welcome"),_(),g(5,"p",4),P(6,"Millions of movies, TV shows and people to discover. Explore now."),_(),g(7,"div",5)(8,"input",6),oi("ngModelChange",function(a){return si(s.searchTerm,a)||(s.searchTerm=a),a}),re("input",function(){return s.searchItem(s.searchTerm)}),_(),g(9,"button",7),P(10," Search "),_()(),j(11,d5,4,0,"div",8)(12,h5,2,1,"div",9),_()(),g(13,"div",10)(14,"div",11)(15,"h2",12),P(16,"Trending"),_(),g(17,"div",13)(18,"button",14),re("click",function(){return s.getTrends("all","day",1)}),P(19," Day "),_(),g(20,"button",14),re("click",function(){return s.getTrends("all","week",1)}),P(21," Week "),_()()(),g(22,"div",15),U(23,"app-movie-slider",16),_()(),g(24,"div",10)(25,"div",11)(26,"h2",12),P(27,"Latest Trailers "),_(),g(28,"div",13)(29,"button",14),re("click",function(){return s.getTrailersLists("tv","week",1)}),P(30," Tv-shows "),_(),g(31,"button",14),re("click",function(){return s.getTrailersLists("movie","week",1)}),P(32," Movies "),_()()(),g(33,"div",17),U(34,"app-trailer-slider",18),_()()()),r&2&&(w(8),ri("ngModel",s.searchTerm),w(3),I("ngIf",s.searchResults.length>0),w(),I("ngIf",s.searchResults.length===0&&s.searchTerm),w(6),I("ngClass",Ve(10,NR,!s.isActiveTrend("day"),s.isActiveTrend("day"))),w(2),I("ngClass",Ve(13,OR,!s.isActiveTrend("week"),s.isActiveTrend("week"))),w(3),I("slidesNum",9)("shows",s.trendingShows),w(6),I("ngClass",Ve(16,NR,!s.isActiveTrailer("tv"),s.isActiveTrailer("tv"))),w(2),I("ngClass",Ve(19,OR,!s.isActiveTrailer("movie"),s.isActiveTrailer("movie"))),w(3),I("shows",s.trailersShows))},dependencies:[qf,Mr,MR,Nn,Mn,fn,ci,Re,He,Rt,kt],styles:['header[_ngcontent-%COMP%]{background:linear-gradient(#032541cc,#032541cc),url(https://image.tmdb.org/t/p/original/r6Ghtw9ENhTXfeUsd1Al20ZAvX.jpg);background-size:cover;background-position:10% 10%;min-height:300px}.trending[_ngcontent-%COMP%]{background:url("./media/trending-bg-39afc2a5f77e31d469b25c187814c0a2efef225494c038098d62317d923f8415-5GDLM5EJ.svg");background-size:cover;background-position:top}.trailers[_ngcontent-%COMP%]{background:linear-gradient(#032541cc,#032541cc),url(https://image.tmdb.org/t/p/original/r6Ghtw9ENhTXfeUsd1Al20ZAvX.jpg);background-size:cover;background-position:top}.title[_ngcontent-%COMP%]{font-size:50px;font-weight:900}nav[_ngcontent-%COMP%]{background-color:#0009}button[_ngcontent-%COMP%]{transition:background-color .3s ease}button.active[_ngcontent-%COMP%]{background-color:#ff0;color:#000}h2[_ngcontent-%COMP%]{margin:0}']});let n=e;return n})();var Vn=(()=>{let e=class e{transform(i){if(!i)return"";let r=i.split(" "),s=[];for(let o=0;o<r.length;o+=3)s.push(r.slice(o,o+3).join(" "));return s.join(`
`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"splitTitle",type:e,pure:!0,standalone:!0});let n=e;return n})();function p5(n,e){if(n&1){let t=Ue();g(0,"div",1),re("click",function(){ke(t);let r=L();return De(r.goToTop())}),ei(),g(1,"svg",2),U(2,"path",3),_()()}}var Es=(()=>{let e=class e{constructor(){this.isButtonVisible=!1}goToTop(){window.scrollTo({top:0,behavior:"smooth"})}onWindowScroll(){(window.scrollY||document.documentElement.scrollTop)>window.innerHeight?this.isButtonVisible=!0:this.isButtonVisible=!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-arrowtop"]],hostBindings:function(r,s){r&1&&re("scroll",function(){return s.onWindowScroll()},!1,Ko)},standalone:!0,features:[fe],decls:1,vars:1,consts:[["class","fixed bottom-10 right-10 cursor-pointer p-3 bg-gray-800 rounded-full shadow-lg hover:bg-gray-700 transition duration-300 ease-in-out",3,"click",4,"ngIf"],[1,"fixed","bottom-10","right-10","cursor-pointer","p-3","bg-gray-800","rounded-full","shadow-lg","hover:bg-gray-700","transition","duration-300","ease-in-out",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-6","w-6","text-white","animate-bounce"],["stroke-linecap","round","stroke-linejoin","round","d","M5 15l7-7 7 7"]],template:function(r,s){r&1&&j(0,p5,3,0,"div",0),r&2&&I("ngIf",s.isButtonVisible)},dependencies:[Re]});let n=e;return n})();var Ts=(()=>{let e=class e{constructor(i){this._HttpClient=i}createPost(i){return this._HttpClient.post(`${te.socialAppUrl}posts`,i)}updatePost(i,r){return this._HttpClient.put(`${te.socialAppUrl}posts/${i}`,r)}deletePost(i){return this._HttpClient.delete(`${te.socialAppUrl}posts/${i}`)}getAllPosts(){return this._HttpClient.get(`${te.socialAppUrl}posts`)}getLimitedPosts(i){return this._HttpClient.get(`${te.socialAppUrl}posts?page=${i}`)}getUserPosts(){return this._HttpClient.get(`${te.socialAppUrl}users/664bcf3e33da217c4af21f00/posts`)}getSinglePost(i){return this._HttpClient.get(`${te.socialAppUrl}posts/${i}`)}};e.\u0275fac=function(r){return new(r||e)(ae(kn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Sl=(()=>{let e=class e{transform(i){return i&&i.replace(/_/g," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"formatTitle",type:e,pure:!0,standalone:!0});let n=e;return n})();var Kf=(()=>{let e=class e{constructor(){this._HttpClient=B(kn)}discoverShows(i,r){let s=new Date,o=new Date;o.setFullYear(s.getFullYear()-1);let a=s.toISOString().split("T")[0],l=o.toISOString().split("T")[0];return this._HttpClient.get(`${te.url}discover/${i}?api_key=${te.apiKey}&page=${r}&sort_by=popularity.desc&first_air_date.gte=${l}&first_air_date.lte=${a}&with_type=4&with_origin_country=US`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var f5=(n,e)=>e.id,m5=(n,e)=>["/m/show-details",n,e];function g5(n,e){if(n&1&&(g(0,"div",31),U(1,"img",32),_()),n&2){let t=L();w(),I("src",t.previewUrl,ge)}}function _5(n,e){if(n&1&&(g(0,"p",18),P(1),_()),n&2){let t=L();w(),ee(t.msgError)}}function v5(n,e){if(n&1&&U(0,"img",43),n&2){let t=L().$implicit,i=L();I("src",i.imageUrl+t.poster_path,ge)("alt",t.original_title)}}function w5(n,e){if(n&1&&U(0,"img",44),n&2){let t=L().$implicit;I("alt",t.original_title)}}function y5(n,e){if(n&1){let t=Ue();g(0,"div",23)(1,"div",33),j(2,v5,1,2,"img",34)(3,w5,1,1,"img",35),_(),g(4,"div",36),U(5,"app-progress-circle",37),_e(6,"percentage"),_(),g(7,"div",38)(8,"h3",39),P(9),_e(10,"splitTitle"),_(),g(11,"p",40),P(12),_(),g(13,"button",41),re("click",function(){let r=ke(t).$implicit,s=L();return De(s.showModal(r.poster_path,r.id))}),U(14,"i",42),P(15," Share "),_()()()}if(n&2){let t=e.$implicit;w(),I("routerLink",Ve(10,m5,t.media_type||"movie",t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),I("progress",Ae(6,6,t.vote_average)),w(4),ee(Ae(10,8,t.title)),w(3),ee(t.release_date)}}function b5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchMovies(r.currentPage-2))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage-2)}}function x5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchMovies(r.currentPage-1))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage-1)}}function S5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchMovies(r.currentPage+1))}),P(1),_()}if(n&2){let t=L();w(),we(" ",t.currentPage+1,"")}}function E5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchMovies(r.currentPage+2))}),P(1),_()}if(n&2){let t=L();w(),we(" ",t.currentPage+2,"")}}var LR=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._DiscoverShowsService=B(Kf),this._PostsService=B(Ts),this._ActivatedRoute=B(it),this._Router=B(ct),this.moviesList=[],this.MAX_PAGES=500,this.currentPage=1,this.imageUrl="https://image.tmdb.org/t/p/w300/",this.isFileOver=!1,this.isButtonVisible=!1,this.currentYear=new Date().getFullYear(),this.movieFilterForm=new wx({genre:new jd(null,_t.required),year:new jd(null,[_t.required,_t.min(1900),_t.max(this.currentYear)]),sort_by:new jd(null,_t.required)})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe(i=>{this.category=i.get("category"),this.fetchMovies(1),this._MoviesService.getMovieGenres().subscribe({next:r=>{this.movieGenres=r.genres}})})}fetchMovies(i){this.category==="popular"?this.callAPI(this.category,i):this.category==="now_playing"?this.callAPI(this.category,i):this.category==="upcoming"?this.callAPI(this.category,i):this.category==="top_rated"&&this.callAPI(this.category,i)}callAPI(i,r){this._MoviesService.getMovies(i,r).subscribe({next:s=>{this.lastPage=s.total_pages,this.lastPage<this.MAX_PAGES&&(this.MAX_PAGES=this.lastPage),this.moviesList=s.results,this.currentPage=r},error:s=>{console.error("Error fetching movies:",s)}})}nextPage(){this.currentPage<this.MAX_PAGES&&this.fetchMovies(this.currentPage+1)}prevPage(){this.currentPage>1&&this.fetchMovies(this.currentPage-1)}goFirst(){this.currentPage>1&&this.fetchMovies(1)}goLast(){this.currentPage<this.MAX_PAGES&&this.fetchMovies(this.MAX_PAGES)}isFirstPage(){return this.currentPage===1}isLastPage(){return this.currentPage===this.MAX_PAGES}test(i){console.log("hi",i.target)}closeModal(){let i=document.getElementById("authentication-modal");i&&(i.classList.add("hidden"),i.classList.remove("flex"))}showModal(i,r){this.shareCurrentImage=i+r;let s=document.getElementById("authentication-modal");s&&(s.classList.remove("hidden"),s.classList.add("flex"))}createPost(){let i=new FormData;if(!this.content||this.content.trim()===""){this.msgError="Post content is required";return}let r="ms,"+this.shareCurrentImage+","+this.content;console.log(r),i.append("body",r),this._PostsService.createPost(i).subscribe({next:s=>{s.message=="success"&&(console.log(s),this.content="",this.closeModal())},error:s=>{this.msgError="try smaller image",console.error("Error creating post:",s)}})}goToTop(){window.scrollTo({top:0,behavior:"smooth"})}browserLog(i,r){typeof window<"u"&&console.log(i,r)}onWindowScroll(){(window.scrollY||document.documentElement.scrollTop)>window.innerHeight?this.isButtonVisible=!0:this.isButtonVisible=!1}filterMovies(){if(this.movieFilterForm.valid){let{genre:i,year:r,sort_by:s}=this.movieFilterForm.value;this._MoviesService.discoverMovies(i,r,s).subscribe({next:o=>{this.moviesList=o.results}})}else console.log("Form is invalid")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-movies"]],hostBindings:function(r,s){r&1&&re("scroll",function(){return s.onWindowScroll()},!1,Ko)},standalone:!0,features:[fe],decls:50,vars:11,consts:[[1,"mt-40"],[1,"lg:w-1/2","mx-auto","mb-20"],["id","authentication-modal","tabindex","-1",1,"hidden","overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","z-50","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","p-4","w-1/2","max-h-full"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"end-2.5","text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5"],[1,"space-y-4"],["for","body",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","body","id","body","placeholder","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["class","mt-4",4,"ngIf"],[1,"flex","justify-around","items-center","gap-5"],["type","submit",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-2","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"error","text-center","text-red-600"],[1,"flex"],[1,"w-4/5","container","mx-auto","p-6"],[1,"text-2xl","font-bold","text-orange-600","my-4","p-2","bg-slate-100","rounded-md","shadow-md"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-6"],[1,"bg-slate-100","rounded-lg","shadow-lg","p-2","relative","transition-transform","duration-500","hover:scale-105"],[1,"flex","justify-center","items-center"],[1,"flex","justify-between","items-center","my-10","gap-3","bg-orange-400","md:w-2/3","w-full","p-4","rounded-lg","shadow-lg"],[1,"pagination-btn",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"page-number"],[1,"page-number-active"],[1,"fa-solid","fa-angles-right"],[1,"mt-4"],["alt","File Preview",1,"w-64","h-auto","border","border-gray-300","rounded-lg",3,"src"],[1,"h-52","overflow-hidden","rounded-lg",3,"routerLink"],["class","w-full h-full object-cover crp",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-full h-full object-cover crp",3,"alt",4,"ngIf"],[1,"relative","-top-5","left-2"],[3,"progress"],[1,"mt-2","text-center"],[1,"text-md","font-semibold","truncate"],[1,"text-sm"],[1,"text-[#1E90FF]","mt-2","flex","items-center","justify-center",3,"click"],[1,"fa-solid","fa-share-alt","mr-1"],[1,"w-full","h-full","object-cover","crp",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-full","object-cover","crp",3,"alt"],[1,"page-number",3,"click"]],template:function(r,s){r&1&&(g(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),P(7," Add New post "),_(),g(8,"button",7),re("click",function(){return s.closeModal()}),ei(),g(9,"svg",8),U(10,"path",9),_(),cr(),g(11,"span",10),P(12,"Close modal"),_()()(),g(13,"div",11)(14,"div",12)(15,"div")(16,"label",13),P(17,"content "),_(),g(18,"textarea",14),oi("ngModelChange",function(a){return si(s.content,a)||(s.content=a),a}),_()(),g(19,"div"),j(20,g5,2,1,"div",15),_(),g(21,"div",16)(22,"button",17),re("click",function(){return s.createPost()}),P(23,"Add post"),_()(),j(24,_5,2,1,"p",18),_()()()()()(),g(25,"div",19)(26,"div",20)(27,"h1",21),P(28),_e(29,"formatTitle"),_(),g(30,"div",22),ln(31,y5,16,13,"div",23,f5),_(),g(33,"div",24)(34,"div",25)(35,"button",26),re("click",function(){return s.goFirst()}),U(36,"i",27),_(),g(37,"button",26),re("click",function(){return s.prevPage()}),P(38," Pervious "),_(),j(39,b5,2,1,"span",28)(40,x5,2,1,"span",28),g(41,"span",29),P(42),_(),j(43,S5,2,1,"span",28)(44,E5,2,1,"span",28),g(45,"button",26),re("click",function(){return s.nextPage()}),P(46," Next "),_(),g(47,"button",26),re("click",function(){return s.goLast()}),U(48,"i",30),_()()()()(),U(49,"app-arrowtop"),_()),r&2&&(w(18),ri("ngModel",s.content),w(2),I("ngIf",s.previewUrl),w(4),je(24,s.msgError?24:-1),w(4),we("",Ae(29,9,s.category)," Movies"),w(3),cn(s.moviesList),w(8),je(39,s.currentPage>2?39:-1),w(),je(40,s.currentPage>1?40:-1),w(2),ee(s.currentPage),w(),je(43,s.currentPage<500?43:-1),w(),je(44,s.currentPage<499?44:-1))},dependencies:[He,Sl,kt,Vn,Re,Es,Nn,Mn,fn,ci,Rt,ta],styles:["sup[_ngcontent-%COMP%]{font-size:.5em;vertical-align:super;top:0;left:0}.word-wrap[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.5}.pagination-btn[_ngcontent-%COMP%]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(63 131 248 / var(--tw-bg-opacity));padding:.5rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:transform;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);box-shadow:0 4px #0000004d}.pagination-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px #0000004d}.pagination-btn[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px #0000004d}.page-number[_ngcontent-%COMP%], .page-number-active[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:1.125rem;line-height:1.75rem;font-weight:600}.page-number[_ngcontent-%COMP%]{border-radius:.375rem;--tw-bg-opacity: 1;background-color:rgb(100 116 139 / var(--tw-bg-opacity));padding:.25rem .5rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));box-shadow:0 4px #0003}.page-number-active[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity));background-color:#e2e8f0;padding:4px 10px;border-radius:6px;box-shadow:inset 0 4px #0003}"]});let n=e;return n})();var T5=(n,e)=>e.id,C5=(n,e)=>["/m/show-details",n,e];function I5(n,e){if(n&1&&(g(0,"div",31),U(1,"img",32),_()),n&2){let t=L();w(),I("src",t.previewUrl,ge)}}function A5(n,e){if(n&1&&(g(0,"p",18),P(1),_()),n&2){let t=L();w(),ee(t.msgError)}}function P5(n,e){if(n&1&&U(0,"img",43),n&2){let t=L().$implicit,i=L();I("src",i.imageUrl+t.poster_path,ge)("alt",t.original_title)}}function R5(n,e){if(n&1&&U(0,"img",44),n&2){let t=L().$implicit;I("alt",t.original_title)}}function k5(n,e){if(n&1){let t=Ue();g(0,"div",23)(1,"div",33),j(2,P5,1,2,"img",34)(3,R5,1,1,"img",35),_(),g(4,"div",36),U(5,"app-progress-circle",37),_e(6,"percentage"),_(),g(7,"div",38)(8,"h3",39),P(9),_e(10,"splitTitle"),_(),g(11,"p",40),P(12),_(),g(13,"button",41),re("click",function(){let r=ke(t).$implicit,s=L();return De(s.showModal(r.poster_path,r.id))}),U(14,"i",42),P(15," Share "),_()()()}if(n&2){let t=e.$implicit;w(),I("routerLink",Ve(10,C5,t.media_type||"tv",t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),I("progress",Ae(6,6,t.vote_average)),w(4),ee(Ae(10,8,t.name)),w(3),ee(t.release_date)}}function D5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchShows(r.currentPage-2))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage-2)}}function M5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchShows(r.currentPage-1))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage-1)}}function N5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchShows(r.currentPage+1))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage+1)}}function O5(n,e){if(n&1){let t=Ue();g(0,"span",45),re("click",function(){ke(t);let r=L();return De(r.fetchShows(r.currentPage+2))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage+2)}}var VR=(()=>{let e=class e{constructor(){this._TvShowsService=B(xl),this._PostsService=B(Ts),this._ActivatedRoute=B(it),this.showsList=[],this.MAX_PAGES=500,this.currentPage=1,this.imageUrl="https://image.tmdb.org/t/p/w300/",this.isFileOver=!1,this.isButtonVisible=!1}ngOnInit(){this._ActivatedRoute.paramMap.subscribe(i=>{this.category=i.get("tvCate"),this.fetchShows(1)})}fetchShows(i){this.category==="popular"?this.callAPI(this.category,i):this.category==="airing_today"?this.callAPI(this.category,i):this.category==="on_the_air"?this.callAPI(this.category,i):this.category==="top_rated"&&this.callAPI(this.category,i)}callAPI(i,r){this._TvShowsService.getTvShows(i,r).subscribe({next:s=>{this.lastPage=s.total_pages,this.lastPage<this.MAX_PAGES&&(this.MAX_PAGES=this.lastPage),this.showsList=s.results,this.currentPage=r},error:s=>{console.error("Error fetching movies:",s)}})}nextPage(){this.currentPage<this.MAX_PAGES&&this.fetchShows(this.currentPage+1)}prevPage(){this.currentPage>1&&this.fetchShows(this.currentPage-1)}goFirst(){this.currentPage>1&&this.fetchShows(1)}goLast(){this.currentPage<this.MAX_PAGES&&this.fetchShows(this.MAX_PAGES)}isFirstPage(){return this.currentPage===1}isLastPage(){return this.currentPage===this.MAX_PAGES}test(i){console.log("hi",i.target)}closeModal(){let i=document.getElementById("authentication-modal");i&&(i.classList.add("hidden"),i.classList.remove("flex"))}showModal(i,r){this.shareCurrentImage=i+r;let s=document.getElementById("authentication-modal");s&&(s.classList.remove("hidden"),s.classList.add("flex"))}createPost(){let i=new FormData;if(!this.content||this.content.trim()===""){this.msgError="Post content is required";return}let r="ms,"+this.shareCurrentImage+","+this.content;console.log(r),i.append("body",r),this._PostsService.createPost(i).subscribe({next:s=>{s.message=="success"&&(console.log(s),this.content="",this.closeModal())},error:s=>{this.msgError="try smaller image",console.error("Error creating post:",s)}})}goToTop(){window.scrollTo({top:0,behavior:"smooth"})}browserLog(i,r){typeof window<"u"&&console.log(i,r)}onWindowScroll(){(window.scrollY||document.documentElement.scrollTop)>window.innerHeight?this.isButtonVisible=!0:this.isButtonVisible=!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-tvshows"]],hostBindings:function(r,s){r&1&&re("scroll",function(){return s.onWindowScroll()},!1,Ko)},standalone:!0,features:[fe],decls:50,vars:11,consts:[[1,"mt-40"],[1,"lg:w-1/2","mx-auto","mb-20"],["id","authentication-modal","tabindex","-1",1,"hidden","overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","z-50","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","p-4","w-1/2","max-h-full"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"end-2.5","text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5"],[1,"space-y-4"],["for","body",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","body","id","body","placeholder","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["class","mt-4",4,"ngIf"],[1,"flex","justify-around","items-center","gap-5"],["type","submit",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-2","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"error","text-center","text-red-600"],[1,"flex"],[1,"w-4/5","container","mx-auto","p-6"],[1,"text-2xl","font-bold","text-orange-600","my-4","p-2","bg-slate-100","rounded-md","shadow-md"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-6"],[1,"movie-card","bg-slate-100","rounded-lg","shadow-lg","p-2","relative","transition-transform","duration-500","hover:scale-105"],[1,"flex","justify-center","items-center"],[1,"flex","justify-between","items-center","my-10","gap-3","bg-orange-400","md:w-2/3","w-full","p-4","rounded-lg","shadow-lg"],[1,"pagination-btn",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"page-number"],[1,"page-number-active"],[1,"fa-solid","fa-angles-right"],[1,"mt-4"],["alt","File Preview",1,"w-64","h-auto","border","border-gray-300","rounded-lg",3,"src"],[1,"h-52","overflow-hidden","rounded-lg",3,"routerLink"],["class","w-full h-full object-cover",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-full h-full object-cover",3,"alt",4,"ngIf"],[1,"relative","-top-5","left-2"],[3,"progress"],[1,"mt-2","text-center"],[1,"text-md","font-semibold","truncate"],[1,"text-sm"],[1,"text-[#1E90FF]","mt-2","flex","items-center","justify-center",3,"click"],[1,"fa-solid","fa-share-alt","mr-1"],[1,"w-full","h-full","object-cover",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-full","object-cover",3,"alt"],[1,"page-number",3,"click"]],template:function(r,s){r&1&&(g(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),P(7," Add New post "),_(),g(8,"button",7),re("click",function(){return s.closeModal()}),ei(),g(9,"svg",8),U(10,"path",9),_(),cr(),g(11,"span",10),P(12,"Close modal"),_()()(),g(13,"div",11)(14,"div",12)(15,"div")(16,"label",13),P(17,"content "),_(),g(18,"textarea",14),oi("ngModelChange",function(a){return si(s.content,a)||(s.content=a),a}),_()(),g(19,"div"),j(20,I5,2,1,"div",15),_(),g(21,"div",16)(22,"button",17),re("click",function(){return s.createPost()}),P(23,"Add post"),_()(),j(24,A5,2,1,"p",18),_()()()()()(),g(25,"div",19)(26,"div",20)(27,"h1",21),P(28),_e(29,"formatTitle"),_(),g(30,"div",22),ln(31,k5,16,13,"div",23,T5),_(),g(33,"div",24)(34,"div",25)(35,"button",26),re("click",function(){return s.goFirst()}),U(36,"i",27),_(),g(37,"button",26),re("click",function(){return s.prevPage()}),P(38," Pervious "),_(),j(39,D5,2,1,"span",28)(40,M5,2,1,"span",28),g(41,"span",29),P(42),_(),j(43,N5,2,1,"span",28)(44,O5,2,1,"span",28),g(45,"button",26),re("click",function(){return s.nextPage()}),P(46," Next "),_(),g(47,"button",26),re("click",function(){return s.goLast()}),U(48,"i",30),_()()()()(),U(49,"app-arrowtop"),_()),r&2&&(w(18),ri("ngModel",s.content),w(2),I("ngIf",s.previewUrl),w(4),je(24,s.msgError?24:-1),w(4),we("",Ae(29,9,s.category)," Tv Shows"),w(3),cn(s.showsList),w(8),je(39,s.currentPage>2?39:-1),w(),je(40,s.currentPage>1?40:-1),w(2),ee(s.currentPage),w(),je(43,s.currentPage<500?43:-1),w(),je(44,s.currentPage<499?44:-1))},dependencies:[He,Sl,kt,Vn,Re,Es,Nn,Mn,fn,ci,Rt],styles:["sup[_ngcontent-%COMP%]{font-size:.5em;vertical-align:super;top:0;left:0}.word-wrap[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.5}.pagination-btn[_ngcontent-%COMP%]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(63 131 248 / var(--tw-bg-opacity));padding:.5rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:transform;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);box-shadow:0 4px #0000004d}.pagination-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px #0000004d}.pagination-btn[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px #0000004d}.page-number[_ngcontent-%COMP%], .page-number-active[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:1.125rem;line-height:1.75rem;font-weight:600}.page-number[_ngcontent-%COMP%]{border-radius:.375rem;--tw-bg-opacity: 1;background-color:rgb(100 116 139 / var(--tw-bg-opacity));padding:.25rem .5rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));box-shadow:0 4px #0003}.page-number-active[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity));background-color:#e2e8f0;padding:4px 10px;border-radius:6px;box-shadow:inset 0 4px #0003}"]});let n=e;return n})();var Ao=class extends Error{};Ao.prototype.name="InvalidTokenError";function F5(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function L5(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return F5(e)}catch{return atob(e)}}function UR(n,e){if(typeof n!="string")throw new Ao("Invalid token specified: must be a string");e||(e={});let t=e.header===!0?0:1,i=n.split(".")[t];if(typeof i!="string")throw new Ao(`Invalid token specified: missing part #${t+1}`);let r;try{r=L5(i)}catch(s){throw new Ao(`Invalid token specified: invalid base64 for part #${t+1} (${s.message})`)}try{return JSON.parse(r)}catch(s){throw new Ao(`Invalid token specified: invalid json for part #${t+1} (${s.message})`)}}var Xn=(()=>{let e=class e{constructor(){this._HttpClient=B(kn),this._Router=B(ct),this.userData=null}setHeaders(){let i=localStorage.getItem("S&MToken");if(!i)throw new Error("No token found");return new ix({Authorization:`Bearer ${i}`})}signUp(i){return this._HttpClient.post(`${te.socialAppUrl}users/signup`,i)}signIn(i){return this._HttpClient.post(`${te.socialAppUrl}users/signin`,i)}changePassword(i){return this._HttpClient.patch(`${te.socialAppUrl}users/change-password`,i)}uploadProfilePhoto(i){return this._HttpClient.put(`${te.socialAppUrl}users/upload-photo`,i)}GetLoggedUserData(){return this._HttpClient.get(`${te.socialAppUrl}users/profile-data`,{headers:this.setHeaders()})}decodeUserData(){localStorage.getItem("S&MToken")!==null&&(this.userData=UR(localStorage.getItem("S&MToken")),console.log("userData: ",this.userData))}logOut(){localStorage.removeItem("S&MToken"),this.userData=null,window.location.href="/login"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function V5(n,e){n&1&&(g(0,"li"),P(1,"Email is required"),_())}function U5(n,e){n&1&&(g(0,"li"),P(1,"Invalid email format"),_())}function $5(n,e){if(n&1&&(g(0,"div",13)(1,"ul"),j(2,V5,2,0,"li",14)(3,U5,2,0,"li",14),_()()),n&2){let t,i,r=L();w(2),I("ngIf",(t=r.LoginForm.get("email"))==null?null:t.getError("required")),w(),I("ngIf",(i=r.LoginForm.get("email"))==null?null:i.getError("pattern"))}}function z5(n,e){n&1&&(g(0,"li"),P(1,"Password is required"),_())}function j5(n,e){n&1&&(g(0,"li")(1,"ul")(2,"li"),P(3,"Password must be at least 8 characters"),_(),g(4,"li"),P(5,"Include upper and lower case letters"),_(),g(6,"li"),P(7,"At least one number"),_(),g(8,"li"),P(9,"At least one special character"),_()()())}function B5(n,e){if(n&1&&(g(0,"div",13)(1,"ul"),j(2,z5,2,0,"li",14)(3,j5,10,0,"li",14),_()()),n&2){let t,i,r=L();w(2),I("ngIf",(t=r.LoginForm.get("password"))==null?null:t.getError("required")),w(),I("ngIf",(i=r.LoginForm.get("password"))==null?null:i.getError("pattern"))}}function q5(n,e){if(n&1&&(g(0,"div",15)(1,"ul")(2,"li"),P(3),_()()()),n&2){let t=L();w(3),ee(t.msgError)}}var $R=(()=>{let e=class e{constructor(){this._FormBuilder=B(Qd),this._Router=B(ct),this._AuthService=B(Xn),this.isLoading=!1,this.msgError="",this.LoginForm=this._FormBuilder.group({email:[null,[_t.required,_t.email,_t.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/)]],password:[null,[_t.required,_t.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]]})}login(){this.LoginForm.valid?this._AuthService.signIn(this.LoginForm.value).subscribe({next:i=>{i.message==="success"&&(localStorage.setItem("S&MToken",i.token),this._Router.navigate(["/home"]))},error:i=>{this.msgError=i.error.error,this.isLoading=!1}}):this.LoginForm.markAllAsTouched()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-login"]],standalone:!0,features:[fe],decls:21,vars:5,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50","log_container"],[1,"w-full","max-w-lg","p-8","bg-black","bg-opacity-70","rounded-lg","shadow-lg",3,"ngSubmit","formGroup"],[1,"text-white","text-xl","py-3","capitalize"],[1,"relative","mb-8"],["formControlName","email","autocomplete","on","type","email","id","floating_email","placeholder"," ",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["for","floating_email",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["class","text-red-500 text-sm mt-2",4,"ngIf"],["formControlName","password","autocomplete","off","type","password","id","floating_password","placeholder"," ",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["for","floating_password",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["type","submit",1,"w-full","py-3","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-4","focus:ring-red-500","rounded-lg","text-base","font-medium","transition",3,"disabled"],[1,"text-white","text-lg","py-3"],["routerLink","/signup",1,"underline"],["class","text-white bg-cyan-800 text-lg mt-2 p-2",4,"ngIf"],[1,"text-red-500","text-sm","mt-2"],[4,"ngIf"],[1,"text-white","bg-cyan-800","text-lg","mt-2","p-2"]],template:function(r,s){if(r&1&&(g(0,"div",0)(1,"form",1),re("ngSubmit",function(){return s.login()}),g(2,"h1",2),P(3,"sign in"),_(),g(4,"div",3),U(5,"input",4),g(6,"label",5),P(7," Email address "),_(),j(8,$5,4,2,"div",6),_(),g(9,"div",3),U(10,"input",7),g(11,"label",8),P(12," Password "),_(),j(13,B5,4,2,"div",6),_(),g(14,"button",9),P(15," Sign In "),_(),g(16,"div",10),P(17,"New to SDM? "),g(18,"a",11),P(19,"Sign up now."),_()(),j(20,q5,4,1,"div",12),_()()),r&2){let o,a;w(),I("formGroup",s.LoginForm),w(7),I("ngIf",((o=s.LoginForm.get("email"))==null?null:o.errors)&&((o=s.LoginForm.get("email"))==null?null:o.touched)),w(5),I("ngIf",((a=s.LoginForm.get("password"))==null?null:a.errors)&&((a=s.LoginForm.get("password"))==null?null:a.touched)),w(),I("disabled",s.LoginForm.invalid),w(6),I("ngIf",s.msgError)}},dependencies:[ta,Bd,Mn,fn,zd,qd,Gd,He,Re],styles:['.log_container[_ngcontent-%COMP%]{background-image:url("./media/net_log_x-PPDAZZP4.jpg");background-position:center;background-size:cover}']});let n=e;return n})();var zR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-auth-layout"]],standalone:!0,features:[fe],decls:3,vars:0,consts:[[1,"auth"],[1,"register-container"]],template:function(r,s){r&1&&(g(0,"div",0)(1,"div",1),U(2,"router-outlet"),_()())},dependencies:[Ci],styles:[".register-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:1.25rem;margin-top:2.5rem;border-radius:.125rem;padding:5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}"]});let n=e;return n})();var G5=()=>["m/movies","popular"],H5=()=>["m/movies","now_playing"],W5=()=>["m/movies","upcoming"],K5=()=>["m/movies","top_rated"],Q5=()=>["m/tvshows","popular"],Y5=()=>["m/tvshows","airing_today"],X5=()=>["m/tvshows","on_the_air"],J5=()=>["m/tvshows","top_rated"],Z5=()=>["m/people","popular"],eU=()=>["m/people","trending"],jR=(()=>{let e=class e{constructor(){this._AuthenticationService=B(Xn)}logout(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-navbar"]],standalone:!0,features:[fe],decls:68,vars:20,consts:[[1,"flex","items-center","p-4","bg-gray-900","shadow-lg","relative","z-20","w-full"],[1,"text-yellow-500","text-3xl","font-extrabold","flex","items-center","rounded-full","w-20","h-20","crp"],["routerLink","home"],["src","assets/images/h_Egypt_logo2.jpeg","alt","logo",1,"w-full","rounded-full"],[1,"flex","gap-8","items-center","text-white","text-sm","ms-5"],[1,"relative"],[1,"hover:text-yellow-500","transition-colors","cursor-pointer"],[1,"fa-solid","fa-clapperboard","mr-2"],[1,"dropdown-menu","absolute","opacity-0","invisible","transition-all","duration-300","ease-in-out","bg-gray-800","text-white","text-base","rounded-lg","shadow-lg","mt-2","p-4","space-y-2"],[1,"hover:text-yellow-500",3,"routerLink"],[1,"fa-solid","fa-tv","mr-2"],[1,"fa-solid","fa-users","mr-2"],[1,"hover:text-yellow-500","capitalize",3,"routerLink"],[1,"fa-solid","fa-user-circle","mr-2"],["routerLink","/m/watchlist",1,"hover:text-yellow-500"],["routerLink","/m/favourites",1,"hover:text-yellow-500"],[1,"hover:text-yellow-500"],[1,"hover:text-red-500","transition-colors","cursor-pointer",3,"click"],[1,"fa-solid","fa-right-from-bracket","mr-2"]],template:function(r,s){r&1&&(g(0,"nav",0)(1,"div",1)(2,"a",2),U(3,"img",3),_()(),g(4,"ul",4)(5,"li",5)(6,"a",6),U(7,"i",7),P(8,"Movies "),_(),g(9,"ul",8)(10,"li")(11,"a",9),P(12,"Popular"),_()(),g(13,"li")(14,"a",9),P(15,"Now Playing"),_()(),g(16,"li")(17,"a",9),P(18,"Upcoming"),_()(),g(19,"li")(20,"a",9),P(21,"Top Rated"),_()()()(),g(22,"li",5)(23,"a",6),U(24,"i",10),P(25,"TV Shows "),_(),g(26,"ul",8)(27,"li")(28,"a",9),P(29,"Popular"),_()(),g(30,"li")(31,"a",9),P(32,"Airing Today"),_()(),g(33,"li")(34,"a",9),P(35,"on TV"),_()(),g(36,"li")(37,"a",9),P(38,"Top Rated"),_()()()(),g(39,"li")(40,"a",6),U(41,"i",11),P(42,"people "),_(),g(43,"ul",8)(44,"li")(45,"a",9),P(46,"Popular"),_()(),g(47,"li")(48,"a",12),P(49,"trending"),_()()()(),g(50,"li",5)(51,"a",6),U(52,"i",13),P(53,"User "),_(),g(54,"ul",8)(55,"li")(56,"a",14),P(57,"Watchlist"),_()(),g(58,"li")(59,"a",15),P(60,"Favorites"),_()(),g(61,"li")(62,"a",16),P(63,"Settings"),_()(),g(64,"li")(65,"a",17),re("click",function(){return s._AuthenticationService.logOut()}),U(66,"i",18),P(67,"Logout "),_()()()()()()),r&2&&(w(11),I("routerLink",Ei(10,G5)),w(3),I("routerLink",Ei(11,H5)),w(3),I("routerLink",Ei(12,W5)),w(3),I("routerLink",Ei(13,K5)),w(8),I("routerLink",Ei(14,Q5)),w(3),I("routerLink",Ei(15,Y5)),w(3),I("routerLink",Ei(16,X5)),w(3),I("routerLink",Ei(17,J5)),w(8),I("routerLink",Ei(18,Z5)),w(3),I("routerLink",Ei(19,eU)))},dependencies:[He],styles:["nav[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}ul[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));font-size:small}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}li[_ngcontent-%COMP%]{position:relative}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:absolute;margin-top:.5rem;border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity));padding:1rem;font-size:1rem;line-height:1.5rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(194 120 3 / var(--tw-text-opacity))}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:all .3s ease;top:100%;left:0;padding:10px;border-radius:8px;z-index:999}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]{opacity:1;visibility:visible}.dropdown-menu[_ngcontent-%COMP%]{padding:10px;display:block}"]});let n=e;return n})();var BR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-footer"]],standalone:!0,features:[fe],decls:20,vars:0,consts:[[1,"bg-white","rounded-lg","shadow","m-4","dark:bg-gray-800","py-20"],[1,"w-full","mx-auto","max-w-screen-xl","p-4","md:flex","md:items-center","md:justify-between"],[1,"text-sm","text-gray-500","sm:text-center","dark:text-gray-400"],[1,"hover:underline"],[1,"flex","flex-wrap","items-center","mt-3","text-sm","font-medium","text-gray-500","dark:text-gray-400","sm:mt-0"],[1,"hover:underline","me-4","md:me-6"]],template:function(r,s){r&1&&(g(0,"footer",0)(1,"div",1)(2,"span",2),P(3,"\xA9 2023 "),g(4,"a",3),P(5,"CinemaX\u2122"),_(),P(6,". All Rights Reserved. "),_(),g(7,"ul",4)(8,"li")(9,"a",5),P(10,"About"),_()(),g(11,"li")(12,"a",5),P(13,"Privacy Policy"),_()(),g(14,"li")(15,"a",5),P(16,"Licensing"),_()(),g(17,"li")(18,"a",3),P(19,"Contact"),_()()()()())}});let n=e;return n})();var qR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-blank-layout"]],standalone:!0,features:[fe],decls:5,vars:0,consts:[[1,""]],template:function(r,s){r&1&&(g(0,"div",0),U(1,"app-navbar"),_(),g(2,"div",0),U(3,"router-outlet"),_(),U(4,"app-footer"))},dependencies:[Ci,jR,BR]});let n=e;return n})();var Cs=(()=>{let e=class e{constructor(i){this.db=i,this.isInWatchlist=ti(!1),this.isInFavorites=ti(!1),this.dbPath="/users",this.usersRef=i.list(this.dbPath)}getAllUsers(){return this.usersRef}addUser(i){return q(this,null,function*(){return this.usersRef.push(i).catch(r=>{console.error("Error adding user:",r)})})}getUserIDByEmail(i){return q(this,null,function*(){try{let r=yield this.db.database.ref("/users").orderByChild("email").equalTo(i).once("value");if(r.exists()){let s=r.val();return Object.keys(s)[0]}else return console.log("No user found with the provided email."),null}catch(r){return console.error("Error fetching userID:",r),null}})}addToWatchlist(i,r){return q(this,null,function*(){try{let o=this.db.database.ref(`${this.dbPath}/${i}/watchlist`).child(r.id.toString());(yield o.once("value")).exists()?(yield this.removeFromWatchlist(i,r.id.toString()),this.isInWatchlist.set(!1)):(yield o.set(r),this.isInWatchlist.set(!0))}catch(s){console.error("Error adding show to watchlist:",s)}})}checkIfInWatchlist(i,r){return q(this,null,function*(){try{return(yield this.db.database.ref(`${this.dbPath}/${i}/watchlist/${r}`).once("value")).exists()}catch(s){return console.error("Error checking watchlist status:",s),!1}})}removeFromWatchlist(i,r){return q(this,null,function*(){try{yield this.db.database.ref(`${this.dbPath}/${i}/watchlist`).child(r).remove()}catch(s){console.error("Error removing show from watchlist:",s)}})}getWatchlist(i){return q(this,null,function*(){try{let o=(yield this.db.database.ref(`${this.dbPath}/${i}/watchlist`).once("value")).val()||{};return Object.values(o)}catch(r){return console.error("Error fetching watchlist:",r),[]}})}addToFavorites(i,r){return q(this,null,function*(){try{let o=this.db.database.ref(`${this.dbPath}/${i}/favoriteShows`).child(r.id.toString());(yield o.once("value")).exists()?(yield this.removeFromFavorites(i,r.id.toString()),this.isInFavorites.set(!1)):(yield o.set(r),this.isInFavorites.set(!0))}catch(s){console.error("Error adding show to favorites:",s)}})}removeFromFavorites(i,r){return q(this,null,function*(){try{yield this.db.database.ref(`${this.dbPath}/${i}/favoriteShows`).child(r).remove()}catch(s){console.error("Error removing show from favorites:",s)}})}checkIfInFavorites(i,r){return q(this,null,function*(){try{return(yield this.db.database.ref(`${this.dbPath}/${i}/favoriteShows/${r}`).once("value")).exists()}catch(s){return console.error("Error checking favorites status:",s),!1}})}getFavorites(i){return q(this,null,function*(){try{let o=(yield this.db.database.ref(`${this.dbPath}/${i}/favoriteShows`).once("value")).val()||{};return Object.values(o)}catch(r){return console.error("Error fetching favorite shows:",r),[]}})}addPost(i,r){return this.usersRef.update(i,{posts:this.db.database.ref(`${this.dbPath}/${i}/posts`).push(r)})}addLike(i,r){return this.usersRef.update(i,{likes:this.db.database.ref(`${this.dbPath}/${i}/likes`).push(r)})}};e.\u0275fac=function(r){return new(r||e)(ae(F_))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function tU(n,e){n&1&&(g(0,"li"),P(1,"Name is required"),_())}function nU(n,e){n&1&&(g(0,"li"),P(1,"At least 3 characters"),_())}function iU(n,e){n&1&&(g(0,"li"),P(1,"Up to 20 characters only"),_())}function rU(n,e){if(n&1&&(g(0,"div",25)(1,"ul"),j(2,tU,2,0,"li",26)(3,nU,2,0,"li",26)(4,iU,2,0,"li",26),_()()),n&2){let t,i,r,s=L();w(2),I("ngIf",(t=s.registerForm.get("name"))==null?null:t.getError("required")),w(),I("ngIf",(i=s.registerForm.get("name"))==null?null:i.getError("minlength")),w(),I("ngIf",(r=s.registerForm.get("name"))==null?null:r.getError("maxlength"))}}function sU(n,e){n&1&&(g(0,"li"),P(1,"Email is required"),_())}function oU(n,e){n&1&&(g(0,"li"),P(1,"Invalid email format"),_())}function aU(n,e){if(n&1&&(g(0,"div",25)(1,"ul"),j(2,sU,2,0,"li",26)(3,oU,2,0,"li",26),_()()),n&2){let t,i,r=L();w(2),I("ngIf",(t=r.registerForm.get("email"))==null?null:t.getError("required")),w(),I("ngIf",(i=r.registerForm.get("email"))==null?null:i.getError("pattern"))}}function lU(n,e){n&1&&(g(0,"li"),P(1,"Password is required"),_())}function cU(n,e){n&1&&(g(0,"li")(1,"ul")(2,"li"),P(3,"Password must be at least 8 characters"),_(),g(4,"li"),P(5,"Include upper and lower case letters"),_(),g(6,"li"),P(7,"At least one number"),_(),g(8,"li"),P(9,"At least one special character"),_()()())}function uU(n,e){if(n&1&&(g(0,"div",25)(1,"ul"),j(2,lU,2,0,"li",26)(3,cU,10,0,"li",26),_()()),n&2){let t,i,r=L();w(2),I("ngIf",(t=r.registerForm.get("password"))==null?null:t.getError("required")),w(),I("ngIf",(i=r.registerForm.get("password"))==null?null:i.getError("pattern"))}}function dU(n,e){n&1&&(g(0,"div",25)(1,"ul")(2,"li"),P(3,"Password does not match"),_()()())}function hU(n,e){n&1&&(g(0,"li"),P(1,"Date of birth is required"),_())}function pU(n,e){n&1&&(g(0,"li"),P(1,"Invalid date format (YYYY-MM-DD)"),_())}function fU(n,e){if(n&1&&(g(0,"div",25)(1,"ul"),j(2,hU,2,0,"li",26)(3,pU,2,0,"li",26),_()()),n&2){let t,i,r=L();w(2),I("ngIf",(t=r.registerForm.get("dateOfBirth"))==null?null:t.getError("required")),w(),I("ngIf",(i=r.registerForm.get("dateOfBirth"))==null?null:i.getError("pattern"))}}function mU(n,e){if(n&1&&(g(0,"div",27)(1,"ul")(2,"li"),P(3),_()()()),n&2){let t=L();w(3),ee(t.msgError)}}var GR=(()=>{let e=class e{constructor(){this._AuthService=B(Xn),this._FormBuilder=B(Qd),this._Router=B(ct),this._FireStoreService=B(Cs),this.msgError="",this.registerForm=this._FormBuilder.group({name:[null,[_t.required,_t.minLength(3),_t.maxLength(20)]],email:[null,[_t.required,_t.email,_t.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/)]],password:[null,[_t.required,_t.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]],rePassword:[null,[_t.required]],dateOfBirth:[null,[_t.required,_t.pattern(/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/)]],gender:[null,_t.required]},{validators:[this.confirmPassword]})}confirmPassword(i){return i.get("password")?.value===i.get("rePassword")?.value?null:{mismatch:!0}}signUp(){this.registerForm.valid&&this._AuthService.signUp(this.registerForm.value).subscribe({next:i=>q(this,null,function*(){if(i.message==="success"){let r=et(he({},this.registerForm.value),{createdAt:new Date().toISOString(),watchlist:[],favoriteShows:[],posts:[],likes:[]});yield this._FireStoreService.addUser(r),this._Router.navigate(["/login"])}}),error:i=>{this.msgError=i.error.error}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-register"]],standalone:!0,features:[fe],decls:46,vars:8,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50","log_container"],[1,"w-full","max-w-lg","p-8","bg-black","bg-opacity-70","rounded-lg","shadow-lg",3,"ngSubmit","formGroup"],[1,"text-white","text-xl","py-3","capitalize"],[1,"grid","grid-cols-2","gap-2"],[1,"relative","mb-8"],["formControlName","name","autocomplete","off","type","text","id","floating_name","placeholder"," ",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["for","floating_name",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["class","text-red-500 text-sm mt-2",4,"ngIf"],["formControlName","email","autocomplete","off","type","email","id","floating_email","placeholder"," ",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["for","floating_email",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["formControlName","password","autocomplete","off","type","password","id","floating_password","placeholder"," ",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["for","floating_password",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["formControlName","rePassword","autocomplete","off","type","password","id","floating_repeat_password","placeholder"," ",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["for","floating_repeat_password",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["formControlName","dateOfBirth","autocomplete","off","type","date","id","floating_date_of_birth","placeholder"," ",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["for","floating_date_of_birth",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["formControlName","gender","id","gender",1,"block","w-full","py-4","text-lg","text-white","bg-transparent","border-b-2","border-gray-600","appearance-none","focus:outline-none","focus:ring-0","focus:border-red-600","peer"],["value","","selected",""],["value","male",1,"text-black"],["value","female",1,"text-black"],["for","gender",1,"absolute","text-sm","text-gray-400","transition-transform","transform","scale-75","-translate-y-8","top-4","left-0","peer-placeholder-shown:translate-y-0","peer-placeholder-shown:scale-100","peer-focus:scale-75","peer-focus:-translate-y-8"],["type","submit",1,"w-full","py-3","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-4","focus:ring-red-500","rounded-lg","text-base","font-medium","transition",3,"disabled"],[1,"text-white","text-lg","py-3"],["routerLink","/login",1,"underline"],["class","text-whitebg-cyan-800 text-lg mt-2 p-2",4,"ngIf"],[1,"text-red-500","text-sm","mt-2"],[4,"ngIf"],[1,"text-whitebg-cyan-800","text-lg","mt-2","p-2"]],template:function(r,s){if(r&1&&(g(0,"div",0)(1,"form",1),re("ngSubmit",function(){return s.signUp()}),g(2,"h1",2),P(3,"Sign up"),_(),g(4,"div",3)(5,"div",4),U(6,"input",5),g(7,"label",6),P(8," Name "),_(),j(9,rU,5,3,"div",7),_(),g(10,"div",4),U(11,"input",8),g(12,"label",9),P(13," Email address "),_(),j(14,aU,4,2,"div",7),_(),g(15,"div",4),U(16,"input",10),g(17,"label",11),P(18," Password "),_(),j(19,uU,4,2,"div",7),_(),g(20,"div",4),U(21,"input",12),g(22,"label",13),P(23," Confirm password "),_(),j(24,dU,4,0,"div",7),_(),g(25,"div",4),U(26,"input",14),g(27,"label",15),P(28," Date of birth "),_(),j(29,fU,4,2,"div",7),_(),g(30,"div",4)(31,"select",16),U(32,"option",17),g(33,"option",18),P(34,"Male"),_(),g(35,"option",19),P(36,"Female"),_()(),g(37,"label",20),P(38," Gender "),_()()(),g(39,"button",21),P(40," Sign Up "),_(),g(41,"div",22),P(42,"Already have an account? "),g(43,"a",23),P(44,"Sign in now."),_()(),j(45,mU,4,1,"div",24),_()()),r&2){let o,a,l,c;w(),I("formGroup",s.registerForm),w(8),I("ngIf",((o=s.registerForm.get("name"))==null?null:o.errors)&&((o=s.registerForm.get("name"))==null?null:o.touched)),w(5),I("ngIf",((a=s.registerForm.get("email"))==null?null:a.errors)&&((a=s.registerForm.get("email"))==null?null:a.touched)),w(5),I("ngIf",((l=s.registerForm.get("password"))==null?null:l.errors)&&((l=s.registerForm.get("password"))==null?null:l.touched)),w(5),I("ngIf",s.registerForm.getError("mismatch")),w(5),I("ngIf",((c=s.registerForm.get("dateOfBirth"))==null?null:c.errors)&&((c=s.registerForm.get("dateOfBirth"))==null?null:c.touched)),w(10),I("disabled",s.registerForm.invalid),w(6),I("ngIf",s.msgError)}},dependencies:[ta,Bd,Wd,Kd,Mn,Hd,fn,zd,qd,Gd,Re],styles:['.log_container[_ngcontent-%COMP%]{background-image:url("./media/net_log_x-PPDAZZP4.jpg");background-position:center;background-size:cover}']});let n=e;return n})();var HR=(n,e)=>{let t=B(ct);O1(()=>{}),Cd(()=>{});let i=B(Nt);return Zo(i)?localStorage.getItem("S&MToken")!==null?(t.navigate(["/home"]),!1):!0:!1};var WR=(n,e)=>{let t=B(ct);return typeof localStorage<"u"?localStorage.getItem("S&MToken")!==null?!0:(t.navigate(["/login"]),!1):!1};function gU(n,e,t,i){let r=window&&!!window.document&&window.document.documentElement,s=r&&e?window:t;if(n&&(s=n&&r&&typeof n=="string"?_U(n,t.nativeElement,i):n,!s))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return s}function _U(n,e,t){return(t?window.document:e).querySelector(n)}function ib(n){return n&&!n.firstChange}function vU(){return typeof window<"u"}var wU={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},yU={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},rb=class{constructor(e=!0){this.vertical=e,this.propsMap=e?wU:yU}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}};function bU(n,e,t){return!!(n&&e||!t&&e)}function xU({windowElement:n,axis:e}){return SU({axis:e,isWindow:EU(n)},n)}function SU(n,e){let t=n.isWindow||e&&!e.nativeElement?e:e.nativeElement;return et(he({},n),{container:t})}function EU(n){return["Window","global"].some(t=>Object.prototype.toString.call(n).includes(t))}function ab(n,e){return n?e.document.documentElement:null}function KR(n,e){let t=IU(e);return e.isWindow?TU(t,n,e):CU(t,n,e)}function TU(n,e,t){let{axis:i,container:r,isWindow:s}=t,{offsetHeightKey:o,clientHeightKey:a}=QR(i),l=n+XR(ab(s,r),i,s),c=YR(e.nativeElement,s,o,a),d=AU(e.nativeElement,i,s)+c;return{height:n,scrolled:l,totalToScroll:d,isWindow:s}}function CU(n,e,t){let{axis:i,container:r}=t,s=r[i.scrollTopKey()],o=r[i.scrollHeightKey()];return{height:n,scrolled:s,totalToScroll:o,isWindow:!1}}function QR(n){return{offsetHeightKey:n.offsetHeightKey(),clientHeightKey:n.clientHeightKey()}}function IU({container:n,isWindow:e,axis:t}){let{offsetHeightKey:i,clientHeightKey:r}=QR(t);return YR(n,e,i,r)}function YR(n,e,t,i){if(isNaN(n[t])){let r=ab(e,n);return r?r[i]:0}else return n[t]}function AU(n,e,t){let i=e.topKey();if(n.getBoundingClientRect)return n.getBoundingClientRect()[i]+XR(n,e,t)}function XR(n,e,t){let i=e.pageYOffsetKey(),r=e.scrollTopKey(),s=e.offsetTopKey();return isNaN(window.pageYOffset)?ab(t,n)[r]:n.ownerDocument?n.ownerDocument.defaultView[i]:n[s]}function PU(n,e={down:0,up:0},t){let i,r;if(n.totalToScroll<=0)return!1;let s=n.isWindow?n.scrolled:n.height+n.scrolled;if(t)i=(n.totalToScroll-s)/n.totalToScroll,r=(e?.down?e.down:0)/10;else{let a=n.scrolled+(n.totalToScroll-s);i=n.scrolled/a,r=(e?.up?e.up:0)/10}return i<=r}function RU(n,e){return n<e.scrolled}function kU(n,e,t){let i=RU(n,e);return{fire:PU(e,t,i),scrollDown:i}}var sb=class{constructor(e){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},Object.assign(this,e)}updateScrollPosition(e){return this.lastScrollPosition=e}updateTotalToScroll(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}updateScroll(e,t){this.updateScrollPosition(e),this.updateTotalToScroll(t)}updateTriggeredFlag(e,t){t?this.triggered.down=e:this.triggered.up=e}isTriggeredScroll(e,t){return t?this.triggered.down===e:this.triggered.up===e}};function DU(n){let{scrollContainer:e,scrollWindow:t,element:i,fromRoot:r}=n,s=xU({axis:new rb(!n.horizontal),windowElement:gU(e,t,i,r)}),o=new sb({totalToScroll:KR(i,s).totalToScroll}),a={container:s.container,throttle:n.throttle},l={up:n.upDistance,down:n.downDistance};return MU(a).pipe(Rn(()=>Te(KR(i,s))),Ce(c=>NU(o.lastScrollPosition,c,l)),Mt(({stats:c})=>o.updateScroll(c.scrolled,c.totalToScroll)),$n(({fire:c,scrollDown:d,stats:{totalToScroll:h}})=>bU(n.alwaysCallback,c,o.isTriggeredScroll(h,d))),Mt(({scrollDown:c,stats:{totalToScroll:d}})=>{o.updateTriggeredFlag(d,c)}),Ce(OU))}function MU(n){let e=u1(n.container,"scroll");return n.throttle&&(e=e.pipe(g1(n.throttle,void 0,{leading:!0,trailing:!0}))),e}function NU(n,e,t){let{scrollDown:i,fire:r}=kU(n,e,t);return{scrollDown:i,fire:r,stats:e}}var ob={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function OU(n){let{scrollDown:e,stats:{scrolled:t}}=n;return{type:e?ob.DOWN:ob.UP,payload:{currentScrollPosition:t}}}var Qf=(()=>{let e=class e{constructor(i,r){this.element=i,this.zone=r,this.scrolled=new Vi,this.scrolledUp=new Vi,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:i,infiniteScrollDisabled:r,infiniteScrollDistance:s}){let o=ib(i),a=ib(r),l=ib(s),c=!a&&!this.infiniteScrollDisabled||a&&!r.currentValue||l;(o||a||l)&&(this.destroyScroller(),c&&this.setup())}ngOnDestroy(){this.destroyScroller()}setup(){vU()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=DU({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(i=>this.handleOnScroll(i))})}handleOnScroll({type:i,payload:r}){let s=i===ob.DOWN?this.scrolled:this.scrolledUp;FU(s)&&this.zone.run(()=>s.emit(r))}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(Si(bd),Si(ht))},e.\u0275dir=ql({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},standalone:!0,features:[Hl]});let n=e;return n})();function FU(n){return n.observed??n.observers.length>0}var LU=(n,e)=>e._id,VU=()=>[import("./chunk-PXWI3DNH.js").then(n=>n.CommentsComponent)],UU=(n,e)=>({"bg-blue-100":n,"bg-gray-50":e});function $U(n,e){n&1&&(g(0,"div",31),ei(),g(1,"svg",32),U(2,"path",33),_(),cr(),g(3,"p",34)(4,"span",35),P(5,"Click to upload"),_(),P(6," or drag and drop"),_(),g(7,"p",36),P(8,"SVG, PNG or JPG"),_()())}function zU(n,e){if(n&1&&(g(0,"div",37),U(1,"img",38),_()),n&2){let t=L();w(),I("src",t.previewUrl,ge)}}function jU(n,e){if(n&1){let t=Ue();g(0,"button",39),re("click",function(){ke(t);let r=L();return De(r.removeFile())}),P(1," remove image "),_()}}function BU(n,e){if(n&1&&(g(0,"p",25),P(1),_()),n&2){let t=L();w(),ee(t.msgError)}}function qU(n,e){n&1&&(g(0,"div",26),U(1,"div",40),_())}function GU(n,e){if(n&1&&(g(0,"div",48),U(1,"img",51),_()),n&2){let t=L().$implicit;w(),I("src",t.image,ge)("alt",t.body)}}function HU(n,e){if(n&1&&U(0,"app-comments",52),n&2){let t=L().$implicit;I("postId",t._id)}}function WU(n,e){if(n&1&&(g(0,"div",29)(1,"div",41)(2,"div",42),U(3,"img",43),g(4,"div",44)(5,"h2",45),P(6),_(),g(7,"p",46),P(8),_e(9,"date"),_()()()(),g(10,"div",47),P(11),_(),j(12,GU,2,2,"div",48),g(13,"div",49)(14,"div",42)(15,"button",50,0),P(17," show comments "),_()()(),j(18,HU,1,1),Id(19,18,VU),Ad(15),_()),n&2){let t=e.$implicit;w(3),I("src",t.user.photo,ge),w(3),ee(t.user.name),w(2),ee(Ae(9,5,t.createdAt)),w(3),we(" ",t.body," "),w(),je(12,t.image?12:-1)}}var JR=(()=>{let e=class e{constructor(){this._PostsService=B(Ts),this.postsList=ti([]),this.isLoading=!0,this.lastPage=28,this.isFileOver=!1,this.currentPage=ti(1)}ngOnInit(){this._PostsService.getLimitedPosts().subscribe({next:i=>{this.currentPage.set(i.paginationInfo.numberOfPages),this._PostsService.getLimitedPosts(this.currentPage()).subscribe({next:r=>{this.postsList.set(r.posts.reverse()),this.isLoading=!1,this.currentPage.set(r.paginationInfo.numberOfPages-1)},error:r=>{console.error("Error fetching posts:",r)}})},error:i=>{console.error("Error fetching posts:",i)}})}onScroll(){this.currentPage()>1&&(this._PostsService.getLimitedPosts(this.currentPage()).subscribe({next:i=>{this.postsList.set(this.postsList().concat(i.posts.reverse()))},error:i=>{console.error("Error fetching posts:",i)}}),this.currentPage.update(i=>i-1))}getImage(i){let r=i.target;r.files&&r.files.length>0&&(this.savedFile=r.files[0],this.previewFile(this.savedFile))}onDragOver(i){i.preventDefault(),this.isFileOver=!0}onDragLeave(i){i.preventDefault(),this.isFileOver=!1}onDrop(i){i.preventDefault(),this.isFileOver=!1,i.dataTransfer&&i.dataTransfer.files.length>0&&(this.savedFile=i.dataTransfer.files[0],this.previewFile(this.savedFile))}previewFile(i){let r=new FileReader;r.onload=s=>{this.previewUrl=s.target?.result},r.readAsDataURL(i)}removeFile(){this.savedFile=null,this.previewUrl=null;let i=document.getElementById("dropzone-file");i&&(i.value="")}closeModal(){let i=document.getElementById("authentication-modal");i&&(i.classList.add("hidden"),i.classList.remove("flex"))}showModal(){let i=document.getElementById("authentication-modal");i&&(i.classList.remove("hidden"),i.classList.add("flex"))}createPost(){let i=new FormData;if(!this.content||this.content.trim()===""){this.msgError="Post content is required";return}if(this.savedFile){if(!["image/png","image/jpeg","image/svg"].includes(this.savedFile.type)){this.msgError="Invalid file type. Only PNG and JPEG are allowed.";return}if(this.savedFile.size>4194304){this.msgError="File size exceeds the 4MB limit";return}}else{this.msgError="Image is required";return}i.append("body",this.content),i.append("image",this.savedFile),this._PostsService.createPost(i).subscribe({next:r=>{r.message=="success"&&(this.ngOnInit(),this.removeFile(),this.content="",this.closeModal())},error:r=>{this.msgError="try smaller image",console.error("Error creating post:",r)}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-timeline"]],standalone:!0,features:[fe],decls:38,vars:11,consts:[["showComment",""],[1,"lg:w-1/2","mx-auto","mb-20"],[1,"bg-slate-200","p-3","rounded-md"],["readonly","","placeholder","what's on your shoulder?","type","text",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"click"],["id","authentication-modal","tabindex","-1",1,"hidden","overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","z-50","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","p-4","w-1/2","max-h-full"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"end-2.5","text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5"],[1,"space-y-4"],["for","body",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","body","id","body","placeholder","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-center","w-full"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","dark:hover:bg-gray-800","dark:bg-gray-700","hover:bg-gray-100","dark:border-gray-600","dark:hover:border-gray-500",3,"dragover","dragleave","drop","ngClass"],["class","flex flex-col items-center justify-center pt-5 pb-6",4,"ngIf"],["class","mt-4",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden",3,"change"],[1,"flex","justify-around","items-center","gap-5"],["class"," text-white bg-red-300 hover:bg-red-500 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-2 py-2.5 text-center",3,"click",4,"ngIf"],["type","submit",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-2","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"error","text-center","text-red-600"],[1,"flex","justify-center","items-center"],[1,"container","px-4","py-6","flex","justify-center","items-center"],[1,"lg:w-1/2","w-full"],[1,"bg-white","shadow-md","rounded-lg","mb-6","p-4"],["infiniteScroll","",1,"search-results",3,"scrolled","infiniteScrollDistance"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 16",1,"w-8","h-8","mb-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"],[1,"mb-2","text-sm","text-gray-500","dark:text-gray-400"],[1,"font-semibold"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"mt-4"],["alt","File Preview",1,"w-64","h-auto","border","border-gray-300","rounded-lg",3,"src"],[1,"text-white","bg-red-300","hover:bg-red-500","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-2","py-2.5","text-center",3,"click"],[1,"loader"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center"],["alt","User Avatar",1,"w-12","h-12","rounded-full",3,"src"],[1,"ml-3"],[1,"font-semibold","text-lg"],[1,"text-sm","text-gray-600"],[1,"text-gray-800","mb-4","break-words"],[1,"mb-4"],[1,"flex","items-center","justify-between","text-gray-500","text-sm","mb-4"],[1,"focus:outline-none","flex","items-center"],[1,"rounded-lg","w-full",3,"src","alt"],[3,"postId"]],template:function(r,s){r&1&&(g(0,"div",1)(1,"div",2)(2,"input",3),re("click",function(){return s.showModal()}),_()(),g(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h3",8),P(8," Add New post "),_(),g(9,"button",9),re("click",function(){return s.closeModal()}),ei(),g(10,"svg",10),U(11,"path",11),_(),cr(),g(12,"span",12),P(13,"Close modal"),_()()(),g(14,"div",13)(15,"div",14)(16,"div")(17,"label",15),P(18,"content "),_(),g(19,"textarea",16),oi("ngModelChange",function(a){return si(s.content,a)||(s.content=a),a}),_()(),g(20,"div")(21,"div",17)(22,"label",18),re("dragover",function(a){return s.onDragOver(a)})("dragleave",function(a){return s.onDragLeave(a)})("drop",function(a){return s.onDrop(a)}),j(23,$U,9,0,"div",19)(24,zU,2,1,"div",20),g(25,"input",21),re("change",function(a){return s.getImage(a)}),_()()()(),g(26,"div",22),j(27,jU,2,0,"button",23),g(28,"button",24),re("click",function(){return s.createPost()}),P(29,"Add post"),_()(),j(30,BU,2,1,"p",25),_()()()()()(),j(31,qU,2,0,"div",26),g(32,"div",27)(33,"div",28),ln(34,WU,21,7,"div",29,LU),g(36,"div",30),re("scrolled",function(){return s.onScroll()}),_()(),U(37,"app-arrowtop"),_()),r&2&&(w(19),ri("ngModel",s.content),w(3),I("ngClass",Ve(8,UU,s.isFileOver,!s.isFileOver)),w(),I("ngIf",!s.previewUrl),w(),I("ngIf",s.previewUrl),w(3),I("ngIf",s.previewUrl),w(3),je(30,s.msgError?30:-1),w(),je(31,s.isLoading?31:-1),w(3),cn(s.postsList()),w(2),I("infiniteScrollDistance",1))},dependencies:[At,Re,Es,Qf,Nn,Mn,fn,ci,Mr],styles:['.loader[_ngcontent-%COMP%]{width:50px;aspect-ratio:1;display:grid}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{content:"";grid-area:1/1;border-radius:50%;background:#f03355;-webkit-mask:repeating-linear-gradient(#000 0 5px,#0000 0 10px);animation:_ngcontent-%COMP%_l35 1.5s infinite}.loader[_ngcontent-%COMP%]:after{-webkit-mask:repeating-linear-gradient(#0000 0 5px,#000 0 10px);--s:-1}@keyframes _ngcontent-%COMP%_l35{0%,10%{transform:translate(0) rotate(0)}35%{transform:translate(calc(var(--s,1)*50%)) rotate(0)}66%{transform:translate(calc(var(--s,1)*50%)) rotate(calc(var(--s,1)*180deg))}90%,to{transform:translate(0) rotate(calc(var(--s,1)*180deg))}}']});let n=e;return n})();var ZR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-mdb-layout"]],standalone:!0,features:[fe],decls:1,vars:0,template:function(r,s){r&1&&U(0,"router-outlet")},dependencies:[Ci]});let n=e;return n})();var ek=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-linked-layout"]],standalone:!0,features:[fe],decls:1,vars:0,template:function(r,s){r&1&&U(0,"router-outlet")},dependencies:[Ci]});let n=e;return n})();var tk=(()=>{let e=class e{constructor(){this.baseUrl="https://image.tmdb.org/t/p/w300/"}transform(i){if(!i)return"";let r=i.split(",");return this.baseUrl+(r[1]||"")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"extractImageUrl",type:e,pure:!0,standalone:!0});let n=e;return n})();var nk=(()=>{let e=class e{transform(i){return i&&i.split(",").slice(2).join(",")||""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"extractPostBody",type:e,pure:!0,standalone:!0});let n=e;return n})();var KU=(n,e)=>e._id,QU=()=>[import("./chunk-PXWI3DNH.js").then(n=>n.CommentsComponent)];function YU(n,e){n&1&&(g(0,"div",1),U(1,"div",6),_())}function XU(n,e){if(n&1&&U(0,"app-comments",18),n&2){let t=L().$implicit;I("postId",t._id)}}function JU(n,e){if(n&1&&(g(0,"div",4)(1,"div",7)(2,"div",8),U(3,"img",9),g(4,"div",10)(5,"h2",11),P(6),_(),g(7,"p",12),P(8),_e(9,"date"),_()()()(),g(10,"div",13),P(11),_e(12,"extractPostBody"),_(),g(13,"div",14),U(14,"img",15),_e(15,"extractImageUrl"),_(),g(16,"div",16)(17,"div",8)(18,"button",17,0),P(20," show comments "),_()()(),j(21,XU,1,1),Id(22,21,QU),Ad(18),_()),n&2){let t=e.$implicit;w(3),I("src",t.user.photo,ge),w(3),ee(t.user.name),w(2),ee(Ae(9,5,t.createdAt)),w(3),we(" ",Ae(12,7,t.body)," "),w(3),I("src",Ae(15,9,t.body),ge)}}var ik=(()=>{let e=class e{constructor(){this._PostsService=B(Ts),this.postsList=ti([]),this.isLoading=!0,this.lastPage=28,this.isFileOver=!1,this.currentPage=ti(1)}ngOnInit(){this._PostsService.getLimitedPosts().subscribe({next:i=>{this.currentPage.set(i.paginationInfo.numberOfPages),this._PostsService.getLimitedPosts(this.currentPage()).subscribe({next:r=>{let s=r.posts.filter(o=>o.body&&typeof o.body=="string"&&o.body.startsWith("ms,"));s.length>0?this.postsList.set(s.reverse()):(this.postsList.set([]),console.log("No posts found")),this.isLoading=!1,this.currentPage.set(r.paginationInfo.numberOfPages-1)},error:r=>{console.error("Error fetching posts:",r)}})},error:i=>{console.error("Error fetching posts:",i)}})}onScroll(){this.currentPage()>1&&(this._PostsService.getLimitedPosts(this.currentPage()).subscribe({next:i=>{let r=i.posts.filter(s=>s.body&&typeof s.body=="string"&&s.body.startsWith("ms,"));if(r.length>0)this.postsList.set(this.postsList().concat(r.reverse()));else return},error:i=>{console.error("Error fetching posts:",i)}}),this.currentPage.update(i=>i-1))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-movies-timeline"]],standalone:!0,features:[fe],decls:7,vars:2,consts:[["showComment",""],[1,"flex","justify-center","items-center"],[1,"container","py-6","flex","justify-center","items-center"],[1,"lg:w-96","w-full"],[1,"bg-white","shadow-md","rounded-lg","mb-6","p-4"],["infiniteScroll","",1,"search-results",3,"scrolled","infiniteScrollDistance"],[1,"loader"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center"],["alt","User Avatar",1,"w-12","h-12","rounded-full",3,"src"],[1,"ml-3"],[1,"font-semibold","text-lg"],[1,"text-sm","text-gray-600"],[1,"text-gray-800","mb-4","break-words"],[1,"mb-4"],["alt","Post-Image",1,"rounded-lg","w-full",3,"src"],[1,"flex","items-center","justify-between","text-gray-500","text-sm","mb-4"],[1,"focus:outline-none","flex","items-center"],[3,"postId"]],template:function(r,s){r&1&&(j(0,YU,2,0,"div",1),g(1,"div",2)(2,"div",3),ln(3,JU,24,11,"div",4,KU),g(5,"div",5),re("scrolled",function(){return s.onScroll()}),_()(),U(6,"app-arrowtop"),_()),r&2&&(je(0,s.isLoading?0:-1),w(3),cn(s.postsList()),w(2),I("infiniteScrollDistance",1))},dependencies:[tk,nk,At,Es,Qf,Nn],styles:['.loader[_ngcontent-%COMP%]{width:50px;aspect-ratio:1;display:grid}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{content:"";grid-area:1/1;border-radius:50%;background:#f03355;-webkit-mask:repeating-linear-gradient(#000 0 5px,#0000 0 10px);animation:_ngcontent-%COMP%_l35 1.5s infinite}.loader[_ngcontent-%COMP%]:after{-webkit-mask:repeating-linear-gradient(#0000 0 5px,#000 0 10px);--s:-1}@keyframes _ngcontent-%COMP%_l35{0%,10%{transform:translate(0) rotate(0)}35%{transform:translate(calc(var(--s,1)*50%)) rotate(0)}66%{transform:translate(calc(var(--s,1)*50%)) rotate(calc(var(--s,1)*180deg))}90%,to{transform:translate(0) rotate(calc(var(--s,1)*180deg))}}']});let n=e;return n})();function ZU(n,e){if(n&1){let t=Ue();g(0,"button",6),re("click",function(){ke(t);let r=L();return De(r.clearSearchTerm())}),ei(),g(1,"svg",7),U(2,"path",8),_()()}}function e$(n,e){if(n&1&&(g(0,"div",9),P(1),_()),n&2){let t=L();w(),we(' No results found for "',t.searchTerm,'". ')}}function t$(n,e){if(n&1&&(ni(0),g(1,"div",20),ei(),g(2,"svg",21),U(3,"path",22),_(),cr(),g(4,"p"),P(5),_()(),ii()),n&2){let t=L().$implicit;w(5),we("",t.vote_average," / 10")}}function n$(n,e){if(n&1&&(ni(0),g(1,"div",23)(2,"p"),P(3),_()(),ii()),n&2){let t=L().$implicit;w(3),ee(t.media_type)}}function i$(n,e){if(n&1&&(g(0,"li",14),U(1,"img",15),g(2,"div",16)(3,"h3",17),P(4),_(),g(5,"div",18),j(6,t$,6,1,"ng-container",19)(7,n$,4,1,"ng-container",19),_()()()),n&2){let t=e.$implicit;w(),zn("alt",t.name||t.title),I("src","https://image.tmdb.org/t/p/w500"+(t.poster_path?t.poster_path:t.profile_path),ge),w(3),ee(t.name||t.title),w(2),I("ngIf",t.vote_average),w(),I("ngIf",t.media_type)}}function r$(n,e){if(n&1&&(g(0,"div",10)(1,"div",11)(2,"ul",12),j(3,i$,8,5,"li",13),_()()()),n&2){let t=L();w(3),I("ngForOf",t.searchResults)}}var rk=(()=>{let e=class e{constructor(){this._SearchService=B(Wf),this.searchResults=[]}searchItem(i){this._SearchService.getSearchResults(i,1).subscribe({next:r=>{r.results.length,this.searchResults=r.results}})}clearSearchTerm(){this.searchTerm="",this.searchItem("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-search-results"]],standalone:!0,features:[fe],decls:6,vars:4,consts:[[1,"flex","flex-col","items-center","justify-center","min-h-screen","bg-gray-100","p-4"],[1,"relative","mb-6"],["type","text","placeholder","Search for movies or TV shows...",1,"w-full","max-w-md","py-2","px-4","rounded-full","text-gray-700","outline-none","text-lg","border","border-gray-300","shadow-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","input","ngModel"],["class","absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-800",3,"click",4,"ngIf"],["class","text-red-500 text-lg text-center",4,"ngIf"],["class","w-full max-w-4xl mt-8",4,"ngIf"],[1,"absolute","right-3","top-1/2","transform","-translate-y-1/2","text-gray-500","hover:text-gray-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-red-500","text-lg","text-center"],[1,"w-full","max-w-4xl","mt-8"],[1,"bg-white","p-4","rounded-lg","shadow-lg"],[1,"space-y-4"],["class","flex items-start space-x-4 border-b border-gray-200 pb-4",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-4","border-b","border-gray-200","pb-4"],[1,"w-16","h-24","object-cover","rounded-md",3,"src","alt"],[1,"flex-1"],[1,"text-xl","font-semibold","mb-1"],[1,"flex","items-center","space-x-4"],[4,"ngIf"],[1,"flex","items-center","bg-yellow-100","text-yellow-700","text-sm","font-semibold","px-3","py-1","rounded-lg","shadow"],["fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","mr-1","text-yellow-500"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.14 3.49a1 1 0 00.95.69h3.672c.969 0 1.371 1.24.588 1.81l-2.972 2.16a1 1 0 00-.364 1.118l1.14 3.49c.3.921-.755 1.688-1.54 1.118L10 13.011l-2.975 2.16c-.784.57-1.838-.197-1.538-1.118l1.14-3.49a1 1 0 00-.364-1.118L3.291 8.927c-.783-.57-.38-1.81.588-1.81h3.672a1 1 0 00.95-.69l1.14-3.49z"],[1,"bg-blue-100","text-blue-700","text-sm","font-semibold","capitalize","px-3","py-1","rounded-lg","shadow"]],template:function(r,s){r&1&&(g(0,"div",0)(1,"div",1)(2,"input",2),oi("ngModelChange",function(a){return si(s.searchTerm,a)||(s.searchTerm=a),a}),re("input",function(){return s.searchItem(s.searchTerm)}),_(),j(3,ZU,3,0,"button",3),_(),j(4,e$,2,1,"div",4)(5,r$,4,1,"div",5),_()),r&2&&(w(2),ri("ngModel",s.searchTerm),w(),I("ngIf",s.searchTerm),w(),I("ngIf",s.searchResults.length===0&&s.searchTerm),w(),I("ngIf",s.searchResults.length>0))},dependencies:[Re,wt,Nn,Mn,fn,ci]});let n=e;return n})();var sk=(()=>{let e=class e{transform(i){if(typeof i!="number"||isNaN(i))return 0;if(i<60)return i+"m ";if(i>60){let r=Math.floor(i/60),s=i%60;return r+"h "+s+"m "}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"toHour",type:e,pure:!0,standalone:!0});let n=e;return n})();var s$=(n,e)=>e.id,o$=n=>["/m/person",n];function a$(n,e){if(n&1&&U(0,"img",8),n&2){let t=L().$implicit,i=L();I("src",i.mainImageUrl+t.profile_path,ge)("alt",t.name)}}function l$(n,e){if(n&1&&U(0,"img",9),n&2){let t=L().$implicit;I("alt",t.name)}}function c$(n,e){if(n&1&&(g(0,"swiper-slide",2)(1,"div",3)(2,"div",4),j(3,a$,1,2,"img",5)(4,l$,1,1,"ng-template",null,0,Xo),_(),g(6,"p",6),P(7),_(),g(8,"p",7),P(9),_()()()),n&2){let t=e.$implicit,i=Yo(5);w(2),I("routerLink",$t(5,o$,t.id)),w(),I("ngIf",t.profile_path)("ngIfElse",i),w(4),we(" ",t.name," "),w(2),we(" ",t.character," ")}}var ok=(()=>{let e=class e{constructor(){this.mainImageUrl="https://image.tmdb.org/t/p/w500"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-cast-slider"]],inputs:{showCredits:"showCredits",slidesNum:"slidesNum"},standalone:!0,features:[fe],decls:4,vars:8,consts:[["backUp",""],[1,"",3,"slidesPerView","spaceBetween","scrollbar","loop"],[1,"w-40","min-w-40","rounded-lg","transition-transform","duration-500","group"],[1,"mb-10","p-1","credit-item","bg-slate-100","rounded-md","shadow-md","overflow-hidden"],[1,"crp","relative","w-full","h-48",3,"routerLink"],["class","w-full h-full object-cover rounded-lg transform transition-transform duration-500 group-hover:scale-105 group-hover:translate-y-1",3,"src","alt",4,"ngIf","ngIfElse"],[1,"text-sm","md:text-base","mt-2","font-medium","text-black","hover:text-blue-600","transition-colors","duration-200"],[1,"text-sm","text-gray-600"],[1,"w-full","h-full","object-cover","rounded-lg","transform","transition-transform","duration-500","group-hover:scale-105","group-hover:translate-y-1",3,"src","alt"],["src","../../../assets/images/lost_in_Giza.jpeg",1,"w-full","h-full","object-cover","rounded-lg","transform","transition-transform","duration-500","group-hover:scale-105","group-hover:translate-y-1",3,"alt"]],template:function(r,s){r&1&&(g(0,"swiper-container",1),ln(1,c$,10,7,"swiper-slide",2,s$),_e(3,"slice"),_()),r&2&&(I("slidesPerView",s.slidesNum)("spaceBetween",10)("scrollbar",!0)("loop",!0),w(),cn(q1(3,4,s.showCredits.cast,0,9)))},dependencies:[He,Z1,Re]});let n=e;return n})();var ak=(()=>{let e=class e{transform(i,r="USD"){if(i==null)return"";let s;i>=1e9?s=(i/1e9).toFixed(2)+"B":i>=1e6?s=(i/1e6).toFixed(2)+"M":i>=1e3?s=(i/1e3).toFixed(2)+"K":s=i.toFixed(2);let o="";switch(r){case"USD":o="$";break;case"EUR":o="\u20AC";break;case"EGP":o="\xA3";break;default:o=r}return o+s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"formatAmount",type:e,pure:!0,standalone:!0});let n=e;return n})();var u$=["imageCanvas"],lk=(n,e)=>e.id,d$=n=>({"background-image":n,"background-size":"cover","background-position":"center","background-repeat":"no-repeat"}),h$=(n,e)=>["/m/Theater",n,e],p$=(n,e)=>({"text-red-600":n,"text-white":e}),f$=(n,e)=>({"text-green-500":n,"text-white":e}),m$=n=>["/m/person",n],g$=(n,e)=>["/m/show-details",n,e,"cast&crew"],_$=n=>({"background-color":n}),v$=n=>["/m/network",n],w$=(n,e)=>["/m/keyword",n,e],y$=(n,e,t)=>["/m/show-details",n,e,"collection",t];function b$(n,e){if(n&1&&U(0,"img",43),n&2){let t=L(2);zn("alt",t.showDetails.title||t.showDetails.name),I("src",t.mainImageUrl+t.showDetails.poster_path,ge)}}function x$(n,e){if(n&1&&U(0,"img",44),n&2){let t=L(2);zn("alt",t.showDetails.title||t.showDetails.name)}}function S$(n,e){n&1&&(ni(0),P(1,","),ii())}function E$(n,e){if(n&1&&(g(0,"div")(1,"span",45),P(2),_(),j(3,S$,2,0,"ng-container",38),_()),n&2){let t=e.$implicit,i=e.index,r=L(2);w(2),we(" ",t.name," "),w(),I("ngIf",i!==r.showDetails.genres.length-1)}}function T$(n,e){if(n&1&&(g(0,"div"),P(1),_e(2,"toHour"),_()),n&2){let t=L(2);w(),ee(Ae(2,1,t.showDetails.runtime))}}function C$(n,e){n&1&&(g(0,"span",46),P(1," No trailers found. "),_())}function I$(n,e){if(n&1&&(g(0,"div",31),P(1),_()),n&2){let t=L(2);w(),ee(t.showDetails.tagline)}}function A$(n,e){if(n&1&&(g(0,"div",47)(1,"a",48)(2,"span",49),P(3),_()(),g(4,"span"),P(5,"creator"),_()()),n&2){let t=e.$implicit;w(),I("routerLink",$t(2,m$,t.id)),w(2),ee(t.name)}}function P$(n,e){if(n&1&&(g(0,"div",34),ln(1,A$,6,4,"div",47,lk),_()),n&2){let t=L(2);w(),cn(t.showDetails.created_by)}}function R$(n,e){n&1&&(g(0,"h2"),P(1,"Series Cast"),_())}function k$(n,e){n&1&&(g(0,"h2"),P(1,"Top Billed Cast"),_())}function D$(n,e){if(n&1&&(g(0,"section",50),j(1,R$,2,0,"h2",38)(2,k$,2,0,"h2",38),U(3,"app-cast-slider",51),g(4,"span",52),P(5,"full cast and crew"),_()()),n&2){let t=L(2);w(),I("ngIf",t.showType=="tv"),w(),I("ngIf",t.showType=="movie"),w(),I("slidesNum",6)("showCredits",t.showCredits),w(),I("routerLink",Ve(5,g$,t.showType,t.showDetails.id))}}function M$(n,e){n&1&&(g(0,"h2",66),P(1,"Current Season"),_())}function N$(n,e){n&1&&(g(0,"h2",66),P(1,"last Season"),_())}function O$(n,e){if(n&1&&(ni(0),g(1,"span",67),P(2,"Upcoming "),g(3,"span",68),P(4),_()(),g(5,"span"),P(6),_e(7,"date"),_(),ii()),n&2){let t=L(3);w(4),we("Episode: ",t.showDetails.next_episode_to_air.episode_number,""),w(2),we("date: ",lt(7,2,t.showDetails.next_episode_to_air.air_date,"dd/MM/yyyy"),"")}}function F$(n,e){if(n&1&&(g(0,"section",50),j(1,M$,2,0,"h2",53)(2,N$,2,0,"h2",53),g(3,"div",54)(4,"div",55),U(5,"img",56),_(),g(6,"div",57)(7,"h2",58),P(8),_(),g(9,"div",59)(10,"span",60),U(11,"i",61),P(12),_e(13,"percentage"),_(),g(14,"span"),P(15),_e(16,"date"),_(),g(17,"span",62),U(18,"i",63),_(),g(19,"span"),P(20),_()(),g(21,"div",64)(22,"p",65),P(23),_()(),g(24,"div"),j(25,O$,8,5,"ng-container",38),_()()()()),n&2){let t=L(2);w(),I("ngIf",t.showDetails.status=="Returning Series"),w(),I("ngIf",t.showDetails.status=="Ended"),w(3),I("src",t.mainImageUrl+t.showDetails.seasons[t.showDetails.seasons.length-1].poster_path,ge)("alt",t.showDetails.seasons[t.showDetails.seasons.length-1].name),w(3),ee(t.showDetails.seasons[t.showDetails.seasons.length-1].name),w(4),we("",Ae(13,10,t.showDetails.seasons[t.showDetails.seasons.length-1].vote_average),"%"),w(3),ee(lt(16,12,t.showDetails.seasons[t.showDetails.seasons.length-1].air_date,"yyyy")),w(5),we("",t.showDetails.seasons[t.showDetails.seasons.length-1].episode_count," Episodes"),w(3),ee(t.showDetails.seasons[t.showDetails.seasons.length-1].overview),w(2),I("ngIf",t.showDetails.next_episode_to_air==null?null:t.showDetails.next_episode_to_air.episode_number)}}function L$(n,e){if(n&1&&(g(0,"span"),P(1),_()),n&2){let t=L(3);w(),we("(",t.showReviews.total_results,")")}}function V$(n,e){if(n&1&&U(0,"img",83),n&2){let t=L(4);I("src",t.mainImageUrl+t.review.author_details.avatar_path,ge)("alt",t.review.author_details.username)}}function U$(n,e){if(n&1&&(g(0,"span",84)(1,"span"),P(2),_()()),n&2){let t=L(4);I("ngStyle",$t(2,_$,t.getColorForUsername(t.review.author_details.username))),w(2),ee(t.review.author_details.username.charAt(0).toUpperCase())}}function $$(n,e){if(n&1&&(g(0,"span",85),U(1,"i",61),P(2),_e(3,"percentage"),_()),n&2){let t=L(4);w(2),we("",Ae(3,1,t.review.author_details.rating),"% ")}}function z$(n,e){if(n&1){let t=Ue();g(0,"span",86),re("click",function(){ke(t);let r=L(4);return De(r.toggleContent())}),P(1),_()}if(n&2){let t=L(4);w(),we(" ",t.showFullContent?"Read Less":"Read More"," ")}}function j$(n,e){if(n&1&&(g(0,"div",77)(1,"div",78)(2,"div"),j(3,V$,1,2,"img",79)(4,U$,3,4,"span",80),_(),g(5,"div"),P(6),g(7,"div"),j(8,$$,4,3,"span",81),P(9),_e(10,"date"),_()()(),g(11,"div"),P(12),j(13,z$,2,1,"span",82),_()()),n&2){let t=L(3);w(3),I("ngIf",t.review.author_details.avatar_path),w(),I("ngIf",!t.review.author_details.avatar_path),w(2),j1(" A review by ",t.review.author_details.username," (",t.currentStep+1,"/",t.showReviews.total_results,") "),w(2),I("ngIf",t.review.author_details.rating),w(),Xl(" Written by ",t.review.author_details.username," on ",lt(10,10,t.review.created_at,"MMMM d, y")," "),w(3),we(" ",t.showFullContent?t.review.content:t.getTruncatedContent(t.review.content)," "),w(),I("ngIf",t.isContentLong(t.review.content))}}function B$(n,e){if(n&1&&(g(0,"p"),P(1),g(2,"span",87),P(3,"write one?"),_()()),n&2){let t=L(3);w(),we("We don't have any reviews for ",t.showDetails.name||t.showDetails.title,". Would you like to ")}}function q$(n,e){if(n&1){let t=Ue();g(0,"section")(1,"div",69)(2,"h2",70),P(3,"Social"),_(),g(4,"div",71)(5,"h2",72)(6,"span",66),P(7,"Reviews"),_(),j(8,L$,2,1,"span",38),_(),g(9,"div")(10,"button",73),re("click",function(){ke(t);let r=L(2);return De(r.prevReview())}),U(11,"i",74),P(12," prev"),_(),g(13,"button",73),re("click",function(){ke(t);let r=L(2);return De(r.nextReview())}),P(14,"next "),U(15,"i",75),_()()()(),j(16,j$,14,13,"div",76)(17,B$,4,1,"ng-template",null,1,Xo),_()}if(n&2){let t=Yo(18),i=L(2);w(8),I("ngIf",i.showReviews),w(8),I("ngIf",i.review&&i.showReviews.results.length>0)("ngIfElse",t)}}function G$(n,e){if(n&1&&(g(0,"section",88)(1,"h2",70),P(2,"Recommendations"),_(),g(3,"div",89),U(4,"app-movie-slider",90),_()()),n&2){let t=L(2);w(4),I("slidesNum",3)("shows",t.showRecommendations)}}function H$(n,e){if(n&1&&(g(0,"section",88)(1,"h2",91),P(2,"Related"),_(),g(3,"div",89),U(4,"app-movie-slider",90),_()()),n&2){let t=L(2);w(4),I("slidesNum",3)("shows",t.showRelated)}}function W$(n,e){if(n&1&&(ni(0),g(1,"div",92)(2,"a",93),U(3,"i",94),_(),g(4,"a",93),U(5,"i",95),_(),g(6,"a",93),U(7,"i",96),_(),g(8,"a",93),U(9,"i",97),_()(),ii()),n&2){let t=L(2);w(2),I("href","https://www.facebook.com/"+t.showExternalIDs.facebook_id,ge),w(2),I("href","https://x.com/"+t.showExternalIDs.twitter_id,ge),w(2),I("href","https://www.instagram.com/"+t.showExternalIDs.instagram_id,ge),w(2),I("href",t.showDetails.homepage,ge)}}function K$(n,e){if(n&1&&U(0,"img",107),n&2){let t=L().$implicit,i=L(4);I("src",i.mainImageUrl+t.logo_path,ge)("alt",t.name)}}function Q$(n,e){if(n&1&&(g(0,"div",105),j(1,K$,1,2,"img",106),_()),n&2){let t=e.$implicit;I("routerLink",$t(2,v$,t.id)),w(),I("ngIf",t.logo_path)}}function Y$(n,e){if(n&1&&(g(0,"div",100)(1,"h3",101),P(2,"Networks"),_(),j(3,Q$,2,4,"div",104),_()),n&2){let t=L(3);w(3),I("ngForOf",t.showDetails.networks)}}function X$(n,e){if(n&1&&(g(0,"div",100)(1,"h3",101),P(2,"Type"),_(),g(3,"p",102),P(4),_()()),n&2){let t=L(3);w(4),ee(t.showDetails.type)}}function J$(n,e){if(n&1&&(g(0,"div",100)(1,"h3",101),P(2,"Budget"),_(),g(3,"p",102),P(4),_e(5,"formatAmount"),_()()),n&2){let t=L(3);w(4),we("",lt(5,1,t.showDetails.budget,"USD")," ")}}function Z$(n,e){if(n&1&&(g(0,"div",100)(1,"h3",101),P(2,"Revenue"),_(),g(3,"p",102),P(4),_e(5,"formatAmount"),_()()),n&2){let t=L(3);w(4),ee(lt(5,1,t.showDetails.revenue,"USD"))}}function ez(n,e){if(n&1&&(ni(0),g(1,"h2",98),P(2,"Facts"),_(),g(3,"div",99)(4,"div",100)(5,"h3",101),P(6,"Status"),_(),g(7,"p",102),P(8),_()(),j(9,Y$,4,1,"div",103)(10,X$,5,1,"div",103),g(11,"div",100)(12,"h3",101),P(13,"Original Language"),_(),g(14,"p",102),P(15),_()(),ni(16),j(17,J$,6,4,"div",103)(18,Z$,6,4,"div",103),ii(),_(),ii()),n&2){let t=L(2);w(8),ee(t.showDetails.status),w(),I("ngIf",t.showDetails.networks==null?null:t.showDetails.networks.length),w(),I("ngIf",t.showDetails.type),w(5),ee(t.showDetails.original_language),w(2),I("ngIf",t.showDetails.budget>0),w(),I("ngIf",t.showDetails.revenue>0)}}function tz(n,e){if(n&1&&(ni(0),g(1,"a",48)(2,"span",110),P(3),_()(),ii()),n&2){let t=e.$implicit,i=L(3);w(),I("routerLink",Ve(2,w$,t.id+"-"+t.name,i.showType)),w(2),we(" ",t.name," ")}}function nz(n,e){if(n&1&&(g(0,"div",108)(1,"h2",98),P(2,"Keywords"),_(),g(3,"div",109),ln(4,tz,4,5,"ng-container",null,lk),_()()),n&2){let t=L(2);w(4),cn(t.showKeywords)}}function iz(n,e){if(n&1&&(g(0,"div",115),U(1,"img",116),_()),n&2){let t=L(3);w(),I("src",t.mainImageUrl+t.showDetails.belongs_to_collection.poster_path,ge)("alt",t.showDetails.belongs_to_collection.name)}}function rz(n,e){if(n&1&&(g(0,"div",115),U(1,"img",117),_()),n&2){let t=L(3);w(),I("alt",t.showDetails.belongs_to_collection.name)}}function sz(n,e){if(n&1&&(g(0,"div",108)(1,"h2",111),P(2,"collection"),_(),g(3,"div",112),j(4,iz,2,2,"div",113)(5,rz,2,1,"div",113),g(6,"h3",114),P(7),_()()()),n&2){let t=L(2);w(3),I("routerLink",B1(4,y$,t.showType,t.showDetails.id,t.showDetails.belongs_to_collection.id)),w(),I("ngIf",t.showDetails.belongs_to_collection.poster_path),w(),I("ngIf",!t.showDetails.belongs_to_collection.poster_path),w(2),ee(t.showDetails.belongs_to_collection.name)}}function oz(n,e){if(n&1){let t=Ue();g(0,"app-show-modal",118),re("close",function(){ke(t);let r=L(2);return De(r.closeModal())}),_()}if(n&2){let t=L(2);I("youtubeUrl",t.selectedMovieUrl)("movie",t.selectedMovie)}}function az(n,e){if(n&1){let t=Ue();U(0,"section")(1,"canvas",2,0),g(3,"section",3)(4,"div",4)(5,"div",5),j(6,b$,1,2,"img",6)(7,x$,1,1,"img",7),g(8,"div",8),P(9," watch now "),_()(),g(10,"div",9)(11,"div",10)(12,"h1",11),P(13),g(14,"span",12),P(15),_e(16,"date"),_()()(),g(17,"div",13)(18,"div")(19,"span"),P(20),_(),P(21),_e(22,"date"),_(),g(23,"div",14),j(24,E$,4,2,"div",15),_(),j(25,T$,3,3,"div"),_(),g(26,"div",16)(27,"div",17),U(28,"app-progress-circle",18),_e(29,"percentage"),_(),g(30,"div",19)(31,"span"),P(32,"User"),_(),g(33,"span"),P(34,"Score"),_()()(),g(35,"div",20)(36,"span",21),re("click",function(){ke(t);let r=L();return De(r.addToFavorites())}),U(37,"i",22),_(),g(38,"span",23),re("click",function(){ke(t);let r=L();return De(r.addToWatchlist())}),U(39,"i",24),_(),g(40,"div",25),re("click",function(){ke(t);let r=L();return De(r.openModal(r.showDetails))}),g(41,"span"),U(42,"i",26),_(),g(43,"p",27),P(44,"Play trailer"),_(),j(45,C$,2,0,"span",28),_()(),g(46,"div",29)(47,"div",30),j(48,I$,2,1,"div",31),g(49,"span",32),P(50,"Overview"),_(),g(51,"div",33),P(52),_()()(),j(53,P$,3,0,"div",34),_()()(),g(54,"div",35)(55,"div",36),j(56,D$,6,8,"section",37)(57,F$,26,15,"section",37)(58,q$,19,3,"section",38)(59,G$,5,2,"section",39)(60,H$,5,2,"section",39),_(),g(61,"div",40),j(62,W$,10,4,"ng-container",38),g(63,"div"),j(64,ez,19,6,"ng-container",38),_(),j(65,nz,6,0,"div",41)(66,sz,8,8,"div",41),_()(),j(67,oz,1,2,"app-show-modal",42)}if(n&2){let t=L();w(3),I("ngStyle",$t(37,d$,t.imageUrl?"linear-gradient("+t.extractedColor+", rgba(0, 0, 0, 0.5)), url("+t.imageUrl+")":"none")),w(3),I("ngIf",t.showDetails.poster_path),w(),I("ngIf",!t.showDetails.poster_path),w(),I("routerLink",Ve(39,h$,t.showType,t.showID)),w(5),we("",t.showDetails.title||t.showDetails.name," "),w(2),we("(",lt(16,29,t.showDetails.release_date||t.showDetails.first_air_date,"yyyy"),")"),w(5),we("(",t.showDetails.origin_country[0],")"),w(),we(" ",lt(22,32,t.showDetails.release_date||t.showDetails.first_air_date,"mediumDate")," "),w(3),I("ngForOf",t.showDetails.genres),w(),je(25,t.showDetails.runtime?25:-1),w(3),I("progress",Ae(29,35,t.showDetails.vote_average))("paddingValue",30)("fontSizeValue",20),w(8),I("ngClass",Ve(42,p$,t._FireStoreService.isInFavorites(),!t._FireStoreService.isInFavorites())),w(2),I("ngClass",Ve(45,f$,t._FireStoreService.isInWatchlist(),!t._FireStoreService.isInWatchlist())),w(7),I("ngIf",t.noTrailers),w(3),je(48,t.showDetails.tagline?48:-1),w(4),ee(t.showDetails.overview),w(),je(53,t.showType=="tv"?53:-1),w(3),I("ngIf",t.showCredits),w(),I("ngIf",t.showDetails.seasons&&t.showDetails.seasons.length>1),w(),I("ngIf",t.showReviews),w(),I("ngIf",t.showRecommendations&&t.showRecommendations.length>0),w(),I("ngIf",t.showRelated&&t.showRelated.length>0),w(2),I("ngIf",t.showExternalIDs),w(2),I("ngIf",t.showDetails.first_air_date||t.showDetails.release_date),w(),I("ngIf",t.showKeywords&&t.showKeywords.length>0),w(),I("ngIf",t.showDetails.belongs_to_collection&&t.showDetails.belongs_to_collection!==null),w(),I("ngIf",t.selectedMovie)}}var ck=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._ActivatedRoute=B(it),this._Router=B(ct),this._FireStoreService=B(Cs),this._AuthenticationService=B(Xn),this._PLATFORM_ID=B(Nt),this._Title=B(mn),this.showKeywords=[],this.showRecommendations=[],this.showRelated=[],this.reviews=[],this.mainImageUrl="https://image.tmdb.org/t/p/w500",this.currentStep=0,this.token=localStorage.getItem("S&MToken"),this.extractedColor="rgba(150, 90, 40, 0.4)",this.selectedMovieUrl="",this.selectedMovie=null,this.letterColorMap={A:"#FF5733",B:"#33FF57",C:"#3357FF",D:"#F0FF33",E:"#FF33F6",F:"#33FFF5",G:"#F733FF",H:"#FF3353",I:"#33FFB5",J:"#B533FF",K:"#FFB533",L:"#33B5FF",M:"#B5FF33",N:"#FFB5B5",O:"#B5FF57",P:"#FF5733",Q:"#33FF57",R:"#3357FF",S:"#F0FF33",T:"#FF33F6",U:"#33FFF5",V:"#F733FF",W:"#FF3353",X:"#33FFB5",Y:"#B533FF",Z:"#FFB533"},this.showFullContent=!1,this.wordLimit=20}ngOnInit(){this.loadShowDetails()}loadShowDetails(){this._ActivatedRoute.params.subscribe({next:i=>{this.showID=i.id,this.showType=i.type,this.currentStep=0,this.noTrailers=!1,this._MoviesService.getShowDetails(this.showID,this.showType).subscribe({next:r=>{this.showDetails=r,this.showDetails.poster_path!==null?this.imageUrl=`http://localhost:3000/image-proxy?url=${encodeURIComponent(this.mainImageUrl+this.showDetails.poster_path)}`:this.showDetails.backdrop_path!==null?this.imageUrl=`http://localhost:3000/image-proxy?url=${encodeURIComponent(this.mainImageUrl+this.showDetails.backdrop_path)}`:this.imageUrl="../../../assets/images/Freebie-DarkGrungeTextures-Preview-03.webp",this.loadAndExtractColor(),this._Title.setTitle((this.showDetails.name||this.showDetails.title)+" - "+this.showType+" - CinemaX")}}),this.showType=="tv"?this._MoviesService.getShowCredits(this.showID,this.showType).subscribe({next:r=>{this.showCredits=r}}):this.showType=="movie"&&this._MoviesService.getMovieCredits(this.showID,this.showType).subscribe({next:r=>{this.showCredits=r}}),this._MoviesService.getShowExternalIDs(this.showID,this.showType).subscribe({next:r=>{this.showExternalIDs=r}}),this._MoviesService.getShowKeywords(this.showID,this.showType).subscribe({next:r=>{this.showKeywords=r.results}}),this._MoviesService.getShowReviews(this.showID,this.showType).subscribe({next:r=>{this.showReviews=r,this.reviews=r.results,this.review=r.results[0]}}),this._MoviesService.getShowRecommendations(this.showID,this.showType,1).subscribe({next:r=>{this.showRecommendations=r.results}}),this._MoviesService.getShowSimilar(this.showID,this.showType).subscribe({next:r=>{this.showRelated=r.results}}),this.getUserData()}})}getUserData(){this._FireStoreService.isInWatchlist.set(!1),this._FireStoreService.isInFavorites.set(!1),this.token=localStorage.getItem("S&MToken"),this.token?this._AuthenticationService.GetLoggedUserData().subscribe({next:i=>{this.userData=i.user,this._FireStoreService.getUserIDByEmail(this.userData.email).then(r=>{r?(this.userID=r,this.checkShowInWatchlist(),this.checkShowInFavorites()):console.log("User not found")})}}):this._Router.navigate(["/login"])}checkShowInWatchlist(){return q(this,null,function*(){let i=yield this._FireStoreService.checkIfInWatchlist(this.userID,this.showID.toString());this._FireStoreService.isInWatchlist.set(i)})}checkShowInFavorites(){return q(this,null,function*(){let i=yield this._FireStoreService.checkIfInFavorites(this.userID,this.showID.toString());this._FireStoreService.isInFavorites.set(i)})}addToWatchlist(){this.userID!==void 0&&this.showDetails?this._FireStoreService.addToWatchlist(this.userID,this.showDetails):console.log("user id not found")}addToFavorites(){this.userID!==void 0&&this.showDetails?this._FireStoreService.addToFavorites(this.userID,this.showDetails):console.log("user id not found")}loadAndExtractColor(){let i=new Image;i.src=this.imageUrl,i.crossOrigin="Anonymous",i.onload=()=>{let r=this.imageCanvas.nativeElement,s=r.getContext("2d",{willReadFrequently:!0});r.width=i.width,r.height=i.height,s.drawImage(i,0,0);let o=.05,a=.05,l=Math.floor(r.width*o),c=Math.floor(r.height*a),d=s.getImageData(l,c,1,1).data;this.extractedColor=`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]/255})`}}openModal(i){this.noTrailers||this._MoviesService.getShowTrailers(this.showID,this.showType).subscribe({next:r=>{let s=r.results.find(o=>o.name==="Official Trailer");if(s){let o=`https://www.youtube.com/embed/${s.key}`;this.selectedMovie=i,this.selectedMovieUrl=o}else if(r.results.length>0){let a=`https://www.youtube.com/embed/${r.results[0].key}`;this.selectedMovie=i,this.selectedMovieUrl=a}else this.noTrailers=!0,this.selectedMovie=null,this.selectedMovieUrl=""},error:r=>{console.error("Error fetching show trailers:",r)}})}closeModal(){this.selectedMovie=null,this.selectedMovieUrl=""}getColorForUsername(i){let r=i.charAt(0).toUpperCase();return this.letterColorMap[r]||"#CCCCCC"}nextReview(){this.showReviews.results.length>0&&this.currentStep<this.showReviews.results.length-1&&(this.review=this.showReviews.results[this.currentStep+1],this.currentStep++,this.showFullContent=!1)}prevReview(){this.showReviews.results.length>0&&this.currentStep>0&&(this.review=this.showReviews.results[this.currentStep-1],this.currentStep--,this.showFullContent=!1)}toggleContent(){this.showFullContent=!this.showFullContent}getTruncatedContent(i){let r=i.split(" ");return r.length>this.wordLimit?r.slice(0,this.wordLimit).join(" ")+"...":i}isContentLong(i){return i.split(" ").length>this.wordLimit}browserLog(i,r){typeof window<"u"&&console.log(i,r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-show-details"]],viewQuery:function(r,s){if(r&1&&Pd(u$,5),r&2){let o;Ql(o=Yl())&&(s.imageCanvas=o.first)}},standalone:!0,features:[fe],decls:1,vars:1,consts:[["imageCanvas",""],["noReviews",""],[2,"display","none"],[1,"w-full","text-white","p-5","my-2",3,"ngStyle"],[1,"flex","flex-col","md:flex-row","items-center","md:items-start","mx-auto","gap-8","w-11/12"],[1,"lg:w-1/4","md:w-1/3","w-1/2"],["class","rounded-lg shadow-lg",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","rounded-lg shadow-lg",3,"alt",4,"ngIf"],[1,"bg-violet-300","w-full","p-4","text-center","text-black","crp","capitalize","font-semibold","text-lg","hover:bg-sky-900","hover:text-white","duration-300",3,"routerLink"],[1,"lg:w-3/4","md:w-2/3","w-full"],[1,"flex","justify-start","items-center"],[1,"text-6xl","font-black","m-0"],[1,"text-4xl","text-gray-300","font-normal"],[1,"flex","items-center","justify-start","gap-3"],[1,"flex","flex-wrap"],[4,"ngFor","ngForOf"],[1,"flex","items-center","justify-start","gap-3","mt-10"],[1,"text-black","crp"],[3,"progress","paddingValue","fontSizeValue"],[1,"flex","flex-col","text-lg"],[1,"flex","items-center","justify-start","gap-3","mt-4"],[1,"crp","rounded-full","bg-blue-800","text-white","p-4","w-10","h-10","flex","justify-center","items-center","me-4","text-sm",3,"click","ngClass"],[1,"fa-solid","fa-heart"],[1,"crp","rounded-full","bg-blue-800","p-4","w-10","h-10","flex","justify-center","items-center","me-4","text-sm",3,"click","ngClass"],[1,"fa-solid","fa-bookmark"],[1,"text-white","flex","justify-center","items-center","gap-2","text-lg","crp",3,"click"],[1,"fa-solid","fa-play"],[1,"capitalize"],["class","mx-3 text-white text-lg bg-black p-1",4,"ngIf"],[1,"flex","items-center","justify-start","mt-4"],[1,"flex","flex-col"],[1,"text-lg","mb-2","text-gray-300"],[1,"text-white","text-xl","font-bold"],[1,"text-lg","mb-4"],[1,"grid","grid-cols-3"],[1,"flex","mx-auto","w-11/12","mt-5"],[1,"w-2/3","flex","flex-col","overflow-hidden"],["class","mb-5 border-b-2 border-gray-200 pb-5",4,"ngIf"],[4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"side-section","w-1/3","bg-slate-50","p-5","rounded-lg","shadow-lg"],["class","mt-10",4,"ngIf"],[3,"youtubeUrl","movie","close",4,"ngIf"],[1,"rounded-lg","shadow-lg",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"rounded-lg","shadow-lg",3,"alt"],[1,"rounded-lg","text-sm","hover:text-gray-300","duration-150","crp"],[1,"mx-3","text-white","text-lg","bg-black","p-1"],[1,"col","flex","flex-col"],[3,"routerLink"],[1,"crp"],[1,"mb-5","border-b-2","border-gray-200","pb-5"],[3,"slidesNum","showCredits"],[1,"mt-5","capitalize","crp","font-medium","hover:text-gray-600","duration-150","inline-block",3,"routerLink"],["class"," font-medium text-black text-lg",4,"ngIf"],[1,"bg-slate-100","border-1","shadow-lg","rounded-md","grid","lg:grid-cols-12","md:grid-cols-8","items-center","p-2","gap-3"],[1,"lg:col-span-3","md:col-span-3"],[1,"w-full",3,"src","alt"],[1,"lg:col-span-8","md:col-span-4"],[1,"font-medium","mt-4"],[1,"flex","gap-1","items-center"],[1,"p-1","bg-blue-900","text-white","text-sm","rounded-md"],[1,"fa-solid","fa-star","me-1"],[1,"text-[4px]","font-bold"],[1,"fa-solid","fa-circle"],[1,"my-6"],[1,"text"],[1,"font-medium","text-black","text-lg"],[1,"me-3"],[1,"underline"],[1,"flex","items-center","justify-between"],[1,"font-medium","text-black","text-lg","me-10"],[1,"relative","flex","flex-col","md:flex-row","md:gap-3","items-center","justify-between"],[1,"border-b-4","border-black"],[1,"mx-2",3,"click"],[1,"fa-solid","fa-arrow-left"],[1,"fa-solid","fa-arrow-right"],["class","mt-3 bg-slate-100 border-1 shadow-lg rounded-md p-2 gap-3",4,"ngIf","ngIfElse"],[1,"mt-3","bg-slate-100","border-1","shadow-lg","rounded-md","p-2","gap-3"],[1,"flex","items-center","gap-5","mb-3"],["class","w-10 h-10 rounded-full",3,"src","alt",4,"ngIf"],["class","w-10 h-10 rounded-full bg-amber-400 p-4 flex justify-center items-center",3,"ngStyle",4,"ngIf"],["class","p-1 bg-blue-900 text-white text-[10px] rounded-md",4,"ngIf"],["class","text-blue-500 cursor-pointer",3,"click",4,"ngIf"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"w-10","h-10","rounded-full","bg-amber-400","p-4","flex","justify-center","items-center",3,"ngStyle"],[1,"p-1","bg-blue-900","text-white","text-[10px]","rounded-md"],[1,"text-blue-500","cursor-pointer",3,"click"],[1,"hover:text-gray-600","crp","duration-100"],[1,"mt-5"],[1,"bg-slate-100","border-1","shadow-lg","rounded-md","p-2"],[3,"slidesNum","shows"],[1,"font-medium","text-black","text-lg","me-10","capitalize"],[1,"text-lg","flex","gap-5","items-center","mb-4"],["target","_blank",1,"text-black","hover:text-gray-700",3,"href"],[1,"fa-brands","fa-facebook"],[1,"fa-brands","fa-x-twitter"],[1,"fa-brands","fa-instagram"],[1,"fa-solid","fa-link"],[1,"text-xl","font-medium","text-black","mb-2"],[1,"p-4","mb-4"],[1,"mb-2"],[1,"font-semibold","text-black"],[1,"text-black"],["class","mb-2",4,"ngIf"],["class","flex items-center my-2 gap-3 crp",3,"routerLink",4,"ngFor","ngForOf"],[1,"flex","items-center","my-2","gap-3","crp",3,"routerLink"],["class","w-20 h-auto",3,"src","alt",4,"ngIf"],[1,"w-20","h-auto",3,"src","alt"],[1,"mt-10"],[1,"flex","flex-wrap","gap-3"],[1,"bg-slate-200","py-1","px-2","rounded-md","shadow-sm","text-black","text-sm"],[1,"text-xl","font-medium","text-black","mb-2","capitalize"],[1,"bg-slate-100","crp","hover:scale-105","duration-300",3,"routerLink"],["class","rounded-md shadow-md w-40 object-cover p-1 mx-auto",4,"ngIf"],[1,"text-center"],[1,"rounded-md","shadow-md","w-40","object-cover","p-1","mx-auto"],[3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",3,"alt"],[3,"close","youtubeUrl","movie"]],template:function(r,s){r&1&&j(0,az,68,48),r&2&&je(0,s.showDetails?0:-1)},dependencies:[Mr,ak,He,Re,wt,At,Jo,sk,Rt,kt,qf,ok,Hf],styles:["h1[_ngcontent-%COMP%]{font-size:30px!important;font-weight:700!important}"]});let n=e;return n})();var uk=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-not-found"]],standalone:!0,features:[fe],decls:2,vars:0,template:function(r,s){r&1&&(g(0,"p"),P(1,"not-found works!"),_())}});let n=e;return n})();var El=(()=>{let e=class e{constructor(){this._HttpClient=B(kn)}getPopularPeople(i){return this._HttpClient.get(`${te.url}person/popular?api_key=${te.apiKey}&page=${i}`)}getTrendingPeople(i){return this._HttpClient.get(`${te.url}trending/person/week?api_key=${te.apiKey}&page=${i}`)}getPersonDetails(i){return this._HttpClient.get(`${te.url}person/${i}?api_key=${te.apiKey}`)}getPersonCredits(i){return this._HttpClient.get(`${te.url}person/${i}/combined_credits?api_key=${te.apiKey}`)}getPersonExternalIDs(i){return this._HttpClient.get(`${te.url}person/${i}/external_ids?api_key=${te.apiKey}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var lz=n=>["/m/person",n];function cz(n,e){if(n&1&&(ni(0),U(1,"img",23),ii()),n&2){let t=L().$implicit,i=L(2);w(),I("src",i.imageUrl+t.profile_path,ge)("alt",t.name)}}function uz(n,e){n&1&&U(0,"img",24)}function dz(n,e){if(n&1&&(g(0,"span",25),P(1),_()),n&2){let t=e.$implicit;w(),we(" ",t.name||t.title," ")}}function hz(n,e){if(n&1&&(g(0,"div",15)(1,"div",16),j(2,cz,2,2,"ng-container",17)(3,uz,1,0,"ng-template",null,0,Xo),_(),g(5,"h2",18),P(6),_(),g(7,"div",19)(8,"h3",20),P(9,"Known for:"),_(),g(10,"div",21),j(11,dz,2,1,"span",22),_()()()),n&2){let t=e.$implicit,i=Yo(4);w(),I("routerLink",$t(5,lz,t.id)),w(),I("ngIf",t.profile_path)("ngIfElse",i),w(4),we(" ",t.name," "),w(5),I("ngForOf",t.known_for)}}function pz(n,e){if(n&1&&(g(0,"div",13),j(1,hz,12,7,"div",14),_()),n&2){let t=L();w(),I("ngForOf",t.peopleList)}}function fz(n,e){n&1&&(g(0,"div",26)(1,"p",27),P(2,"No people found."),_()())}function mz(n,e){if(n&1){let t=Ue();g(0,"span",28),re("click",function(){ke(t);let r=L();return De(r.fetchPeople(r.currentPage-2))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage-2)}}function gz(n,e){if(n&1){let t=Ue();g(0,"span",28),re("click",function(){ke(t);let r=L();return De(r.fetchPeople(r.currentPage-1))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage-1)}}function _z(n,e){if(n&1){let t=Ue();g(0,"span",28),re("click",function(){ke(t);let r=L();return De(r.fetchPeople(r.currentPage+1))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage+1)}}function vz(n,e){if(n&1){let t=Ue();g(0,"span",28),re("click",function(){ke(t);let r=L();return De(r.fetchPeople(r.currentPage+2))}),P(1),_()}if(n&2){let t=L();w(),ee(t.currentPage+2)}}var dk=(()=>{let e=class e{constructor(){this._PeopleService=B(El),this._DiscoverShowsService=B(Kf),this._ActivatedRoute=B(it),this.imageUrl="https://image.tmdb.org/t/p/w300/",this.MAX_PAGES=500,this.currentPage=1}ngOnInit(){this._ActivatedRoute.paramMap.subscribe(i=>{this.category=i.get("pCate"),this.fetchPeople(1)})}fetchPeople(i){this.category=="trending"?this._PeopleService.getTrendingPeople(i).subscribe({next:r=>{this.lastPage=r.total_pages,this.lastPage<this.MAX_PAGES&&(this.MAX_PAGES=this.lastPage),this.peopleList=r.results,this.currentPage=i},error:r=>{}}):this.category=="popular"&&this._PeopleService.getPopularPeople(i).subscribe({next:r=>{this.lastPage=r.total_pages,this.lastPage<this.MAX_PAGES&&(this.MAX_PAGES=this.lastPage),this.peopleList=r.results,this.currentPage=i},error:r=>{}})}nextPage(){this.currentPage<this.MAX_PAGES&&this.fetchPeople(this.currentPage+1)}prevPage(){this.currentPage>1&&this.fetchPeople(this.currentPage-1)}goFirst(){this.currentPage>1&&this.fetchPeople(1)}goLast(){this.currentPage<this.MAX_PAGES&&this.fetchPeople(this.MAX_PAGES)}isFirstPage(){return this.currentPage===1}isLastPage(){return this.currentPage===this.MAX_PAGES}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-people"]],standalone:!0,features:[fe],decls:23,vars:10,consts:[["placeholderImage",""],[1,"my-10"],[1,"text-center","text-2xl","font-bold","text-orange-400","bg-cyan-800","p-2","mb-4"],[1,"container","mx-auto","w-4/5"],["class","grid gap-8 lg:grid-cols-5 md:grid-cols-4 sm:grid-cols-3 grid-cols-2",4,"ngIf"],["class","text-center mt-10",4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"flex","justify-between","items-center","my-10","gap-3","bg-orange-400","md:w-2/3","w-full","p-4","rounded-lg","shadow-lg","overflow-hidden","whitespace-nowrap"],[1,"pagination-btn",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"page-number"],[1,"page-number-active"],[1,"fa-solid","fa-angles-right"],[1,"grid","gap-8","lg:grid-cols-5","md:grid-cols-4","sm:grid-cols-3","grid-cols-2"],["class","bg-slate-100 p-4 rounded-lg shadow-lg overflow-hidden group",4,"ngFor","ngForOf"],[1,"bg-slate-100","p-4","rounded-lg","shadow-lg","overflow-hidden","group"],[1,"overflow-hidden","rounded-lg","crp",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"mt-3","text-md","text-center","font-medium","text-gray-800","transition-colors","duration-300","group-hover:text-indigo-600"],[1,"mt-4","text-center"],[1,"text-sm","font-medium","text-gray-600","mb-2"],[1,"space-y-2"],["class","inline-block text-xs crp bg-gray-200 text-gray-800 px-2 py-1 rounded-full transform transition-transform duration-300 hover:scale-105 hover:bg-gray-300",4,"ngFor","ngForOf"],[1,"w-full","h-48","md:h-56","lg:h-64","object-cover","rounded-lg","transform","transition-transform","duration-500","group-hover:scale-110","group-hover:translate-y-2",3,"src","alt"],["src","../../../assets/images/lost_in_Giza.jpeg","alt","No profile picture available",1,"w-full","h-48","md:h-56","lg:h-64","object-cover","rounded-lg","transform","transition-transform","duration-500","group-hover:scale-110","group-hover:translate-y-2"],[1,"inline-block","text-xs","crp","bg-gray-200","text-gray-800","px-2","py-1","rounded-full","transform","transition-transform","duration-300","hover:scale-105","hover:bg-gray-300"],[1,"text-center","mt-10"],[1,"text-lg","text-gray-500"],[1,"page-number",3,"click"]],template:function(r,s){r&1&&(g(0,"section",1)(1,"h1",2),P(2),_e(3,"formatTitle"),_(),g(4,"div",3),j(5,pz,2,1,"div",4)(6,fz,3,0,"div",5),_(),g(7,"div",6)(8,"div",7)(9,"button",8),re("click",function(){return s.goFirst()}),U(10,"i",9),_(),g(11,"button",8),re("click",function(){return s.prevPage()}),P(12," Pervious "),_(),j(13,mz,2,1,"span",10)(14,gz,2,1,"span",10),g(15,"span",11),P(16),_(),j(17,_z,2,1,"span",10)(18,vz,2,1,"span",10),g(19,"button",8),re("click",function(){return s.nextPage()}),P(20," Next "),_(),g(21,"button",8),re("click",function(){return s.goLast()}),U(22,"i",12),_()()()()),r&2&&(w(2),we(" ",Ae(3,8,s.category)," Celebrities "),w(3),I("ngIf",s.peopleList&&s.peopleList.length>0),w(),I("ngIf",!s.peopleList||s.peopleList.length===0),w(7),je(13,s.currentPage>2?13:-1),w(),je(14,s.currentPage>1?14:-1),w(2),ee(s.currentPage),w(),je(17,s.currentPage<500?17:-1),w(),je(18,s.currentPage<499?18:-1))},dependencies:[wt,Re,Sl,He],styles:["sup[_ngcontent-%COMP%]{font-size:.5em;vertical-align:super;top:0;left:0}.word-wrap[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.5}.pagination-btn[_ngcontent-%COMP%]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(63 131 248 / var(--tw-bg-opacity));padding:.5rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:transform;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);box-shadow:0 4px #0000004d}.pagination-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px #0000004d}.pagination-btn[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px #0000004d}.page-number[_ngcontent-%COMP%], .page-number-active[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:1.125rem;line-height:1.75rem;font-weight:600}.page-number[_ngcontent-%COMP%]{border-radius:.375rem;--tw-bg-opacity: 1;background-color:rgb(100 116 139 / var(--tw-bg-opacity));padding:.25rem .5rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));box-shadow:0 4px #0003}.page-number-active[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity));background-color:#e2e8f0;padding:4px 10px;border-radius:6px;box-shadow:inset 0 4px #0003}"]});let n=e;return n})();var hk=(()=>{let e=class e{transform(i){let r=new Date(i),s=Date.now()-r.getTime(),o=new Date(s);return Math.abs(o.getUTCFullYear()-1970)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=en({name:"age",type:e,pure:!0,standalone:!0});let n=e;return n})();var pk=(n,e)=>["/m/show-details",n,e],wz=n=>["/m/person-shows",n];function yz(n,e){if(n&1&&(g(0,"div",8),U(1,"img",17),_()),n&2){let t=L(2);w(),I("src",t.mainImageUrl+t.personDetails.profile_path,ge)("alt",t.personDetails.name)}}function bz(n,e){n&1&&(g(0,"span",10),P(1,"Male"),_())}function xz(n,e){n&1&&(g(0,"span",10),P(1,"Female"),_())}function Sz(n,e){n&1&&(g(0,"span",10),P(1,"Unknown"),_())}function Ez(n,e){if(n&1&&(g(0,"div",8)(1,"h3",9),P(2,"Gender"),_(),j(3,bz,2,0,"span",18)(4,xz,2,0,"span",18)(5,Sz,2,0,"span",18),_()),n&2){let t=L(2);w(3),I("ngIf",t.personDetails.gender===2),w(),I("ngIf",t.personDetails.gender===1),w(),I("ngIf",t.personDetails.gender!==1&&t.personDetails.gender!==2)}}function Tz(n,e){if(n&1&&(g(0,"span"),P(1),_e(2,"age"),_()),n&2){let t=L(3);w(),we(" (",Ae(2,1,t.personDetails.birthday)," years old)")}}function Cz(n,e){if(n&1&&(g(0,"div",8)(1,"h3",9),P(2,"Born"),_(),g(3,"span",10),P(4),_e(5,"date"),j(6,Tz,3,3,"span",11),_()()),n&2){let t=L(2);w(4),we(" ",lt(5,2,t.personDetails.birthday,"MMMM d, y")," "),w(2),I("ngIf",!t.personDetails.deathday)}}function Iz(n,e){if(n&1&&(g(0,"div",8)(1,"h3",9),P(2,"Died"),_(),g(3,"span",10),P(4),_e(5,"date"),_()()),n&2){let t=L(2);w(4),ee(lt(5,1,t.personDetails.deathday,"MMMM d, y"))}}function Az(n,e){if(n&1&&(g(0,"div",8)(1,"h3",9),P(2,"place of birth"),_(),g(3,"span",10),P(4),_()()),n&2){let t=L(2);w(4),ee(t.personDetails.place_of_birth)}}function Pz(n,e){if(n&1&&(g(0,"div")(1,"h3",9),P(2,"Also Known As"),_(),g(3,"span",10),P(4),_()()),n&2){let t=L(2);w(4),ee(t.personDetails.also_known_as)}}function Rz(n,e){if(n&1&&(g(0,"a",23),U(1,"i",24),_()),n&2){let t=L(3);I("href","https://www.imdb.com/name/"+t.ex_Ids.imdb_id,ge)}}function kz(n,e){if(n&1&&(g(0,"a",23),U(1,"i",25),_()),n&2){let t=L(3);I("href","https://www.wikidata.org/wiki/"+t.ex_Ids.wikidata_id,ge)}}function Dz(n,e){if(n&1&&(g(0,"a",23),U(1,"i",26),_()),n&2){let t=L(3);I("href","https://www.facebook.com/"+t.ex_Ids.facebook_id,ge)}}function Mz(n,e){if(n&1&&(g(0,"a",23),U(1,"i",27),_()),n&2){let t=L(3);I("href","https://www.instagram.com/"+t.ex_Ids.instagram_id,ge)}}function Nz(n,e){if(n&1&&(g(0,"a",23),U(1,"i",28),_()),n&2){let t=L(3);I("href","https://www.tiktok.com/@"+t.ex_Ids.tiktok_id,ge)}}function Oz(n,e){if(n&1&&(g(0,"a",23),U(1,"i",29),_()),n&2){let t=L(3);I("href","https://www.twitter.com/"+t.ex_Ids.twitter_id,ge)}}function Fz(n,e){if(n&1&&(g(0,"a",23),U(1,"i",30),_()),n&2){let t=L(3);I("href","https://www.youtube.com/user/"+t.ex_Ids.youtube_id,ge)}}function Lz(n,e){if(n&1&&(g(0,"div",19)(1,"h3",20),P(2,"Personal Links"),_(),g(3,"div",21),j(4,Rz,2,1,"a",22)(5,kz,2,1,"a",22)(6,Dz,2,1,"a",22)(7,Mz,2,1,"a",22)(8,Nz,2,1,"a",22)(9,Oz,2,1,"a",22)(10,Fz,2,1,"a",22),_()()),n&2){let t=L(2);w(4),I("ngIf",t.ex_Ids.imdb_id),w(),I("ngIf",t.ex_Ids.wikidata_id),w(),I("ngIf",t.ex_Ids.facebook_id),w(),I("ngIf",t.ex_Ids.instagram_id),w(),I("ngIf",t.ex_Ids.tiktok_id),w(),I("ngIf",t.ex_Ids.twitter_id),w(),I("ngIf",t.ex_Ids.youtube_id)}}function Vz(n,e){if(n&1&&(g(0,"h2",31),P(1),_()),n&2){let t=L(2);w(),ee(t.personDetails.name)}}function Uz(n,e){if(n&1){let t=Ue();g(0,"span",35),re("click",function(){ke(t);let r=L(3);return De(r.toggleContent())}),P(1),_()}if(n&2){let t=L(3);w(),we(" ",t.showFullContent?"Read Less":"Read More"," ")}}function $z(n,e){if(n&1&&(g(0,"div",32)(1,"h3",20),P(2,"Biography"),_(),g(3,"p",33),P(4),j(5,Uz,2,1,"span",34),_()()),n&2){let t=L(2);w(4),we(" ",t.showFullContent?t.personDetails.biography:t.getTruncatedContent(t.personDetails.biography)," "),w(),I("ngIf",t.isContentLong(t.personDetails.biography))}}function zz(n,e){if(n&1&&U(0,"img",48),n&2){let t=L().$implicit,i=L(3);I("src",i.mainImageUrl+t.poster_path,ge)("alt",t.name||t.title)}}function jz(n,e){if(n&1&&U(0,"img",49),n&2){let t=L().$implicit;I("alt",t.name||t.title)}}function Bz(n,e){if(n&1&&(g(0,"span"),P(1),_e(2,"date"),_()),n&2){let t=L().$implicit;w(),we("(",lt(2,1,t.release_date||t.first_air_date,"yyyy"),")")}}function qz(n,e){if(n&1&&(g(0,"div",41)(1,"div",42)(2,"span",43),P(3),_(),g(4,"a",44),j(5,zz,1,2,"img",45)(6,jz,1,1,"img",46),_(),g(7,"h2",47),P(8),j(9,Bz,3,4,"span",11),_()()()),n&2){let t=e.$implicit;w(3),we(" ",t.media_type," "),w(),I("routerLink",Ve(6,pk,t.media_type||"movie",t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),we("",t.name||t.title," "),w(),I("ngIf",t.release_date||t.first_air_date)}}function Gz(n,e){if(n&1&&(g(0,"a",50),P(1,"show all works"),U(2,"i",51),_()),n&2){let t=L(3);I("routerLink",$t(1,wz,t.personDetails.id))}}function Hz(n,e){if(n&1&&(g(0,"div",36)(1,"h3",37),P(2," Known For "),g(3,"span"),P(4),_(),P(5,": "),_(),g(6,"div",38),j(7,qz,10,9,"div",39),_(),j(8,Gz,3,3,"a",40),_()),n&2){let t=L(2);w(4),ee(t.personDetails.known_for_department),w(3),I("ngForOf",t.castShows.slice(0,10)),w(),I("ngIf",t.castShows.length>10)}}function Wz(n,e){n&1&&(g(0,"h3",37),P(1," Other Works "),_())}function Kz(n,e){n&1&&(g(0,"h3",37),P(1,"Worked On"),_())}function Qz(n,e){if(n&1&&U(0,"img",48),n&2){let t=L().$implicit,i=L(3);I("src",i.mainImageUrl+t.poster_path,ge)("alt",t.name||t.title)}}function Yz(n,e){if(n&1&&U(0,"img",49),n&2){let t=L().$implicit;I("alt",t.name||t.title)}}function Xz(n,e){if(n&1&&(g(0,"span"),P(1),_e(2,"date"),_()),n&2){let t=L().$implicit;w(),we("(",lt(2,1,t.release_date||t.first_air_date,"yyyy"),")")}}function Jz(n,e){if(n&1&&(g(0,"div",54)(1,"div",55)(2,"span",43),P(3),_(),g(4,"a",44),j(5,Qz,1,2,"img",45)(6,Yz,1,1,"img",46),_(),g(7,"div",56)(8,"h2",57),P(9),j(10,Xz,3,4,"span",11),_(),g(11,"h3",58),P(12,"Department: "),g(13,"span",59),P(14),_()(),g(15,"h3",60),P(16,"Job: "),g(17,"span",59),P(18),_()()()()()),n&2){let t=e.$implicit;w(3),we(" ",t.media_type," "),w(),I("routerLink",Ve(8,pk,t.media_type||"movie",t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(3),we("",t.name||t.title," "),w(),I("ngIf",t.release_date||t.first_air_date),w(4),ee(t.department),w(4),ee(t.job)}}function Zz(n,e){if(n&1&&(g(0,"div",36),j(1,Wz,2,0,"h3",52)(2,Kz,2,0,"h3",52),g(3,"div",38),j(4,Jz,19,11,"div",53),_()()),n&2){let t=L(2);w(),I("ngIf",t.crewShows.length>0&&t.castShows.length>0),w(),I("ngIf",t.crewShows.length>0&&t.castShows.length==0),w(2),I("ngForOf",t.crewShows)}}function ej(n,e){if(n&1&&(g(0,"div",2)(1,"div",3),j(2,yz,2,2,"div",4),U(3,"div",5),g(4,"div",6)(5,"h2",7),P(6,"Personal Info"),_(),g(7,"div",8)(8,"h3",9),P(9,"Known For"),_(),g(10,"span",10),P(11),_()(),g(12,"div",8)(13,"h3",9),P(14,"Known Credits"),_(),g(15,"span",10),P(16),_()(),j(17,Ez,6,3,"div",4)(18,Cz,7,5,"div",4)(19,Iz,6,4,"div",4)(20,Az,5,1,"div",4)(21,Pz,5,1,"div",11)(22,Lz,11,7,"div",12),_()(),g(23,"div",13),j(24,Vz,2,1,"h2",14)(25,$z,6,2,"div",15)(26,Hz,9,3,"div",16)(27,Zz,5,3,"div",16),_()()),n&2){let t=L();w(2),I("ngIf",t.personDetails==null?null:t.personDetails.profile_path),w(9),ee(t.personDetails.known_for_department),w(5),ee(t.castShows.length+t.crewShows.length),w(),I("ngIf",t.personDetails.gender),w(),I("ngIf",t.personDetails.birthday),w(),I("ngIf",t.personDetails.deathday),w(),I("ngIf",t.personDetails.place_of_birth),w(),I("ngIf",t.personDetails.also_known_as.length>0),w(),I("ngIf",t.ex_Ids),w(2),I("ngIf",t.personDetails.name),w(),I("ngIf",t.personDetails.biography),w(),I("ngIf",t.castShows.length>0),w(),I("ngIf",t.crewShows.length>0)}}var fk=(()=>{let e=class e{constructor(){this._ActivatedRoute=B(it),this._PeopleService=B(El),this._Title=B(mn),this.mainImageUrl="https://image.tmdb.org/t/p/w500",this.castShows=[],this.crewShows=[],this.showFullContent=!1,this.wordLimit=20}ngOnInit(){this.loadPerson()}loadPerson(){this._ActivatedRoute.params.subscribe({next:i=>{this.personID=i.id,this._PeopleService.getPersonDetails(this.personID).subscribe({next:r=>{this.personDetails=r,this._Title.setTitle(this.personDetails.name+" - CinemaX")},error:r=>{console.error("Error fetching person details",r)}}),this._PeopleService.getPersonCredits(this.personID).subscribe({next:r=>{this.castShows=r.cast.sort((s,o)=>{let a=new Date(s.release_date||s.first_air_date);return new Date(o.release_date||o.first_air_date).getTime()-a.getTime()}),this.crewShows=r.crew.sort((s,o)=>{let a=new Date(s.release_date||s.first_air_date);return new Date(o.release_date||o.first_air_date).getTime()-a.getTime()})},error:r=>{console.error("Error fetching person credits",r)}}),this._PeopleService.getPersonExternalIDs(this.personID).subscribe({next:r=>{this.ex_Ids=r},error:r=>{console.error("Error fetching person Ex Ids",r)}})},error:i=>{console.error("Error fetching route params",i)}})}filterShowsByBirthdate(i,r){let s=new Date(r);return i.filter(o=>{let a=o.first_air_date||o.release_date;return a?new Date(a)>=s:!1})}toggleContent(){this.showFullContent=!this.showFullContent}getTruncatedContent(i){let r=i.split(" ");return r.length>this.wordLimit?r.slice(0,this.wordLimit).join(" ")+"...":i}isContentLong(i){return i.split(" ").length>this.wordLimit}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-person"]],standalone:!0,features:[fe],decls:2,vars:1,consts:[[1,"my-10","flex","justify-center","items-center"],["class","container flex gap-10 justify-center ps-5",4,"ngIf"],[1,"container","flex","gap-10","justify-center","ps-5"],[1,"md:w-1/3","lg:w-1/5","w-1/2","p-4","bg-gray-100","rounded-lg","shadow-lg"],["class","mb-4",4,"ngIf"],[1,"socialLinks","mb-4"],[1,"bg-white","p-4","rounded-lg","shadow-md"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"mb-4"],[1,"text-lg","font-medium","text-gray-700"],[1,"text-sm","text-gray-600"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"md:w-2/3","lg:w-4/5","w-1/2","bg-gray-100","rounded-lg","shadow-lg","p-6"],["class","text-2xl font-bold text-gray-800 mb-4",4,"ngIf"],["class","mb-6",4,"ngIf"],["class","mt-8",4,"ngIf"],[1,"w-full","h-auto","rounded-md","border","border-gray-300","shadow-sm",3,"src","alt"],["class","text-sm text-gray-600",4,"ngIf"],[1,"mt-4"],[1,"text-lg","font-medium","text-gray-700","mb-2"],[1,"flex","gap-4"],["target","_blank","class","text-lg text-gray-600",3,"href",4,"ngIf"],["target","_blank",1,"text-lg","text-gray-600",3,"href"],[1,"fa-brands","fa-imdb","text-yellow-500"],[1,"fa-brands","fa-wikipedia-w","text-black"],[1,"fa-brands","fa-facebook","text-blue-600"],[1,"fa-brands","fa-instagram","text-pink-600"],[1,"fa-brands","fa-tiktok","text-black"],[1,"fa-brands","fa-twitter","text-blue-400"],[1,"fa-brands","fa-youtube","text-red-600"],[1,"text-2xl","font-bold","text-gray-800","mb-4"],[1,"mb-6"],[1,"text-gray-600"],["class","text-blue-500 cursor-pointer",3,"click",4,"ngIf"],[1,"text-blue-500","cursor-pointer",3,"click"],[1,"mt-8"],[1,"text-lg","font-medium","text-gray-700","mb-4"],[1,"flex","overflow-x-auto","gap-4"],["class","flex-none w-32 relative group",4,"ngFor","ngForOf"],["class","m-3 crp bg-slate-200 hover:bg-slate-400 rounded-md shadow-md  p-2 duration-150 capitalize inline-block",3,"routerLink",4,"ngIf"],[1,"flex-none","w-32","relative","group"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden"],[1,"absolute","top-2","left-2","bg-black","text-white","text-xs","font-semibold","px-2","py-1","rounded-md","z-10"],[1,"crp","relative",3,"routerLink"],["class","w-full h-48 object-cover transition-transform duration-300 ease-in-out group-hover:scale-105",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-full h-48 object-cover transition-transform duration-300 ease-in-out group-hover:scale-105",3,"alt",4,"ngIf"],[1,"text-sm","font-semibold","text-center","text-gray-800","p-2"],[1,"w-full","h-48","object-cover","transition-transform","duration-300","ease-in-out","group-hover:scale-105",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-48","object-cover","transition-transform","duration-300","ease-in-out","group-hover:scale-105",3,"alt"],[1,"m-3","crp","bg-slate-200","hover:bg-slate-400","rounded-md","shadow-md","p-2","duration-150","capitalize","inline-block",3,"routerLink"],[1,"mx-2","fa-solid","fa-arrow-right"],["class","text-lg font-medium text-gray-700 mb-4",4,"ngIf"],["class","flex-none w-48 relative group",4,"ngFor","ngForOf"],[1,"flex-none","w-48","relative","group"],[1,"bg-white","rounded-lg","shadow-lg","overflow-hidden"],[1,"p-4","text-center"],[1,"text-sm","font-semibold","text-gray-800","mb-1"],[1,"text-xs","text-gray-600","mb-1"],[1,"font-medium"],[1,"text-xs","text-gray-600"]],template:function(r,s){r&1&&(g(0,"section",0),j(1,ej,28,13,"div",1),_()),r&2&&(w(),I("ngIf",s.personDetails))},dependencies:[Re,wt,hk,At,He],styles:[".swiper-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.swiper-wrapper[_ngcontent-%COMP%]{display:flex;gap:1rem;transition:transform .3s ease}.swiper-slide[_ngcontent-%COMP%]{min-width:150px;flex-shrink:0;scroll-snap-align:start}.swiper-button-prev[_ngcontent-%COMP%], .swiper-button-next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#00000080;border:none;color:#fff;padding:10px;cursor:pointer;z-index:10}.swiper-button-prev[_ngcontent-%COMP%]{left:10px}.swiper-button-next[_ngcontent-%COMP%]{right:10px}"]});let n=e;return n})();var mk=(n,e)=>["/m/show-details",n,e];function tj(n,e){if(n&1&&(g(0,"a",13),U(1,"img",14),_()),n&2){let t=L().$implicit,i=L();I("routerLink",Ve(3,mk,t.media_type,t.id)),w(),I("src",i.mainImageUrl+t.poster_path,ge)("alt",t.title)}}function nj(n,e){if(n&1&&(g(0,"a",13),U(1,"img",15),_()),n&2){let t=L().$implicit;I("routerLink",Ve(2,mk,t.media_type,t.id)),w(),I("alt",t.title||t.name)}}function ij(n,e){if(n&1&&(g(0,"div",5)(1,"div",6),j(2,tj,2,6,"a",7)(3,nj,2,5,"a",7),_(),g(4,"div",8),U(5,"app-progress-circle",9),_e(6,"percentage"),_(),g(7,"div",10)(8,"h3",11),P(9),_e(10,"splitTitle"),_(),g(11,"p",12),P(12),_e(13,"date"),_()()()),n&2){let t=e.$implicit;w(2),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),I("progress",Ae(6,5,t.vote_average)),w(4),ee(Ae(10,7,t.title||t.name)),w(3),ee(lt(13,9,t.release_date||t.first_air_date,"yyyy"))}}var gk=(()=>{let e=class e{constructor(){this._ActivatedRoute=B(it),this._PeopleService=B(El),this._Title=B(mn),this.showList=[],this.mainImageUrl="https://image.tmdb.org/t/p/w500",this.MAX_PAGES=500,this.currentPage=1}ngOnInit(){this.loadPerson()}loadPerson(){this._ActivatedRoute.params.subscribe({next:i=>{this.personID=i.id,this._PeopleService.getPersonCredits(this.personID).subscribe({next:r=>{this.showList=r.cast.sort((s,o)=>{let a=new Date(s.release_date||s.first_air_date);return new Date(o.release_date||o.first_air_date).getTime()-a.getTime()})},error:r=>{console.error("Error fetching person credits",r)}})},error:i=>{console.error("Error fetching route params",i)}})}fetchShows(i){}goToShowDetails(i){}prevPage(){}nextPage(){}goFirst(){this.currentPage>1&&this.fetchShows(1)}goLast(){this.currentPage<this.MAX_PAGES&&this.fetchShows(this.MAX_PAGES)}isFirstPage(){return this.currentPage===1}isLastPage(){return this.currentPage===this.MAX_PAGES}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-person-shows"]],standalone:!0,features:[fe],decls:6,vars:1,consts:[[1,"my-10"],[1,"w-4/5","container","mx-auto","p-6"],[1,"text-4xl","font-bold","text-black","mb-4"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-6"],["class"," bg-slate-100 rounded-lg shadow-lg p-2 relative transition-transform duration-500 hover:scale-105",4,"ngFor","ngForOf"],[1,"bg-slate-100","rounded-lg","shadow-lg","p-2","relative","transition-transform","duration-500","hover:scale-105"],[1,"h-52","overflow-hidden","rounded-lg"],[3,"routerLink",4,"ngIf"],[1,"relative","-top-5","left-2"],[3,"progress"],[1,"mt-2","text-center"],[1,"text-md","font-semibold","truncate"],[1,"text-sm"],[3,"routerLink"],[1,"w-full","h-full","object-cover","crp",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-full","object-cover","crp",3,"alt"]],template:function(r,s){r&1&&(g(0,"section",0)(1,"div",1)(2,"h1",2),P(3,"Shows"),_(),g(4,"div",3),j(5,ij,14,12,"div",4),_()()()),r&2&&(w(5),I("ngForOf",s.showList))},dependencies:[Re,wt,At,He,Rt,kt,Vn]});let n=e;return n})();var _k=n=>["/m/person",n];function rj(n,e){if(n&1&&U(0,"img",13),n&2){let t=L(2);I("src",t.mainImageUrl+t.showDetails.poster_path,ge)("alt",t.showDetails.title||t.showDetails.name)}}function sj(n,e){if(n&1&&U(0,"img",14),n&2){let t=L(2);I("alt",t.showDetails.title||t.showDetails.name)}}function oj(n,e){if(n&1&&U(0,"img",26),n&2){let t=L().$implicit,i=L(3);I("src",i.mainImageUrl+t.profile_path,ge)("alt",t.name)}}function aj(n,e){if(n&1&&U(0,"img",27),n&2){let t=L().$implicit;I("alt",t.name)}}function lj(n,e){if(n&1&&(g(0,"p",28),P(1),_()),n&2){let t=L().$implicit;w(),ee(t.character)}}function cj(n,e){if(n&1&&(g(0,"p",28),P(1),_()),n&2){let t=L().$implicit;w(),ee(t.roles[0].character)}}function uj(n,e){if(n&1&&(g(0,"div",20)(1,"div",21),j(2,oj,1,2,"img",22)(3,aj,1,1,"img",23),_(),g(4,"div")(5,"h4",24),P(6),_(),j(7,lj,2,1,"p",25)(8,cj,2,1,"p",25),_()()),n&2){let t=e.$implicit,i=L(3);I("routerLink",$t(6,_k,t.id)),w(2),I("ngIf",t.profile_path),w(),I("ngIf",!t.profile_path),w(3),ee(t.name),w(),I("ngIf",i.showType=="movie"),w(),I("ngIf",i.showType=="tv")}}function dj(n,e){if(n&1&&(g(0,"div",15)(1,"h3",16),P(2," Cast "),g(3,"span",17),P(4),_()(),g(5,"div",18),j(6,uj,9,8,"div",19),_()()),n&2){let t=L(2);w(4),Xl("(",t.castCredits.length>50?50:t.castCredits.length,"",t.castCredits.length>50?"+":"",")"),w(2),I("ngForOf",t.castCredits.slice(0,50))}}function hj(n,e){if(n&1&&U(0,"img",26),n&2){let t=L().$implicit,i=L(3);I("src",i.mainImageUrl+t.profile_path,ge)("alt",t.name)}}function pj(n,e){if(n&1&&U(0,"img",27),n&2){let t=L().$implicit;I("alt",t.name)}}function fj(n,e){if(n&1&&(g(0,"div",20)(1,"div",21),j(2,hj,1,2,"img",22)(3,pj,1,1,"img",23),_(),g(4,"div")(5,"h4",24),P(6),_(),g(7,"p",28),P(8),_()()()),n&2){let t=e.$implicit;I("routerLink",$t(5,_k,t.id)),w(2),I("ngIf",t.profile_path),w(),I("ngIf",!t.profile_path),w(3),ee(t.name),w(2),ee(t.job)}}function mj(n,e){if(n&1&&(g(0,"div",29)(1,"h3",16),P(2," Crew "),g(3,"span",17),P(4),_()(),g(5,"div",18),j(6,fj,9,7,"div",30),_()()),n&2){let t=L(2);w(4),Xl("(",t.crewCredits.length>50?50:t.crewCredits.length,"",t.crewCredits.length>50?"+":"",")"),w(2),I("ngForOf",t.crewCredits.slice(0,50))}}function gj(n,e){if(n&1){let t=Ue();g(0,"section",1)(1,"div",2)(2,"div",3),j(3,rj,1,2,"img",4)(4,sj,1,1,"img",5),_(),g(5,"div",6)(6,"h1",7),P(7),g(8,"span"),P(9),_e(10,"date"),_()(),g(11,"span",8),re("click",function(){ke(t);let r=L();return De(r.goBackToMain(r.showType,r.showID))}),U(12,"i",9),P(13,"Back to Details"),_()()(),g(14,"div",10),j(15,dj,7,3,"div",11)(16,mj,7,3,"div",12),_()()}if(n&2){let t=L();w(3),I("ngIf",t.showDetails.poster_path),w(),I("ngIf",!t.showDetails.poster_path),w(3),we("",t.showDetails.title||t.showDetails.name," "),w(2),we("(",lt(10,6,t.showDetails.release_date||t.showDetails.first_air_date,"yyyy"),")"),w(6),I("ngIf",t.castCredits&&t.castCredits.length>0),w(),I("ngIf",t.crewCredits&&t.crewCredits.length>0)}}var vk=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._ActivatedRoute=B(it),this._Router=B(ct),this._Title=B(mn),this.castCredits=[],this.crewCredits=[],this.mainImageUrl="https://image.tmdb.org/t/p/w500"}ngOnInit(){this.loadCredits()}loadCredits(){this._ActivatedRoute.params.subscribe({next:i=>{this.showID=i.id,this.showType=i.type,this.showType=="tv"?this._MoviesService.getShowCredits(this.showID,this.showType).subscribe({next:r=>{this.showCredits=r,this.castCredits=r.cast,this.crewCredits=r.crew}}):this.showType=="movie"&&this._MoviesService.getMovieCredits(this.showID,this.showType).subscribe({next:r=>{this.showCredits=r,this.castCredits=r.cast,this.crewCredits=r.crew}}),this._MoviesService.getShowDetails(this.showID,this.showType).subscribe({next:r=>{this.showDetails=r,this._Title.setTitle((this.showDetails.name||this.showDetails.title)+"_cast&crew_CinemaX")}})}})}goBackToMain(i,r){this._Router.navigate(["/m/show-details",i||"show",r])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-full-show-cast"]],standalone:!0,features:[fe],decls:1,vars:1,consts:[["class","my-10",4,"ngIf"],[1,"my-10"],[1,"bg-orange-400","p-5","flex","items-center","gap-4"],[1,"w-1/5"],["class","w-full h-auto",3,"src","alt",4,"ngIf"],["class","w-full h-auto","src","../../../assets/images/angry-mac-boy-cinema.jpeg",3,"alt",4,"ngIf"],[1,"text-black","w-4/5"],[1,"text-4xl","font-bold"],[1,"inline-block","mt-2","p-2","text-lg","bg-slate-200","hover:bg-slate-300","cursor-pointer","duration-200","rounded-md","shadow-md",3,"click"],[1,"fa-solid","fa-arrow-left","mx-1"],[1,"container","mx-auto","bg-white","shadow-md","mt-10","p-6"],["class","cast",4,"ngIf"],["class","crew mt-10 border-t-4 border-red-500",4,"ngIf"],[1,"w-full","h-auto",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-auto",3,"alt"],[1,"cast"],[1,"text-2xl","font-semibold","mb-4"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","flex items-center gap-4 bg-gray-100 p-4 rounded-md crp duration-300 hover:scale-105 ",3,"routerLink",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-4","bg-gray-100","p-4","rounded-md","crp","duration-300","hover:scale-105",3,"routerLink"],[1,"w-16","h-16"],["class","w-full h-full rounded-full object-cover",3,"src","alt",4,"ngIf"],["class","w-full h-full rounded-full object-cover","src","../../../assets/images/lost_in_Giza.jpeg",3,"alt",4,"ngIf"],[1,"text-lg","font-medium"],["class","text-gray-600",4,"ngIf"],[1,"w-full","h-full","rounded-full","object-cover",3,"src","alt"],["src","../../../assets/images/lost_in_Giza.jpeg",1,"w-full","h-full","rounded-full","object-cover",3,"alt"],[1,"text-gray-600"],[1,"crew","mt-10","border-t-4","border-red-500"],["class","flex items-center gap-4 bg-gray-100 p-4 rounded-md crp duration-300 hover:scale-105",3,"routerLink",4,"ngFor","ngForOf"]],template:function(r,s){r&1&&j(0,gj,17,9,"section",0),r&2&&I("ngIf",s.showDetails&&s.showCredits)},dependencies:[He,Re,wt,At]});let n=e;return n})();var _j=["imageCanvas"],vj=(n,e)=>e.id,wj=n=>({"background-image":n,"background-size":"cover","background-position":"center","background-repeat":"no-repeat"}),yj=(n,e)=>["/m/show-details",n,e];function bj(n,e){if(n&1&&U(0,"img",22),n&2){let t=L(2);zn("alt",t.collectionDetails.name),I("src",t.mainImageUrl+t.collectionDetails.poster_path,ge)}}function xj(n,e){if(n&1&&U(0,"img",23),n&2){let t=L(2);zn("alt",t.collectionDetails.name)}}function Sj(n,e){if(n&1&&(g(0,"section",4)(1,"div",5)(2,"div",6),j(3,bj,1,2,"img",7)(4,xj,1,1,"img",8),_(),g(5,"div",9)(6,"div",10)(7,"h1",11),P(8),_()(),U(9,"div",12),g(10,"div",13)(11,"span",14),U(12,"i",15),_(),g(13,"span",14),U(14,"i",16),_(),g(15,"span",14),U(16,"i",17),_()(),g(17,"div",18)(18,"div",19)(19,"span",20),P(20,"Overview"),_(),g(21,"div",21),P(22),_()()()()()()),n&2){let t=L();I("ngStyle",$t(5,wj,"linear-gradient("+t.extractedColor+", rgba(0, 0, 0, 0.5)), url("+t.imageUrl+")")),w(3),I("ngIf",t.collectionDetails.poster_path),w(),I("ngIf",!t.collectionDetails.poster_path),w(4),we("",t.collectionDetails.name," "),w(14),ee(t.collectionDetails.overview)}}function Ej(n,e){if(n&1&&(g(0,"div",27)(1,"div",28),U(2,"img",29),_(),g(3,"div",30),U(4,"app-progress-circle",31),_e(5,"percentage"),_(),g(6,"div",32)(7,"h3",33),P(8),_e(9,"splitTitle"),_(),g(10,"p",34),P(11),_e(12,"date"),_()()()),n&2){let t=e.$implicit,i=L(2);w(),I("routerLink",Ve(13,yj,t.media_type||"movie",t.id)),w(),I("src",i.mainImageUrl+t.poster_path,ge)("alt",t.original_title),w(2),I("progress",Ae(5,6,t.vote_average)),w(4),ee(Ae(9,8,t.title)),w(3),ee(lt(12,10,t.release_date,"yyyy"))}}function Tj(n,e){if(n&1&&(g(0,"section",24)(1,"div",25)(2,"div",26),ln(3,Ej,13,16,"div",27,vj),_()()()),n&2){let t=L();w(3),cn(t.collectionDetails.parts)}}var wk=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._ActivatedRoute=B(it),this._Router=B(ct),this.mainImageUrl="https://image.tmdb.org/t/p/w500",this.extractedColor="rgba(150, 90, 40, 0.4)"}ngOnInit(){this.loadShowCollection()}loadShowCollection(){this._ActivatedRoute.params.subscribe({next:i=>{this.collectionID=i.CollectionId,this._MoviesService.getCollection(this.collectionID).subscribe({next:r=>{this.collectionDetails=r,this.collectionDetails.poster_path!==null&&(this.imageUrl=`http://localhost:3000/image-proxy?url=${encodeURIComponent(this.mainImageUrl+this.collectionDetails.backdrop_path)}`),this.loadAndExtractColor()}})}})}loadAndExtractColor(){let i=new Image;i.src=this.imageUrl,i.crossOrigin="Anonymous",i.onload=()=>{let r=this.imageCanvas.nativeElement,s=r.getContext("2d",{willReadFrequently:!0});r.width=i.width,r.height=i.height,s.drawImage(i,0,0);let o=.5,a=.5,l=Math.floor(r.width*o),c=Math.floor(r.height*a),d=s.getImageData(l,c,1,1).data;this.extractedColor=`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]/255})`}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-show-collection"]],viewQuery:function(r,s){if(r&1&&Pd(_j,5),r&2){let o;Ql(o=Yl())&&(s.imageCanvas=o.first)}},standalone:!0,features:[fe],decls:5,vars:2,consts:[["imageCanvas",""],[2,"display","none"],["class","w-full text-white p-5 my-2",3,"ngStyle",4,"ngIf"],["class","my-10",4,"ngIf"],[1,"w-full","text-white","p-5","my-2",3,"ngStyle"],[1,"flex","flex-col","md:flex-row","items-center","mx-auto","gap-8","w-11/12"],[1,"lg:w-1/4","md:w-1/3","w-1/2"],["class","rounded-lg shadow-lg",3,"src","alt",4,"ngIf"],["src","../../../assets/images/canot_find_movie.jpeg","class","rounded-lg shadow-lg",3,"alt",4,"ngIf"],[1,"lg:w-3/4","md:w-2/3","w-full"],[1,"flex","justify-start","items-center"],[1,"text-6xl","font-black","m-0"],[1,"flex","items-center","justify-start","gap-3"],[1,"flex","items-center","justify-start","gap-3","mt-4"],[1,"crp","rounded-full","bg-blue-800","text-white","p-4","w-10","h-10","flex","justify-center","items-center","me-4","text-sm"],[1,"fa-solid","fa-list"],[1,"fa-solid","fa-heart"],[1,"fa-solid","fa-bookmark"],[1,"flex","items-center","justify-start","mt-4"],[1,"flex","flex-col"],[1,"text-white","text-xl","font-bold"],[1,"text-lg","mb-4"],[1,"rounded-lg","shadow-lg",3,"src","alt"],["src","../../../assets/images/canot_find_movie.jpeg",1,"rounded-lg","shadow-lg",3,"alt"],[1,"my-10"],[1,"container","mx-auto","px-4"],[1,"flex","flex-wrap","justify-center","gap-6"],[1,"flex","flex-col","bg-slate-100","rounded-lg","shadow-lg","p-2","relative","transition-transform","duration-500","hover:scale-105","w-[45%]","sm:w-[30%]","lg:w-[18%]"],[1,"h-52","lg:h-64","xl:h-72","overflow-hidden","rounded-lg","crp",3,"routerLink"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"relative","-top-5","left-2"],[3,"progress"],[1,"mt-2","text-center"],[1,"text-md","font-semibold","truncate"],[1,"text-sm"]],template:function(r,s){r&1&&(U(0,"section")(1,"canvas",1,0),j(3,Sj,23,7,"section",2)(4,Tj,5,0,"section",3)),r&2&&(w(3),I("ngIf",s.collectionDetails),w(),I("ngIf",s.collectionDetails&&s.collectionDetails.parts&&s.collectionDetails.parts.length>0))},dependencies:[Jo,Re,At,Rt,He,kt,Vn]});let n=e;return n})();function Cj(n,e){if(n&1&&U(0,"img",7),n&2){let t=L(2);I("src",t.mainImageUrl+t.networkDetails.logo_path,ge)("alt",t.networkDetails.name)}}function Ij(n,e){if(n&1&&(g(0,"div",8)(1,"h3",9),P(2,"Headquarters:"),_(),g(3,"p",10),P(4),_()()),n&2){let t=L(2);w(4),ee(t.networkDetails.headquarters)}}function Aj(n,e){if(n&1&&(g(0,"div",8)(1,"h3",9),P(2,"Homepage:"),_(),g(3,"a",11),P(4),_()()),n&2){let t=L(2);w(3),I("href",t.networkDetails.homepage,ge),w(),ee(t.networkDetails.homepage)}}function Pj(n,e){if(n&1&&(g(0,"div",8)(1,"h3",9),P(2,"Origin Country:"),_(),g(3,"p",10),P(4),_()()),n&2){let t=L(2);w(4),ee(t.networkDetails.origin_country)}}function Rj(n,e){if(n&1&&(g(0,"div",2)(1,"div",3),j(2,Cj,1,2,"img",4),g(3,"h2",5),P(4),_()(),j(5,Ij,5,1,"div",6)(6,Aj,5,2,"div",6)(7,Pj,5,1,"div",6),_()),n&2){let t=L();w(2),I("ngIf",t.networkDetails.logo_path),w(2),ee(t.networkDetails.name),w(),I("ngIf",t.networkDetails.headquarters),w(),I("ngIf",t.networkDetails.homepage),w(),I("ngIf",t.networkDetails.origin_country)}}var yk=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._ActivatedRoute=B(it),this._Title=B(mn),this.mainImageUrl="https://image.tmdb.org/t/p/w500"}ngOnInit(){this._ActivatedRoute.params.subscribe({next:i=>{this.network_id=i.id,this._MoviesService.getNetworkDetails(this.network_id).subscribe({next:r=>{this.networkDetails=r,this._Title.setTitle(this.networkDetails.name+" - CinemaX")}})}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-network-details"]],standalone:!0,features:[fe],decls:2,vars:1,consts:[[1,"my-10"],["class","bg-white shadow-md rounded-lg p-6 max-w-md mx-auto",4,"ngIf"],[1,"bg-white","shadow-md","rounded-lg","p-6","max-w-md","mx-auto"],[1,"flex","items-center","mb-4"],["class","w-20 h-auto mr-4",3,"src","alt",4,"ngIf"],[1,"text-xl","font-semibold","text-gray-800"],["class","mb-2",4,"ngIf"],[1,"w-20","h-auto","mr-4",3,"src","alt"],[1,"mb-2"],[1,"font-medium","text-gray-600"],[1,"text-gray-700"],["target","_blank",1,"text-blue-500","hover:underline",3,"href"]],template:function(r,s){r&1&&(g(0,"section",0),j(1,Rj,8,5,"div",1),_()),r&2&&(w(),I("ngIf",s.networkDetails))},dependencies:[Re]});let n=e;return n})();var kj=(n,e)=>["/m/show-details",n,e];function Dj(n,e){if(n&1&&U(0,"img",13),n&2){let t=L().$implicit,i=L();I("src",i.mainImageUrl+t.poster_path,ge)("alt",t.name||t.title)}}function Mj(n,e){if(n&1&&U(0,"img",14),n&2){let t=L().$implicit;I("alt",t.name||t.title)}}function Nj(n,e){if(n&1&&(g(0,"div",4)(1,"div",5),j(2,Dj,1,2,"img",6)(3,Mj,1,1,"img",7),_(),g(4,"div",8),U(5,"app-progress-circle",9),_e(6,"percentage"),_(),g(7,"div",10)(8,"h3",11),P(9),_e(10,"splitTitle"),_(),g(11,"p",12),P(12),_()()()),n&2){let t=e.$implicit,i=L();w(),I("routerLink",Ve(10,kj,i.showType,t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),I("progress",Ae(6,6,t.vote_average)),w(4),we(" ",Ae(10,8,t.name||t.title)," "),w(3),ee(t.first_air_date||t.release_date)}}var bk=(()=>{let e=class e{constructor(){this._MoviesService=B(Wt),this._ActivatedRoute=B(it),this._Title=B(mn),this.mainImageUrl="https://image.tmdb.org/t/p/w500"}ngOnInit(){this._ActivatedRoute.params.subscribe({next:i=>{this.keyword_name=i.name,this.showType=i.show_type,this._MoviesService.getKeywordDetails(this.keyword_name,this.showType).subscribe({next:r=>{this.showList=r.results}})}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-keyword-shows"]],standalone:!0,features:[fe],decls:4,vars:1,consts:[[1,"my-10"],[1,"container","mx-auto","px-4"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-6"],["class","bg-slate-100 rounded-lg shadow-lg p-2 relative transition-transform duration-500 hover:scale-105",4,"ngFor","ngForOf"],[1,"bg-slate-100","rounded-lg","shadow-lg","p-2","relative","transition-transform","duration-500","hover:scale-105"],[1,"h-52","overflow-hidden","rounded-lg",3,"routerLink"],["class","w-full h-full object-cover crp",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-full h-full object-cover crp",3,"alt",4,"ngIf"],[1,"relative","-top-5","left-2"],[3,"progress"],[1,"mt-2","text-center"],[1,"text-md","font-semibold","truncate"],[1,"text-sm"],[1,"w-full","h-full","object-cover","crp",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-full","object-cover","crp",3,"alt"]],template:function(r,s){r&1&&(g(0,"section",0)(1,"div",1)(2,"div",2),j(3,Nj,13,13,"div",3),_()()()),r&2&&(w(3),I("ngForOf",s.showList))},dependencies:[Re,wt,He,Rt,kt,Vn]});let n=e;return n})();var Oj=(n,e)=>["/m/show-details",n,e];function Fj(n,e){if(n&1&&U(0,"img",14),n&2){let t=L().$implicit,i=L(2);I("src",i.mainImageUrl+t.poster_path,ge)("alt",t.name||t.title)}}function Lj(n,e){if(n&1&&U(0,"img",15),n&2){let t=L().$implicit;I("alt",t.name||t.title)}}function Vj(n,e){if(n&1&&(g(0,"div",5)(1,"div",6),j(2,Fj,1,2,"img",7)(3,Lj,1,1,"img",8),_(),g(4,"div",9),U(5,"app-progress-circle",10),_e(6,"percentage"),_(),g(7,"div",11)(8,"h3",12),P(9),_e(10,"splitTitle"),_(),g(11,"p",13),P(12),_e(13,"date"),_()()()),n&2){let t=e.$implicit;w(),I("routerLink",Ve(13,Oj,t.name?"tv":"movie",t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),I("progress",Ae(6,6,t.vote_average)),w(4),ee(Ae(10,8,t.title||t.name)),w(3),ee(lt(13,10,t.release_date||t.first_air_date,"yyyy"))}}function Uj(n,e){if(n&1&&(g(0,"div",3),j(1,Vj,14,16,"div",4),_()),n&2){let t=L();w(),I("ngForOf",t.watchList)}}function $j(n,e){n&1&&(g(0,"div",16)(1,"p"),P(2,"Your watchlist is empty."),_()())}var xk=(()=>{let e=class e{constructor(){this._FireStoreService=B(Cs),this._AuthenticationService=B(Xn),this._Router=B(ct),this.token=localStorage.getItem("S&MToken"),this.mainImageUrl="https://image.tmdb.org/t/p/w500"}ngOnInit(){this.getUserData()}getUserData(){this.token=localStorage.getItem("S&MToken"),this.token?this._AuthenticationService.GetLoggedUserData().subscribe({next:i=>{this.userData=i.user,this._FireStoreService.getUserIDByEmail(this.userData.email).then(r=>{r?(this.userID=r,this._FireStoreService.getWatchlist(this.userID).then(s=>{this.watchList=s})):console.log("User not found")})}}):this._Router.navigate(["/login"])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-watchlist"]],standalone:!0,features:[fe],decls:3,vars:2,consts:[[1,"my-10"],["class","grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-6"],["class","bg-slate-100 rounded-lg shadow-lg p-2 relative transition-transform duration-500 hover:scale-105 ",4,"ngFor","ngForOf"],[1,"bg-slate-100","rounded-lg","shadow-lg","p-2","relative","transition-transform","duration-500","hover:scale-105"],[1,"h-52","overflow-hidden","rounded-lg","cursor-pointer",3,"routerLink"],["class","w-full h-full object-cover",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-full h-full object-cover",3,"alt",4,"ngIf"],[1,"relative","-top-5","left-2"],[3,"progress"],[1,"mt-2","text-center"],[1,"text-md","font-semibold","truncate"],[1,"text-sm"],[1,"w-full","h-full","object-cover",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-full","object-cover",3,"alt"],[1,"text-center"]],template:function(r,s){r&1&&(g(0,"section",0),j(1,Uj,2,1,"div",1)(2,$j,3,0,"div",2),_()),r&2&&(w(),I("ngIf",s.watchList&&s.watchList.length>0),w(),I("ngIf",s.watchList&&s.watchList.length===0))},dependencies:[Re,wt,He,Rt,kt,Vn,At]});let n=e;return n})();var zj=(n,e)=>["/m/show-details",n,e];function jj(n,e){if(n&1&&U(0,"img",14),n&2){let t=L().$implicit,i=L(2);I("src",i.mainImageUrl+t.poster_path,ge)("alt",t.name||t.title)}}function Bj(n,e){if(n&1&&U(0,"img",15),n&2){let t=L().$implicit;I("alt",t.name||t.title)}}function qj(n,e){if(n&1&&(g(0,"div",5)(1,"div",6),j(2,jj,1,2,"img",7)(3,Bj,1,1,"img",8),_(),g(4,"div",9),U(5,"app-progress-circle",10),_e(6,"percentage"),_(),g(7,"div",11)(8,"h3",12),P(9),_e(10,"splitTitle"),_(),g(11,"p",13),P(12),_e(13,"date"),_()()()),n&2){let t=e.$implicit;w(),I("routerLink",Ve(13,zj,t.name?"tv":"movie",t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),I("progress",Ae(6,6,t.vote_average)),w(4),ee(Ae(10,8,t.title||t.name)),w(3),ee(lt(13,10,t.release_date||t.first_air_date,"yyyy"))}}function Gj(n,e){if(n&1&&(g(0,"div",3),j(1,qj,14,16,"div",4),_()),n&2){let t=L();w(),I("ngForOf",t.favList)}}function Hj(n,e){n&1&&(g(0,"div",16)(1,"p"),P(2,"Your watchlist is empty."),_()())}var Sk=(()=>{let e=class e{constructor(){this._FireStoreService=B(Cs),this._AuthenticationService=B(Xn),this._Router=B(ct),this.token=localStorage.getItem("S&MToken"),this.mainImageUrl="https://image.tmdb.org/t/p/w500"}ngOnInit(){this.getUserData()}getUserData(){this.token=localStorage.getItem("S&MToken"),this.token?this._AuthenticationService.GetLoggedUserData().subscribe({next:i=>{this.userData=i.user,this._FireStoreService.getUserIDByEmail(this.userData.email).then(r=>{r?(this.userID=r,this._FireStoreService.getFavorites(this.userID).then(s=>{this.favList=s})):console.log("User not found")})}}):this._Router.navigate(["/login"])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-favourites-shows"]],standalone:!0,features:[fe],decls:3,vars:2,consts:[[1,"my-10"],["class","grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-6"],["class","bg-slate-100 rounded-lg shadow-lg p-2 relative transition-transform duration-500 hover:scale-105 ",4,"ngFor","ngForOf"],[1,"bg-slate-100","rounded-lg","shadow-lg","p-2","relative","transition-transform","duration-500","hover:scale-105"],[1,"h-52","overflow-hidden","rounded-lg","cursor-pointer",3,"routerLink"],["class","w-full h-full object-cover",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-full h-full object-cover",3,"alt",4,"ngIf"],[1,"relative","-top-5","left-2"],[3,"progress"],[1,"mt-2","text-center"],[1,"text-md","font-semibold","truncate"],[1,"text-sm"],[1,"w-full","h-full","object-cover",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-full","object-cover",3,"alt"],[1,"text-center"]],template:function(r,s){r&1&&(g(0,"section",0),j(1,Gj,2,1,"div",1)(2,Hj,3,0,"div",2),_()),r&2&&(w(),I("ngIf",s.favList&&s.favList.length>0),w(),I("ngIf",s.favList&&s.favList.length===0))},dependencies:[Re,wt,He,Rt,kt,Vn,At]});let n=e;return n})();var Wj=(n,e)=>({"bg-cyan-200":n,"bg-white":e}),Kj=(n,e)=>["/m/show-details",n,e];function Qj(n,e){if(n&1&&(U(0,"iframe",7),_e(1,"safeUrl")),n&2){let t=L();I("src",Ae(1,1,t.showUrl),xd)}}function Yj(n,e){if(n&1){let t=Ue();g(0,"div",8)(1,"button",9),re("click",function(){ke(t);let r=L();return De(r.toPervEpisode())}),P(2," Previous Episode "),_(),g(3,"button",9),re("click",function(){ke(t);let r=L();return De(r.toNextEpisode())}),P(4," Next Episode "),_()()}}function Xj(n,e){if(n&1&&(g(0,"option",18),P(1),_()),n&2){let t=e.$implicit;I("value",t),w(),we("Season ",t,"")}}function Jj(n,e){if(n&1&&U(0,"img",29),n&2){let t=L().$implicit,i=L(2);I("src",i.mainImageUrl+t.still_path,ge)}}function Zj(n,e){n&1&&U(0,"img",30)}function eB(n,e){if(n&1){let t=Ue();g(0,"div",19),re("click",function(){let r=ke(t).$implicit,s=L(2);return De(s.selectEpisode(r.episode_number))}),g(1,"div",20),j(2,Jj,1,1,"img",21)(3,Zj,1,0,"img",22),_(),g(4,"div",23),U(5,"app-progress-circle",24),_e(6,"percentage"),_(),g(7,"div",25)(8,"h3",26),P(9),_(),g(10,"p",27),P(11),_e(12,"date"),_(),g(13,"p",28),P(14),_()()()}if(n&2){let t=e.$implicit,i=L(2);I("ngClass",Ve(11,Wj,i.selectedEpisode()===t.episode_number,i.selectedEpisode()!==t.episode_number)),w(2),I("ngIf",t.still_path),w(),I("ngIf",!t.still_path),w(2),I("progress",Ae(6,7,t.vote_average)),w(4),we("Ep ",t.episode_number,""),w(2),ee(Ae(12,9,t.air_date)),w(3),ee(t.overview||"No description available")}}function tB(n,e){if(n&1){let t=Ue();g(0,"section",10)(1,"div",11)(2,"div",12)(3,"label",13),P(4,"Choose Season:"),_(),g(5,"select",14),oi("ngModelChange",function(r){ke(t);let s=L();return si(s.selectedSeason,r)||(s.selectedSeason=r),De(r)}),re("change",function(){ke(t);let r=L();return De(r.fetchSeasonData(r.selectedSeason()))}),j(6,Xj,2,2,"option",15),_()(),g(7,"div",16),j(8,eB,15,14,"div",17),_()()()}if(n&2){let t=L();w(5),ri("ngModel",t.selectedSeason),w(),I("ngForOf",t.seasons),w(2),I("ngForOf",t.totalEpisodesPerSeason)}}function nB(n,e){if(n&1&&U(0,"img",41),n&2){let t=L().$implicit;I("src","https://image.tmdb.org/t/p/w500"+t.poster_path,ge)("alt",t.name||t.title)}}function iB(n,e){if(n&1&&U(0,"img",42),n&2){let t=L().$implicit;I("alt",t.name||t.title)}}function rB(n,e){if(n&1&&(g(0,"span"),P(1),_e(2,"date"),_()),n&2){let t=L().$implicit;w(),we(" (",lt(2,1,t.release_date||t.first_air_date,"yyyy"),") ")}}function sB(n,e){if(n&1&&(g(0,"div",35)(1,"a",36),j(2,nB,1,2,"img",37)(3,iB,1,1,"img",38),_(),g(4,"h2",39),P(5),j(6,rB,3,4,"span",40),_()()),n&2){let t=e.$implicit;w(),I("routerLink",Ve(5,Kj,t.media_type||"movie",t.id)),w(),I("ngIf",t.poster_path),w(),I("ngIf",!t.poster_path),w(2),we(" ",t.name||t.title," "),w(),I("ngIf",t.release_date||t.first_air_date)}}function oB(n,e){if(n&1&&(g(0,"section",10)(1,"div",31)(2,"h3",32),P(3,"Recommended Shows:"),_(),g(4,"div",33),j(5,sB,7,8,"div",34),_()()()),n&2){let t=L();w(5),I("ngForOf",t.showRecommendations)}}var Ek=(()=>{let e=class e{constructor(){this._ActivatedRoute=B(it),this._Router=B(ct),this._MoviesService=B(Wt),this._Title=B(mn),this.showRecommendations=[],this.mainImageUrl="https://image.tmdb.org/t/p/w500",this.selectedEpisode=ti(1),this.selectedSeason=ti(1),this.seasons=[]}ngOnInit(){this.loadShowDetails()}loadShowDetails(){this._ActivatedRoute.params.subscribe({next:i=>{this.showID=i.id,this.showType=i.type,this.showType=="movie"?this.showUrl=`https://vidsrc.net/embed/${this.showType}?tmdb=${this.showID}&ds_lang=en`:this.showType=="tv"?(this.showUrl=`https://vidsrc.net/embed/${this.showType}?tmdb=${this.showID}&season=${this.selectedSeason()}&episode=${this.selectedEpisode()}&ds_lang=en`,this.fetchSeasonData(this.selectedSeason())):this._Router.navigate(["/home"]),this._MoviesService.getShowDetails(this.showID,this.showType).subscribe({next:r=>{this.showDetails=r,this.totalSeasons=this.showDetails.number_of_seasons,this.seasons=Array.from({length:this.totalSeasons},(s,o)=>o+1)}}),this._MoviesService.getShowRecommendations(this.showID,this.showType,1).subscribe({next:r=>{this.showRecommendations=r.results}})}})}toPervEpisode(){this.selectedEpisode()>1?this.selectedEpisode.update(i=>i-1):this.selectedSeason()>1&&(this.selectedSeason.update(i=>i-1),this.fetchSeasonData(this.selectedSeason()),this.selectedEpisode.set(this.totalEpisodesPerSeason.length)),this.updateEpisode()}toNextEpisode(){this.selectedEpisode()<this.totalEpisodesPerSeason.length?this.selectedEpisode.update(i=>i+1):this.selectedSeason()<this.totalSeasons&&(this.selectedSeason.update(i=>i+1),this.selectedEpisode.set(1),this.fetchSeasonData(this.selectedSeason())),this.updateEpisode()}updateEpisode(){this.showUrl=`https://vidsrc.net/embed/${this.showType}?tmdb=${this.showID}&season=${this.selectedSeason()}&episode=${this.selectedEpisode()}&ds_lang=en`}fetchSeasonData(i){this._MoviesService.getSeasonDetails(this.showID,i).subscribe({next:r=>{this.seasonDetails=r,this.totalEpisodesPerSeason=this.seasonDetails.episodes}})}selectEpisode(i){this.selectedEpisode.set(i),this.showUrl=`https://vidsrc.net/embed/${this.showType}?tmdb=${this.showID}&season=${this.selectedSeason()}&episode=${this.selectedEpisode()}&ds_lang=en`,window.scrollTo({top:0,behavior:"smooth"}),this._Title.setTitle(`${this.showDetails.name} Season ${this.selectedSeason()} Episode ${this.selectedEpisode()} - ${this.showType} - CinemaX`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-movie-theater"]],standalone:!0,features:[fe],decls:7,vars:4,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-t","from-black","via-gray-900","to-black","py-10"],[1,"relative","w-full","max-w-4xl","p-4"],[1,"absolute","inset-0","z-0","bg-gradient-to-t","from-black","via-transparent","to-black","opacity-80","rounded-lg"],["class","relative z-10 w-full h-[500px] md:h-[700px] border-4 border-gray-800 rounded-lg shadow-lg","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src",4,"ngIf"],["class","relative z-10 flex items-center justify-between mt-4",4,"ngIf"],["class","my-10",4,"ngIf"],["class","my-10 ",4,"ngIf"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"relative","z-10","w-full","h-[500px]","md:h-[700px]","border-4","border-gray-800","rounded-lg","shadow-lg",3,"src"],[1,"relative","z-10","flex","items-center","justify-between","mt-4"],[1,"bg-gray-800","text-white","font-bold","py-2","px-4","rounded-lg","shadow-md","hover:bg-gray-600","transition","duration-300",3,"click"],[1,"my-10"],[1,"mx-3","bg-gray-100","p-5","rounded-lg","shadow-lg"],[1,"mb-5"],["for","season-select",1,"block","text-lg","font-semibold","mb-2","text-gray-800"],["id","season-select",1,"w-full","p-2","bg-gray-200","border","border-gray-300","rounded-lg","text-gray-800",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-2","sm:grid-cols-4","md:grid-cols-8","gap-2"],["class","p-2 rounded-lg shadow-md relative hover:shadow-xl transition-shadow duration-300 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"value"],[1,"p-2","rounded-lg","shadow-md","relative","hover:shadow-xl","transition-shadow","duration-300","cursor-pointer",3,"click","ngClass"],[1,"h-28","overflow-hidden","rounded-lg","mb-2"],["alt","Episode Image","class","w-full h-full object-cover",3,"src",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","alt","Episode Image","class","w-full h-full object-cover",4,"ngIf"],[1,"relative","-top-5","left-2","mb-2","text-black"],[3,"progress"],[1,"text-gray-800"],[1,"text-sm","font-semibold","mb-1"],[1,"text-xs","text-gray-600","mb-1"],[1,"text-xs","text-gray-700","line-clamp-2"],["alt","Episode Image",1,"w-full","h-full","object-cover",3,"src"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","alt","Episode Image",1,"w-full","h-full","object-cover"],[1,"w-2/3","mx-auto"],[1,"text-lg","font-medium","text-gray-700","mb-4"],[1,"flex","overflow-x-auto","gap-4"],["class","flex-none w-48 relative group bg-white rounded-lg shadow-md overflow-hidden",4,"ngFor","ngForOf"],[1,"flex-none","w-48","relative","group","bg-white","rounded-lg","shadow-md","overflow-hidden"],[1,"relative","crp",3,"routerLink"],["class","w-full h-64 object-cover transition-transform duration-300 ease-in-out group-hover:scale-105",3,"src","alt",4,"ngIf"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg","class","w-full h-64 object-cover transition-transform duration-300 ease-in-out group-hover:scale-105",3,"alt",4,"ngIf"],[1,"text-sm","font-semibold","text-center","text-gray-800","p-2"],[4,"ngIf"],[1,"w-full","h-64","object-cover","transition-transform","duration-300","ease-in-out","group-hover:scale-105",3,"src","alt"],["src","../../../assets/images/angry-mac-boy-cinema.jpeg",1,"w-full","h-64","object-cover","transition-transform","duration-300","ease-in-out","group-hover:scale-105",3,"alt"]],template:function(r,s){r&1&&(g(0,"section",0)(1,"div",1),U(2,"div",2),j(3,Qj,2,3,"iframe",3)(4,Yj,5,0,"div",4),_()(),j(5,tB,9,3,"section",5)(6,oB,6,1,"section",6)),r&2&&(w(3),I("ngIf",s.showUrl),w(),I("ngIf",s.showType=="tv"),w(),I("ngIf",s.showType=="tv"),w(),I("ngIf",s.showRecommendations&&s.showRecommendations.length>0))},dependencies:[Re,wt,Gf,He,At,Nn,Wd,Kd,Hd,fn,ci,Mr,kt,Rt]});let n=e;return n})();var Tk=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-tv-theater"]],standalone:!0,features:[fe],decls:2,vars:0,template:function(r,s){r&1&&(g(0,"p"),P(1,"tv-theater works!"),_())}});let n=e;return n})();var Ck=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-discover"]],standalone:!0,features:[fe],decls:2,vars:0,template:function(r,s){r&1&&(g(0,"p"),P(1,"discover works!"),_())}});let n=e;return n})();var Ik=[{path:"",component:zR,canActivate:[HR],children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:$R},{path:"signup",component:GR}]},{path:"",component:qR,canActivate:[WR],children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:FR,title:"home"},{path:"m",component:ZR,children:[{path:"movies/:category",component:LR,title:"movies"},{path:"tvshows/:tvCate",component:VR,title:"tv-shows"},{path:"people/:pCate",component:dk,title:"people"},{path:"discover",component:Ck},{path:"person/:id",component:fk},{path:"person-shows/:id",component:gk},{path:"show-details/:type/:id",component:ck},{path:"show-details/:type/:id/cast&crew",component:vk},{path:"show-details/:type/:id/collection/:CollectionId",component:wk},{path:"network/:id",component:yk},{path:"keyword/:name/:show_type",component:bk},{path:"watchlist",component:xk},{path:"favourites",component:Sk},{path:"Theater/:type/:id",component:Ek},{path:"showTheater/:type/:id",component:Tk}]},{path:"linked",component:ek,children:[{path:"timeline",component:JR,title:"timeline"},{path:"social-club",component:ik,title:"social-club"}]},{path:"search-results",component:rk}]},{path:"**",component:uk}];var aB="@",lB=(()=>{let e=class e{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=B(Ed,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-BIC5RAWF.js")).catch(r=>{throw new Et(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new lb(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(i,r);o.use(l)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Sd()},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),lb=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(aB)}};function Ak(n="animations"){return Td("NgAsyncAnimations"),Go([{provide:Qo,useFactory:(e,t,i)=>new lB(e,t,i,n),deps:[bn,na,ht]},{provide:Wl,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Pk=(n,e)=>{let t=B(Nt);return n.url.includes("linked")&&Zo(t)&&localStorage.getItem("S&MToken")!==null&&(n=n.clone({setHeaders:{token:localStorage.getItem("S&MToken")}})),e(n)};var cB=(()=>{let e=class e extends Xd{constructor(i,r,s){super(i,r,s,B(Ed,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(ae(bn),ae(tc),ae(Yd))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})();function uB(){return new bx}function dB(n,e,t){return new Sx(n,e,t)}var Rk=[{provide:Yd,useFactory:uB},{provide:Xd,useClass:cB},{provide:Qo,useFactory:dB,deps:[na,Xd,ht]}],hB=[{provide:tc,useFactory:()=>new xx},{provide:Wl,useValue:"BrowserAnimations"},...Rk],vJ=[{provide:tc,useClass:yx},{provide:Wl,useValue:"NoopAnimations"},...Rk];function kk(){return Td("NgEagerAnimations"),[...hB]}var Dk={providers:[fS(Ik,mS({scrollPositionRestoration:"top"})),kx(),kk(),w1([vS.initializeApp(te.firebaseConfig),tC,VP]),rx(ox(),sx([Pk])),{provide:T1,useValue:{disableImageSizeWarning:!0,disableImageLazyLoadWarning:!0}},Ak()]};var Mk=(()=>{let e=class e{constructor(i){this.platformId=i}loadFlowbite(i){Zo(this.platformId)&&import("./chunk-F37GJKZT.js").then(r=>{i(r)})}};e.\u0275fac=function(r){return new(r||e)(ae(Nt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Nk=(()=>{let e=class e{constructor(){this.title="moviesdb",this._FlowbiteService=B(Mk)}ngOnInit(){this._FlowbiteService.loadFlowbite(i=>{})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=pe({type:e,selectors:[["app-root"]],standalone:!0,features:[fe],decls:2,vars:0,consts:[[1,"bg-main"]],template:function(r,s){r&1&&(g(0,"div",0),U(1,"router-outlet"),_())},dependencies:[Ci],styles:['.bg-main[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#fff,#f0f0f0);background-size:cover;background-blend-mode:normal;position:relative}.bg-main[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:url(https://www.transparenttextures.com/patterns/asfalt.png) repeat;opacity:.1;pointer-events:none}']});let n=e;return n})();Rx(Nk,Dk).catch(n=>console.error(n));
